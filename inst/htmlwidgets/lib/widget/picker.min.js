/*! For license information please see picker.min.js.LICENSE.txt */
(()=>{var t={7359:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GeoJsonEditMode",{enumerable:!0,get:function(){return o.GeoJsonEditMode}}),Object.defineProperty(e,"ModifyMode",{enumerable:!0,get:function(){return A.ModifyMode}}),Object.defineProperty(e,"ResizeCircleMode",{enumerable:!0,get:function(){return s.ResizeCircleMode}}),Object.defineProperty(e,"TranslateMode",{enumerable:!0,get:function(){return a.TranslateMode}}),Object.defineProperty(e,"ScaleMode",{enumerable:!0,get:function(){return u.ScaleMode}}),Object.defineProperty(e,"RotateMode",{enumerable:!0,get:function(){return c.RotateMode}}),Object.defineProperty(e,"DuplicateMode",{enumerable:!0,get:function(){return l.DuplicateMode}}),Object.defineProperty(e,"ExtendLineStringMode",{enumerable:!0,get:function(){return f.ExtendLineStringMode}}),Object.defineProperty(e,"SplitPolygonMode",{enumerable:!0,get:function(){return h.SplitPolygonMode}}),Object.defineProperty(e,"ExtrudeMode",{enumerable:!0,get:function(){return p.ExtrudeMode}}),Object.defineProperty(e,"ElevationMode",{enumerable:!0,get:function(){return d.ElevationMode}}),Object.defineProperty(e,"TransformMode",{enumerable:!0,get:function(){return g.TransformMode}}),Object.defineProperty(e,"DrawPointMode",{enumerable:!0,get:function(){return y.DrawPointMode}}),Object.defineProperty(e,"DrawLineStringMode",{enumerable:!0,get:function(){return v.DrawLineStringMode}}),Object.defineProperty(e,"DrawPolygonMode",{enumerable:!0,get:function(){return m.DrawPolygonMode}}),Object.defineProperty(e,"DrawRectangleMode",{enumerable:!0,get:function(){return _.DrawRectangleMode}}),Object.defineProperty(e,"DrawSquareFromCenterMode",{enumerable:!0,get:function(){return b.DrawSquareFromCenterMode}}),Object.defineProperty(e,"DrawCircleByDiameterMode",{enumerable:!0,get:function(){return w.DrawCircleByDiameterMode}}),Object.defineProperty(e,"DrawCircleFromCenterMode",{enumerable:!0,get:function(){return E.DrawCircleFromCenterMode}}),Object.defineProperty(e,"DrawEllipseByBoundingBoxMode",{enumerable:!0,get:function(){return x.DrawEllipseByBoundingBoxMode}}),Object.defineProperty(e,"DrawEllipseUsingThreePointsMode",{enumerable:!0,get:function(){return S.DrawEllipseUsingThreePointsMode}}),Object.defineProperty(e,"DrawRectangleUsingThreePointsMode",{enumerable:!0,get:function(){return I.DrawRectangleUsingThreePointsMode}}),Object.defineProperty(e,"Draw90DegreePolygonMode",{enumerable:!0,get:function(){return M.Draw90DegreePolygonMode}}),Object.defineProperty(e,"DrawPolygonByDraggingMode",{enumerable:!0,get:function(){return C.DrawPolygonByDraggingMode}}),Object.defineProperty(e,"ImmutableFeatureCollection",{enumerable:!0,get:function(){return P.ImmutableFeatureCollection}}),Object.defineProperty(e,"ViewMode",{enumerable:!0,get:function(){return O.ViewMode}}),Object.defineProperty(e,"MeasureDistanceMode",{enumerable:!0,get:function(){return N.MeasureDistanceMode}}),Object.defineProperty(e,"MeasureAreaMode",{enumerable:!0,get:function(){return R.MeasureAreaMode}}),Object.defineProperty(e,"MeasureAngleMode",{enumerable:!0,get:function(){return D.MeasureAngleMode}}),Object.defineProperty(e,"CompositeMode",{enumerable:!0,get:function(){return T.CompositeMode}}),Object.defineProperty(e,"SnappableMode",{enumerable:!0,get:function(){return L.SnappableMode}}),Object.defineProperty(e,"_memoize",{enumerable:!0,get:function(){return k.default}}),e.utils=void 0;var i,o=n(2254),A=n(7366),s=n(5682),a=n(6166),u=n(5892),c=n(83),l=n(2511),f=n(4546),h=n(6548),p=n(6601),d=n(1370),g=n(4061),y=n(5521),v=n(2116),m=n(5282),_=n(8725),b=n(3704),w=n(5790),E=n(6950),x=n(3199),S=n(5184),I=n(9050),M=n(1400),C=n(3039),P=n(6302),O=n(5279),N=n(63),R=n(244),D=n(9857),T=n(8874),L=n(3816),k=(i=n(3916))&&i.__esModule?i:{default:i},F=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=j();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var A=i?Object.getOwnPropertyDescriptor(t,o):null;A&&(A.get||A.set)?Object.defineProperty(n,o,A):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(n(875));function j(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return j=function(){return t},t}e.utils=F},8874:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.CompositeMode=void 0;var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(h,t);var e,n,r,f=(e=h,function(){var t,n=c(e);if(u()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function h(t){var e,n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),i=void 0,(r="_modes")in(n=a(e=f.call(this)))?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,e._modes=t,e}return n=h,(r=[{key:"_coalesce",value:function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=0;r<this._modes.length&&(e=t(this._modes[r]),!(n?n(e):e));r++);return e}},{key:"handleClick",value:function(t,e){this._coalesce((function(n){return n.handleClick(t,e)}))}},{key:"handlePointerMove",value:function(t,e){return this._coalesce((function(n){return n.handlePointerMove(t,e)}))}},{key:"handleStartDragging",value:function(t,e){return this._coalesce((function(n){return n.handleStartDragging(t,e)}))}},{key:"handleStopDragging",value:function(t,e){return this._coalesce((function(n){return n.handleStopDragging(t,e)}))}},{key:"handleDragging",value:function(t,e){return this._coalesce((function(n){return n.handleDragging(t,e)}))}},{key:"getGuides",value:function(t){var e,n,r=[],A=function(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=i(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,A=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return A=t.done,t},e:function(t){s=!0,o=t},f:function(){try{A||null==r.return||r.return()}finally{if(s)throw o}}}}(this._modes);try{for(A.s();!(e=A.n()).done;){var s=e.value;r.push.apply(r,function(t){if(Array.isArray(t))return o(t)}(n=s.getGuides(t).features)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(n)||i(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}}catch(t){A.e(t)}finally{A.f()}return{type:"FeatureCollection",features:r}}}])&&A(n.prototype,r),h}(n(2254).GeoJsonEditMode);e.CompositeMode=f},1400:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Draw90DegreePolygonMode=void 0;var r=u(n(3737)),i=u(n(1208)),o=u(n(3663)),A=u(n(1013)),s=n(4102),a=n(875);function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function y(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(h,t);var e,n,u,c=(e=h,function(){var t,n=m(e);if(v()){var r=m(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return y(this,t)});function h(){return p(this,h),c.apply(this,arguments)}return n=h,(u=[{key:"createTentativeFeature",value:function(t){var e,n,r,i=this.getClickSequence(),o=t.lastPointerMoveEvent.mapCoords;if(1===i.length)e=o;else{var A=i[i.length-2],s=i[i.length-1];e=(n=(0,a.generatePointsParallelToLinePoints)(A,s,o),r=1,function(t){if(Array.isArray(t))return t}(n)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var A,s=t[Symbol.iterator]();!(r=(A=s.next()).done)&&(n.push(A.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(n,r)||f(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]}return i.length<3?{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(l(i),[e])}}:{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[].concat(l(i),[e,i[0]])]}}}},{key:"getGuides",value:function(t){var e={type:"FeatureCollection",features:[]};if(0===this.getClickSequence().length||!t.lastPointerMoveEvent)return e;var n=this.createTentativeFeature(t);return e.features.push(n),e.features=e.features.concat((0,a.getEditHandlesForGeometry)(n.geometry,-1)),e.features=e.features.slice(0,-1),e}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),g(m(h.prototype),"handlePointerMove",this).call(this,t,e)}},{key:"handleClick",value:function(t,e){var n=t.picks,r=this.getTentativeGuide(e);this.addClickSequence(t);var i=this.getClickSequence();if(r){if(3===i.length&&"LineString"===r.geometry.type){var o=r.geometry;i[i.length-1]=o.coordinates[o.coordinates.length-1]}else if(i.length>3&&"Polygon"===r.geometry.type){var A=r.geometry;i[i.length-1]=A.coordinates[0][A.coordinates[0].length-2];var s=(0,a.getPickedEditHandle)(n);if(s&&Array.isArray(s.properties.positionIndexes)&&(0===s.properties.positionIndexes[1]||s.properties.positionIndexes[1]===A.coordinates[0].length-3)){var u={type:"Polygon",coordinates:this.finalizedCoordinates(l(A.coordinates[0]))};this.resetClickSequence();var c=this.getAddFeatureOrBooleanPolygonAction(u,e);c&&e.onEdit(c)}}var f={screenCoords:[-1,-1],mapCoords:t.mapCoords,picks:[],pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,cancelPan:function(){},sourceEvent:null};this.handlePointerMove(f,e)}}},{key:"finalizedCoordinates",value:function(t){var e=[[].concat(l(t.slice(0,-2)),[t[0]])],n=this.getIntermediatePoint(l(t));if(n)e=[[].concat(l(t.slice(0,-2)),[n,t[0]])];else{var r=l(t);r.splice(-3,1),(n=this.getIntermediatePoint(l(r)))&&(e=[[].concat(l(t.slice(0,-3)),[n,t[0]])])}return e}},{key:"getIntermediatePoint",value:function(t){var e;if(t.length>4){var n=l(t),a=n[0],u=n[1],c=(0,i.default)(a,u),f=t[t.length-3],h=t[t.length-4],p=(0,i.default)(f,h),d={first:[],second:[]};[1,2,3].forEach((function(t){var e=c+90*t;d.first.push(e>180?e-360:e);var n=p+90*t;d.second.push(n>180?n-360:n)}));var g=(0,A.default)((0,s.point)(a),(0,s.point)(f));[0,1,2].forEach((function(t){var n=(0,s.lineString)([a,(0,r.default)(a,g,d.first[t]).geometry.coordinates]);[0,1,2].forEach((function(t){var i=(0,s.lineString)([f,(0,r.default)(f,g,d.second[t]).geometry.coordinates]),A=(0,o.default)(n,i);A&&A.features.length&&(e=A.features[0].geometry.coordinates)}))}))}return e}}])&&d(n.prototype,u),h}(n(2254).GeoJsonEditMode);e.Draw90DegreePolygonMode=b},5790:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawCircleByDiameterMode=void 0;var r=A(n(265)),i=A(n(1013)),o=n(2254);function A(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(p,t);var e,n,A,s=(e=p,function(){var t,n=f(e);if(l()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)});function p(){return a(this,p),s.apply(this,arguments)}return n=p,(A=[{key:"getTwoClickPolygon",value:function(t,e,n){var A=(n||{}).steps,s=void 0===A?64:A,a={steps:s};s<4&&(console.warn("Minimum steps to draw a circle is 4 "),a.steps=4);var u=(0,o.getIntermediatePosition)(t,e),c=Math.max((0,i.default)(t,u),.001),l=(0,r.default)(u,c,a);return l.properties=l.properties||{},l.properties.shape="Circle",l}}])&&u(n.prototype,A),p}(n(3124).TwoClickPolygonMode);e.DrawCircleByDiameterMode=p},6950:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawCircleFromCenterMode=void 0;var r=o(n(265)),i=o(n(1013));function o(t){return t&&t.__esModule?t:{default:t}}function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(h,t);var e,n,o,A=(e=h,function(){var t,n=l(e);if(c()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function h(){return s(this,h),A.apply(this,arguments)}return n=h,(o=[{key:"getTwoClickPolygon",value:function(t,e,n){var o=(n||{}).steps,A=void 0===o?64:o,s={steps:A};A<4&&(console.warn("Minimum steps to draw a circle is 4 "),s.steps=4);var a=Math.max((0,i.default)(t,e),.001),u=(0,r.default)(t,a,s);return u.properties=u.properties||{},u.properties.shape="Circle",u}}])&&a(n.prototype,o),h}(n(3124).TwoClickPolygonMode);e.DrawCircleFromCenterMode=h},3199:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawEllipseByBoundingBoxMode=void 0;var r=a(n(3652)),i=a(n(1013)),o=a(n(1211)),A=n(4102),s=n(2254);function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(g,t);var e,n,a,u=(e=g,function(){var t,n=p(e);if(h()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function g(){return c(this,g),u.apply(this,arguments)}return n=g,(a=[{key:"getTwoClickPolygon",value:function(t,e,n){var a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),c=Math.max(t[0],e[0]),l=Math.max(t[1],e[1]),f=(0,r.default)([a,u,c,l]).geometry.coordinates[0],h=(0,s.getIntermediatePosition)(t,e),p=Math.max((0,i.default)((0,A.point)(f[0]),(0,A.point)(f[1])),.001),d=Math.max((0,i.default)((0,A.point)(f[0]),(0,A.point)(f[3])),.001);return(0,o.default)(h,p,d)}}])&&l(n.prototype,a),g}(n(3124).TwoClickPolygonMode);e.DrawEllipseByBoundingBoxMode=g},5184:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawEllipseUsingThreePointsMode=void 0;var r=a(n(1013)),i=a(n(1211)),o=a(n(1208)),A=n(4102),s=n(2254);function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(g,t);var e,n,a,u=(e=g,function(){var t,n=p(e);if(h()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function g(){return c(this,g),u.apply(this,arguments)}return n=g,(a=[{key:"getThreeClickPolygon",value:function(t,e,n,a){var u=(0,s.getIntermediatePosition)(t,e),c=Math.max((0,r.default)(u,(0,A.point)(n)),.001),l=Math.max((0,r.default)(t,e),.001)/2,f={angle:(0,o.default)(t,e)};return(0,i.default)(u,c,l,f)}}])&&l(n.prototype,a),g}(n(1658).ThreeClickPolygonMode);e.DrawEllipseUsingThreePointsMode=g},2116:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawLineStringMode=void 0;var r=n(875);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(h,t);var e,n,i,A=(e=h,function(){var t,n=l(e);if(c()){var r=l(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function h(){return s(this,h),A.apply(this,arguments)}return n=h,(i=[{key:"handleClick",value:function(t,e){var n=t.picks,i=(0,r.getPickedEditHandle)(n),A=!1;i||(this.addClickSequence(t),A=!0);var s=this.getClickSequence();if(s.length>1&&i&&Array.isArray(i.properties.positionIndexes)&&i.properties.positionIndexes[0]===s.length-1){var a={type:"LineString",coordinates:o(s)};this.resetClickSequence();var u=this.getAddFeatureAction(a,e.data);u&&e.onEdit(u)}else A&&e.onEdit({updatedData:e.data,editType:"addTentativePosition",editContext:{position:t.mapCoords}})}},{key:"handleKeyUp",value:function(t,e){if("Enter"===t.key){var n=this.getClickSequence();if(n.length>1){var r={type:"LineString",coordinates:o(n)};this.resetClickSequence();var i=this.getAddFeatureAction(r,e.data);i&&e.onEdit(i)}}}},{key:"getGuides",value:function(t){var e,n,r=t.lastPointerMoveEvent,i=this.getClickSequence(),A=r?[r.mapCoords]:[],s={type:"FeatureCollection",features:[]};i.length>0&&(n={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(o(i),A)}}),n&&s.features.push(n);var a=i.map((function(t,e){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[e]},geometry:{type:"Point",coordinates:t}}}));return(e=s.features).push.apply(e,o(a)),s}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}}])&&a(n.prototype,i),h}(n(2254).GeoJsonEditMode);e.DrawLineStringMode=h},5521:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.DrawPointMode=void 0;var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(f,t);var e,n,r,l=(e=f,function(){var t,n=u(e);if(a()){var r=u(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function f(){return i(this,f),l.apply(this,arguments)}return n=f,(r=[{key:"createTentativeFeature",value:function(t){var e=t.lastPointerMoveEvent;return{type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Point",coordinates:(e?[e.mapCoords]:[])[0]}}}},{key:"handleClick",value:function(t,e){var n={type:"Point",coordinates:t.mapCoords};e.onEdit(this.getAddFeatureAction(n,e.data))}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),A(u(f.prototype),"handlePointerMove",this).call(this,t,e)}}])&&o(n.prototype,r),f}(n(2254).GeoJsonEditMode);e.DrawPointMode=l},3039:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawPolygonByDraggingMode=void 0;var r,i=(r=n(3096))&&r.__esModule?r:{default:r},o=n(875);function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(g,t);var e,n,r,A=(e=g,function(){var t,n=h(e);if(f()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)});function g(){var t;a(this,g);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return d(l(t=A.call.apply(A,[this].concat(n))),"handleDraggingThrottled",null),t}return n=g,(r=[{key:"handleClick",value:function(t,e){}},{key:"handleStartDragging",value:function(t,e){t.cancelPan(),e.modeConfig&&e.modeConfig.throttleMs?this.handleDraggingThrottled=(0,i.default)(this.handleDraggingAux,e.modeConfig.throttleMs):this.handleDraggingThrottled=this.handleDraggingAux}},{key:"handleStopDragging",value:function(t,e){this.addClickSequence(t);var n,r=this.getClickSequence();if(this.handleDraggingThrottled&&this.handleDraggingThrottled.cancel&&this.handleDraggingThrottled.cancel(),r.length>2){var i={type:"Polygon",coordinates:[[].concat((n=r,function(t){if(Array.isArray(t))return s(t)}(n)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[r[0]])]};this.resetClickSequence();var o=this.getAddFeatureOrBooleanPolygonAction(i,e);o&&e.onEdit(o)}}},{key:"handleDraggingAux",value:function(t,e){var n=t.picks;(0,o.getPickedEditHandle)(n)||this.addClickSequence(t)}},{key:"handleDragging",value:function(t,e){this.handleDraggingThrottled&&this.handleDraggingThrottled(t,e)}}])&&u(n.prototype,r),g}(n(5282).DrawPolygonMode);e.DrawPolygonByDraggingMode=g},5282:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawPolygonMode=void 0;var r=n(875);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(p,t);var e,n,i,A=(e=p,function(){var t,n=f(e);if(l()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)});function p(){return s(this,p),A.apply(this,arguments)}return n=p,(i=[{key:"createTentativeFeature",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),i=n?[n.mapCoords]:[];return 1===r.length||2===r.length?e={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(o(r),i)}}:r.length>2&&(e={type:"Feature",properties:{guideType:"tentative"},geometry:{type:"Polygon",coordinates:[[].concat(o(r),i,[r[0]])]}}),e}},{key:"getGuides",value:function(t){var e,n=this.getClickSequence(),r={type:"FeatureCollection",features:[]},i=this.createTentativeFeature(t);i&&r.features.push(i);var A=n.map((function(t,e){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[e]},geometry:{type:"Point",coordinates:t}}}));return(e=r.features).push.apply(e,o(A)),r}},{key:"handleClick",value:function(t,e){var n=t.picks,i=(0,r.getPickedEditHandle)(n),A=!1;i||(this.addClickSequence(t),A=!0);var s=this.getClickSequence();if(s.length>2&&i&&Array.isArray(i.properties.positionIndexes)&&(0===i.properties.positionIndexes[0]||i.properties.positionIndexes[0]===s.length-1)){var a={type:"Polygon",coordinates:[[].concat(o(s),[s[0]])]};this.resetClickSequence();var u=this.getAddFeatureOrBooleanPolygonAction(a,e);u&&e.onEdit(u)}else A&&e.onEdit({updatedData:e.data,editType:"addTentativePosition",editContext:{position:t.mapCoords}})}},{key:"handleKeyUp",value:function(t,e){if("Enter"===t.key){var n=this.getClickSequence();if(n.length>2){var r={type:"Polygon",coordinates:[[].concat(o(n),[n[0]])]};this.resetClickSequence();var i=this.getAddFeatureOrBooleanPolygonAction(r,e);i&&e.onEdit(i)}}}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),u(f(p.prototype),"handlePointerMove",this).call(this,t,e)}}])&&a(n.prototype,i),p}(n(2254).GeoJsonEditMode);e.DrawPolygonMode=p},8725:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawRectangleMode=void 0;var r,i=(r=n(3652))&&r.__esModule?r:{default:r};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(f,t);var e,n,r,o=(e=f,function(){var t,n=c(e);if(u()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return a(this,t)});function f(){return A(this,f),o.apply(this,arguments)}return n=f,(r=[{key:"getTwoClickPolygon",value:function(t,e,n){var r=(0,i.default)([t[0],t[1],e[0],e[1]]);return r.properties=r.properties||{},r.properties.shape="Rectangle",r}}])&&s(n.prototype,r),f}(n(3124).TwoClickPolygonMode);e.DrawRectangleMode=f},9050:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawRectangleUsingThreePointsMode=void 0;var r=n(875);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(h,t);var e,n,i,f=(e=h,function(){var t,n=c(e);if(u()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return a(this,t)});function h(){return A(this,h),f.apply(this,arguments)}return n=h,(i=[{key:"getThreeClickPolygon",value:function(t,e,n,i){var A,s,a=(A=(0,r.generatePointsParallelToLinePoints)(t,e,n),s=2,function(t){if(Array.isArray(t))return t}(A)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var A,s=t[Symbol.iterator]();!(r=(A=s.next()).done)&&(n.push(A.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(A,s)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(A,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{type:"Feature",properties:{shape:"Rectangle"},geometry:{type:"Polygon",coordinates:[[t,e,a[0],a[1],t]]}}}}])&&s(n.prototype,i),h}(n(1658).ThreeClickPolygonMode);e.DrawRectangleUsingThreePointsMode=f},3704:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DrawSquareFromCenterMode=void 0;var r=s(n(3652)),i=s(n(1013)),o=s(n(5913)),A=n(4102);function s(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(d,t);var e,n,s,a=(e=d,function(){var t,n=h(e);if(f()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function d(){return u(this,d),a.apply(this,arguments)}return n=d,(s=[{key:"getTwoClickPolygon",value:function(t,e,n){var s=[e[0],t[1]],a=[t[0],e[1]],u=(0,i.default)((0,A.point)(s),(0,A.point)(t)),c=(0,i.default)((0,A.point)(a),(0,A.point)(t)),l=u<=c?u:c,f=u<=c?s:a,h=(0,A.lineString)([f,e]),p=(0,o.default)(h,l).geometry.coordinates,d=t[0]>p[0]?t[0]+Math.abs(t[0]-p[0]):t[0]-Math.abs(t[0]-p[0]),g=t[1]>p[1]?t[1]+Math.abs(t[1]-p[1]):t[1]-Math.abs(t[1]-p[1]),y=(0,r.default)([d,g,p[0],p[1]]);return y.properties=y.properties||{},y.properties.shape="Square",y}}])&&c(n.prototype,s),d}(n(3124).TwoClickPolygonMode);e.DrawSquareFromCenterMode=d},2511:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.DuplicateMode=void 0;var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(f,t);var e,n,r,l=(e=f,function(){var t,n=u(e);if(a()){var r=u(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function f(){return i(this,f),l.apply(this,arguments)}return n=f,(r=[{key:"handleStartDragging",value:function(t,e){A(u(f.prototype),"handleStartDragging",this).call(this,t,e),this._geometryBeforeTranslate&&e.onEdit(this.getAddManyFeaturesAction(this._geometryBeforeTranslate,e.data))}},{key:"updateCursor",value:function(t){this._isTranslatable?t.onUpdateCursor("copy"):t.onUpdateCursor(null)}}])&&o(n.prototype,r),f}(n(6166).TranslateMode);e.DuplicateMode=l},1370:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ElevationMode=void 0;var r=n(875);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=t.pointerDownScreenCoords,n=t.screenCoords;return 10*(e[1]-n[1])}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(d,t);var e,n,i,h,p=(e=d,function(){var t,n=c(e);if(u()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return a(this,t)});function d(){return o(this,d),p.apply(this,arguments)}return n=d,h=[{key:"calculateElevationChangeWithViewport",value:function(t,e){var n=e.pointerDownScreenCoords,r=e.screenCoords;return 156543.03392*Math.cos(t.latitude*Math.PI/180)/Math.pow(2,t.zoom)*(n[1]-r[1])/2}}],(i=[{key:"makeElevatedEvent",value:function(t,e,n){var r=n.modeConfig||{},i=r.minElevation,o=void 0===i?0:i,A=r.maxElevation,s=void 0===A?2e4:A,a=r.calculateElevationChange,u=void 0===a?f:a;if(!t.pointerDownScreenCoords)return t;var c=3===e.length?e[2]:0;return c+=u({pointerDownScreenCoords:t.pointerDownScreenCoords,screenCoords:t.screenCoords}),c=Math.min(c,s),c=Math.max(c,o),Object.assign({},t,{mapCoords:[e[0],e[1],c]})}},{key:"handlePointerMove",value:function(t,e){var n=(0,r.getPickedEditHandle)(t.pointerDownPicks),i=n?n.geometry.coordinates:t.mapCoords;s(c(d.prototype),"handlePointerMove",this).call(this,this.makeElevatedEvent(t,i,e),e)}},{key:"handleStopDragging",value:function(t,e){var n=(0,r.getPickedEditHandle)(t.picks),i=n?n.geometry.coordinates:t.mapCoords;s(c(d.prototype),"handleStopDragging",this).call(this,this.makeElevatedEvent(t,i,e),e)}},{key:"getCursor",value:function(t){var e=s(c(d.prototype),"getCursor",this).call(this,t);return"cell"===e&&(e="ns-resize"),e}}])&&A(n.prototype,i),h&&A(n,h),d}(n(7366).ModifyMode);e.ElevationMode=h},4546:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtendLineStringMode=void 0;var r=n(2254),i=n(6302);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(f,t);var e,n,r,o=(e=f,function(){var t,n=c(e);if(u()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return a(this,t)});function f(){return A(this,f),o.apply(this,arguments)}return n=f,(r=[{key:"getSingleSelectedLineString",value:function(t){var e=this.getSelectedGeometry(t);return e&&"LineString"===e.type?e:null}},{key:"handleClick",value:function(t,e){var n=e.selectedIndexes,r=this.getSingleSelectedLineString(e);if(r){var o=[r.coordinates.length],A=e.modeConfig;A&&A.drawAtFront&&(o=[0]);var s=n[0],a=new i.ImmutableFeatureCollection(e.data).addPosition(s,o,t.mapCoords).getObject();e.onEdit({updatedData:a,editType:"addPosition",editContext:{featureIndexes:[s],positionIndexes:o,position:t.mapCoords}})}else console.warn("ExtendLineStringMode only supported for single LineString selection")}},{key:"getGuides",value:function(t){var e={type:"FeatureCollection",features:[]},n=this.getSingleSelectedLineString(t);if(!n)return e;var r,i=t.lastPointerMoveEvent&&t.lastPointerMoveEvent.mapCoords,o=t.modeConfig;return r=o&&o.drawAtFront?n.coordinates[0]:n.coordinates[n.coordinates.length-1],e.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r,i]}}),e}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}}])&&s(n.prototype,r),f}(r.GeoJsonEditMode);e.ExtendLineStringMode=f},6601:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtrudeMode=void 0;var r,i=(r=n(1208))&&r.__esModule?r:{default:r},o=n(875),A=n(7366),s=n(6302);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var A,s=t[Symbol.iterator]();!(r=(A=s.next()).done)&&(n.push(A.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||l(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?g(t):e}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(a,t);var e,n,r,A=(e=a,function(){var t,n=v(e);if(y()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d(this,t)});function a(){var t;h(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return _(g(t=A.call.apply(A,[this].concat(n))),"isPointAdded",!1),t}return n=a,(r=[{key:"handleDragging",value:function(t,e){var n=(0,o.getPickedEditHandle)(t.pointerDownPicks);if(n){var r=n.properties.featureIndex,i=n.properties.positionIndexes,A=this.coordinatesSize(i,r,e.data);i=this.isPointAdded?this.nextPositionIndexes(i,A):i;var a=this.getPointForPositionIndexes(this.prevPositionIndexes(i,A),r,e.data),u=this.getPointForPositionIndexes(i,r,e.data);if(a&&u){var l=c((0,o.generatePointsParallelToLinePoints)(a,u,t.mapCoords),2),f=l[0],h=l[1],p=new s.ImmutableFeatureCollection(e.data).replacePosition(r,this.prevPositionIndexes(i,A),h).replacePosition(r,i,f).getObject();e.onEdit({updatedData:p,editType:"extruding",editContext:{featureIndexes:[r],positionIndexes:this.nextPositionIndexes(i,A),position:f}}),t.cancelPan()}}}},{key:"handleStartDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,o.getPickedIntermediateEditHandle)(t.picks);if(n.length&&r){var i=r.properties,A=i.positionIndexes,a=i.featureIndex,u=this.coordinatesSize(A,a,e.data),c=this.getPointForPositionIndexes(this.prevPositionIndexes(A,u),a,e.data),l=this.getPointForPositionIndexes(A,a,e.data);if(c&&l){var f=new s.ImmutableFeatureCollection(e.data);this.isOrthogonal(A,a,u,e.data)||(f=f.addPosition(a,A,l)),this.isOrthogonal(this.prevPositionIndexes(A,u),a,u,e.data)||(f=f.addPosition(a,A,c),this.isPointAdded=!0),e.onEdit({updatedData:f.getObject(),editType:"startExtruding",editContext:{featureIndexes:[a],positionIndexes:A,position:c}})}}}},{key:"handleStopDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,o.getPickedEditHandle)(t.pointerDownPicks);if(n.length&&r){var i=r.properties.featureIndex,A=r.properties.positionIndexes,a=this.coordinatesSize(A,i,e.data);A=this.isPointAdded?this.nextPositionIndexes(A,a):A;var u=this.getPointForPositionIndexes(this.prevPositionIndexes(A,a),i,e.data),l=this.getPointForPositionIndexes(A,i,e.data);if(u&&l){var f=c((0,o.generatePointsParallelToLinePoints)(u,l,t.mapCoords),2),h=f[0],p=f[1],d=new s.ImmutableFeatureCollection(e.data).replacePosition(i,this.prevPositionIndexes(A,a),p).replacePosition(i,A,h).getObject();e.onEdit({updatedData:d,editType:"extruded",editContext:{featureIndexes:[i],positionIndexes:A,position:h}})}}this.isPointAdded=!1}},{key:"coordinatesSize",value:function(t,e,n){var r=n.features,i=0;if(Array.isArray(t)){var o=r[e].geometry.coordinates;if(3===t.length){var A=c(t,2),s=A[0],a=A[1];o.length&&o[s].length&&(i=o[s][a].length)}else{var u=c(t,1)[0];o.length&&o[u].length&&(i=o[u].length)}}return i}},{key:"getBearing",value:function(t,e){var n=(0,i.default)(t,e);return n<0?Math.floor(360+n):Math.floor(n)}},{key:"isOrthogonal",value:function(t,e,n,r){if(!Array.isArray(t))return!1;t[t.length-1]===n-1&&(t[t.length-1]=0);var i=this.getPointForPositionIndexes(this.prevPositionIndexes(t,n),e,r),o=this.getPointForPositionIndexes(this.nextPositionIndexes(t,n),e,r),A=this.getPointForPositionIndexes(t,e,r),s=this.getBearing(A,i),a=this.getBearing(A,o);return[89,90,91,269,270,271].includes(Math.abs(s-a))}},{key:"nextPositionIndexes",value:function(t,e){if(!Array.isArray(t))return[];var n=u(t);return n.length&&(n[n.length-1]=n[n.length-1]===e-1?0:n[n.length-1]+1),n}},{key:"prevPositionIndexes",value:function(t,e){if(!Array.isArray(t))return[];var n=u(t);return n.length&&(n[n.length-1]=0===n[n.length-1]?e-2:n[n.length-1]-1),n}},{key:"getPointForPositionIndexes",value:function(t,e,n){var r,i=n.features;if(Array.isArray(t)){var o=i[e].geometry.coordinates;if(3===t.length){var A=c(t,3),s=A[0],a=A[1],u=A[2];o.length&&o[s].length&&(r=o[s][a][u])}else{var l=c(t,2),f=l[0],h=l[1];o.length&&o[f].length&&(r=o[f][h])}}return r}}])&&p(n.prototype,r),a}(A.ModifyMode);e.ExtrudeMode=b},2254:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getIntermediatePosition=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]},e.GeoJsonEditMode=void 0;var r=u(n(1959)),i=u(n(8727)),o=u(n(4170)),A=u(n(1138)),s=n(875),a=n(6302);function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||l(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p={type:"FeatureCollection",features:[]},d=[],g=function(){function t(){var e,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=[],(e="_clickSequence")in this?Object.defineProperty(this,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[e]=n}var e,n;return e=t,(n=[{key:"getGuides",value:function(t){return p}},{key:"getTooltips",value:function(t){return d}},{key:"getSelectedFeature",value:function(t){return 1===t.selectedIndexes.length?t.data.features[t.selectedIndexes[0]]:null}},{key:"getSelectedGeometry",value:function(t){var e=this.getSelectedFeature(t);return e?e.geometry:null}},{key:"getSelectedFeaturesAsFeatureCollection",value:function(t){var e=t.data.features;return{type:"FeatureCollection",features:t.selectedIndexes.map((function(t){return e[t]}))}}},{key:"getClickSequence",value:function(){return this._clickSequence}},{key:"addClickSequence",value:function(t){var e=t.mapCoords;this._clickSequence.push(e)}},{key:"resetClickSequence",value:function(){this._clickSequence=[]}},{key:"getTentativeGuide",value:function(t){return this.getGuides(t).features.find((function(t){return t.properties&&"tentative"===t.properties.guideType}))}},{key:"isSelectionPicked",value:function(t,e){if(!t.length)return!1;var n=(0,s.getNonGuidePicks)(t).map((function(t){return t.index})),r=(0,s.getPickedEditHandles)(t).map((function(t){return t.properties.featureIndex})),i=new Set([].concat(c(n),c(r)));return e.selectedIndexes.some((function(t){return i.has(t)}))}},{key:"rewindPolygon",value:function(t){var e=t.geometry;return"Polygon"===e.type||"MultiPolygon"===e.type?(0,A.default)(t):t}},{key:"getAddFeatureAction",value:function(t,e){var n=t,r="Feature"===n.type?n:{type:"Feature",properties:{},geometry:n},i=this.rewindPolygon(r),o=new a.ImmutableFeatureCollection(e).addFeature(i).getObject();return{updatedData:o,editType:"addFeature",editContext:{featureIndexes:[o.features.length-1]}}}},{key:"getAddManyFeaturesAction",value:function(t,e){var n,r=t.features,i=new a.ImmutableFeatureCollection(e),o=i.getObject().features.length,A=[],s=function(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=l(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,A=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){A=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(A)throw i}}}}(r);try{for(s.s();!(n=s.n()).done;){var u=n.value,c=u.properties,f=u.geometry;i=i.addFeature({type:"Feature",properties:c,geometry:f}),A.push(o+A.length)}}catch(t){s.e(t)}finally{s.f()}return{updatedData:i.getObject(),editType:"addFeature",editContext:{featureIndexes:A}}}},{key:"getAddFeatureOrBooleanPolygonAction",value:function(t,e){var n=t,A=this.getSelectedFeature(e),s=e.modeConfig;if(s&&s.booleanOperation){if(!A||"Polygon"!==A.geometry.type&&"MultiPolygon"!==A.geometry.type)return console.warn("booleanOperation only supported for single Polygon or MultiPolygon selection"),null;var u,c="Feature"===n.type?n:{type:"Feature",geometry:n};if("union"===s.booleanOperation)u=(0,r.default)(A,c);else if("difference"===s.booleanOperation)u=(0,i.default)(A,c);else{if("intersection"!==s.booleanOperation)return console.warn("Invalid booleanOperation ".concat(s.booleanOperation)),null;u=(0,o.default)(A,c)}if(!u)return console.warn("Canceling edit. Boolean operation erased entire polygon."),null;var l=e.selectedIndexes[0];return{updatedData:new a.ImmutableFeatureCollection(e.data).replaceGeometry(l,u.geometry).getObject(),editType:"unionGeometry",editContext:{featureIndexes:[l]}}}return this.getAddFeatureAction(t,e.data)}},{key:"createTentativeFeature",value:function(t){return null}},{key:"handleClick",value:function(t,e){}},{key:"handlePointerMove",value:function(t,e){var n=this.createTentativeFeature(e);n&&e.onEdit({updatedData:e.data,editType:"updateTentativeFeature",editContext:{feature:n}})}},{key:"handleStartDragging",value:function(t,e){}},{key:"handleStopDragging",value:function(t,e){}},{key:"handleDragging",value:function(t,e){}},{key:"handleKeyUp",value:function(t,e){"Escape"===t.key&&(this.resetClickSequence(),e.onEdit({updatedData:e.data,editType:"cancelFeature",editContext:{}}))}}])&&h(e.prototype,n),t}();e.GeoJsonEditMode=g},6302:(t,e)=>{"use strict";function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.ImmutableFeatureCollection=void 0;var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"featureCollection",void 0),this.featureCollection=e}var e,r;return e=t,(r=[{key:"getObject",value:function(){return this.featureCollection}},{key:"replacePosition",value:function(t,e,n){var r=this.featureCollection.features[t].geometry,i="Polygon"===r.type||"MultiPolygon"===r.type,A=o({},r,{coordinates:c(r.coordinates,e,n,i)});return this.replaceGeometry(t,A)}},{key:"removePosition",value:function(t,e){var n=this.featureCollection.features[t].geometry;if("Point"===n.type)throw Error("Can't remove a position from a Point or there'd be nothing left");if("MultiPoint"===n.type&&n.coordinates.length<2)throw Error("Can't remove the last point of a MultiPoint or there'd be nothing left");if("LineString"===n.type&&n.coordinates.length<3)throw Error("Can't remove position. LineString must have at least two positions");if("Polygon"===n.type&&n.coordinates[0].length<5&&Array.isArray(e)&&0===e[0])throw Error("Can't remove position. Polygon's outer ring must have at least four positions");if("MultiLineString"===n.type&&1===n.coordinates.length&&n.coordinates[0].length<3)throw Error("Can't remove position. MultiLineString must have at least two positions");if("MultiPolygon"===n.type&&1===n.coordinates.length&&n.coordinates[0][0].length<5&&Array.isArray(e)&&0===e[0]&&0===e[1])throw Error("Can't remove position. MultiPolygon's outer ring must have at least four positions");var r="Polygon"===n.type||"MultiPolygon"===n.type,i=o({},n,{coordinates:l(n.coordinates,e,r)});return function(t){switch(t.type){case"Polygon":!function(t){for(var e=t.coordinates,n=1;n<e.length;n++)h(e,n)&&n--}(t);break;case"MultiLineString":!function(t){for(var e=0;e<t.coordinates.length;e++)1===t.coordinates[e].length&&(t.coordinates.splice(e,1),e--)}(t);break;case"MultiPolygon":!function(t){for(var e=0;e<t.coordinates.length;e++){var n=t.coordinates[e];n[0].length<=3&&(t.coordinates.splice(e,1),e--);for(var r=1;r<n.length;r++)h(n,r)&&r--}}(t)}}(i),this.replaceGeometry(t,i)}},{key:"addPosition",value:function(t,e,n){var r=this.featureCollection.features[t].geometry;if("Point"===r.type)throw new Error("Unable to add a position to a Point feature");var i="Polygon"===r.type||"MultiPolygon"===r.type,A=o({},r,{coordinates:f(r.coordinates,e,n,i)});return this.replaceGeometry(t,A)}},{key:"replaceGeometry",value:function(e,r){var i=o({},this.featureCollection.features[e],{geometry:r});return new t(o({},this.featureCollection,{features:[].concat(n(this.featureCollection.features.slice(0,e)),[i],n(this.featureCollection.features.slice(e+1)))}))}},{key:"addFeature",value:function(t){return this.addFeatures([t])}},{key:"addFeatures",value:function(e){return new t(o({},this.featureCollection,{features:[].concat(n(this.featureCollection.features),n(e))}))}},{key:"deleteFeature",value:function(t){return this.deleteFeatures([t])}},{key:"deleteFeatures",value:function(e){var r=n(this.featureCollection.features);e.sort();for(var i=e.length-1;i>=0;i--){var A=e[i];A>=0&&A<r.length&&r.splice(A,1)}return new t(o({},this.featureCollection,{features:r}))}}])&&A(e.prototype,r),t}();function u(t,e){if(2===t.length&&3===e.length){var n=e[2];return[t[0],t[1],n]}return t}function c(t,e,r,i){if(!e)return t;if(0===e.length)return u(r,t);if(1===e.length){var o=[].concat(n(t.slice(0,e[0])),[u(r,t[e[0]])],n(t.slice(e[0]+1)));return!i||0!==e[0]&&e[0]!==t.length-1||(o[0]=u(r,t[0]),o[t.length-1]=u(r,t[0])),o}return[].concat(n(t.slice(0,e[0])),[c(t[e[0]],e.slice(1,e.length),r,i)],n(t.slice(e[0]+1)))}function l(t,e,r){if(!e)return t;if(0===e.length)throw Error("Must specify the index of the position to remove");if(1===e.length){var i=[].concat(n(t.slice(0,e[0])),n(t.slice(e[0]+1)));return!r||0!==e[0]&&e[0]!==t.length-1||(0===e[0]?i[i.length-1]=i[0]:e[0]===t.length-1&&(i[0]=i[i.length-1])),i}return[].concat(n(t.slice(0,e[0])),[l(t[e[0]],e.slice(1,e.length),r)],n(t.slice(e[0]+1)))}function f(t,e,r,i){if(!e)return t;if(0===e.length)throw Error("Must specify the index of the position to remove");return 1===e.length?[].concat(n(t.slice(0,e[0])),[r],n(t.slice(e[0]))):[].concat(n(t.slice(0,e[0])),[f(t[e[0]],e.slice(1,e.length),r,i)],n(t.slice(e[0]+1)))}function h(t,e){return t[e].length<=3&&(t.splice(e,1),!0)}e.ImmutableFeatureCollection=a},9857:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeasureAngleMode=void 0;var r=s(n(1208)),i=s(n(8230)),o=s(n(3916)),A=n(2254);function s(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=[],m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(a,t);var e,n,A,s=(e=a,function(){var t,n=d(e);if(p()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function a(){var t;c(this,a);for(var e=arguments.length,n=new Array(e),A=0;A<e;A++)n[A]=arguments[A];return y(h(t=s.call.apply(s,[this].concat(n))),"_getTooltips",(0,o.default)((function(t){var e=t.modeConfig,n=t.vertex,o=t.point1,A=t.point2,s=v;if(n&&o&&A){var a,u=e||{},c=u.formatTooltip,l=u.measurementCallback,f=(0,r.default)(n,o),h=(0,r.default)(n,A),p=Math.abs(f-h);p>180&&(p=360-p),a=c?c(p):"".concat(parseFloat(p).toFixed(2)," ").concat("deg"),l&&l(p),s=[{position:(0,i.default)({type:"FeatureCollection",features:[o,A].map((function(t){return{type:"Feature",geometry:{type:"Point",coordinates:t}}}))}).geometry.coordinates,text:a}]}return s}))),t}return n=a,(A=[{key:"handleClick",value:function(t,e){this.getClickSequence().length>=3&&this.resetClickSequence(),this.addClickSequence(t)}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}},{key:"getPoints",value:function(t){var e,n=this.getClickSequence(),r=function(t){if(Array.isArray(t))return u(t)}(e=n)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return n.length<3&&t.lastPointerMoveEvent&&r.push(t.lastPointerMoveEvent.mapCoords),r}},{key:"getGuides",value:function(t){var e={type:"FeatureCollection",features:[]},n=e.features,r=this.getPoints(t);return r.length>2?n.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[1],r[0],r[2]]}}):r.length>1&&n.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[1],r[0]]}}),e}},{key:"getTooltips",value:function(t){var e=this.getPoints(t);return this._getTooltips({modeConfig:t.modeConfig,vertex:e[0],point1:e[1],point2:e[2]})}}])&&l(n.prototype,A),a}(A.GeoJsonEditMode);e.MeasureAngleMode=m},244:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeasureAreaMode=void 0;var r=A(n(1070)),i=A(n(6338)),o=n(5282);function A(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=[],v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(s,t);var e,n,o,A=(e=s,function(){var t,n=d(e);if(p()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function s(){return c(this,s),A.apply(this,arguments)}return n=s,(o=[{key:"handleClick",value:function(t,e){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e,{onEdit:function(){}});f(d(s.prototype),"handleClick",this).call(this,t,n)}},{key:"getTooltips",value:function(t){var e=this.getTentativeGuide(t);if(e&&"Polygon"===e.geometry.type){var n,o=t.modeConfig||{},A=o.formatTooltip,s=o.measurementCallback,a=(0,i.default)(e),u=(0,r.default)(e);return n=A?A(u):"".concat(parseFloat(u).toFixed(2)," ").concat("sq. m"),s&&s(u),[{position:a.geometry.coordinates,text:n}]}return y}}])&&l(n.prototype,o),s}(o.DrawPolygonMode);e.MeasureAreaMode=v},63:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeasureDistanceMode=void 0;var r,i=(r=n(1013))&&r.__esModule?r:{default:r},o=n(875);function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(a,t);var e,n,r,A=(e=a,function(){var t,n=p(e);if(h()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function a(){var t;u(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return g(f(t=A.call.apply(A,[this].concat(n))),"_isMeasuringSessionFinished",!1),g(f(t),"_currentTooltips",[]),g(f(t),"_currentDistance",0),g(f(t),"_calculateDistanceForTooltip",(function(t){var e=t.positionA,n=t.positionB,r=t.modeConfig||{},o=r.turfOptions,A=r.measurementCallback,s=(0,i.default)(e,n,o);return A&&A(s),s})),t}return n=a,(r=[{key:"_formatTooltip",value:function(t,e){var n=e||{},r=n.formatTooltip,i=n.turfOptions,o=i&&i.units||"kilometers";return r?r(t):"".concat(parseFloat(t).toFixed(2)," ").concat(o)}},{key:"handleClick",value:function(t,e){var n=e.modeConfig,r=e.data,i=e.onEdit;this._isMeasuringSessionFinished&&(this._isMeasuringSessionFinished=!1,this.resetClickSequence(),this._currentTooltips=[],this._currentDistance=0);var A=t.picks,s=(0,o.getPickedEditHandle)(A),a=!1;s||(this.addClickSequence(t),a=!0);var u=this.getClickSequence();u.length>1&&s&&Array.isArray(s.properties.positionIndexes)&&s.properties.positionIndexes[0]===u.length-1?this._isMeasuringSessionFinished=!0:a&&(u.length>1&&(this._currentDistance+=this._calculateDistanceForTooltip({positionA:u[u.length-2],positionB:u[u.length-1],modeConfig:n}),this._currentTooltips.push({position:t.mapCoords,text:this._formatTooltip(this._currentDistance,n)})),i({updatedData:r,editType:"addTentativePosition",editContext:{position:t.mapCoords}}))}},{key:"handleKeyUp",value:function(t,e){if(!this._isMeasuringSessionFinished){t.stopPropagation();var n=t.key,r=this.getClickSequence().length;switch(n){case"Escape":this._isMeasuringSessionFinished=!0,1===r&&(this.resetClickSequence(),this._currentTooltips=[]),e.onUpdateCursor("cell");break;case"Enter":this.handleClick(e.lastPointerMoveEvent,e),this._isMeasuringSessionFinished=!0}}}},{key:"getGuides",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),i=n&&!this._isMeasuringSessionFinished?[n.mapCoords]:[],o={type:"FeatureCollection",features:[]};r.length>0&&o.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat(s(r),i)}});var A=r.map((function(t,e){return{type:"Feature",properties:{guideType:"editHandle",editHandleType:"existing",featureIndex:-1,positionIndexes:[e]},geometry:{type:"Point",coordinates:t}}}));return(e=o.features).push.apply(e,s(A)),o}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}},{key:"getTooltips",value:function(t){var e=t.lastPointerMoveEvent,n=t.modeConfig,r=this.getClickSequence();if(r.length>0&&e&&!this._isMeasuringSessionFinished){var i=this._calculateDistanceForTooltip({positionA:r[r.length-1],positionB:e.mapCoords,modeConfig:t.modeConfig});return[].concat(s(this._currentTooltips),[{position:e.mapCoords,text:this._formatTooltip(this._currentDistance+i,n)}])}return this._currentTooltips}}])&&c(n.prototype,r),a}(n(2254).GeoJsonEditMode);e.MeasureDistanceMode=y},7366:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ModifyMode=void 0;var r=n(4102),i=n(875),o=n(2254),A=n(6302);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(c,t);var e,n,o,s=(e=c,function(){var t,n=d(e);if(p()){var r=d(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function c(){return l(this,c),s.apply(this,arguments)}return n=c,(o=[{key:"getGuides",value:function(t){var e,n=this,o=[],A=t.data,s=t.lastPointerMoveEvent,c=A.features,l=s&&s.picks,f=s&&s.mapCoords,h=function(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=u(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,A=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){A=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(A)throw i}}}}(t.selectedIndexes);try{for(h.s();!(e=h.n()).done;){var p=e.value;if(p<c.length){var d=c[p].geometry;o.push.apply(o,a((0,i.getEditHandlesForGeometry)(d,p)))}else console.warn("selectedFeatureIndexes out of range ".concat(p))}}catch(t){h.e(t)}finally{h.f()}if(l&&l.length&&f){var g=!(0,i.getPickedExistingEditHandle)(l)&&l.find((function(t){return!t.isGuide}));if(g&&!g.object.geometry.type.includes("Point")&&t.selectedIndexes.includes(g.index)){var y=null,v=[],m=(0,r.point)(f);if((0,i.recursivelyTraverseNestedArrays)(g.object.geometry.coordinates,[],(function(e,i){var o=(0,r.lineString)(e),A=n.getNearestPoint(o,m,t.modeConfig&&t.modeConfig.viewport);(!y||A.properties.dist<y.properties.dist)&&(y=A,v=i)})),y){var _=y,b=_.geometry.coordinates,w=_.properties.index;o.push({type:"Feature",properties:{guideType:"editHandle",editHandleType:"intermediate",featureIndex:g.index,positionIndexes:[].concat(a(v),[w+1])},geometry:{type:"Point",coordinates:b}})}}}return{type:"FeatureCollection",features:o}}},{key:"getNearestPoint",value:function(t,e,n){if(t.geometry.coordinates.some((function(t){return t.length>2}))){if(n)return(0,i.nearestPointOnProjectedLine)(t,e,n);console.log("Editing 3D point but modeConfig.viewport not provided. Falling back to 2D logic.")}return(0,i.nearestPointOnLine)(t,e,n)}},{key:"handleClick",value:function(t,e){var n=(0,i.getPickedExistingEditHandle)(t.picks),r=(0,i.getPickedIntermediateEditHandle)(t.picks);if(n){var o,s=n.properties,a=s.featureIndex,u=s.positionIndexes;try{o=new A.ImmutableFeatureCollection(e.data).removePosition(a,u).getObject()}catch(t){}o&&e.onEdit({updatedData:o,editType:"removePosition",editContext:{featureIndexes:[a],positionIndexes:u,position:n.geometry.coordinates}})}else if(r){var c=r.properties,l=c.featureIndex,f=c.positionIndexes,h=new A.ImmutableFeatureCollection(e.data).addPosition(l,f,r.geometry.coordinates).getObject();h&&e.onEdit({updatedData:h,editType:"addPosition",editContext:{featureIndexes:[l],positionIndexes:f,position:r.geometry.coordinates}})}}},{key:"handleDragging",value:function(t,e){var n=(0,i.getPickedEditHandle)(t.pointerDownPicks);if(n){t.cancelPan();var r=n.properties,o=new A.ImmutableFeatureCollection(e.data).replacePosition(r.featureIndex,r.positionIndexes,t.mapCoords).getObject();e.onEdit({updatedData:o,editType:"movePosition",editContext:{featureIndexes:[r.featureIndex],positionIndexes:r.positionIndexes,position:t.mapCoords}})}}},{key:"handlePointerMove",value:function(t,e){var n=this.getCursor(t);e.onUpdateCursor(n)}},{key:"handleStartDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,i.getPickedIntermediateEditHandle)(t.picks);if(n.length&&r){var o=r.properties,s=new A.ImmutableFeatureCollection(e.data).addPosition(o.featureIndex,o.positionIndexes,t.mapCoords).getObject();e.onEdit({updatedData:s,editType:"addPosition",editContext:{featureIndexes:[o.featureIndex],positionIndexes:o.positionIndexes,position:t.mapCoords}})}}},{key:"handleStopDragging",value:function(t,e){var n=e.selectedIndexes,r=(0,i.getPickedEditHandle)(t.picks);if(n.length&&r){var o=r.properties,s=new A.ImmutableFeatureCollection(e.data).replacePosition(o.featureIndex,o.positionIndexes,t.mapCoords).getObject();e.onEdit({updatedData:s,editType:"finishMovePosition",editContext:{featureIndexes:[o.featureIndex],positionIndexes:o.positionIndexes,position:t.mapCoords}})}}},{key:"getCursor",value:function(t){var e=t&&t.picks||[];return(0,i.getPickedEditHandles)(e).length?"cell":null}}])&&f(n.prototype,o),c}(o.GeoJsonEditMode);e.ModifyMode=y},5682:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResizeCircleMode=void 0;var r=l(n(3807)),i=n(4102),o=l(n(265)),A=l(n(1013)),s=l(n(8230)),a=n(875),u=n(2254),c=n(6302);function l(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(f,t);var e,n,u,l=(e=f,function(){var t,n=m(e);if(v()){var r=m(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return g(this,t)});function f(){var t;p(this,f);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return b(y(t=l.call.apply(l,[this].concat(n))),"_selectedEditHandle",void 0),b(y(t),"_isResizing",!1),t}return n=f,(u=[{key:"getGuides",value:function(t){var e,n=this,r=[],o=t.selectedIndexes,A=t.lastPointerMoveEvent,s=A&&A.picks,u=A&&A.mapCoords;if(s&&s.length&&u&&1===o.length&&!this._isResizing){var c=s.find((function(t){return!t.isGuide}));if(c&&c.object.properties.shape&&c.object.properties.shape.includes("Circle")&&t.selectedIndexes.includes(c.index)){var l=null,f=[],p=(0,i.point)(u);if((0,a.recursivelyTraverseNestedArrays)(c.object.geometry.coordinates,[],(function(e,r){var o=(0,i.lineString)(e),A=n.getNearestPoint(o,p,t.modeConfig&&t.modeConfig.viewport);(!l||A.properties.dist<l.properties.dist)&&(l=A,f=r)})),l){var d=l,g=d.geometry.coordinates,y=d.properties.index;r.push({type:"Feature",properties:{guideType:"editHandle",editHandleType:"intermediate",featureIndex:c.index,positionIndexes:[].concat((e=f,function(t){if(Array.isArray(t))return h(t)}(e)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[y+1])},geometry:{type:"Point",coordinates:g}})}}}return{type:"FeatureCollection",features:r}}},{key:"getNearestPoint",value:function(t,e,n){if(t.geometry.coordinates.some((function(t){return t.length>2}))){if(n)return(0,a.nearestPointOnProjectedLine)(t,e,n);console.log("Editing 3D point but modeConfig.viewport not provided. Falling back to 2D logic.")}return(0,r.default)(t,e)}},{key:"handleDragging",value:function(t,e){var n=(0,a.getPickedEditHandle)(t.pointerDownPicks);if(n){t.cancelPan();var r=n.properties,i=this.getSelectedFeature(e),u=(0,s.default)(i).geometry.coordinates,l=Object.entries(i.geometry.coordinates[0]).length-1,f=Math.max((0,A.default)(u,t.mapCoords),.001),h={}.steps,p={steps:void 0===h?l:h},d=(0,o.default)(u,f,p).geometry,g=new c.ImmutableFeatureCollection(e.data).replaceGeometry(r.featureIndex,d).getObject();e.onEdit({updatedData:g,editType:"unionGeometry",editContext:{featureIndexes:[r.featureIndex]}})}}},{key:"handlePointerMove",value:function(t,e){if(!this._isResizing){var n=(0,a.getPickedEditHandle)(t.picks);this._selectedEditHandle=n&&"intermediate"===n.properties.editHandleType?n:null}var r=this.getCursor(t);e.onUpdateCursor(r)}},{key:"handleStartDragging",value:function(t,e){this._selectedEditHandle&&(this._isResizing=!0)}},{key:"handleStopDragging",value:function(t,e){this._isResizing&&(this._selectedEditHandle=null,this._isResizing=!1)}},{key:"getCursor",value:function(t){var e=t&&t.picks||[];return(0,a.getPickedEditHandles)(e).length?"cell":null}}])&&d(n.prototype,u),f}(u.GeoJsonEditMode);e.ResizeCircleMode=w},83:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RotateMode=void 0;var r=g(n(9705)),i=g(n(6338)),o=g(n(1208)),A=g(n(3652)),s=g(n(1013)),a=n(1540),u=n(611),c=n(4102),l=g(n(67)),f=g(n(7383)),h=n(875),p=n(2254),d=n(6302);function g(t){return t&&t.__esModule?t:{default:t}}function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?b(t):e}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(I,t);var e,n,g,y=(e=I,function(){var t,n=E(e);if(w()){var r=E(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return _(this,t)});function I(){var t;v(this,I);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return S(b(t=y.call.apply(y,[this].concat(n))),"_selectedEditHandle",void 0),S(b(t),"_geometryBeingRotated",void 0),S(b(t),"_isRotating",!1),S(b(t),"_isSinglePointGeometrySelected",(function(t){var e=(t||{}).features;return!(!Array.isArray(e)||1!==e.length)&&"Point"===(0,u.getGeom)(e[0]).type})),S(b(t),"getIsRotating",(function(){return t._isRotating})),t}return n=I,(g=[{key:"getGuides",value:function(t){var e=this._geometryBeingRotated||this.getSelectedFeaturesAsFeatureCollection(t);if(this._isSinglePointGeometrySelected(e))return{type:"FeatureCollection",features:[]};if(this._isRotating)return(0,c.featureCollection)([(0,i.default)(e)]);var n=(0,A.default)((0,r.default)(e)),o=null,u=null,l=0;(0,a.coordEach)(n,(function(t){if(o){var e=(0,p.getIntermediatePosition)(t,o);(!u||e[1]>u[1])&&(u=e);var n=(0,s.default)(t,o);l=Math.max(l,n)}o=t}));var h=u&&[u[0],u[1]+l/1e3],d=(0,c.lineString)([u,h]),g=(0,c.point)(h,{guideType:"editHandle",editHandleType:"rotate"});return(0,c.featureCollection)([(0,f.default)(n),g,d])}},{key:"handleDragging",value:function(t,e){if(this._isRotating){var n=this.getRotateAction(t.pointerDownMapCoords,t.mapCoords,"rotating",e);n&&e.onEdit(n),t.cancelPan()}}},{key:"handlePointerMove",value:function(t,e){if(!this._isRotating){var n=(0,h.getPickedEditHandle)(t.picks);this._selectedEditHandle=n&&"rotate"===n.properties.editHandleType?n:null}this.updateCursor(e)}},{key:"handleStartDragging",value:function(t,e){this._selectedEditHandle&&(this._isRotating=!0,this._geometryBeingRotated=this.getSelectedFeaturesAsFeatureCollection(e))}},{key:"handleStopDragging",value:function(t,e){if(this._isRotating){var n=this.getRotateAction(t.pointerDownMapCoords,t.mapCoords,"rotated",e);n&&e.onEdit(n),this._geometryBeingRotated=null,this._selectedEditHandle=null,this._isRotating=!1}}},{key:"updateCursor",value:function(t){this._selectedEditHandle?t.onUpdateCursor("crosshair"):t.onUpdateCursor(null)}},{key:"getRotateAction",value:function(t,e,n,r){if(!this._geometryBeingRotated)return null;for(var A=(0,i.default)(this._geometryBeingRotated),s=function(t,e,n){var r=(0,o.default)(t,e);return(0,o.default)(t,n)-r}(A,t,e),a=(0,l.default)(this._geometryBeingRotated,s,{pivot:A}),u=new d.ImmutableFeatureCollection(r.data),c=r.selectedIndexes,f=0;f<c.length;f++){var h=c[f],p=a.features[f];u=u.replaceGeometry(h,p.geometry)}return{updatedData:u.getObject(),editType:n,editContext:{featureIndexes:c}}}}])&&m(n.prototype,g),I}(p.GeoJsonEditMode);e.RotateMode=I},5892:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScaleMode=void 0;var r=g(n(9705)),i=g(n(6338)),o=g(n(1208)),A=g(n(3652)),s=n(4102),a=g(n(7383)),u=n(1540),c=g(n(1013)),l=g(n(7517)),f=n(611),h=n(875),p=n(2254),d=n(6302);function g(t){return t&&t.__esModule?t:{default:t}}function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?w(t):e}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function I(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(g,t);var e,n,c,p=(e=g,function(){var t,n=x(e);if(E()){var r=x(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return b(this,t)});function g(){var t;m(this,g);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return I(w(t=p.call.apply(p,[this].concat(n))),"_geometryBeingScaled",void 0),I(w(t),"_selectedEditHandle",void 0),I(w(t),"_cornerGuidePoints",void 0),I(w(t),"_cursor",void 0),I(w(t),"_isScaling",!1),I(w(t),"_isSinglePointGeometrySelected",(function(t){var e=(t||{}).features;return!(!Array.isArray(e)||1!==e.length)&&"Point"===(0,f.getGeom)(e[0]).type})),I(w(t),"_getOppositeScaleHandle",(function(e){var n=e&&e.properties&&Array.isArray(e.properties.positionIndexes)&&e.properties.positionIndexes[0];if("number"!=typeof n)return null;var r=t._cornerGuidePoints.length,i=(n+r/2)%r;return t._cornerGuidePoints.find((function(t){return!!Array.isArray(t.properties.positionIndexes)&&t.properties.positionIndexes[0]===i}))})),I(w(t),"_getUpdatedData",(function(t,e){for(var n=new d.ImmutableFeatureCollection(t.data),r=t.selectedIndexes,i=0;i<r.length;i++){var o=r[i],A=e.features[i];n=n.replaceGeometry(o,A.geometry)}return n.getObject()})),I(w(t),"isEditHandleSelected",(function(){return Boolean(t._selectedEditHandle)})),I(w(t),"getScaleAction",(function(e,n,r,i){if(!t._selectedEditHandle)return null;var o=t._getOppositeScaleHandle(t._selectedEditHandle),A=(0,f.getCoord)(o),s=C(A,e,n),a=(0,l.default)(t._geometryBeingScaled,s,{origin:A});return{updatedData:t._getUpdatedData(i,a),editType:r,editContext:{featureIndexes:i.selectedIndexes}}})),I(w(t),"updateCursor",(function(e){if(t._selectedEditHandle){t._cursor&&e.onUpdateCursor(t._cursor);var n=t.getSelectedFeaturesAsFeatureCollection(e),r=(0,i.default)(n),A=(0,o.default)(r,t._selectedEditHandle),s=A<0?A+180:A;s>=0&&s<=90||s>=180&&s<=270?(t._cursor="nesw-resize",e.onUpdateCursor("nesw-resize")):(t._cursor="nwse-resize",e.onUpdateCursor("nwse-resize"))}else e.onUpdateCursor(null),t._cursor=null})),t}return n=g,(c=[{key:"handlePointerMove",value:function(t,e){if(!this._isScaling){var n=(0,h.getPickedEditHandle)(t.picks);this._selectedEditHandle=n&&"scale"===n.properties.editHandleType?n:null,n&&this.updateCursor(e)}}},{key:"handleStartDragging",value:function(t,e){this._selectedEditHandle&&(this._isScaling=!0,this._geometryBeingScaled=this.getSelectedFeaturesAsFeatureCollection(e))}},{key:"handleDragging",value:function(t,e){if(this._isScaling){e.onUpdateCursor(this._cursor);var n=this.getScaleAction(t.pointerDownMapCoords,t.mapCoords,"scaling",e);n&&e.onEdit(n),t.cancelPan()}}},{key:"handleStopDragging",value:function(t,e){if(this._isScaling){var n=this.getScaleAction(t.pointerDownMapCoords,t.mapCoords,"scaled",e);n&&e.onEdit(n),e.onUpdateCursor(null),this._geometryBeingScaled=null,this._selectedEditHandle=null,this._cursor=null,this._isScaling=!1}}},{key:"getGuides",value:function(t){this._cornerGuidePoints=[];var e=this.getSelectedFeaturesAsFeatureCollection(t);if(this._isSinglePointGeometrySelected(e))return{type:"FeatureCollection",features:[]};var n=(0,A.default)((0,r.default)(e));n.properties.mode="scale";var i,o=[];return(0,u.coordEach)(n,(function(t,e){if(e<4){var n=(0,s.point)(t,{guideType:"editHandle",editHandleType:"scale",positionIndexes:[e]});o.push(n)}})),this._cornerGuidePoints=o,(0,s.featureCollection)([(0,a.default)(n)].concat(function(t){if(Array.isArray(t))return v(t)}(i=this._cornerGuidePoints)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(i)||function(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}}])&&_(n.prototype,c),g}(p.GeoJsonEditMode);function C(t,e,n){var r=(0,c.default)(t,e);return(0,c.default)(t,n)/r}e.ScaleMode=M},3816:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SnappableMode=void 0;var r=n(875);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||A(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(g,t);var e,n,i,s=(e=g,function(){var t,n=h(e);if(f()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)});function g(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),d(l(e=s.call(this)),"_handler",void 0),e._handler=t,e}return n=g,(i=[{key:"_getSnappedMouseEvent",value:function(t,e,n){return Object.assign(t,{mapCoords:n.geometry.coordinates,pointerDownMapCoords:e&&e.geometry.coordinates})}},{key:"_getPickedSnapTarget",value:function(t){return(0,r.getPickedEditHandles)(t).find((function(t){return"snap-target"===t.properties.editHandleType}))}},{key:"_getPickedSnapSource",value:function(t){return(0,r.getPickedSnapSourceEditHandle)(t)}},{key:"_getUpdatedSnapSourceHandle",value:function(t,e){var n=t.properties,r=n.featureIndex,i=n.positionIndexes;if(!Array.isArray(i))return t;var o=e.features[r];return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{geometry:{type:"Point",coordinates:i.reduce((function(t,e){return t[e]}),o.geometry.coordinates)}})}},{key:"_getSnapTargets",value:function(t){var e=(t.modeConfig||{}).additionalSnapTargets;return e=e||[],[].concat(o(t.data.features),o(e))}},{key:"_getSnapTargetHandles",value:function(t){for(var e=[],n=this._getSnapTargets(t),i=0;i<n.length;i++)if(!t.selectedIndexes.includes(i)){var A=n[i].geometry;e.push.apply(e,o((0,r.getEditHandlesForGeometry)(A,i,"snap-target")))}return e}},{key:"getGuides",value:function(t){var e=t.modeConfig,n=t.lastPointerMoveEvent,i=(e||{}).enableSnapping,s={type:"FeatureCollection",features:o(this._handler.getGuides(t).features)};if(!i)return s;var a,u=n&&this._getPickedSnapSource(n.pointerDownPicks);if(u)return(a=s.features).push.apply(a,o(this._getSnapTargetHandles(t)).concat([this._getUpdatedSnapSourceHandle(u,t.data)])),s;var c,l=t.data.features,f=function(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=A(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}(t.selectedIndexes);try{for(f.s();!(c=f.n()).done;){var h=c.value;if(h<l.length){var p,d=l[h].geometry;(p=s.features).push.apply(p,o((0,r.getEditHandlesForGeometry)(d,h,"snap-source")))}}}catch(t){f.e(t)}finally{f.f()}return s}},{key:"_getSnapAwareEvent",value:function(t,e){var n=this._getPickedSnapSource(e.lastPointerMoveEvent.pointerDownPicks),r=this._getPickedSnapTarget(t.picks);return n&&r?this._getSnappedMouseEvent(t,n,r):t}},{key:"handleStartDragging",value:function(t,e){this._handler.handleStartDragging(t,e)}},{key:"handleStopDragging",value:function(t,e){this._handler.handleStopDragging(this._getSnapAwareEvent(t,e),e)}},{key:"handleDragging",value:function(t,e){this._handler.handleDragging(this._getSnapAwareEvent(t,e),e)}},{key:"handlePointerMove",value:function(t,e){this._handler.handlePointerMove(this._getSnapAwareEvent(t,e),e)}}])&&u(n.prototype,i),g}(n(2254).GeoJsonEditMode);e.SnappableMode=g},6548:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SplitPolygonMode=void 0;var r=g(n(8147)),i=g(n(8727)),o=g(n(5419)),A=g(n(3663)),s=n(4102),a=g(n(1208)),u=g(n(1013)),c=g(n(3737)),l=g(n(7383)),f=g(n(3807)),h=n(875),p=n(2254),d=n(6302);function g(t){return t&&t.__esModule?t:{default:t}}function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){if(t){if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(y,t);var e,n,p,g=(e=y,function(){var t,n=x(e);if(E()){var r=x(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return w(this,t)});function y(){return _(this,y),g.apply(this,arguments)}return n=y,(p=[{key:"calculateMapCoords",value:function(t,e,n){var r=n.modeConfig;if(!r||!r.lock90Degree||!t.length)return e;if(1===t.length){var i=t[0],o=this.getSelectedGeometry(n),A=(0,l.default)(o),p="FeatureCollection"===A.type?A.features:[A],d=Number.MAX_SAFE_INTEGER,g=null;if(p.forEach((function(t){var e=(0,f.default)(t,i),n=(0,u.default)(e,i);d>n&&(d=n,g=e)})),g){var y=(0,a.default)(i,g),m=(0,u.default)(i,e,{units:"meters"});return(0,c.default)(i,m,y,{units:"meters"}).geometry.coordinates}return e}var _,b,w=t[t.length-1],E=(_=(0,h.generatePointsParallelToLinePoints)(t[t.length-2],w,e),b=1,function(t){if(Array.isArray(t))return t}(_)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var A,s=t[Symbol.iterator]();!(r=(A=s.next()).done)&&(n.push(A.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(_,b)||v(_,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return(0,f.default)((0,s.lineString)([w,E]),e).geometry.coordinates}},{key:"getGuides",value:function(t){var e=this.getClickSequence(),n={type:"FeatureCollection",features:[]};if(0===e.length||!t.lastPointerMoveEvent)return n;var r,i=t.lastPointerMoveEvent.mapCoords;return n.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[].concat((r=e,function(t){if(Array.isArray(t))return m(t)}(r)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(r)||v(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[this.calculateMapCoords(e,i,t)])}}),n}},{key:"handleClick",value:function(t,e){var n=this.getTentativeGuide(e),i=this.getSelectedGeometry(e);if(i){var o=this.getClickSequence();n&&"LineString"===n.geometry.type?o.push(n.geometry.coordinates[n.geometry.coordinates.length-1]):this.addClickSequence(t);var s={type:"Point",coordinates:o[o.length-1]},a=(0,r.default)(s,i);if(o.length>1&&n&&!a){if(this.resetClickSequence(),0===(0,A.default)(n,i).features.length)return;var u=this.splitPolygon(n,e);u&&e.onEdit(u)}}else console.warn("A polygon must be selected for splitting")}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell")}},{key:"splitPolygon",value:function(t,e){var n=this.getSelectedGeometry(e),r=e.selectedIndexes[0],A=e.modeConfig||{},s=A.gap,a=void 0===s?.1:s,u=A.units,c=void 0===u?"centimeters":u;0===a&&(a=.1,c="centimeters");var l=(0,o.default)(t,a,{units:c}),f=(0,i.default)(n,l);if(!f)return console.warn("Canceling edit. Split Polygon erased"),null;var h,p=f.geometry,g=p.type,y=p.coordinates;return h="Polygon"===g?y.map((function(t){return[t]})):y.reduce((function(t,e){return e.forEach((function(e){t.push([e])})),t}),[]),{updatedData:new d.ImmutableFeatureCollection(e.data).replaceGeometry(r,{type:"MultiPolygon",coordinates:h}).getObject(),editType:"split",editContext:{featureIndexes:[r]}}}}])&&b(n.prototype,p),y}(p.GeoJsonEditMode);e.SplitPolygonMode=I},1658:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ThreeClickPolygonMode=void 0;var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(f,t);var e,n,r,l=(e=f,function(){var t,n=u(e);if(a()){var r=u(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function f(){return i(this,f),l.apply(this,arguments)}return n=f,(r=[{key:"handleClick",value:function(t,e){this.addClickSequence(t);var n=this.getClickSequence(),r=this.getTentativeGuide(e);if(n.length>2&&r&&"Polygon"===r.geometry.type){var i=this.getAddFeatureOrBooleanPolygonAction(r.geometry,e);this.resetClickSequence(),i&&e.onEdit(i)}}},{key:"getGuides",value:function(t){var e=t.lastPointerMoveEvent,n=t.modeConfig,r=this.getClickSequence(),i={type:"FeatureCollection",features:[]};if(0===r.length)return i;var o=e.mapCoords;if(1===r.length)i.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:{type:"LineString",coordinates:[r[0],o]}});else{var A=this.getThreeClickPolygon(r[0],r[1],o,n);A&&i.features.push({type:"Feature",properties:{guideType:"tentative"},geometry:A.geometry})}return i}},{key:"getThreeClickPolygon",value:function(t,e,n,r){return null}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),A(u(f.prototype),"handlePointerMove",this).call(this,t,e)}},{key:"createTentativeFeature",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),i=n?[n.mapCoords]:[];return 2===r.length&&(e=this.getThreeClickPolygon(r[0],r[1],i[0],t.modeConfig)),e}}])&&o(n.prototype,r),f}(n(2254).GeoJsonEditMode);e.ThreeClickPolygonMode=l},4061:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransformMode=void 0;var r=n(4102),i=n(6166),o=n(5892),A=n(83);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function f(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(y,t);var e,n,s,g=(e=y,function(){var t,n=p(e);if(h()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function y(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),g.call(this,[new i.TranslateMode,new o.ScaleMode,new A.RotateMode])}return n=y,(s=[{key:"handlePointerMove",value:function(t,e){var n=null;l(p(y.prototype),"handlePointerMove",this).call(this,t,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e,{onUpdateCursor:function(t){n=t||n}})),e.onUpdateCursor(n)}},{key:"handleStartDragging",value:function(t,e){var n=null,r=null,A=[];this._modes.forEach((function(t){t instanceof i.TranslateMode?r=t:(t instanceof o.ScaleMode&&(n=t),A.push(t))})),n instanceof o.ScaleMode&&!n.isEditHandleSelected()&&A.push(r),A.filter(Boolean).forEach((function(n){return n.handleStartDragging(t,e)}))}},{key:"getGuides",value:function(t){var e=l(p(y.prototype),"getGuides",this).call(this,t),n=(this._modes||[]).find((function(t){return t instanceof A.RotateMode}));if(n instanceof A.RotateMode){var i=e.features.filter((function(t){var e=t.properties||{},r=e.editHandleType,i=[e.mode];return n.getIsRotating()&&i.push(r),!i.includes("scale")}));e=(0,r.featureCollection)(i)}return e}}])&&c(n.prototype,s),y}(n(8874).CompositeMode);e.TransformMode=g},6166:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TranslateMode=void 0;var r=u(n(1208)),i=u(n(1013)),o=u(n(2418)),A=n(4102),s=n(2254),a=n(6302);function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(c,t);var e,n,s,u=(e=c,function(){var t,n=g(e);if(d()){var r=g(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return h(this,t)});function c(){var t;l(this,c);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return v(p(t=u.call.apply(u,[this].concat(n))),"_geometryBeforeTranslate",void 0),v(p(t),"_isTranslatable",void 0),t}return n=c,(s=[{key:"handleDragging",value:function(t,e){if(this._isTranslatable){if(this._geometryBeforeTranslate){var n=this.getTranslateAction(t.pointerDownMapCoords,t.mapCoords,"translating",e);n&&e.onEdit(n)}t.cancelPan()}}},{key:"handlePointerMove",value:function(t,e){this._isTranslatable=this.isSelectionPicked(t.pointerDownPicks||t.picks,e),this.updateCursor(e)}},{key:"handleStartDragging",value:function(t,e){this._isTranslatable&&(this._geometryBeforeTranslate=this.getSelectedFeaturesAsFeatureCollection(e))}},{key:"handleStopDragging",value:function(t,e){if(this._geometryBeforeTranslate){var n=this.getTranslateAction(t.pointerDownMapCoords,t.mapCoords,"translated",e);n&&e.onEdit(n),this._geometryBeforeTranslate=null}}},{key:"updateCursor",value:function(t){this._isTranslatable?t.onUpdateCursor("move"):t.onUpdateCursor(null)}},{key:"getTranslateAction",value:function(t,e,n,s){if(!this._geometryBeforeTranslate)return null;for(var u=(0,A.point)(t),c=(0,A.point)(e),l=(0,i.default)(u,c),f=(0,r.default)(u,c),h=(0,o.default)(this._geometryBeforeTranslate,l,f),p=new a.ImmutableFeatureCollection(s.data),d=s.selectedIndexes,g=0;g<d.length;g++){var y=d[g],v=h.features[g];p=p.replaceGeometry(y,v.geometry)}return{updatedData:p.getObject(),editType:n,editContext:{featureIndexes:d}}}}])&&f(n.prototype,s),c}(s.GeoJsonEditMode);e.TranslateMode=m},3124:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.TwoClickPolygonMode=void 0;var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(f,t);var e,n,r,l=(e=f,function(){var t,n=u(e);if(a()){var r=u(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return s(this,t)});function f(){return i(this,f),l.apply(this,arguments)}return n=f,(r=[{key:"handleClick",value:function(t,e){e.modeConfig&&e.modeConfig.dragToDraw||(this.addClickSequence(t),this.checkAndFinishPolygon(e))}},{key:"handleStartDragging",value:function(t,e){e.modeConfig&&e.modeConfig.dragToDraw&&(this.addClickSequence(t),t.cancelPan())}},{key:"handleStopDragging",value:function(t,e){e.modeConfig&&e.modeConfig.dragToDraw&&(this.addClickSequence(t),this.checkAndFinishPolygon(e))}},{key:"checkAndFinishPolygon",value:function(t){var e=this.getClickSequence(),n=this.getTentativeGuide(t);if(e.length>1&&n&&"Polygon"===n.geometry.type){var r={type:"Feature",properties:{shape:n.properties.shape},geometry:{type:"Polygon",coordinates:n.geometry.coordinates}},i=this.getAddFeatureOrBooleanPolygonAction(r,t);this.resetClickSequence(),i&&t.onEdit(i)}}},{key:"getGuides",value:function(t){var e=t.lastPointerMoveEvent,n=t.modeConfig,r=this.getClickSequence(),i={type:"FeatureCollection",features:[]};if(0===r.length)return i;var o=r[0],A=e.mapCoords,s=this.getTwoClickPolygon(o,A,n);return s&&i.features.push({type:"Feature",properties:{shape:s.properties&&s.properties.shape,guideType:"tentative"},geometry:s.geometry}),i}},{key:"getTwoClickPolygon",value:function(t,e,n){return null}},{key:"handlePointerMove",value:function(t,e){e.onUpdateCursor("cell"),A(u(f.prototype),"handlePointerMove",this).call(this,t,e)}},{key:"createTentativeFeature",value:function(t){var e,n=t.lastPointerMoveEvent,r=this.getClickSequence(),i=n?[n.mapCoords]:[];return 1===r.length&&(e=this.getTwoClickPolygon(r[0],i[0],t.modeConfig)),e}}])&&o(n.prototype,r),f}(n(2254).GeoJsonEditMode);e.TwoClickPolygonMode=l},5279:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ViewMode=void 0;var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(r,t);var e,n=(e=r,function(){var t,n=s(e);if(A()){var r=s(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function r(){return i(this,r),n.apply(this,arguments)}return r}(n(2254).GeoJsonEditMode);e.ViewMode=u},3916:(t,e)=>{"use strict";function n(t,e){if(t===e)return!0;if(Array.isArray(t)){var n=t.length;if(!e||e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,r={};return function(i){for(var o in i)if(!n(i[o],r[o])){e=t(i),r=i;break}return e}}},875:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toDeckColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,0,0,255];return Array.isArray(t)?[255*t[0],255*t[1],255*t[2],255*t[3]]:e},e.recursivelyTraverseNestedArrays=function t(e,n,r){if(!Array.isArray(e[0]))return!0;for(var i=0;i<e.length;i++)if(t(e[i],[].concat(f(n),[i]),r)){r(e,n);break}return!1},e.generatePointsParallelToLinePoints=function(t,e,n){var A={type:"LineString",coordinates:[t,e]},a=(0,s.point)(n),u=(0,o.default)(a,A),c=(0,i.default)(t,e),l=(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])<0?c-90:c-270,f=(0,r.default)(e,u,l),h=(0,r.default)(t,u,l);return[f.geometry.coordinates,h.geometry.coordinates]},e.distance2d=d,e.mix=g,e.nearestPointOnProjectedLine=function(t,e,n){var r=new u.default(n),i=t.geometry.coordinates.map((function(t){var e=l(t,3),n=e[0],i=e[1],o=e[2],A=void 0===o?0:o;return r.project([n,i,A])})),o=l(r.project(e.geometry.coordinates),2),A=o[0],s=o[1],a=1/0,c={};i.forEach((function(t,e){var n=l(t,2),r=n[0],o=n[1];if(0!==e){var u=l(i[e-1],2),f=u[0],h=u[1],p=h-o,d=r-f,g=f*o-r*h,y=p*p+d*d,v=Math.abs(p*A+d*s+g)/Math.sqrt(y);v<a&&(a=v,c={index:e,x0:(d*(d*A-p*s)-p*g)/y,y0:(p*(-d*A+p*s)-d*g)/y})}}));var f=c,h=f.index,p=f.x0,y=f.y0,v=l(i[h-1],3),m=v[0],_=v[1],b=v[2],w=void 0===b?0:b,E=l(i[h],3),x=E[0],S=E[1],I=E[2],M=void 0===I?0:I,C=d(m,_,x,S),P=g(w,M,d(m,_,p,y)/C);return{type:"Feature",geometry:{type:"Point",coordinates:r.unproject([p,y,P])},properties:{dist:a,index:h-1}}},e.nearestPointOnLine=function(t,e,n){var r,i,o;n&&(o=new u.default(n));var c=(0,s.point)([1/0,1/0],{dist:1/0});return!(null===(r=t.geometry)||void 0===r?void 0:r.coordinates.length)||(null===(i=t.geometry)||void 0===i?void 0:i.coordinates.length)<2||(0,A.flattenEach)(t,(function(t){var n,r,i,A,u,l,f,h=(0,a.getCoords)(t),p=(0,a.getCoords)(e);if(h.length>1&&p.length){var d,g;o?(d=h.map((function(t){return o.project(t)})),g=o.project(p)):(d=h,g=p);for(var y=1;y<d.length;y++){if(d[y][0]!==d[y-1][0]){var v=(d[y][1]-d[y-1][1])/(d[y][0]-d[y-1][0]),m=d[y][1]-v*d[y][0];f=Math.abs(v*g[0]+m-g[1])/Math.sqrt(v*v+1)}else f=Math.abs(g[0]-d[y][0]);var _=Math.pow(d[y][1]-d[y-1][1],2)+Math.pow(d[y][0]-d[y-1][0],2),b=Math.pow(d[y][1]-g[1],2)+Math.pow(d[y][0]-g[0],2),w=Math.pow(d[y-1][1]-g[1],2)+Math.pow(d[y-1][0]-g[0],2),E=Math.pow(f,2),x=b-E+w-E;x>_&&(f=Math.sqrt(Math.min(b,w))),(null==n||n>f)&&(x>_?w<b?(r=0,i=1):(i=0,r=1):(r=Math.sqrt(w-E)/Math.sqrt(_),i=Math.sqrt(b-E)/Math.sqrt(_)),n=f,l=y)}var S=d[l-1][0]-d[l][0],I=d[l-1][1]-d[l][1];A=d[l-1][0]-S*r,u=d[l-1][1]-I*r}var M={x:A,y:u,idx:l-1,to:r,from:i};if(o){var C=o.unproject([M.x,M.y]);M={x:C[0],y:C[1],idx:l-1,to:r,from:i}}c=(0,s.point)([M.x,M.y],{dist:Math.abs(M.from-M.to),index:M.idx})})),c},e.getPickedEditHandle=function(t){var e=y(t);return e.length?e[0]:null},e.getPickedSnapSourceEditHandle=function(t){return y(t).find((function(t){return"snap-source"===t.properties.editHandleType}))},e.getNonGuidePicks=function(t){return t&&t.filter((function(t){return!t.isGuide}))},e.getPickedExistingEditHandle=function(t){return y(t).find((function(t){var e=t.properties;return e.featureIndex>=0&&"existing"===e.editHandleType}))},e.getPickedIntermediateEditHandle=function(t){return y(t).find((function(t){var e=t.properties;return e.featureIndex>=0&&"intermediate"===e.editHandleType}))},e.getPickedEditHandles=y,e.getEditHandlesForGeometry=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"existing",r=[];switch(t.type){case"Point":r=[{type:"Feature",properties:{guideType:"editHandle",editHandleType:n,positionIndexes:[],featureIndex:e},geometry:{type:"Point",coordinates:t.coordinates}}];break;case"MultiPoint":case"LineString":r=r.concat(v(t.coordinates,[],e,n));break;case"Polygon":case"MultiLineString":for(var i=0;i<t.coordinates.length;i++)r=r.concat(v(t.coordinates[i],[i],e,n)),"Polygon"===t.type&&(r=r.slice(0,-1));break;case"MultiPolygon":for(var o=0;o<t.coordinates.length;o++)for(var A=0;A<t.coordinates[o].length;A++)r=(r=r.concat(v(t.coordinates[o][A],[o,A],e,n))).slice(0,-1);break;default:throw Error("Unhandled geometry type: ".concat(t.type))}return r};var r=c(n(3737)),i=c(n(1208)),o=c(n(3892)),A=n(1540),s=n(4102),a=n(611),u=c(n(2004));function c(t){return t&&t.__esModule?t:{default:t}}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var A,s=t[Symbol.iterator]();!(r=(A=s.next()).done)&&(n.push(A.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function g(t,e,n){return e*n+t*(1-n)}function y(t){return t&&t.filter((function(t){return t.isGuide&&"editHandle"===t.object.properties.guideType})).map((function(t){return t.object}))||[]}function v(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"existing",i=[],o=0;o<t.length;o++){var A=t[o];i.push({type:"Feature",properties:{guideType:"editHandle",positionIndexes:[].concat(f(e),[o]),featureIndex:n,editHandleType:r},geometry:{type:"Point",coordinates:A}})}return i}},9900:(t,e,n)=>{"use strict";Object.defineProperty(e,"nk",{enumerable:!0,get:function(){return r.default}});n(1399);var r=i(n(2444));i(n(2465)),i(n(1845)),i(n(7964)),i(n(6734)),i(n(647)),i(n(6949)),n(9545);function i(t){return t&&t.__esModule?t:{default:t}}},2444:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=n(3931),o=n(7359),A=(r=n(6759))&&r.__esModule?r:{default:r};function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function l(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=[0,0,0,153],y=[0,0,0,144],v=[0,0,0,255],m=[0,0,144,144],_=[144,144,144,255],b=[144,144,144,144],w=[192,0,0,255],E=[0,0,0,128],x=[124,0,192,255],S=[255,255,255,255],I=o.DrawPolygonMode;function M(t){return t&&"function"==typeof t?function(e){return t(function(t){return t.__source?t.__source.object:t.sourceFeature?t.sourceFeature.feature:t}(e))}:t}function C(t){switch(t.properties.editHandleType){case"existing":return w;case"snap-source":return x;case"intermediate":default:return E}}var P={mode:I,onEdit:function(){},pickable:!0,pickingRadius:10,pickingDepth:5,fp64:!1,filled:!0,stroked:!0,lineWidthScale:1,lineWidthMinPixels:1,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineWidthUnits:"pixels",lineJointRounded:!1,lineMiterLimit:4,pointRadiusScale:1,pointRadiusMinPixels:2,pointRadiusMaxPixels:Number.MAX_SAFE_INTEGER,getLineColor:function(t,e,n){return e?v:g},getFillColor:function(t,e,n){return e?m:y},getRadius:function(t){return t&&t.properties&&t.properties.radius||t&&t.properties&&t.properties.size||1},getLineWidth:function(t){return t&&t.properties&&t.properties.lineWidth||3},getTentativeLineColor:function(t){return _},getTentativeFillColor:function(t){return b},getTentativeLineWidth:function(t){return t&&t.properties&&t.properties.lineWidth||3},editHandleType:"point",editHandlePointRadiusScale:1,editHandlePointOutline:!0,editHandlePointStrokeWidth:2,editHandlePointRadiusMinPixels:4,editHandlePointRadiusMaxPixels:8,getEditHandlePointColor:C,getEditHandlePointOutlineColor:function(t){return S},getEditHandlePointRadius:function(t){switch(t.properties.editHandleType){case"existing":return 5;case"snap":return 7;case"intermediate":default:return 3}},editHandleIconAtlas:null,editHandleIconMapping:null,editHandleIconSizeScale:1,getEditHandleIcon:function(t){return t.properties.editHandleType},getEditHandleIconSize:10,getEditHandleIconColor:C,getEditHandleIconAngle:0,billboard:!0},O={view:o.ViewMode,modify:o.ModifyMode,translate:new o.SnappableMode(new o.TranslateMode),transform:new o.SnappableMode(new o.TransformMode),scale:o.ScaleMode,rotate:o.RotateMode,duplicate:o.DuplicateMode,split:o.SplitPolygonMode,extrude:o.ExtrudeMode,elevation:o.ElevationMode,drawPoint:o.DrawPointMode,drawLineString:o.DrawLineStringMode,drawPolygon:o.DrawPolygonMode,drawRectangle:o.DrawRectangleMode,drawSquareFromCenter:o.DrawSquareFromCenterMode,drawCircleFromCenter:o.DrawCircleFromCenterMode,drawCircleByBoundingBox:o.DrawCircleByDiameterMode,drawEllipseByBoundingBox:o.DrawEllipseByBoundingBoxMode,drawRectangleUsing3Points:o.DrawRectangleUsingThreePointsMode,drawEllipseUsing3Points:o.DrawEllipseUsingThreePointsMode,draw90DegreePolygon:o.Draw90DegreePolygonMode,drawPolygonByDragging:o.DrawPolygonByDraggingMode},N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(A,t);var e,n,r,o=(e=A,function(){var t,n=h(e);if(f()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function A(){return a(this,A),o.apply(this,arguments)}return n=A,(r=[{key:"renderLayers",value:function(){var t=this.getSubLayerProps({id:"geojson",data:this.props.data,fp64:this.props.fp64,filled:this.props.filled,stroked:this.props.stroked,lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineMiterLimit:this.props.lineMiterLimit,pointRadiusScale:this.props.pointRadiusScale,pointRadiusMinPixels:this.props.pointRadiusMinPixels,pointRadiusMaxPixels:this.props.pointRadiusMaxPixels,getLineColor:this.selectionAwareAccessor(this.props.getLineColor),getFillColor:this.selectionAwareAccessor(this.props.getFillColor),getRadius:this.selectionAwareAccessor(this.props.getRadius),getLineWidth:this.selectionAwareAccessor(this.props.getLineWidth),_subLayerProps:{"line-strings":{billboard:this.props.billboard},"polygons-stroke":{billboard:this.props.billboard}},updateTriggers:{getLineColor:[this.props.selectedFeatureIndexes,this.props.mode],getFillColor:[this.props.selectedFeatureIndexes,this.props.mode],getRadius:[this.props.selectedFeatureIndexes,this.props.mode],getLineWidth:[this.props.selectedFeatureIndexes,this.props.mode]}}),e=[new i.GeoJsonLayer(t)];return e.concat(this.createGuidesLayers(),this.createTooltipsLayers())}},{key:"initializeState",value:function(){c(h(A.prototype),"initializeState",this).call(this),this.setState({selectedFeatures:[],editHandles:[]})}},{key:"shouldUpdateState",value:function(t){return c(h(A.prototype),"shouldUpdateState",this).call(this,t)||t.changeFlags.stateChanged}},{key:"updateState",value:function(t){var e,n=t.props,r=t.oldProps,i=t.changeFlags;c(h(A.prototype),"updateState",this).call(this,{oldProps:r,props:n,changeFlags:i}),!i.propsOrDataChanged||0!==Object.keys(r).length&&n.mode===r.mode||("function"==typeof n.mode?e=new(0,n.mode):"string"==typeof n.mode?(e=O[n.mode],console.warn("Deprecated use of passing `mode` as a string. Pass the mode's class constructor instead.")):e=n.mode,e||(console.warn("No mode configured for ".concat(String(n.mode))),e=new I),e!==this.state.mode&&this.setState({mode:e,cursor:null}));var o=[];Array.isArray(n.selectedFeatureIndexes)&&(o=n.selectedFeatureIndexes.map((function(t){return n.data.features[t]}))),this.setState({selectedFeatures:o})}},{key:"getModeProps",value:function(t){var e=this;return{modeConfig:t.modeConfig,data:t.data,selectedIndexes:t.selectedFeatureIndexes,lastPointerMoveEvent:this.state.lastPointerMoveEvent,cursor:this.state.cursor,onEdit:function(n){e.setNeedsUpdate(),t.onEdit(n)},onUpdateCursor:function(t){e.setState({cursor:t})}}}},{key:"selectionAwareAccessor",value:function(t){var e=this;return"function"!=typeof t?t:function(n){return t(n,e.isFeatureSelected(n),e.props.mode)}}},{key:"isFeatureSelected",value:function(t){if(!this.props.data||!this.props.selectedFeatureIndexes)return!1;if(!this.props.selectedFeatureIndexes.length)return!1;var e=this.props.data.features.indexOf(t);return this.props.selectedFeatureIndexes.includes(e)}},{key:"getPickingInfo",value:function(t){var e=t.info;return t.sourceLayer.id.endsWith("guides")&&(e.isGuide=!0),e}},{key:"createGuidesLayers",value:function(){var t,e=this.getActiveMode().getGuides(this.getModeProps(this.props));return e&&e.features.length?(t="icon"===this.props.editHandleType?{type:i.IconLayer,iconAtlas:this.props.editHandleIconAtlas,iconMapping:this.props.editHandleIconMapping,sizeScale:this.props.editHandleIconSizeScale,getIcon:M(this.props.getEditHandleIcon),getSize:M(this.props.getEditHandleIconSize),getColor:M(this.props.getEditHandleIconColor),getAngle:M(this.props.getEditHandleIconAngle)}:{type:i.ScatterplotLayer,radiusScale:this.props.editHandlePointRadiusScale,stroked:this.props.editHandlePointOutline,getLineWidth:this.props.editHandlePointStrokeWidth,radiusMinPixels:this.props.editHandlePointRadiusMinPixels,radiusMaxPixels:this.props.editHandlePointRadiusMaxPixels,getRadius:M(this.props.getEditHandlePointRadius),getFillColor:M(this.props.getEditHandlePointColor),getLineColor:M(this.props.getEditHandlePointOutlineColor)},[new i.GeoJsonLayer(this.getSubLayerProps({id:"guides",data:e,fp64:this.props.fp64,_subLayerProps:{points:t},lineWidthScale:this.props.lineWidthScale,lineWidthMinPixels:this.props.lineWidthMinPixels,lineWidthMaxPixels:this.props.lineWidthMaxPixels,lineWidthUnits:this.props.lineWidthUnits,lineJointRounded:this.props.lineJointRounded,lineMiterLimit:this.props.lineMiterLimit,getLineColor:M(this.props.getTentativeLineColor),getLineWidth:M(this.props.getTentativeLineWidth),getFillColor:M(this.props.getTentativeFillColor)}))]):[]}},{key:"createTooltipsLayers",value:function(){var t=this.getActiveMode().getTooltips(this.getModeProps(this.props));return[new i.TextLayer(this.getSubLayerProps({id:"tooltips",data:t}))]}},{key:"onLayerClick",value:function(t){this.getActiveMode().handleClick(t,this.getModeProps(this.props))}},{key:"onLayerKeyUp",value:function(t){this.getActiveMode().handleKeyUp(t,this.getModeProps(this.props))}},{key:"onStartDragging",value:function(t){this.getActiveMode().handleStartDragging(t,this.getModeProps(this.props))}},{key:"onDragging",value:function(t){this.getActiveMode().handleDragging(t,this.getModeProps(this.props))}},{key:"onStopDragging",value:function(t){this.getActiveMode().handleStopDragging(t,this.getModeProps(this.props))}},{key:"onPointerMove",value:function(t){this.setState({lastPointerMoveEvent:t}),this.getActiveMode().handlePointerMove(t,this.getModeProps(this.props))}},{key:"getCursor",value:function(t){var e=t.isDragging,n=this.state.cursor;return n||(n=e?"grabbing":"grab"),n}},{key:"getActiveMode",value:function(){return this.state.mode}}])&&u(n.prototype,r),A}(A.default);e.default=N,d(N,"layerName","EditableGeoJsonLayer"),d(N,"defaultProps",P)},2465:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(3931),i=n(7359),o=n(9947),A=a(n(2444)),s=a(n(6759));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function d(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=i.ViewMode,E={type:"FeatureCollection",features:[]},x=_({mode:w},A.default.defaultProps,{data:[],selectedIndexes:[],filled:!1,stroked:!0,lineWidthScale:1,lineWidthMinPixels:1,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineWidthUnits:"pixels",getHexagons:function(t){return t.hexIds},getEditedCluster:function(t,e){return e?_({},e,{hexIds:t}):{hexIds:t}},resolution:9}),S=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(a,t);var e,n,i,s=(e=a,function(){var t,n=y(e);if(g()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d(this,t)});function a(){return f(this,a),s.apply(this,arguments)}return n=a,(i=[{key:"initializeState",value:function(){p(y(a.prototype),"initializeState",this).call(this),this.setState({tentativeHexagonIDs:[]})}},{key:"getDerivedHexagonIDs",value:function(t){return(0,o.polyfill)(t,this.props.resolution,!0)}},{key:"getDerivedHexagonID",value:function(t){return(0,o.geoToH3)(t[1],t[0],this.props.resolution)}},{key:"renderLayers",value:function(){var t=this;return[new A.default(this.getSubLayerProps({id:"editable-geojson",mode:this.props.mode,data:E,selectedFeatureIndexes:[],onEdit:function(e){var n=e.editType,r=e.editContext;switch(n){case"updateTentativeFeature":if("Polygon"===r.feature.geometry.type){var i=r.feature.geometry.coordinates,o=t.getDerivedHexagonIDs(i);t.setState({tentativeHexagonIDs:o})}else if("Point"===r.feature.geometry.type){var A=r.feature.geometry.coordinates,s=t.getDerivedHexagonID(A);t.setState({tentativeHexagonIDs:[s]})}break;case"addFeature":var a=c(t.props.data),u=t.props.modeConfig;if(u&&u.booleanOperation)if(1!==t.props.selectedIndexes.length)console.warn("booleanOperation only supported for single cluster selection");else{var l,f=new Set(t.getSelectedHexIDs()),h=new Set(t.state.tentativeHexagonIDs);switch(u.booleanOperation){case"union":default:l=c(new Set([].concat(c(f),c(h))));break;case"intersection":l=c(f).filter((function(t){return h.has(t)}));break;case"difference":l=c(f).filter((function(t){return!h.has(t)}))}var p=t.props.selectedIndexes[0],d=t.props.data[p];a[p]=t.props.getEditedCluster(l,d)}else a.push(t.props.getEditedCluster(t.state.tentativeHexagonIDs,null));t.setState({tentativeHexagonIDs:[]}),t.props.onEdit({updatedData:a})}}})),new r.H3ClusterLayer(this.getSubLayerProps({id:"hexagons",data:this.props.data,getHexagons:this.props.getHexagons})),new r.H3ClusterLayer(this.getSubLayerProps({id:"tentative-hexagons",data:[{hexIds:this.state.tentativeHexagonIDs}],getHexagons:function(t){return t.hexIds}}))]}},{key:"getSelectedHexIDs",value:function(){var t=this,e=[];return this.props.selectedIndexes.forEach((function(n){var r=t.props.data[n],i=t.props.getHexagons(r);e=e.concat(i)})),e}},{key:"getCursor",value:function(t){var e=t.isDragging,n=this.state.cursor;return n||(n=e?"grabbing":"grab"),n}}])&&h(n.prototype,i),a}(s.default);e.default=S,b(S,"layerName","EditableH3ClusterLayer"),b(S,"defaultProps",x)},6759:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(3931);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,A=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){A=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(A)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=["anyclick","pointermove","panstart","panmove","panend","keyup"],y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(o,t);var e,n,r,i=(e=o,function(){var t,n=h(e);if(f()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function o(){return u(this,o),i.apply(this,arguments)}return n=o,(r=[{key:"onLayerClick",value:function(t){}},{key:"onStartDragging",value:function(t){}},{key:"onStopDragging",value:function(t){}},{key:"onDragging",value:function(t){}},{key:"onPointerMove",value:function(t){}},{key:"onLayerKeyUp",value:function(t){}},{key:"initializeState",value:function(){this.setState({_editableLayerState:{pointerDownPicks:null,pointerDownScreenCoords:null,pointerDownMapCoords:null,eventHandler:this._forwardEventToCurrentLayer.bind(this)}}),this._addEventHandlers()}},{key:"finalizeState",value:function(){this._removeEventHandlers()}},{key:"_addEventHandlers",value:function(){var t,e=this.context.deck.eventManager,n=this.state._editableLayerState.eventHandler,r=s(g);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.on(i,n,{priority:100})}}catch(t){r.e(t)}finally{r.f()}}},{key:"_removeEventHandlers",value:function(){var t,e=this.context.deck.eventManager,n=this.state._editableLayerState.eventHandler,r=s(g);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.off(i,n)}}catch(t){r.e(t)}finally{r.f()}}},{key:"_forwardEventToCurrentLayer",value:function(t){var e=this.getCurrentLayer(),n=e["_on".concat(t.type)].bind(e);n?n(t):console.warn("no handler for mjolnir.js event ".concat(t.type))}},{key:"_onanyclick",value:function(t){var e=t.srcEvent,n=this.getScreenCoords(e),r=this.getMapCoords(n),i=this.getPicks(n);this.onLayerClick({mapCoords:r,screenCoords:n,picks:i,sourceEvent:e})}},{key:"_onkeyup",value:function(t){var e=t.srcEvent;this.onLayerKeyUp(e)}},{key:"_onpanstart",value:function(t){var e=this.getScreenCoords(t.srcEvent),n=this.getMapCoords(e),r=this.getPicks(e);this.setState({_editableLayerState:A({},this.state._editableLayerState,{pointerDownScreenCoords:e,pointerDownMapCoords:n,pointerDownPicks:r})}),this.onStartDragging({picks:r,screenCoords:e,mapCoords:n,pointerDownScreenCoords:e,pointerDownMapCoords:n,cancelPan:t.stopImmediatePropagation,sourceEvent:t.srcEvent})}},{key:"_onpanmove",value:function(t){var e=t.srcEvent,n=this.getScreenCoords(e),r=this.getMapCoords(n),i=this.state._editableLayerState,o=i.pointerDownPicks,A=i.pointerDownScreenCoords,s=i.pointerDownMapCoords,a=this.getPicks(n);this.onDragging({screenCoords:n,mapCoords:r,picks:a,pointerDownPicks:o,pointerDownScreenCoords:A,pointerDownMapCoords:s,sourceEvent:e,cancelPan:t.stopImmediatePropagation})}},{key:"_onpanend",value:function(t){var e=t.srcEvent,n=this.getScreenCoords(e),r=this.getMapCoords(n),i=this.state._editableLayerState,o=i.pointerDownPicks,s=i.pointerDownScreenCoords,a=i.pointerDownMapCoords,u=this.getPicks(n);this.onStopDragging({picks:u,screenCoords:n,mapCoords:r,pointerDownPicks:o,pointerDownScreenCoords:s,pointerDownMapCoords:a,sourceEvent:e}),this.setState({_editableLayerState:A({},this.state._editableLayerState,{pointerDownScreenCoords:null,pointerDownMapCoords:null,pointerDownPicks:null})})}},{key:"_onpointermove",value:function(t){var e=t.srcEvent,n=this.getScreenCoords(e),r=this.getMapCoords(n),i=this.state._editableLayerState,o=i.pointerDownPicks,A=i.pointerDownScreenCoords,s=i.pointerDownMapCoords,a=this.getPicks(n);this.onPointerMove({screenCoords:n,mapCoords:r,picks:a,pointerDownPicks:o,pointerDownScreenCoords:A,pointerDownMapCoords:s,sourceEvent:e})}},{key:"getPicks",value:function(t){return this.context.deck.pickMultipleObjects({x:t[0],y:t[1],layerIds:[this.props.id],radius:this.props.pickingRadius,depth:this.props.pickingDepth})}},{key:"getScreenCoords",value:function(t){return[t.clientX-this.context.gl.canvas.getBoundingClientRect().left,t.clientY-this.context.gl.canvas.getBoundingClientRect().top]}},{key:"getMapCoords",value:function(t){return this.context.viewport.unproject([t[0],t[1]])}}])&&c(n.prototype,r),o}(r.CompositeLayer);e.default=y,d(y,"layerName","EditableLayer")},7964:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(3931),i=n(3931);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(f,t);var e,n,r,o=(e=f,function(){var t,n=c(e);if(u()){var r=c(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return a(this,t)});function f(){return A(this,f),o.apply(this,arguments)}return n=f,(r=[{key:"renderLayers",value:function(){return[new i.ScatterplotLayer(Object.assign({},this.props,{id:"".concat(this.props.id,"-ScatterplotLayer"),data:this.props.data})),new i.LineLayer(Object.assign({},this.props,{id:"".concat(this.props.id,"-LineLayer"),data:this.props.data,pickable:!1,getSourcePosition:function(t){var e=t.position;return[e[0],e[1],0]},getTargetPosition:function(t){var e=t.position;return[e[0],e[1],e[2]||0]},getColor:[150,150,150,200],getStrokeWidth:3}))]}}])&&s(n.prototype,r),f}(r.CompositeLayer);e.default=h,f(h,"layerName","ElevatedEditHandleLayer"),f(h,"defaultProps",{})},6949:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(3931),i=n(3931);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(A,t);var e,n,r,o=(e=A,function(){var t,n=f(e);if(l()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return c(this,t)});function A(){return a(this,A),o.apply(this,arguments)}return n=A,(r=[{key:"renderLayers",value:function(){var t=this.props,e=t.id,n=t.getFillColor,r=t.getStrokeColor,o=t.getInnerRadius,A=t.updateTriggers;return[new i.ScatterplotLayer(s({},this.props,{id:"".concat(e,"-full"),data:this.props.data,getLineColor:r,updateTriggers:s({},A,{getStrokeColor:A.getStrokeColor})})),new i.ScatterplotLayer(s({},this.props,{id:"".concat(e,"-inner"),data:this.props.data,getFillColor:n,getRadius:o,pickable:!1,updateTriggers:s({},A,{getFillColor:A.getFillColor,getRadius:A.getInnerRadius})}))]}}])&&u(n.prototype,r),A}(r.CompositeLayer);e.default=d,p(d,"layerName","JunctionScatterplotLayer"),p(d,"defaultProps",s({},i.ScatterplotLayer.defaultProps,{getFillColor:function(t){return[0,0,0,255]},getStrokeColor:function(t){return[255,255,255,255]},getInnerRadius:function(t){return 1}}))},6484:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(r,t);var e,n=(e=r,function(){var t,n=s(e);if(A()){var r=s(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return o(this,t)});function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,r),n.call(this,Object.assign({},t,{attributes:c(t)}))}return r}(n(6200).Geometry);function c(t){for(var e=t.length,n=void 0===e?1:e,r=t.headSize,i=void 0===r?.2:r,o=t.tailWidth,A=void 0===o?.05:o,s=t.tailStart,a=void 0===s?.05:s,u=[.5,1,0,.5-i/2,1-i,0,.5+i/2,1-i,0,.5-A/2,a,0,.5+A/2,1-i,0,.5+A/2,a,0,.5-A/2,a,0,.5-A/2,1-i,0,.5+A/2,1-i,0],c=new Array(u.length),l=0;l<u.length/3;l++){var f=3*l;c[f+0]=(u[f+0]-.5)*n,c[f+1]=(u[f+1]-.5)*n,c[f+2]=0}return{positions:new Float32Array(c),normals:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]),texCoords:new Float32Array(u)}}e.default=u},9762:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,n=t.data,o=t.getPath,c=void 0===o?function(t){return t.path}:o,l=t.getDirection,f=void 0===l?function(t){return t.direction}:l,h=t.getColor,p=void 0===h?function(t){return s}:h,d=t.getMarkerPercentages,g=void 0===d?function(t){return[.5]}:d,y=t.projectFlat,v=[],m=i(n);try{for(m.s();!(e=m.n()).done;){var _,b=e.value,w=c(b),E=f(b)||a,x=p(b),S=w.map((function(t){return new r.Vector2(t)})),I=S.slice(0).reverse(),M=A(S),C=i(g(b,{lineLength:M}));try{for(C.s();!(_=C.n()).done;){var P=_.value;if(E.forward){var O=u({path:S,percentage:P,lineLength:M,color:x,object:b,projectFlat:y});v.push(O)}if(E.backward){var N=u({path:I,percentage:P,lineLength:M,color:x,object:b,projectFlat:y});v.push(N)}}}catch(t){C.e(t)}finally{C.f()}}}catch(t){m.e(t)}finally{m.f()}return v};var r=n(7871);function i(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,A=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return A=t.done,t},e:function(t){s=!0,i=t},f:function(){try{A||null==r.return||r.return()}finally{if(s)throw i}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].distance(t[n+1]);return e}var s=[0,0,0,255],a={forward:!0,backward:!1};function u(t){var e=t.path,n=t.percentage,i=t.lineLength,o=t.color,A=t.object,s=t.projectFlat,a=i*n,u=0,c=0,l=0;for(l=0;l<e.length-1&&!((u+=e[l].distance(e[l+1]))>a);l++)c=u;var f=a-c,h=e[l+1].clone().subtract(e[l]).normalize().clone().multiply(new r.Vector2(f,f)).add(e[l]),p=180*new r.Vector2(s(e[l+1])).subtract(s(e[l])).verticalAngle()/Math.PI;return{position:[h.x,h.y,0],angle:p,color:o,object:A}}},647:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(3931),i=n(3931),o=n(3931),A=c(n(6734)),s=c(n(6484)),a=c(n(9762)),u=n(1666);function c(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var A,s=t[Symbol.iterator]();!(r=(A=s.next()).done)&&(n.push(A.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=o.SimpleMeshLayer,w={mesh:new s.default({headSize:.2,tailWidth:.05})},E=Object.assign({},A.default.defaultProps,{MarkerLayer:b,markerLayerProps:w,sizeScale:100,fp64:!1,hightlightIndex:-1,highlightPoint:null,getPath:function(t){return t.path},getColor:function(t){return t.color},getMarkerColor:function(t){return[0,0,0,255]},getDirection:function(t){return t.direction},getMarkerPercentages:function(t,e){return e.lineLength>.1?[.25,.5,.75]:[.5]}}),x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(l,t);var e,n,o,c=(e=l,function(){var t,n=v(e);if(y()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return g(this,t)});function l(){return p(this,l),c.apply(this,arguments)}return n=l,(o=[{key:"initializeState",value:function(){this.state={markers:[],mesh:new s.default({headSize:.2,tailWidth:.05}),closestPoint:null}}},{key:"projectFlat",value:function(t,e,n,i){if(n===r.COORDINATE_SYSTEM.METER_OFFSETS){var o=f(e.metersToLngLatDelta(t),2),A=o[0],s=o[1],a=f(i,2),u=a[0],c=a[1];return e.projectFlat([u+A,s+c])}if(n===r.COORDINATE_SYSTEM.LNGLAT_OFFSETS){var l=f(t,2),h=l[0],p=l[1],d=f(i,2),g=d[0],y=d[1];return e.projectFlat([g+h,p+y])}return e.projectFlat(t)}},{key:"updateState",value:function(t){var e=this,n=t.props,r=t.oldProps,i=t.changeFlags;if(i.dataChanged||i.updateTriggersChanged){var o=this.props,A=o.data,s=o.getPath,u=o.getDirection,c=o.getMarkerColor,l=o.getMarkerPercentages,f=o.coordinateSystem,h=o.coordinateOrigin,p=this.context.viewport;this.state.markers=(0,a.default)({data:A,getPath:s,getDirection:u,getColor:c,getMarkerPercentages:l,projectFlat:function(t){return e.projectFlat(t,p,f,h)}}),this._recalculateClosestPoint()}i.propsChanged&&n.point!==r.point&&this._recalculateClosestPoint()}},{key:"_recalculateClosestPoint",value:function(){var t=this.props,e=t.highlightPoint,n=t.highlightIndex;if(e&&n>=0){var r=this.props.data[n],i=this.props.getPath(r),o=(0,u.getClosestPointOnPolyline)({points:i,p:e}).point;this.state.closestPoints=[{position:o}]}else this.state.closestPoints=[]}},{key:"getPickingInfo",value:function(t){var e=t.info;return Object.assign(e,{object:e.object&&e.object.path||e.object})}},{key:"renderLayers",value:function(){return[new A.default(this.props,this.getSubLayerProps({id:"paths",data:this.props.data})),new this.props.MarkerLayer(this.getSubLayerProps(Object.assign({},this.props.markerLayerProps,{id:"markers",data:this.state.markers,getOrientation:function(t){return[0,-t.angle,0]},getColor:function(t){return t.color},sizeScale:this.props.sizeScale,fp64:this.props.fp64,pickable:!1,parameters:{blend:!1,depthTest:!1}}))),this.state.closestPoints&&new i.ScatterplotLayer({id:"".concat(this.props.id,"-highlight"),data:this.state.closestPoints,fp64:this.props.fp64})]}}])&&d(n.prototype,o),l}(r.CompositeLayer);e.default=x,_(x,"layerName","PathMarkerLayer"),_(x,"defaultProps",E)},1666:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getClosestPointOnLine=i,e.getClosestPointOnPolyline=function(t){var e=t.p,n=t.points;e=new r.Vector3(e);for(var o=null,A=1/0,s=-1,a=0;a<n.length-1;++a){var u=i({p:e,p1:n[a],p2:n[a+1]}),c=e.distanceSquared(u);c<A&&(A=c,o=u,s=a)}return{point:o,index:s,p1:n[s],p2:n[s+1],distanceSquared:A,distance:Math.sqrt(A)}};var r=n(7871);function i(t){var e=t.p,n=t.p1,i=t.p2,o=t.clampToLine,A=void 0===o||o,s=new r.Vector3(i).subtract(n),a=new r.Vector3(e).subtract(n),u=s.dot(a);return A&&(u=(0,r.clamp)(u,0,1)),s.lerp(u)}},6734:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(3931),i=s(n(6200)),o=n(6200),A=s(n(7673));function s(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function f(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t){var e=t.source,n=t.code,r=void 0===n?"":n;return e.replace(/}[^{}]*$/,r.concat("\n}\n"))}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(a,t);var e,n,r,s=(e=a,function(){var t,n=p(e);if(h()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function a(){return u(this,a),s.apply(this,arguments)}return n=a,(r=[{key:"getShaders",value:function(){var t=l(p(a.prototype),"getShaders",this).call(this);return Object.assign({},t,{modules:t.modules.concat([A.default]),vs:y({source:t.vs,code:"  outline_setUV(gl_Position);\n  outline_setZLevel(instanceZLevel);\n"}),fs:y({source:t.fs,code:"  gl_FragColor = outline_filterColor(gl_FragColor);\n"})})}},{key:"initializeState",value:function(t){l(p(a.prototype),"initializeState",this).call(this,t),this.setState({outlineFramebuffer:new o.Framebuffer(t.gl),dummyTexture:new o.Texture2D(t.gl)}),this.state.attributeManager.addInstanced({instanceZLevel:{size:1,type:i.default.UNSIGNED_BYTE,update:this.calculateZLevels,accessor:"getZLevel"}})}},{key:"draw",value:function(t){t.moduleParameters,t.parameters;var e=t.uniforms,n=(t.context,this.props),r=n.rounded,o=n.miterLimit,A=n.widthScale,s=n.widthMinPixels,a=n.widthMaxPixels,u=n.dashJustified;e=Object.assign({},e,{jointType:Number(r),alignMode:Number(u),widthScale:A,miterLimit:o,widthMinPixels:s,widthMaxPixels:a});var c=this.state,l=c.outlineFramebuffer,f=c.dummyTexture;l.resize(),l.clear({color:!0,depth:!0}),this.state.model.updateModuleSettings({outlineEnabled:!0,outlineRenderShadowmap:!0,outlineShadowmap:f}),this.state.model.draw({uniforms:Object.assign({},e,{jointType:0,widthScale:1.3*this.props.widthScale}),parameters:{depthTest:!1,blendEquation:i.default.MAX},framebuffer:l}),this.state.model.updateModuleSettings({outlineEnabled:!0,outlineRenderShadowmap:!1,outlineShadowmap:l}),this.state.model.draw({uniforms:Object.assign({},e,{jointType:Number(r),widthScale:this.props.widthScale}),parameters:{depthTest:!1}})}},{key:"calculateZLevels",value:function(t){var e=this.props.getZLevel,n=this.state.pathTesselator;t.value=n._updateAttribute({target:t.value,size:1,getValue:function(t,n){return[e(t,n)||0]}})}}])&&c(n.prototype,r),a}(r.PathLayer);e.default=v,g(v,"layerName","PathOutlineLayer"),g(v,"defaultProps",{getZLevel:{type:"accessor",value:0}})},1845:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SELECTION_TYPE=void 0;var r,i=n(3931),o=n(3931),A=n(4102),s=l(n(5419)),a=l(n(8727)),u=n(7359),c=l(n(2444));function l(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){S(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var A,s=t[Symbol.iterator]();!(r=(A=s.next()).done)&&(n.push(A.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||y(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){if(t){if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I={NONE:null,RECTANGLE:"rectangle",POLYGON:"polygon"};e.SELECTION_TYPE=I;var M=(S(r={},I.RECTANGLE,u.DrawRectangleMode),S(r,I.POLYGON,u.DrawPolygonMode),r),C=S({},I.RECTANGLE,{dragToDraw:!0}),P={selectionType:I.RECTANGLE,layerIds:[],onSelect:function(){}},O={type:"FeatureCollection",features:[]},N="selection-blocker",R=["lineWidthScale","lineWidthMinPixels","lineWidthMaxPixels","lineWidthUnits","lineJointRounded","lineMiterLimit","pointRadiusScale","pointRadiusMinPixels","pointRadiusMaxPixels","lineDashJustified","getLineColor","getFillColor","getRadius","getLineWidth","getLineDashArray","getTentativeLineDashArray","getTentativeLineColor","getTentativeFillColor","getTentativeLineWidth"],D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(l,t);var e,n,r,i=(e=l,function(){var t,n=E(e);if(w()){var r=E(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return b(this,t)});function l(){return m(this,l),i.apply(this,arguments)}return n=l,(r=[{key:"_selectRectangleObjects",value:function(t){var e=this.props,n=e.layerIds,r=e.onSelect,i=g(this.context.viewport.project(t[0][0]),2),o=i[0],A=i[1],s=g(this.context.viewport.project(t[0][2]),2),a=s[0],u=s[1];r({pickingInfos:this.context.deck.pickObjects({x:Math.min(o,a),y:Math.min(A,u),width:Math.abs(a-o),height:Math.abs(u-A),layerIds:n})})}},{key:"_selectPolygonObjects",value:function(t){var e,n=this,r=this.props,i=r.layerIds,o=r.onSelect,u=t[0].map((function(t){return n.context.viewport.project(t)})),c=u.map((function(t){return t[0]})),l=u.map((function(t){return t[1]})),f=Math.min.apply(Math,d(c)),h=Math.min.apply(Math,d(l)),p=Math.max.apply(Math,d(c)),g=Math.max.apply(Math,d(l)),y=(0,A.polygon)(t),v=(0,s.default)(y,50);try{e=(0,a.default)(v,y)}catch(t){return void console.log("turfDifference() error",t)}this.setState({pendingPolygonSelection:{bigPolygon:e}});var m="".concat(this.props.id,"-").concat(N);setTimeout((function(){var t=n.context.deck.pickObjects({x:f,y:h,width:p-f,height:g-h,layerIds:[m].concat(d(i))});o({pickingInfos:t.filter((function(t){return t.layer.id!==n.props.id}))})}),250)}},{key:"renderLayers",value:function(){var t=this,e=this.state.pendingPolygonSelection,n=M[this.props.selectionType]||u.ViewMode,r=C[this.props.selectionType],i={};R.forEach((function(e){void 0!==t.props[e]&&(i[e]=t.props[e])}));var A=[new c.default(this.getSubLayerProps(p({id:"selection-geojson",pickable:!0,mode:n,modeConfig:r,selectedFeatureIndexes:[],data:O,onEdit:function(e){var n=e.updatedData;if("addFeature"===e.editType){var r=n.features[0].geometry.coordinates;t.props.selectionType===I.RECTANGLE?t._selectRectangleObjects(r):t.props.selectionType===I.POLYGON&&t._selectPolygonObjects(r)}}},i)))];if(e){var s=e.bigPolygon;A.push(new o.PolygonLayer(this.getSubLayerProps({id:N,pickable:!0,stroked:!1,opacity:1,data:[s],getLineColor:function(t){return[0,0,0,1]},getFillColor:function(t){return[0,0,0,1]},getPolygon:function(t){return t.geometry.coordinates}})))}return A}},{key:"shouldUpdateState",value:function(t){var e=t.changeFlags,n=e.stateChanged,r=e.propsOrDataChanged;return n||r}}])&&_(n.prototype,r),l}(i.CompositeLayer);e.default=D,S(D,"layerName","SelectionLayer"),S(D,"defaultProps",P)},7673:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={outlineEnabled:!1,outlineRenderShadowmap:!1,outlineShadowmap:null},r={name:"outline",vs:"attribute float instanceZLevel;\nvarying float outline_vzLevel;\nvarying vec4 outline_vPosition;\n\n// Set the z level for the outline shadowmap rendering\nvoid outline_setZLevel(float zLevel) {\n  outline_vzLevel = zLevel;\n}\n\n// Store an adjusted position for texture2DProj\nvoid outline_setUV(vec4 position) {\n  // mat4(\n  //   0.5, 0.0, 0.0, 0.0,\n  //   0.0, 0.5, 0.0, 0.0,\n  //   0.0, 0.0, 0.5, 0.0,\n  //   0.5, 0.5, 0.5, 1.0\n  // ) * position;\n  outline_vPosition = vec4(position.xyz * 0.5 + position.w * 0.5, position.w);\n}\n",fs:"uniform bool outline_uEnabled;\nuniform bool outline_uRenderOutlines;\nuniform sampler2D outline_uShadowmap;\n\nvarying float outline_vzLevel;\n// varying vec2 outline_vUV;\nvarying vec4 outline_vPosition;\n\nconst float OUTLINE_Z_LEVEL_ERROR = 0.01;\n\n// Return a darker color in shadowmap\nvec4 outline_filterShadowColor(vec4 color) {\n  return vec4(outline_vzLevel / 255., outline_vzLevel / 255., outline_vzLevel / 255., 1.);\n}\n\n// Return a darker color if in shadowmap\nvec4 outline_filterDarkenColor(vec4 color) {\n  if (outline_uEnabled) {\n    float maxZLevel;\n    if (outline_vPosition.q > 0.0) {\n      maxZLevel = texture2DProj(outline_uShadowmap, outline_vPosition).r * 255.;\n    } else {\n      discard;\n    }\n    if (maxZLevel < outline_vzLevel + OUTLINE_Z_LEVEL_ERROR) {\n      vec4(color.rgb * 0.5, color.a);\n    } else {\n      discard;\n    }\n  }\n  return color;\n}\n\n// if enabled and rendering outlines - Render depth to shadowmap\n// if enabled and rendering colors - Return a darker color if in shadowmap\n// if disabled, just return color\nvec4 outline_filterColor(vec4 color) {\n  if (outline_uEnabled) {\n    return outline_uRenderOutlines ?\n      outline_filterShadowColor(color) :\n      outline_filterDarkenColor(color);\n  }\n  return color;\n}\n",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,e=t.outlineEnabled,r=t.outlineRenderShadowmap,i=t.outlineShadowmap,o={};return void 0!==e&&(o.outline_uEnabled=e),void 0!==r&&(o.outline_uRenderOutlines=r),void 0!==i&&(o.outline_uShadowmap=i),o}};e.default=r},1399:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MAX_ARROWS=e.DEFAULT_ARROWS=e.ArrowStyles=void 0,e.ArrowStyles={NONE:0,FORWARD:1,BACKWARD:2,BOTH:3},e.DEFAULT_ARROWS=1,e.MAX_ARROWS=3},9545:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toDeckColor=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[255,0,0,255];return Array.isArray(t)?[255*t[0],255*t[1],255*t[2],255*t[3]]:e},e.recursivelyTraverseNestedArrays=function t(e,n,r){if(!Array.isArray(e[0]))return!0;for(var i=0;i<e.length;i++)if(t(e[i],[].concat(function(t){if(Array.isArray(t))return l(t)}(o=n)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(o)||c(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[i]),r)){r(e,n);break}var o;return!1},e.generatePointsParallelToLinePoints=function(t,e,n){var s={type:"LineString",coordinates:[t,e]},a=(0,A.point)(n),u=(0,o.default)(a,s),c=(0,i.default)(t,e),l=(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])<0?c-90:c-270,f=(0,r.default)(e,u,l),h=(0,r.default)(t,u,l);return[f.geometry.coordinates,h.geometry.coordinates]},e.distance2d=f,e.mix=h,e.nearestPointOnProjectedLine=function(t,e,n){var r=new s.default(n),i=t.geometry.coordinates.map((function(t){var e=u(t,3),n=e[0],i=e[1],o=e[2],A=void 0===o?0:o;return r.project([n,i,A])})),o=u(r.project(e.geometry.coordinates),2),A=o[0],a=o[1],c=1/0,l={};i.forEach((function(t,e){var n=u(t,2),r=n[0],o=n[1];if(0!==e){var s=u(i[e-1],2),f=s[0],h=s[1],p=h-o,d=r-f,g=f*o-r*h,y=p*p+d*d,v=Math.abs(p*A+d*a+g)/Math.sqrt(y);v<c&&(c=v,l={index:e,x0:(d*(d*A-p*a)-p*g)/y,y0:(p*(-d*A+p*a)-d*g)/y})}}));var p=l,d=p.index,g=p.x0,y=p.y0,v=u(i[d-1],3),m=v[0],_=v[1],b=v[2],w=void 0===b?0:b,E=u(i[d],3),x=E[0],S=E[1],I=E[2],M=void 0===I?0:I,C=f(m,_,x,S),P=h(w,M,f(m,_,g,y)/C);return{type:"Feature",geometry:{type:"Point",coordinates:r.unproject([g,y,P])},properties:{dist:c,index:d-1}}};var r=a(n(3737)),i=a(n(1208)),o=a(n(3892)),A=n(4102),s=a(n(2004));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var A,s=t[Symbol.iterator]();!(r=(A=s.next()).done)&&(n.push(A.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function h(t,e,n){return e*n+t*(1-n)}},5913:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(1208)),o=r(n(3737)),A=r(n(1013)),s=n(4102),a=n(611);e.default=function(t,e,n){void 0===n&&(n={});for(var r=a.getGeom(t).coordinates,u=0,c=0;c<r.length&&!(e>=u&&c===r.length-1);c++){if(u>=e){var l=e-u;if(l){var f=i.default(r[c],r[c-1])-180;return o.default(r[c],l,f,n)}return s.point(r[c])}u+=A.default(r[c],r[c+1],n)}return s.point(r[r.length-1])}},1070:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1540),i=6378137;function o(t){var e=0;if(t&&t.length>0){e+=Math.abs(A(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(A(t[n]))}return e}function A(t){var e,n,r,o,A,a,u=0,c=t.length;if(c>2){for(a=0;a<c;a++)a===c-2?(r=c-2,o=c-1,A=0):a===c-1?(r=c-1,o=0,A=1):(r=a,o=a+1,A=a+2),e=t[r],n=t[o],u+=(s(t[A][0])-s(e[0]))*Math.sin(s(n[1]));u=u*i*i/2}return u}function s(t){return t*Math.PI/180}e.default=function(t){return r.geomReduce(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return o(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=o(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}},3652:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4102);e.default=function(t,e){void 0===e&&(e={});var n=Number(t[0]),i=Number(t[1]),o=Number(t[2]),A=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,i],a=[n,A],u=[o,A],c=[o,i];return r.polygon([[s,c,u,a,s]],e.properties,{bbox:t,id:e.id})}},9705:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1540);function i(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}i.default=i,e.default=i},1208:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4102),i=n(611);e.default=function t(e,n,o){if(void 0===o&&(o={}),!0===o.final)return function(e,n){var r=t(n,e);return(r+180)%360}(e,n);var A=i.getCoord(e),s=i.getCoord(n),a=r.degreesToRadians(A[0]),u=r.degreesToRadians(s[0]),c=r.degreesToRadians(A[1]),l=r.degreesToRadians(s[1]),f=Math.sin(u-a)*Math.cos(l),h=Math.cos(c)*Math.sin(l)-Math.sin(c)*Math.cos(l)*Math.cos(u-a);return r.radiansToDegrees(Math.atan2(f,h))}},3809:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(611);e.default=function(t){for(var e,n,i=r.getCoords(t),o=0,A=1;A<i.length;)e=n||i[0],o+=((n=i[A])[0]-e[0])*(n[1]+e[1]),A++;return o>0}},8147:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(611);function i(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var A=e[i][0],s=e[i][1],a=e[o][0],u=e[o][1];if(t[1]*(A-a)+s*(a-t[0])+u*(t[0]-A)==0&&(A-t[0])*(a-t[0])<=0&&(s-t[1])*(u-t[1])<=0)return!n;s>t[1]!=u>t[1]&&t[0]<(a-A)*(t[1]-s)/(u-s)+A&&(r=!r)}return r}e.default=function(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var o=r.getCoord(t),A=r.getGeom(e),s=A.type,a=e.bbox,u=A.coordinates;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(o,a))return!1;"Polygon"===s&&(u=[u]);for(var c=!1,l=0;l<u.length&&!c;l++)if(i(o,u[l][0],n.ignoreBoundary)){for(var f=!1,h=1;h<u[l].length&&!f;)i(o,u[l][h],!n.ignoreBoundary)&&(f=!0),h++;f||(c=!0)}return c}},5419:(t,e,n)=>{"use strict";var r=n(8230),i=n(675),o=n(1540),A=n(1688),s=n(4102);function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=a(r);function c(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var A=[];switch(t.type){case"GeometryCollection":return o.geomEach(t,(function(t){var n=l(t,e,r,i);n&&A.push(n)})),s.featureCollection(A);case"FeatureCollection":return o.featureEach(t,(function(t){var n=l(t,e,r,i);n&&o.featureEach(n,(function(t){t&&A.push(t)}))})),s.featureCollection(A)}return l(t,e,r,i)}function l(t,e,n,r){var a=t.properties||{},c="Feature"===t.type?t.geometry:t;if("GeometryCollection"===c.type){var d=[];return o.geomEach(t,(function(t){var i=l(t,e,n,r);i&&d.push(i)})),s.featureCollection(d)}var g=function(t){var e=u.default(t).geometry.coordinates,n=[-e[0],-e[1]];return A.geoAzimuthalEquidistant().rotate(n).scale(s.earthRadius)}(c),y={type:c.type,coordinates:h(c.coordinates,g)},v=(new i.GeoJSONReader).read(y),m=s.radiansToLength(s.lengthToRadians(e,n),"meters"),_=i.BufferOp.bufferOp(v,m,r);if(!f((_=(new i.GeoJSONWriter).write(_)).coordinates)){var b={type:_.type,coordinates:p(_.coordinates,g)};return s.feature(b,a)}}function f(t){return Array.isArray(t[0])?f(t[0]):isNaN(t[0])}function h(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return h(t,e)}))}function p(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return p(t,e)}))}t.exports=c,t.exports.default=c},8230:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(9705)),o=n(4102);e.default=function(t,e){void 0===e&&(e={});var n=i.default(t),r=(n[0]+n[2])/2,A=(n[1]+n[3])/2;return o.point([r,A],e.properties,e)}},6338:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1540),i=n(4102);e.default=function(t,e){void 0===e&&(e={});var n=0,o=0,A=0;return r.coordEach(t,(function(t){n+=t[0],o+=t[1],A++}),!0),i.point([n/A,o/A],e.properties)}},265:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(3737)),o=n(4102);e.default=function(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,A=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},s=[],a=0;a<r;a++)s.push(i.default(t,e,-360*a/r,n).geometry.coordinates);return s.push(s[0]),o.polygon([s],A)}},6565:(t,e)=>{"use strict";function n(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=r(t.properties),e.geometry=i(t.geometry),e}function r(t){var e={};return t?(Object.keys(t).forEach((function(n){var i=t[n];"object"==typeof i?null===i?e[n]=null:Array.isArray(i)?e[n]=i.map((function(t){return t})):e[n]=r(i):e[n]=i})),e):e}function i(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return i(t)})),e):(e.coordinates=o(t.coordinates),e)}function o(t){var e=t;return"object"!=typeof e[0]?e.slice():e.map((function(t){return o(t)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return n(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return n(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return i(t);default:throw new Error("unknown GeoJSON type")}}},3737:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4102),i=n(611);e.default=function(t,e,n,o){void 0===o&&(o={});var A=i.getCoord(t),s=r.degreesToRadians(A[0]),a=r.degreesToRadians(A[1]),u=r.degreesToRadians(n),c=r.lengthToRadians(e,o.units),l=Math.asin(Math.sin(a)*Math.cos(c)+Math.cos(a)*Math.sin(c)*Math.cos(u)),f=s+Math.atan2(Math.sin(u)*Math.sin(c)*Math.cos(a),Math.cos(c)-Math.sin(a)*Math.sin(l)),h=r.radiansToDegrees(f),p=r.radiansToDegrees(l);return r.point([h,p],o.properties)}},8727:(t,e,n)=>{"use strict";var r=n(2676),i=n(4102),o=n(611);function A(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=A(r);function a(t,e){var n=o.getGeom(t),r=o.getGeom(e),A=t.properties||{},a=s.default.difference(n.coordinates,r.coordinates);return 0===a.length?null:1===a.length?i.polygon(a[0],A):i.multiPolygon(a,A)}t.exports=a,t.exports.default=a},1013:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(611),i=n(4102);e.default=function(t,e,n){void 0===n&&(n={});var o=r.getCoord(t),A=r.getCoord(e),s=i.degreesToRadians(A[1]-o[1]),a=i.degreesToRadians(A[0]-o[0]),u=i.degreesToRadians(o[1]),c=i.degreesToRadians(A[1]),l=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(u)*Math.cos(c);return i.radiansToLength(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n.units)}},1211:(t,e,n)=>{"use strict";var r=n(4102),i=n(2054),o=n(67),A=n(611);function s(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=s(i),u=s(o);function c(t,e,n,i){var o=(i=i||{}).steps||64,s=i.units||"kilometers",c=i.angle||0,f=i.pivot||t,h=i.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!r.isObject(i))throw new Error("options must be an object");if(!r.isNumber(o))throw new Error("steps must be a number");if(!r.isNumber(c))throw new Error("angle must be a number");var p=A.getCoord(t);if("degrees"===s)var d=r.degreesToRadians(c);else e=a.default(t,e,90,{units:s}),n=a.default(t,n,0,{units:s}),e=A.getCoord(e)[0]-p[0],n=A.getCoord(n)[1]-p[1];for(var g=[],y=0;y<o;y+=1){var v=-360*y/o,m=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(l(v),2)),_=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(l(v),2));if(v<-90&&v>=-270&&(m=-m),v<-180&&v>=-360&&(_=-_),"degrees"===s){var b=m*Math.cos(d)+_*Math.sin(d),w=_*Math.cos(d)-m*Math.sin(d);m=b,_=w}g.push([m+p[0],_+p[1]])}return g.push(g[0]),"degrees"===s?r.polygon([g],h):u.default(r.polygon([g],h),c,{pivot:f})}function l(t){var e=t*Math.PI/180;return Math.tan(e)}t.exports=c,t.exports.default=c},4102:(t,e)=>{"use strict";function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!h(t[0])||!h(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var A=o[i];if(A.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<A[A.length-1].length;s++)if(A[A.length-1][s]!==A[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function A(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function s(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function a(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function c(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function l(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function f(t){return t%(2*Math.PI)*180/Math.PI}function h(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return a(e).geometry;case"MultiLineString":return s(e).geometry;case"MultiPolygon":return u(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),A(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),A(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),A(t.map((function(t){return o(t,e)})),n)},e.featureCollection=A,e.multiLineString=s,e.multiPoint=a,e.multiPolygon=u,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=c,e.lengthToRadians=l,e.lengthToDegrees=function(t,e){return f(l(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(l(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=h,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!h(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},4170:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(4102),o=n(611),A=r(n(2676));e.default=function(t,e,n){void 0===n&&(n={});var r=o.getGeom(t),s=o.getGeom(e),a=A.default.intersection(r.coordinates,s.coordinates);return 0===a.length?null:1===a.length?i.polygon(a[0],n.properties):i.multiPolygon(a,n.properties)}},611:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4102);e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&r.isNumber(e[0])&&r.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},3663:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(4102),o=n(611),A=r(n(4590)),s=n(1540),a=r(n(1787));function u(t,e){var n=o.getCoords(t),r=o.getCoords(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var A=n[0][0],s=n[0][1],a=n[1][0],u=n[1][1],c=r[0][0],l=r[0][1],f=r[1][0],h=r[1][1],p=(h-l)*(a-A)-(f-c)*(u-s);if(0===p)return null;var d=((f-c)*(s-l)-(h-l)*(A-c))/p,g=((a-A)*(s-l)-(u-s)*(A-c))/p;if(d>=0&&d<=1&&g>=0&&g<=1){var y=A+d*(a-A),v=s+d*(u-s);return i.point([y,v])}return null}e.default=function(t,e){var n={},r=[];if("LineString"===t.type&&(t=i.feature(t)),"LineString"===e.type&&(e=i.feature(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var c=u(t,e);return c&&r.push(c),i.featureCollection(r)}var l=a.default();return l.load(A.default(e)),s.featureEach(A.default(t),(function(t){s.featureEach(l.search(t),(function(e){var i=u(t,e);if(i){var A=o.getCoords(i).join(",");n[A]||(n[A]=!0,r.push(i))}}))})),i.featureCollection(r)}},4590:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4102),i=n(611),o=n(1540);e.default=function(t){if(!t)throw new Error("geojson is required");var e=[];return o.flattenEach(t,(function(t){!function(t,e){var n=[],o=t.geometry;if(null!==o){switch(o.type){case"Polygon":n=i.getCoords(o);break;case"LineString":n=[i.getCoords(o)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,i){var o,A,s,a,u,c,l=r.lineString([t,i],e);return l.bbox=(A=i,s=(o=t)[0],a=o[1],[s<(u=A[0])?s:u,a<(c=A[1])?a:c,s>u?s:u,a>c?a:c]),n.push(l),i})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),r.featureCollection(e)}},1540:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4102);function i(t,e,n){if(null!==t)for(var r,o,A,s,a,u,c,l,f=0,h=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,y=d?t.features.length:1,v=0;v<y;v++){a=(l=!!(c=d?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<a;m++){var _=0,b=0;if(null!==(s=l?c.geometries[m]:c)){u=s.coordinates;var w=s.type;switch(f=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,h,v,_,b))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],h,v,_,b))return!1;h++,"MultiPoint"===w&&_++}"LineString"===w&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(o=0;o<u[r].length-f;o++){if(!1===e(u[r][o],h,v,_,b))return!1;h++}"MultiLineString"===w&&_++,"Polygon"===w&&b++}"Polygon"===w&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,o=0;o<u[r].length;o++){for(A=0;A<u[r][o].length-f;A++){if(!1===e(u[r][o][A],h,v,_,b))return!1;h++}b++}_++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===i(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function A(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function s(t,e){var n,r,i,o,A,s,a,u,c,l,f=0,h="FeatureCollection"===t.type,p="Feature"===t.type,d=h?t.features.length:1;for(n=0;n<d;n++){for(s=h?t.features[n].geometry:p?t.geometry:t,u=h?t.features[n].properties:p?t.properties:{},c=h?t.features[n].bbox:p?t.bbox:void 0,l=h?t.features[n].id:p?t.id:void 0,A=(a=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<A;i++)if(null!==(o=a?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,u,c,l))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,u,c,l))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,u,c,l))return!1;f++}}function a(t,e){s(t,(function(t,n,i,o,A){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:A}),n,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var u=0;u<t.coordinates.length;u++){var c={type:s,coordinates:t.coordinates[u]};if(!1===e(r.feature(c,i),n,u))return!1}}))}function u(t,e){a(t,(function(t,n,o){var A=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var a,u=0,c=0,l=0;return!1!==i(t,(function(i,s,f,h,p){if(void 0===a||n>u||h>c||p>l)return a=i,u=n,c=h,l=p,void(A=0);var d=r.lineString([a,i],t.properties);if(!1===e(d,n,o,p,A))return!1;A++,a=i}))&&void 0}}}))}function c(t,e){if(!t)throw new Error("geojson is required");a(t,(function(t,n,i){if(null!==t.geometry){var o=t.geometry.type,A=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<A.length;s++)if(!1===e(r.lineString(A[s],t.properties),n,i,s))return!1}}}))}e.coordAll=function(t){var e=[];return i(t,(function(t){e.push(t)})),e},e.coordEach=i,e.coordReduce=function(t,e,n,r){var o=n;return i(t,(function(t,r,i,A,s){o=0===r&&void 0===n?t:e(o,t,r,i,A,s)}),r),o},e.featureEach=A,e.featureReduce=function(t,e,n){var r=n;return A(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.findPoint=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,A=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return r.point(u,a,e);case"MultiPoint":return o<0&&(o=u.length+o),r.point(u[o],a,e);case"LineString":return s<0&&(s=u.length+s),r.point(u[s],a,e);case"Polygon":return A<0&&(A=u.length+A),s<0&&(s=u[A].length+s),r.point(u[A][s],a,e);case"MultiLineString":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),r.point(u[o][s],a,e);case"MultiPolygon":return o<0&&(o=u.length+o),A<0&&(A=u[o].length+A),s<0&&(s=u[o][A].length-s),r.point(u[o][A][s],a,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,A=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),a=a||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),r.lineString([u[s],u[s+1]],a,e);case"Polygon":return A<0&&(A=u.length+A),s<0&&(s=u[A].length+s-1),r.lineString([u[A][s],u[A][s+1]],a,e);case"MultiLineString":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),r.lineString([u[o][s],u[o][s+1]],a,e);case"MultiPolygon":return o<0&&(o=u.length+o),A<0&&(A=u[o].length+A),s<0&&(s=u[o][A].length-s-1),r.lineString([u[o][A][s],u[o][A][s+1]],a,e)}throw new Error("geojson is invalid")},e.flattenEach=a,e.flattenReduce=function(t,e,n){var r=n;return a(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},e.geomEach=s,e.geomReduce=function(t,e,n){var r=n;return s(t,(function(t,i,o,A,s){r=0===i&&void 0===n?t:e(r,t,i,o,A,s)})),r},e.lineEach=c,e.lineReduce=function(t,e,n){var r=n;return c(t,(function(t,i,o,A){r=0===i&&void 0===n?t:e(r,t,i,o,A)})),r},e.propEach=o,e.propReduce=function(t,e,n){var r=n;return o(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.segmentEach=u,e.segmentReduce=function(t,e,n){var r=n,i=!1;return u(t,(function(t,o,A,s,a){r=!1===i&&void 0===n?t:e(r,t,o,A,s,a),i=!0})),r}},3807:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(1208)),o=r(n(1013)),A=r(n(3737)),s=r(n(3663)),a=n(1540),u=n(4102),c=n(611);e.default=function(t,e,n){void 0===n&&(n={});var r=u.point([1/0,1/0],{dist:1/0}),l=0;return a.flattenEach(t,(function(t){for(var a=c.getCoords(t),f=0;f<a.length-1;f++){var h=u.point(a[f]);h.properties.dist=o.default(e,h,n);var p=u.point(a[f+1]);p.properties.dist=o.default(e,p,n);var d=o.default(h,p,n),g=Math.max(h.properties.dist,p.properties.dist),y=i.default(h,p),v=A.default(e,g,y+90,n),m=A.default(e,g,y-90,n),_=s.default(u.lineString([v.geometry.coordinates,m.geometry.coordinates]),u.lineString([h.geometry.coordinates,p.geometry.coordinates])),b=null;_.features.length>0&&((b=_.features[0]).properties.dist=o.default(e,b,n),b.properties.location=l+o.default(h,b,n)),h.properties.dist<r.properties.dist&&((r=h).properties.index=f,r.properties.location=l),p.properties.dist<r.properties.dist&&((r=p).properties.index=f+1,r.properties.location=l+d),b&&b.properties.dist<r.properties.dist&&((r=b).properties.index=f),l+=d}})),r}},3892:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(1013)),o=n(4102),A=n(611),s=n(1540),a=r(n(6213));function u(t,e){return t[0]*e[0]+t[1]*e[1]}function c(t,e,n){return"planar"===n.method?a.default(t,e,n):i.default(t,e,n)}e.default=function(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=o.point(t):"Point"===t.type?t=o.feature(t):A.featureOf(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=o.lineString(e):"LineString"===e.type?e=o.feature(e):A.featureOf(e,"LineString","line");var r=1/0,i=t.geometry.coordinates;return s.segmentEach(e,(function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],A=function(t,e,n,r){var i=[n[0]-e[0],n[1]-e[1]],o=u([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return c(t,e,{method:r.method,units:"degrees"});var A=u(i,i);if(A<=o)return c(t,n,{method:r.method,units:"degrees"});var s=o/A;return c(t,[e[0]+s*i[0],e[1]+s*i[1]],{method:r.method,units:"degrees"})}(i,e,o,n);A<r&&(r=A)})),o.convertLength(r,"degrees",n.units)}},7383:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4102),i=n(611);function o(t,e){return void 0===e&&(e={}),s(i.getGeom(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function A(t,e){void 0===e&&(e={});var n=i.getGeom(t).coordinates,o=e.properties?e.properties:"Feature"===t.type?t.properties:{},A=[];return n.forEach((function(t){A.push(s(t,o))})),r.featureCollection(A)}function s(t,e){return t.length>1?r.multiLineString(t,e):r.lineString(t[0],e)}e.default=function(t,e){void 0===e&&(e={});var n=i.getGeom(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return o(n,e);case"MultiPolygon":return A(n,e);default:throw new Error("invalid poly")}},e.polygonToLine=o,e.multiPolygonToLine=A,e.coordsToLine=s},1138:(t,e,n)=>{"use strict";var r=n(6565),i=n(3809),o=n(1540),A=n(611),s=n(4102);function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=a(r),c=a(i);function l(t,e){if(e=e||{},!s.isObject(e))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=u.default(t));var i=[];switch(t.type){case"GeometryCollection":return o.geomEach(t,(function(t){f(t,n)})),t;case"FeatureCollection":return o.featureEach(t,(function(t){o.featureEach(f(t,n),(function(t){i.push(t)}))})),s.featureCollection(i)}return f(t,n)}function f(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return o.geomEach(t,(function(t){f(t,e)})),t;case"LineString":return h(A.getCoords(t),e),t;case"Polygon":return p(A.getCoords(t),e),t;case"MultiLineString":return A.getCoords(t).forEach((function(t){h(t,e)})),t;case"MultiPolygon":return A.getCoords(t).forEach((function(t){p(t,e)})),t;case"Point":case"MultiPoint":return t}}function h(t,e){c.default(t)===e&&t.reverse()}function p(t,e){c.default(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)c.default(t[n])===e&&t[n].reverse()}t.exports=l,t.exports.default=l},6912:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4102),i=n(611);function o(t,e){var n=r.degreesToRadians(t[1]),i=r.degreesToRadians(e[1]),o=r.degreesToRadians(e[0]-t[0]);o>Math.PI&&(o-=2*Math.PI),o<-Math.PI&&(o+=2*Math.PI);var A=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),s=Math.atan2(o,A);return(r.radiansToDegrees(s)+360)%360}e.default=function(t,e,n){var r;return void 0===n&&(n={}),(r=n.final?o(i.getCoord(e),i.getCoord(t)):o(i.getCoord(t),i.getCoord(e)))>180?-(360-r):r}},2054:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4102),i=n(611);e.default=function(t,e,n,o){void 0===o&&(o={});var A=e<0,s=r.convertLength(Math.abs(e),o.units,"meters");A&&(s=-Math.abs(s));var a=i.getCoord(t),u=function(t,e,n,i){var o=e/(i=void 0===i?r.earthRadius:Number(i)),A=t[0]*Math.PI/180,s=r.degreesToRadians(t[1]),a=r.degreesToRadians(n),u=o*Math.cos(a),c=s+u;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var l=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),f=Math.abs(l)>1e-11?u/l:Math.cos(s);return[(180*(A+o*Math.sin(a)/f)/Math.PI+540)%360-180,180*c/Math.PI]}(a,s,n);return u[0]+=u[0]-a[0]>180?-360:a[0]-u[0]>180?360:0,r.point(u,o.properties)}},6213:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4102),i=n(611);e.default=function(t,e,n){void 0===n&&(n={});var o=i.getCoord(t),A=i.getCoord(e);A[0]+=A[0]-o[0]>180?-360:o[0]-A[0]>180?360:0;var s=function(t,e,n){var i=n=void 0===n?r.earthRadius:Number(n),o=t[1]*Math.PI/180,A=e[1]*Math.PI/180,s=A-o,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var u=Math.log(Math.tan(A/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),c=Math.abs(u)>1e-11?s/u:Math.cos(o);return Math.sqrt(s*s+c*c*a*a)*i}(o,A);return r.convertLength(s,"meters",n.units)}},67:(t,e,n)=>{"use strict";var r=n(6338),i=n(6912),o=n(6213),A=n(2054),s=n(6565),a=n(1540),u=n(611),c=n(4102);function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var f=l(r),h=l(i),p=l(o),d=l(A),g=l(s);function y(t,e,n){if(n=n||{},!c.isObject(n))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=f.default(t)),!1!==i&&void 0!==i||(t=g.default(t)),a.coordEach(t,(function(t){var n=h.default(r,t)+e,i=p.default(r,t),o=u.getCoords(d.default(r,i,n));t[0]=o[0],t[1]=o[1]}))),t}t.exports=y,t.exports.default=y},7517:(t,e,n)=>{"use strict";var r=n(6565),i=n(8230),o=n(6338),A=n(9705),s=n(6912),a=n(6213),u=n(2054),c=n(1540),l=n(4102),f=n(611);function h(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var p=h(r),d=h(i),g=h(o),y=h(A),v=h(s),m=h(a),_=h(u);function b(t,e,n){if(n=n||{},!l.isObject(n))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=p.default(t)),"FeatureCollection"!==t.type||o?w(t,e,r):(c.featureEach(t,(function(n,i){t.features[i]=w(n,e,r)})),t)}function w(t,e,n){var r="Point"===f.getType(t);return n=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return f.getCoord(e);var n=t.bbox?t.bbox:y.default(t),r=n[0],i=n[1],o=n[2],A=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return l.point([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return l.point([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return l.point([r,A]);case"ne":case"northeast":case"eastnorth":case"topright":return l.point([o,A]);case"center":return d.default(t);case void 0:case null:case"centroid":return g.default(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||c.coordEach(t,(function(t){var r=m.default(n,t),i=v.default(n,t),o=r*e,A=f.getCoords(_.default(n,o,i));t[0]=A[0],t[1]=A[1],3===t.length&&(t[2]*=e)})),t}t.exports=b,t.exports.default=b},2418:(t,e,n)=>{"use strict";var r=n(1540),i=n(4102),o=n(611),A=n(6565),s=n(2054);function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var u=a(A),c=a(s);function l(t,e,n,A){if(A=A||{},!i.isObject(A))throw new Error("options is invalid");var s=A.units,a=A.zTranslation,l=A.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(a&&"number"!=typeof a&&isNaN(a))throw new Error("zTranslation is not a number");if(a=void 0!==a?a:0,0===e&&0===a)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==l&&void 0!==l||(t=u.default(t)),r.coordEach(t,(function(t){var r=o.getCoords(c.default(t,e,n,{units:s}));t[0]=r[0],t[1]=r[1],a&&3===t.length&&(t[2]+=a)})),t}t.exports=l,t.exports.default=l},1959:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(2676)),o=n(611),A=n(4102);e.default=function(t,e,n){void 0===n&&(n={});var r=o.getGeom(t),s=o.getGeom(e),a=i.default.union(r.coordinates,s.coordinates);return 0===a.length?null:1===a.length?A.polygon(a[0],n.properties):A.multiPolygon(a,n.properties)}},5107:(t,e,n)=>{(e=n(3645)(!1)).push([t.id,'\n\n\n.picker {\n  position: relative !important;\n}\n\n.btn-picker {\n  padding: 3px 6px;\n  color: #333;\n  background-color: #fff;\n  border: 1px solid #ddd;\n\n}\n\n.btn-picker.active {\n  color: #333;\n  background-color: #e6e6e6;\n  background-image: none;\n  border-color: #adadad;\n}\n\n.picker-widget-ctrl {\n  font: 12px/20px "Helvetica Neue", Arial, sans-serif;\n}\n\n\n\n.picker-widget-ctrl-group {\n  position: absolute;\n  z-index: 2;\n  opacity: 0.5;\n  transition: opacity 0.2s ease-out;\n}\n\n.picker-widget-ctrl-group.title {\n  font-size: 16px;\n}\n\n.no-pointer {\n  pointer-events: none;\n}\n\n.picker-widget-ctrl-group:hover {\n  opacity: 1;\n  transition: opacity 0.1s ease-in;\n}\n\n.picker-widget-ctrl {\n  background: transparent;\n  padding: 0px;\n  pointer-events: all;\n  cursor: auto;\n}\n\n.picker-widget-ctrl-top-left { top: 10px; left: 10px; }\n.picker-widget-ctrl-top-right { top: 10px; right: 10px; }\n.picker-widget-ctrl-bottom-left { bottom: 10px; left: 10px; }\n.picker-widget-ctrl-bottom-right { bottom: 10px; right: 10px; }\n\n/* legend */\n\n.legend {\n  font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;\n}\n\n.legend-title {\n  margin-bottom: 10px;\n}\n\n.legend ul {\n  padding: 0;\n  margin-bottom: 0;\n}\n\n.legend li {\n  list-style-type: none;\n  margin: 0;\n  display: flex;\n  vertical-align: middle;\n  line-height: 1.1;\n}\n\n.point-mark {\n  width: 14px;\n  height: 14px;\n  align-self: center;\n  margin-right: 3px;\n  box-sizing: border-box;\n  display: inline-block;\n}\n\n/* scale legend */\n.legend.scale {\n  display: flex;\n  text-align: right;\n}\n\n.legend.scale .gradient {\n  height: 50px;\n  width: 20px;\n  flex: 1;\n}\n\n.legend.scale .range {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.legend.scale .range div:last-child {\n  margin-top: auto;\n}\n\n',""]),t.exports=e},3645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,r,i,o=t[1]||"",A=t[3];if(!A)return o;if(e&&"function"==typeof btoa){var s=(n=A,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),a=A.sources.map((function(t){return"/*# sourceURL=".concat(A.sourceRoot||"").concat(t," */")}));return[o].concat(a).concat([s]).join("\n")}return[o].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var A=this[o][0];null!=A&&(i[A]=!0)}for(var s=0;s<t.length;s++){var a=[].concat(t[s]);r&&i[a[0]]||(n&&(a[2]?a[2]="".concat(n," and ").concat(a[2]):a[2]=n),e.push(a))}},e}},1688:(t,e,n)=>{"use strict";function r(){return new i}function i(){this.reset()}n.r(e),n.d(e,{geoAlbers:()=>_r,geoAlbersUsa:()=>br,geoArea:()=>X,geoAzimuthalEqualArea:()=>Sr,geoAzimuthalEqualAreaRaw:()=>xr,geoAzimuthalEquidistant:()=>Mr,geoAzimuthalEquidistantRaw:()=>Ir,geoBounds:()=>Gt,geoCentroid:()=>te,geoCircle:()=>le,geoClipExtent:()=>xe,geoConicConformal:()=>Dr,geoConicConformalRaw:()=>Rr,geoConicEqualArea:()=>mr,geoConicEqualAreaRaw:()=>vr,geoConicEquidistant:()=>Fr,geoConicEquidistantRaw:()=>kr,geoContains:()=>Ye,geoDistance:()=>je,geoEquirectangular:()=>Lr,geoEquirectangularRaw:()=>Tr,geoGnomonic:()=>Br,geoGnomonicRaw:()=>jr,geoGraticule:()=>Ze,geoGraticule10:()=>Je,geoIdentity:()=>Ur,geoInterpolate:()=>Ke,geoLength:()=>Le,geoMercator:()=>Pr,geoMercatorRaw:()=>Cr,geoNaturalEarth1:()=>qr,geoNaturalEarth1Raw:()=>zr,geoOrthographic:()=>Hr,geoOrthographicRaw:()=>Qr,geoPath:()=>er,geoProjection:()=>dr,geoProjectionMutator:()=>gr,geoRotation:()=>ae,geoStereographic:()=>Yr,geoStereographicRaw:()=>Vr,geoStream:()=>L,geoTransform:()=>sr,geoTransverseMercator:()=>Wr,geoTransverseMercatorRaw:()=>Xr}),i.prototype={constructor:i,reset:function(){this.s=this.t=0},add:function(t){A(o,t,this.t),A(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new i;function A(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var s=1e-6,a=Math.PI,u=a/2,c=a/4,l=2*a,f=180/a,h=a/180,p=Math.abs,d=Math.atan,g=Math.atan2,y=Math.cos,v=Math.ceil,m=Math.exp,_=(Math.floor,Math.log),b=Math.pow,w=Math.sin,E=Math.sign||function(t){return t>0?1:t<0?-1:0},x=Math.sqrt,S=Math.tan;function I(t){return t>1?0:t<-1?a:Math.acos(t)}function M(t){return t>1?u:t<-1?-u:Math.asin(t)}function C(t){return(t=w(t/2))*t}function P(){}function O(t,e){t&&R.hasOwnProperty(t.type)&&R[t.type](t,e)}var N={Feature:function(t,e){O(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)O(n[r].geometry,e)}},R={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){D(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)D(n[r],e,0)},Polygon:function(t,e){T(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)T(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)O(n[r],e)}};function D(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function T(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)D(t[n],e,1);e.polygonEnd()}function L(t,e){t&&N.hasOwnProperty(t.type)?N[t.type](t,e):O(t,e)}var k,F,j,B,G,U=r(),z=r(),q={point:P,lineStart:P,lineEnd:P,polygonStart:function(){U.reset(),q.lineStart=Q,q.lineEnd=H},polygonEnd:function(){var t=+U;z.add(t<0?l+t:t),this.lineStart=this.lineEnd=this.point=P},sphere:function(){z.add(l)}};function Q(){q.point=V}function H(){Y(k,F)}function V(t,e){q.point=Y,k=t,F=e,j=t*=h,B=y(e=(e*=h)/2+c),G=w(e)}function Y(t,e){var n=(t*=h)-j,r=n>=0?1:-1,i=r*n,o=y(e=(e*=h)/2+c),A=w(e),s=G*A,a=B*o+s*y(i),u=s*r*w(i);U.add(g(u,a)),j=t,B=o,G=A}function X(t){return z.reset(),L(t,q),2*z}function W(t){return[g(t[1],t[0]),M(t[2])]}function Z(t){var e=t[0],n=t[1],r=y(n);return[r*y(e),r*w(e),w(n)]}function J(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function K(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function $(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function tt(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function et(t){var e=x(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var nt,rt,it,ot,At,st,at,ut,ct,lt,ft,ht,pt,dt,gt,yt,vt,mt,_t,bt,wt,Et,xt,St,It,Mt,Ct=r(),Pt={point:Ot,lineStart:Rt,lineEnd:Dt,polygonStart:function(){Pt.point=Tt,Pt.lineStart=Lt,Pt.lineEnd=kt,Ct.reset(),q.polygonStart()},polygonEnd:function(){q.polygonEnd(),Pt.point=Ot,Pt.lineStart=Rt,Pt.lineEnd=Dt,U<0?(nt=-(it=180),rt=-(ot=90)):Ct>s?ot=90:Ct<-s&&(rt=-90),lt[0]=nt,lt[1]=it}};function Ot(t,e){ct.push(lt=[nt=t,it=t]),e<rt&&(rt=e),e>ot&&(ot=e)}function Nt(t,e){var n=Z([t*h,e*h]);if(ut){var r=K(ut,n),i=K([r[1],-r[0],0],r);et(i),i=W(i);var o,A=t-At,s=A>0?1:-1,a=i[0]*f*s,u=p(A)>180;u^(s*At<a&&a<s*t)?(o=i[1]*f)>ot&&(ot=o):u^(s*At<(a=(a+360)%360-180)&&a<s*t)?(o=-i[1]*f)<rt&&(rt=o):(e<rt&&(rt=e),e>ot&&(ot=e)),u?t<At?Ft(nt,t)>Ft(nt,it)&&(it=t):Ft(t,it)>Ft(nt,it)&&(nt=t):it>=nt?(t<nt&&(nt=t),t>it&&(it=t)):t>At?Ft(nt,t)>Ft(nt,it)&&(it=t):Ft(t,it)>Ft(nt,it)&&(nt=t)}else ct.push(lt=[nt=t,it=t]);e<rt&&(rt=e),e>ot&&(ot=e),ut=n,At=t}function Rt(){Pt.point=Nt}function Dt(){lt[0]=nt,lt[1]=it,Pt.point=Ot,ut=null}function Tt(t,e){if(ut){var n=t-At;Ct.add(p(n)>180?n+(n>0?360:-360):n)}else st=t,at=e;q.point(t,e),Nt(t,e)}function Lt(){q.lineStart()}function kt(){Tt(st,at),q.lineEnd(),p(Ct)>s&&(nt=-(it=180)),lt[0]=nt,lt[1]=it,ut=null}function Ft(t,e){return(e-=t)<0?e+360:e}function jt(t,e){return t[0]-e[0]}function Bt(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Gt(t){var e,n,r,i,o,A,s;if(ot=it=-(nt=rt=1/0),ct=[],L(t,Pt),n=ct.length){for(ct.sort(jt),e=1,o=[r=ct[0]];e<n;++e)Bt(r,(i=ct[e])[0])||Bt(r,i[1])?(Ft(r[0],i[1])>Ft(r[0],r[1])&&(r[1]=i[1]),Ft(i[0],r[1])>Ft(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(A=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(s=Ft(r[1],i[0]))>A&&(A=s,nt=i[0],it=r[1])}return ct=lt=null,nt===1/0||rt===1/0?[[NaN,NaN],[NaN,NaN]]:[[nt,rt],[it,ot]]}var Ut,zt,qt={sphere:P,point:Qt,lineStart:Vt,lineEnd:Wt,polygonStart:function(){qt.lineStart=Zt,qt.lineEnd=Jt},polygonEnd:function(){qt.lineStart=Vt,qt.lineEnd=Wt}};function Qt(t,e){t*=h;var n=y(e*=h);Ht(n*y(t),n*w(t),w(e))}function Ht(t,e,n){++ft,pt+=(t-pt)/ft,dt+=(e-dt)/ft,gt+=(n-gt)/ft}function Vt(){qt.point=Yt}function Yt(t,e){t*=h;var n=y(e*=h);St=n*y(t),It=n*w(t),Mt=w(e),qt.point=Xt,Ht(St,It,Mt)}function Xt(t,e){t*=h;var n=y(e*=h),r=n*y(t),i=n*w(t),o=w(e),A=g(x((A=It*o-Mt*i)*A+(A=Mt*r-St*o)*A+(A=St*i-It*r)*A),St*r+It*i+Mt*o);ht+=A,yt+=A*(St+(St=r)),vt+=A*(It+(It=i)),mt+=A*(Mt+(Mt=o)),Ht(St,It,Mt)}function Wt(){qt.point=Qt}function Zt(){qt.point=Kt}function Jt(){$t(Et,xt),qt.point=Qt}function Kt(t,e){Et=t,xt=e,t*=h,e*=h,qt.point=$t;var n=y(e);St=n*y(t),It=n*w(t),Mt=w(e),Ht(St,It,Mt)}function $t(t,e){t*=h;var n=y(e*=h),r=n*y(t),i=n*w(t),o=w(e),A=It*o-Mt*i,s=Mt*r-St*o,a=St*i-It*r,u=x(A*A+s*s+a*a),c=M(u),l=u&&-c/u;_t+=l*A,bt+=l*s,wt+=l*a,ht+=c,yt+=c*(St+(St=r)),vt+=c*(It+(It=i)),mt+=c*(Mt+(Mt=o)),Ht(St,It,Mt)}function te(t){ft=ht=pt=dt=gt=yt=vt=mt=_t=bt=wt=0,L(t,qt);var e=_t,n=bt,r=wt,i=e*e+n*n+r*r;return i<1e-12&&(e=yt,n=vt,r=mt,ht<s&&(e=pt,n=dt,r=gt),(i=e*e+n*n+r*r)<1e-12)?[NaN,NaN]:[g(n,e)*f,M(r/x(i))*f]}function ee(t){return function(){return t}}function ne(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function re(t,e){return[t>a?t-l:t<-a?t+l:t,e]}function ie(t,e,n){return(t%=l)?e||n?ne(Ae(t),se(e,n)):Ae(t):e||n?se(e,n):re}function oe(t){return function(e,n){return[(e+=t)>a?e-l:e<-a?e+l:e,n]}}function Ae(t){var e=oe(t);return e.invert=oe(-t),e}function se(t,e){var n=y(t),r=w(t),i=y(e),o=w(e);function A(t,e){var A=y(e),s=y(t)*A,a=w(t)*A,u=w(e),c=u*n+s*r;return[g(a*i-c*o,s*n-u*r),M(c*i+a*o)]}return A.invert=function(t,e){var A=y(e),s=y(t)*A,a=w(t)*A,u=w(e),c=u*i-a*o;return[g(a*i+u*o,s*n+c*r),M(c*n-s*r)]},A}function ae(t){function e(e){return(e=t(e[0]*h,e[1]*h))[0]*=f,e[1]*=f,e}return t=ie(t[0]*h,t[1]*h,t.length>2?t[2]*h:0),e.invert=function(e){return(e=t.invert(e[0]*h,e[1]*h))[0]*=f,e[1]*=f,e},e}function ue(t,e,n,r,i,o){if(n){var A=y(e),s=w(e),a=r*n;null==i?(i=e+r*l,o=e-a/2):(i=ce(A,i),o=ce(A,o),(r>0?i<o:i>o)&&(i+=r*l));for(var u,c=i;r>0?c>o:c<o;c-=a)u=W([A,-s*y(c),-s*w(c)]),t.point(u[0],u[1])}}function ce(t,e){(e=Z(e))[0]-=t,et(e);var n=I(-e[1]);return((-e[2]<0?-n:n)+l-s)%l}function le(){var t,e,n=ee([0,0]),r=ee(90),i=ee(6),o={point:function(n,r){t.push(n=e(n,r)),n[0]*=f,n[1]*=f}};function A(){var A=n.apply(this,arguments),s=r.apply(this,arguments)*h,a=i.apply(this,arguments)*h;return t=[],e=ie(-A[0]*h,-A[1]*h,0).invert,ue(o,s,a,1),A={type:"Polygon",coordinates:[t]},t=e=null,A}return A.center=function(t){return arguments.length?(n="function"==typeof t?t:ee([+t[0],+t[1]]),A):n},A.radius=function(t){return arguments.length?(r="function"==typeof t?t:ee(+t),A):r},A.precision=function(t){return arguments.length?(i="function"==typeof t?t:ee(+t),A):i},A}function fe(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:P,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function he(t,e){return p(t[0]-e[0])<s&&p(t[1]-e[1])<s}function pe(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function de(t,e,n,r,i){var o,A,s=[],a=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],A=t[e];if(he(r,A)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new pe(r,t,null,!0)),a.push(n.o=new pe(r,null,n,!1)),s.push(n=new pe(A,t,null,!1)),a.push(n.o=new pe(A,null,n,!0))}})),s.length){for(a.sort(e),ge(s),ge(a),o=0,A=a.length;o<A;++o)a[o].e=n=!n;for(var u,c,l=s[0];;){for(var f=l,h=!0;f.v;)if((f=f.n)===l)return;u=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(o=0,A=u.length;o<A;++o)i.point((c=u[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(h)for(u=f.p.z,o=u.length-1;o>=0;--o)i.point((c=u[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}u=(f=f.o).z,h=!h}while(!f.v);i.lineEnd()}}}function ge(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function ye(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}re.invert=re,1===(Ut=ye).length&&(zt=Ut,Ut=function(t,e){return ye(zt(t),e)});var ve=Array.prototype;function me(t){for(var e,n,r,i=t.length,o=-1,A=0;++o<i;)A+=t[o].length;for(n=new Array(A);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--A]=r[e];return n}function _e(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}ve.slice,ve.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var be=1e9,we=-be;function Ee(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,a){var c=0,l=0;if(null==i||(c=A(i,s))!==(l=A(o,s))||u(i,o)<0^s>0)do{a.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+s+4)%4)!==l);else a.point(o[0],o[1])}function A(r,i){return p(r[0]-t)<s?i>0?0:3:p(r[0]-n)<s?i>0?2:1:p(r[1]-e)<s?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=A(t,1),r=A(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(A){var s,u,c,l,f,h,p,d,g,y,v,m=A,_=fe(),b={point:w,lineStart:function(){b.point=E,u&&u.push(c=[]),y=!0,g=!1,p=d=NaN},lineEnd:function(){s&&(E(l,f),h&&g&&_.rejoin(),s.push(_.result())),b.point=w,g&&m.lineEnd()},polygonStart:function(){m=_,s=[],u=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=u.length;n<i;++n)for(var o,A,s=u[n],a=1,c=s.length,l=s[0],f=l[0],h=l[1];a<c;++a)o=f,A=h,f=(l=s[a])[0],h=l[1],A<=r?h>r&&(f-o)*(r-A)>(h-A)*(t-o)&&++e:h<=r&&(f-o)*(r-A)<(h-A)*(t-o)&&--e;return e}(),n=v&&e,i=(s=me(s)).length;(n||i)&&(A.polygonStart(),n&&(A.lineStart(),o(null,null,1,A),A.lineEnd()),i&&de(s,a,e,o,A),A.polygonEnd()),m=A,s=u=c=null}};function w(t,e){i(t,e)&&m.point(t,e)}function E(o,A){var s=i(o,A);if(u&&c.push([o,A]),y)l=o,f=A,h=s,y=!1,s&&(m.lineStart(),m.point(o,A));else if(s&&g)m.point(o,A);else{var a=[p=Math.max(we,Math.min(be,p)),d=Math.max(we,Math.min(be,d))],_=[o=Math.max(we,Math.min(be,o)),A=Math.max(we,Math.min(be,A))];!function(t,e,n,r,i,o){var A,s=t[0],a=t[1],u=0,c=1,l=e[0]-s,f=e[1]-a;if(A=n-s,l||!(A>0)){if(A/=l,l<0){if(A<u)return;A<c&&(c=A)}else if(l>0){if(A>c)return;A>u&&(u=A)}if(A=i-s,l||!(A<0)){if(A/=l,l<0){if(A>c)return;A>u&&(u=A)}else if(l>0){if(A<u)return;A<c&&(c=A)}if(A=r-a,f||!(A>0)){if(A/=f,f<0){if(A<u)return;A<c&&(c=A)}else if(f>0){if(A>c)return;A>u&&(u=A)}if(A=o-a,f||!(A<0)){if(A/=f,f<0){if(A>c)return;A>u&&(u=A)}else if(f>0){if(A<u)return;A<c&&(c=A)}return u>0&&(t[0]=s+u*l,t[1]=a+u*f),c<1&&(e[0]=s+c*l,e[1]=a+c*f),!0}}}}}(a,_,t,e,n,r)?s&&(m.lineStart(),m.point(o,A),v=!1):(g||(m.lineStart(),m.point(a[0],a[1])),m.point(_[0],_[1]),s||m.lineEnd(),v=!1)}p=o,d=A,g=s}return b}}function xe(){var t,e,n,r=0,i=0,o=960,A=500;return n={stream:function(n){return t&&e===n?t:t=Ee(r,i,o,A)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],A=+s[1][1],t=e=null,n):[[r,i],[o,A]]}}}var Se=r();function Ie(t,e){var n=e[0],r=e[1],i=[w(n),-y(n),0],o=0,A=0;Se.reset();for(var u=0,f=t.length;u<f;++u)if(p=(h=t[u]).length)for(var h,p,d=h[p-1],v=d[0],m=d[1]/2+c,_=w(m),b=y(m),E=0;E<p;++E,v=S,_=C,b=P,d=x){var x=h[E],S=x[0],I=x[1]/2+c,C=w(I),P=y(I),O=S-v,N=O>=0?1:-1,R=N*O,D=R>a,T=_*C;if(Se.add(g(T*N*w(R),b*P+T*y(R))),o+=D?O+N*l:O,D^v>=n^S>=n){var L=K(Z(d),Z(x));et(L);var k=K(i,L);et(k);var F=(D^O>=0?-1:1)*M(k[2]);(r>F||r===F&&(L[0]||L[1]))&&(A+=D^O>=0?1:-1)}}return(o<-s||o<s&&Se<-s)^1&A}var Me,Ce,Pe,Oe=r(),Ne={sphere:P,point:P,lineStart:function(){Ne.point=De,Ne.lineEnd=Re},lineEnd:P,polygonStart:P,polygonEnd:P};function Re(){Ne.point=Ne.lineEnd=P}function De(t,e){Me=t*=h,Ce=w(e*=h),Pe=y(e),Ne.point=Te}function Te(t,e){t*=h;var n=w(e*=h),r=y(e),i=p(t-Me),o=y(i),A=r*w(i),s=Pe*n-Ce*r*o,a=Ce*n+Pe*r*o;Oe.add(g(x(A*A+s*s),a)),Me=t,Ce=n,Pe=r}function Le(t){return Oe.reset(),L(t,Ne),+Oe}var ke=[null,null],Fe={type:"LineString",coordinates:ke};function je(t,e){return ke[0]=t,ke[1]=e,Le(Fe)}var Be={Feature:function(t,e){return Ue(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(Ue(n[r].geometry,e))return!0;return!1}},Ge={Sphere:function(){return!0},Point:function(t,e){return ze(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(ze(n[r],e))return!0;return!1},LineString:function(t,e){return qe(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(qe(n[r],e))return!0;return!1},Polygon:function(t,e){return Qe(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Qe(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(Ue(n[r],e))return!0;return!1}};function Ue(t,e){return!(!t||!Ge.hasOwnProperty(t.type))&&Ge[t.type](t,e)}function ze(t,e){return 0===je(t,e)}function qe(t,e){var n=je(t[0],t[1]);return je(t[0],e)+je(e,t[1])<=n+s}function Qe(t,e){return!!Ie(t.map(He),Ve(e))}function He(t){return(t=t.map(Ve)).pop(),t}function Ve(t){return[t[0]*h,t[1]*h]}function Ye(t,e){return(t&&Be.hasOwnProperty(t.type)?Be[t.type]:Ue)(t,e)}function Xe(t,e,n){var r=_e(t,e-s,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function We(t,e,n){var r=_e(t,e-s,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function Ze(){var t,e,n,r,i,o,A,a,u,c,l,f,h=10,d=h,g=90,y=360,m=2.5;function _(){return{type:"MultiLineString",coordinates:b()}}function b(){return _e(v(r/g)*g,n,g).map(l).concat(_e(v(a/y)*y,A,y).map(f)).concat(_e(v(e/h)*h,t,h).filter((function(t){return p(t%g)>s})).map(u)).concat(_e(v(o/d)*d,i,d).filter((function(t){return p(t%y)>s})).map(c))}return _.lines=function(){return b().map((function(t){return{type:"LineString",coordinates:t}}))},_.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(f(A).slice(1),l(n).reverse().slice(1),f(a).reverse().slice(1))]}},_.extent=function(t){return arguments.length?_.extentMajor(t).extentMinor(t):_.extentMinor()},_.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],a=+t[0][1],A=+t[1][1],r>n&&(t=r,r=n,n=t),a>A&&(t=a,a=A,A=t),_.precision(m)):[[r,a],[n,A]]},_.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),_.precision(m)):[[e,o],[t,i]]},_.step=function(t){return arguments.length?_.stepMajor(t).stepMinor(t):_.stepMinor()},_.stepMajor=function(t){return arguments.length?(g=+t[0],y=+t[1],_):[g,y]},_.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],_):[h,d]},_.precision=function(s){return arguments.length?(m=+s,u=Xe(o,i,90),c=We(e,t,m),l=Xe(a,A,90),f=We(r,n,m),_):m},_.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Je(){return Ze()()}function Ke(t,e){var n=t[0]*h,r=t[1]*h,i=e[0]*h,o=e[1]*h,A=y(r),s=w(r),a=y(o),u=w(o),c=A*y(n),l=A*w(n),p=a*y(i),d=a*w(i),v=2*M(x(C(o-r)+A*a*C(i-n))),m=w(v),_=v?function(t){var e=w(t*=v)/m,n=w(v-t)/m,r=n*c+e*p,i=n*l+e*d,o=n*s+e*u;return[g(i,r)*f,g(o,x(r*r+i*i))*f]}:function(){return[n*f,r*f]};return _.distance=v,_}function $e(t){return t}var tn,en,nn,rn,on=r(),An=r(),sn={point:P,lineStart:P,lineEnd:P,polygonStart:function(){sn.lineStart=an,sn.lineEnd=ln},polygonEnd:function(){sn.lineStart=sn.lineEnd=sn.point=P,on.add(p(An)),An.reset()},result:function(){var t=on/2;return on.reset(),t}};function an(){sn.point=un}function un(t,e){sn.point=cn,tn=nn=t,en=rn=e}function cn(t,e){An.add(rn*t-nn*e),nn=t,rn=e}function ln(){cn(tn,en)}const fn=sn;var hn=1/0,pn=hn,dn=-hn,gn=dn;const yn={point:function(t,e){t<hn&&(hn=t),t>dn&&(dn=t),e<pn&&(pn=e),e>gn&&(gn=e)},lineStart:P,lineEnd:P,polygonStart:P,polygonEnd:P,result:function(){var t=[[hn,pn],[dn,gn]];return dn=gn=-(pn=hn=1/0),t}};var vn,mn,_n,bn,wn=0,En=0,xn=0,Sn=0,In=0,Mn=0,Cn=0,Pn=0,On=0,Nn={point:Rn,lineStart:Dn,lineEnd:kn,polygonStart:function(){Nn.lineStart=Fn,Nn.lineEnd=jn},polygonEnd:function(){Nn.point=Rn,Nn.lineStart=Dn,Nn.lineEnd=kn},result:function(){var t=On?[Cn/On,Pn/On]:Mn?[Sn/Mn,In/Mn]:xn?[wn/xn,En/xn]:[NaN,NaN];return wn=En=xn=Sn=In=Mn=Cn=Pn=On=0,t}};function Rn(t,e){wn+=t,En+=e,++xn}function Dn(){Nn.point=Tn}function Tn(t,e){Nn.point=Ln,Rn(_n=t,bn=e)}function Ln(t,e){var n=t-_n,r=e-bn,i=x(n*n+r*r);Sn+=i*(_n+t)/2,In+=i*(bn+e)/2,Mn+=i,Rn(_n=t,bn=e)}function kn(){Nn.point=Rn}function Fn(){Nn.point=Bn}function jn(){Gn(vn,mn)}function Bn(t,e){Nn.point=Gn,Rn(vn=_n=t,mn=bn=e)}function Gn(t,e){var n=t-_n,r=e-bn,i=x(n*n+r*r);Sn+=i*(_n+t)/2,In+=i*(bn+e)/2,Mn+=i,Cn+=(i=bn*t-_n*e)*(_n+t),Pn+=i*(bn+e),On+=3*i,Rn(_n=t,bn=e)}const Un=Nn;function zn(t){this._context=t}zn.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,l)}},result:P};var qn,Qn,Hn,Vn,Yn,Xn=r(),Wn={point:P,lineStart:function(){Wn.point=Zn},lineEnd:function(){qn&&Jn(Qn,Hn),Wn.point=P},polygonStart:function(){qn=!0},polygonEnd:function(){qn=null},result:function(){var t=+Xn;return Xn.reset(),t}};function Zn(t,e){Wn.point=Jn,Qn=Vn=t,Hn=Yn=e}function Jn(t,e){Vn-=t,Yn-=e,Xn.add(x(Vn*Vn+Yn*Yn)),Vn=t,Yn=e}const Kn=Wn;function $n(){this._string=[]}function tr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function er(t,e){var n,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),L(t,n(r))),r.result()}return o.area=function(t){return L(t,n(fn)),fn.result()},o.measure=function(t){return L(t,n(Kn)),Kn.result()},o.bounds=function(t){return L(t,n(yn)),yn.result()},o.centroid=function(t){return L(t,n(Un)),Un.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,$e):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new $n):new zn(e=t),"function"!=typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)}function nr(t,e,n,r){return function(i,o){var A,s,a,u=e(o),c=i.invert(r[0],r[1]),l=fe(),f=e(l),h=!1,p={point:d,lineStart:y,lineEnd:v,polygonStart:function(){p.point=m,p.lineStart=_,p.lineEnd=b,s=[],A=[]},polygonEnd:function(){p.point=d,p.lineStart=y,p.lineEnd=v,s=me(s);var t=Ie(A,c);s.length?(h||(o.polygonStart(),h=!0),de(s,ir,t,n,o)):t&&(h||(o.polygonStart(),h=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),h&&(o.polygonEnd(),h=!1),s=A=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function d(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function g(t,e){var n=i(t,e);u.point(n[0],n[1])}function y(){p.point=g,u.lineStart()}function v(){p.point=d,u.lineEnd()}function m(t,e){a.push([t,e]);var n=i(t,e);f.point(n[0],n[1])}function _(){f.lineStart(),a=[]}function b(){m(a[0][0],a[0][1]),f.lineEnd();var t,e,n,r,i=f.clean(),u=l.result(),c=u.length;if(a.pop(),A.push(a),a=null,c)if(1&i){if((e=(n=u[0]).length-1)>0){for(h||(o.polygonStart(),h=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else c>1&&2&i&&u.push(u.pop().concat(u.shift())),s.push(u.filter(rr))}return p}}function rr(t){return t.length>1}function ir(t,e){return((t=t.x)[0]<0?t[1]-u-s:u-t[1])-((e=e.x)[0]<0?e[1]-u-s:u-e[1])}$n.prototype={_radius:4.5,_circle:tr(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=tr(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};const or=nr((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,A){var c=o>0?a:-a,l=p(o-n);p(l-a)<s?(t.point(n,r=(r+A)/2>0?u:-u),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(c,r),t.point(o,r),e=0):i!==c&&l>=a&&(p(n-i)<s&&(n-=i*s),p(o-c)<s&&(o-=c*s),r=function(t,e,n,r){var i,o,A=w(t-n);return p(A)>s?d((w(e)*(o=y(r))*w(n)-w(r)*(i=y(e))*w(t))/(i*o*A)):(e+r)/2}(n,r,o,A),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(c,r),e=0),t.point(n=o,r=A),i=c},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*u,r.point(-a,i),r.point(0,i),r.point(a,i),r.point(a,0),r.point(a,-i),r.point(0,-i),r.point(-a,-i),r.point(-a,0),r.point(-a,i);else if(p(t[0]-e[0])>s){var o=t[0]<e[0]?a:-a;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-a,-u]);function Ar(t,e){var n=y(t),r=n>0,i=p(n)>s;function o(t,e){return y(t)*y(e)>n}function A(t,e,r){var i=[1,0,0],o=K(Z(t),Z(e)),A=J(o,o),u=o[0],c=A-u*u;if(!c)return!r&&t;var l=n*A/c,f=-n*u/c,h=K(i,o),d=tt(i,l);$(d,tt(o,f));var g=h,y=J(d,g),v=J(g,g),m=y*y-v*(J(d,d)-1);if(!(m<0)){var _=x(m),b=tt(g,(-y-_)/v);if($(b,d),b=W(b),!r)return b;var w,E=t[0],S=e[0],I=t[1],M=e[1];S<E&&(w=E,E=S,S=w);var C=S-E,P=p(C-a)<s;if(!P&&M<I&&(w=I,I=M,M=w),P||C<s?P?I+M>0^b[1]<(p(b[0]-E)<s?I:M):I<=b[1]&&b[1]<=M:C>a^(E<=b[0]&&b[0]<=S)){var O=tt(g,(-y+_)/v);return $(O,d),[b,W(O)]}}}function u(e,n){var i=r?t:a-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return nr(o,(function(t){var e,n,c,l,f;return{lineStart:function(){l=c=!1,f=1},point:function(h,p){var d,g=[h,p],y=o(h,p),v=r?y?0:u(h,p):y?u(h+(h<0?a:-a),p):0;if(!e&&(l=c=y)&&t.lineStart(),y!==c&&(!(d=A(e,g))||he(e,d)||he(g,d))&&(g[0]+=s,g[1]+=s,y=o(g[0],g[1])),y!==c)f=0,y?(t.lineStart(),d=A(g,e),t.point(d[0],d[1])):(d=A(e,g),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(i&&e&&r^y){var m;v&n||!(m=A(g,e,!0))||(f=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!y||e&&he(e,g)||t.point(g[0],g[1]),e=g,c=y,n=v},lineEnd:function(){c&&t.lineEnd(),e=null},clean:function(){return f|(l&&c)<<1}}}),(function(n,r,i,o){ue(o,t,e,i,n,r)}),r?[0,-t]:[-a,t-a])}function sr(t){return{stream:ar(t)}}function ar(t){return function(e){var n=new ur;for(var r in t)n[r]=t[r];return n.stream=e,n}}function ur(){}function cr(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),L(n,t.stream(yn));var A=yn.result(),s=Math.min(r/(A[1][0]-A[0][0]),i/(A[1][1]-A[0][1])),a=+e[0][0]+(r-s*(A[1][0]+A[0][0]))/2,u=+e[0][1]+(i-s*(A[1][1]+A[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([a,u])}function lr(t,e,n){return cr(t,[[0,0],e],n)}ur.prototype={constructor:ur,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var fr=y(30*h);function hr(t,e){return+e?function(t,e){function n(r,i,o,A,a,u,c,l,f,h,d,y,v,m){var _=c-r,b=l-i,w=_*_+b*b;if(w>4*e&&v--){var E=A+h,S=a+d,I=u+y,C=x(E*E+S*S+I*I),P=M(I/=C),O=p(p(I)-1)<s||p(o-f)<s?(o+f)/2:g(S,E),N=t(O,P),R=N[0],D=N[1],T=R-r,L=D-i,k=b*T-_*L;(k*k/w>e||p((_*T+b*L)/w-.5)>.3||A*h+a*d+u*y<fr)&&(n(r,i,o,A,a,u,R,D,O,E/=C,S/=C,I,v,m),m.point(R,D),n(R,D,O,E,S,I,c,l,f,h,d,y,v,m))}}return function(e){var r,i,o,A,s,a,u,c,l,f,h,p,d={point:g,lineStart:y,lineEnd:m,polygonStart:function(){e.polygonStart(),d.lineStart=_},polygonEnd:function(){e.polygonEnd(),d.lineStart=y}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){c=NaN,d.point=v,e.lineStart()}function v(r,i){var o=Z([r,i]),A=t(r,i);n(c,l,u,f,h,p,c=A[0],l=A[1],u=r,f=o[0],h=o[1],p=o[2],16,e),e.point(c,l)}function m(){d.point=g,e.lineEnd()}function _(){y(),d.point=b,d.lineEnd=w}function b(t,e){v(r=t,e),i=c,o=l,A=f,s=h,a=p,d.point=v}function w(){n(c,l,u,f,h,p,i,o,r,A,s,a,16,e),d.lineEnd=m,m()}return d}}(t,e):function(t){return ar({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var pr=ar({point:function(t,e){this.stream.point(t*h,e*h)}});function dr(t){return gr((function(){return t}))()}function gr(t){var e,n,r,i,o,A,s,a,u,c,l=150,p=480,d=250,g=0,y=0,v=0,m=0,_=0,b=null,w=or,E=null,S=$e,I=.5,M=hr(O,I);function C(t){return[(t=o(t[0]*h,t[1]*h))[0]*l+n,r-t[1]*l]}function P(t){return(t=o.invert((t[0]-n)/l,(r-t[1])/l))&&[t[0]*f,t[1]*f]}function O(t,i){return[(t=e(t,i))[0]*l+n,r-t[1]*l]}function N(){o=ne(i=ie(v,m,_),e);var t=e(g,y);return n=p-t[0]*l,r=d+t[1]*l,R()}function R(){return u=c=null,C}return C.stream=function(t){return u&&c===t?u:u=pr(w(i,M(S(c=t))))},C.clipAngle=function(t){return arguments.length?(w=+t?Ar(b=t*h,6*h):(b=null,or),R()):b*f},C.clipExtent=function(t){return arguments.length?(S=null==t?(E=A=s=a=null,$e):Ee(E=+t[0][0],A=+t[0][1],s=+t[1][0],a=+t[1][1]),R()):null==E?null:[[E,A],[s,a]]},C.scale=function(t){return arguments.length?(l=+t,N()):l},C.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],N()):[p,d]},C.center=function(t){return arguments.length?(g=t[0]%360*h,y=t[1]%360*h,N()):[g*f,y*f]},C.rotate=function(t){return arguments.length?(v=t[0]%360*h,m=t[1]%360*h,_=t.length>2?t[2]%360*h:0,N()):[v*f,m*f,_*f]},C.precision=function(t){return arguments.length?(M=hr(O,I=t*t),R()):x(I)},C.fitExtent=function(t,e){return cr(C,t,e)},C.fitSize=function(t,e){return lr(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&P,N()}}function yr(t){var e=0,n=a/3,r=gr(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*h,n=t[1]*h):[e*f,n*f]},i}function vr(t,e){var n=w(t),r=(n+w(e))/2;if(p(r)<s)return function(t){var e=y(t);function n(t,n){return[t*e,w(n)/e]}return n.invert=function(t,n){return[t/e,M(n*e)]},n}(t);var i=1+n*(2*r-n),o=x(i)/r;function A(t,e){var n=x(i-2*r*w(e))/r;return[n*w(t*=r),o-n*y(t)]}return A.invert=function(t,e){var n=o-e;return[g(t,p(n))/r*E(n),M((i-(t*t+n*n)*r*r)/(2*r))]},A}function mr(){return yr(vr).scale(155.424).center([0,33.6442])}function _r(){return mr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function br(){var t,e,n,r,i,o,A=_r(),a=mr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=mr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function l(t){var e=t[0],A=t[1];return o=null,n.point(e,A),o||(r.point(e,A),o)||(i.point(e,A),o)}function f(){return t=e=null,l}return l.invert=function(t){var e=A.scale(),n=A.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:A).invert(t)},l.stream=function(n){return t&&e===n?t:(r=[A.stream(e=n),a.stream(n),u.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},l.precision=function(t){return arguments.length?(A.precision(t),a.precision(t),u.precision(t),f()):A.precision()},l.scale=function(t){return arguments.length?(A.scale(t),a.scale(.35*t),u.scale(t),l.translate(A.translate())):A.scale()},l.translate=function(t){if(!arguments.length)return A.translate();var e=A.scale(),o=+t[0],l=+t[1];return n=A.translate(t).clipExtent([[o-.455*e,l-.238*e],[o+.455*e,l+.238*e]]).stream(c),r=a.translate([o-.307*e,l+.201*e]).clipExtent([[o-.425*e+s,l+.12*e+s],[o-.214*e-s,l+.234*e-s]]).stream(c),i=u.translate([o-.205*e,l+.212*e]).clipExtent([[o-.214*e+s,l+.166*e+s],[o-.115*e-s,l+.234*e-s]]).stream(c),f()},l.fitExtent=function(t,e){return cr(l,t,e)},l.fitSize=function(t,e){return lr(l,t,e)},l.scale(1070)}function wr(t){return function(e,n){var r=y(e),i=y(n),o=t(r*i);return[o*i*w(e),o*w(n)]}}function Er(t){return function(e,n){var r=x(e*e+n*n),i=t(r),o=w(i),A=y(i);return[g(e*o,r*A),M(r&&n*o/r)]}}var xr=wr((function(t){return x(2/(1+t))}));function Sr(){return dr(xr).scale(124.75).clipAngle(179.999)}xr.invert=Er((function(t){return 2*M(t/2)}));var Ir=wr((function(t){return(t=I(t))&&t/w(t)}));function Mr(){return dr(Ir).scale(79.4188).clipAngle(179.999)}function Cr(t,e){return[t,_(S((u+e)/2))]}function Pr(){return Or(Cr).scale(961/l)}function Or(t){var e,n,r,i=dr(t),o=i.center,A=i.scale,s=i.translate,u=i.clipExtent,c=null;function l(){var o=a*A(),s=i(ae(i.rotate()).invert([0,0]));return u(null==c?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===Cr?[[Math.max(s[0]-o,c),e],[Math.min(s[0]+o,n),r]]:[[c,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(A(t),l()):A()},i.translate=function(t){return arguments.length?(s(t),l()):s()},i.center=function(t){return arguments.length?(o(t),l()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),l()):null==c?null:[[c,e],[n,r]]},l()}function Nr(t){return S((u+t)/2)}function Rr(t,e){var n=y(t),r=t===e?w(t):_(n/y(e))/_(Nr(e)/Nr(t)),i=n*b(Nr(t),r)/r;if(!r)return Cr;function o(t,e){i>0?e<-u+s&&(e=-u+s):e>u-s&&(e=u-s);var n=i/b(Nr(e),r);return[n*w(r*t),i-n*y(r*t)]}return o.invert=function(t,e){var n=i-e,o=E(r)*x(t*t+n*n);return[g(t,p(n))/r*E(n),2*d(b(i/o,1/r))-u]},o}function Dr(){return yr(Rr).scale(109.5).parallels([30,30])}function Tr(t,e){return[t,e]}function Lr(){return dr(Tr).scale(152.63)}function kr(t,e){var n=y(t),r=t===e?w(t):(n-y(e))/(e-t),i=n/r+t;if(p(r)<s)return Tr;function o(t,e){var n=i-e,o=r*t;return[n*w(o),i-n*y(o)]}return o.invert=function(t,e){var n=i-e;return[g(t,p(n))/r*E(n),i-E(r)*x(t*t+n*n)]},o}function Fr(){return yr(kr).scale(131.154).center([0,13.9389])}function jr(t,e){var n=y(e),r=y(t)*n;return[n*w(t)/r,w(e)/r]}function Br(){return dr(jr).scale(144.049).clipAngle(60)}function Gr(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?$e:ar({point:function(i,o){this.stream.point(i*t+n,o*e+r)}})}function Ur(){var t,e,n,r,i,o,A=1,s=0,a=0,u=1,c=1,l=$e,f=null,h=$e;function p(){return r=i=null,o}return o={stream:function(t){return r&&i===t?r:r=l(h(i=t))},clipExtent:function(r){return arguments.length?(h=null==r?(f=t=e=n=null,$e):Ee(f=+r[0][0],t=+r[0][1],e=+r[1][0],n=+r[1][1]),p()):null==f?null:[[f,t],[e,n]]},scale:function(t){return arguments.length?(l=Gr((A=+t)*u,A*c,s,a),p()):A},translate:function(t){return arguments.length?(l=Gr(A*u,A*c,s=+t[0],a=+t[1]),p()):[s,a]},reflectX:function(t){return arguments.length?(l=Gr(A*(u=t?-1:1),A*c,s,a),p()):u<0},reflectY:function(t){return arguments.length?(l=Gr(A*u,A*(c=t?-1:1),s,a),p()):c<0},fitExtent:function(t,e){return cr(o,t,e)},fitSize:function(t,e){return lr(o,t,e)}}}function zr(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function qr(){return dr(zr).scale(175.295)}function Qr(t,e){return[y(e)*w(t),w(e)]}function Hr(){return dr(Qr).scale(249.5).clipAngle(90.000001)}function Vr(t,e){var n=y(e),r=1+y(t)*n;return[n*w(t)/r,w(e)/r]}function Yr(){return dr(Vr).scale(250).clipAngle(142)}function Xr(t,e){return[_(S((u+e)/2)),-t]}function Wr(){var t=Or(Xr),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}Ir.invert=Er((function(t){return t})),Cr.invert=function(t,e){return[t,2*d(m(e))-u]},Tr.invert=Tr,jr.invert=Er(d),zr.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,A=o*o;r-=n=(r*(1.007226+o*(.015085+A*(.028874*o-.044475-.005916*A)))-e)/(1.007226+o*(.045255+A*(.259866*o-.311325-.005916*11*A)))}while(p(n)>s&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},Qr.invert=Er(M),Vr.invert=Er((function(t){return 2*d(t)})),Xr.invert=function(t,e){return[-e,2*d(m(t))-u]}},1787:(t,e,n)=>{var r=n(2582),i=n(4102),o=n(1540),A=n(9705).default,s=o.featureEach,a=(o.coordEach,i.polygon,i.featureCollection);function u(t){var e=new r(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:A(t),r.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:A(t),e.push(t)})):s(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:A(t),e.push(t)})),r.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:A(t),r.prototype.remove.call(this,t,e)},e.clear=function(){return r.prototype.clear.call(this)},e.search=function(t){var e=r.prototype.search.call(this,this.toBBox(t));return a(e)},e.collides=function(t){return r.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=r.prototype.all.call(this);return a(t)},e.toJSON=function(){return r.prototype.toJSON.call(this)},e.fromJSON=function(t){return r.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=A(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=A(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=u,t.exports.default=u},9685:(t,e,n)=>{"use strict";n.d(e,{Ib:()=>r,WT:()=>i});var r=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array;Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},5975:(t,e,n)=>{"use strict";n.d(e,{p4:()=>i,U_:()=>o,GH:()=>A,Jp:()=>s,Iu:()=>a,bA:()=>u,U1:()=>c,lM:()=>l,uD:()=>f,jI:()=>h,en:()=>p,oy:()=>d,G3:()=>g,M5:()=>y,zB:()=>v,fS:()=>m});var r=n(9685);function i(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],A=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=A,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function o(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],A=e[4],s=e[5],a=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11],p=e[12],d=e[13],g=e[14],y=e[15],v=n*s-r*A,m=n*a-i*A,_=n*u-o*A,b=r*a-i*s,w=r*u-o*s,E=i*u-o*a,x=c*d-l*p,S=c*g-f*p,I=c*y-h*p,M=l*g-f*d,C=l*y-h*d,P=f*y-h*g,O=v*P-m*C+_*M+b*I-w*S+E*x;return O?(O=1/O,t[0]=(s*P-a*C+u*M)*O,t[1]=(i*C-r*P-o*M)*O,t[2]=(d*E-g*w+y*b)*O,t[3]=(f*w-l*E-h*b)*O,t[4]=(a*I-A*P-u*S)*O,t[5]=(n*P-i*I+o*S)*O,t[6]=(g*_-p*E-y*m)*O,t[7]=(c*E-f*_+h*m)*O,t[8]=(A*C-s*I+u*x)*O,t[9]=(r*I-n*C-o*x)*O,t[10]=(p*w-d*_+y*v)*O,t[11]=(l*_-c*w-h*v)*O,t[12]=(s*S-A*M-a*x)*O,t[13]=(n*M-r*S+i*x)*O,t[14]=(d*m-p*b-g*v)*O,t[15]=(c*b-l*m+f*v)*O,t):null}function A(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],A=t[5],s=t[6],a=t[7],u=t[8],c=t[9],l=t[10],f=t[11],h=t[12],p=t[13],d=t[14],g=t[15];return(e*A-n*o)*(l*g-f*d)-(e*s-r*o)*(c*g-f*p)+(e*a-i*o)*(c*d-l*p)+(n*s-r*A)*(u*g-f*h)-(n*a-i*A)*(u*d-l*h)+(r*a-i*s)*(u*p-c*h)}function s(t,e,n){var r=e[0],i=e[1],o=e[2],A=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],g=e[13],y=e[14],v=e[15],m=n[0],_=n[1],b=n[2],w=n[3];return t[0]=m*r+_*s+b*l+w*d,t[1]=m*i+_*a+b*f+w*g,t[2]=m*o+_*u+b*h+w*y,t[3]=m*A+_*c+b*p+w*v,m=n[4],_=n[5],b=n[6],w=n[7],t[4]=m*r+_*s+b*l+w*d,t[5]=m*i+_*a+b*f+w*g,t[6]=m*o+_*u+b*h+w*y,t[7]=m*A+_*c+b*p+w*v,m=n[8],_=n[9],b=n[10],w=n[11],t[8]=m*r+_*s+b*l+w*d,t[9]=m*i+_*a+b*f+w*g,t[10]=m*o+_*u+b*h+w*y,t[11]=m*A+_*c+b*p+w*v,m=n[12],_=n[13],b=n[14],w=n[15],t[12]=m*r+_*s+b*l+w*d,t[13]=m*i+_*a+b*f+w*g,t[14]=m*o+_*u+b*h+w*y,t[15]=m*A+_*c+b*p+w*v,t}function a(t,e,n){var r,i,o,A,s,a,u,c,l,f,h,p,d=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*d+e[4]*g+e[8]*y+e[12],t[13]=e[1]*d+e[5]*g+e[9]*y+e[13],t[14]=e[2]*d+e[6]*g+e[10]*y+e[14],t[15]=e[3]*d+e[7]*g+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],A=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=A,t[4]=s,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=f,t[10]=h,t[11]=p,t[12]=r*d+s*g+l*y+e[12],t[13]=i*d+a*g+f*y+e[13],t[14]=o*d+u*g+h*y+e[14],t[15]=A*d+c*g+p*y+e[15]),t}function u(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function c(t,e,n,i){var o,A,s,a,u,c,l,f,h,p,d,g,y,v,m,_,b,w,E,x,S,I,M,C,P=i[0],O=i[1],N=i[2],R=Math.hypot(P,O,N);return R<r.Ib?null:(P*=R=1/R,O*=R,N*=R,o=Math.sin(n),s=1-(A=Math.cos(n)),a=e[0],u=e[1],c=e[2],l=e[3],f=e[4],h=e[5],p=e[6],d=e[7],g=e[8],y=e[9],v=e[10],m=e[11],_=P*P*s+A,b=O*P*s+N*o,w=N*P*s-O*o,E=P*O*s-N*o,x=O*O*s+A,S=N*O*s+P*o,I=P*N*s+O*o,M=O*N*s-P*o,C=N*N*s+A,t[0]=a*_+f*b+g*w,t[1]=u*_+h*b+y*w,t[2]=c*_+p*b+v*w,t[3]=l*_+d*b+m*w,t[4]=a*E+f*x+g*S,t[5]=u*E+h*x+y*S,t[6]=c*E+p*x+v*S,t[7]=l*E+d*x+m*S,t[8]=a*I+f*M+g*C,t[9]=u*I+h*M+y*C,t[10]=c*I+p*M+v*C,t[11]=l*I+d*M+m*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function l(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],A=e[5],s=e[6],a=e[7],u=e[8],c=e[9],l=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+u*r,t[5]=A*i+c*r,t[6]=s*i+l*r,t[7]=a*i+f*r,t[8]=u*i-o*r,t[9]=c*i-A*r,t[10]=l*i-s*r,t[11]=f*i-a*r,t}function f(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],A=e[1],s=e[2],a=e[3],u=e[8],c=e[9],l=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-u*r,t[1]=A*i-c*r,t[2]=s*i-l*r,t[3]=a*i-f*r,t[8]=o*r+u*i,t[9]=A*r+c*i,t[10]=s*r+l*i,t[11]=a*r+f*i,t}function h(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],A=e[1],s=e[2],a=e[3],u=e[4],c=e[5],l=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+u*r,t[1]=A*i+c*r,t[2]=s*i+l*r,t[3]=a*i+f*r,t[4]=u*i-o*r,t[5]=c*i-A*r,t[6]=l*i-s*r,t[7]=f*i-a*r,t}function p(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],A=n+n,s=r+r,a=i+i,u=n*A,c=r*A,l=r*s,f=i*A,h=i*s,p=i*a,d=o*A,g=o*s,y=o*a;return t[0]=1-l-p,t[1]=c+y,t[2]=f-g,t[3]=0,t[4]=c-y,t[5]=1-u-p,t[6]=h+d,t[7]=0,t[8]=f+g,t[9]=h-d,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function d(t,e,n,r,i,o,A){var s=1/(n-e),a=1/(i-r),u=1/(o-A);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*a,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*a,t[10]=(A+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=A*o*2*u,t[15]=0,t}function g(t,e,n,r,i){var o,A=1/Math.tan(e/2);return t[0]=A/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=A,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function y(t,e,n,r,i,o,A){var s=1/(e-n),a=1/(r-i),u=1/(o-A);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*a,t[14]=(A+o)*u,t[15]=1,t}function v(t,e,n,i){var o,A,s,a,u,c,l,f,h,p,d=e[0],g=e[1],y=e[2],v=i[0],m=i[1],_=i[2],b=n[0],w=n[1],E=n[2];return Math.abs(d-b)<r.Ib&&Math.abs(g-w)<r.Ib&&Math.abs(y-E)<r.Ib?function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}(t):(l=d-b,f=g-w,h=y-E,o=m*(h*=p=1/Math.hypot(l,f,h))-_*(f*=p),A=_*(l*=p)-v*h,s=v*f-m*l,(p=Math.hypot(o,A,s))?(o*=p=1/p,A*=p,s*=p):(o=0,A=0,s=0),a=f*s-h*A,u=h*o-l*s,c=l*A-f*o,(p=Math.hypot(a,u,c))?(a*=p=1/p,u*=p,c*=p):(a=0,u=0,c=0),t[0]=o,t[1]=a,t[2]=l,t[3]=0,t[4]=A,t[5]=u,t[6]=f,t[7]=0,t[8]=s,t[9]=c,t[10]=h,t[11]=0,t[12]=-(o*d+A*g+s*y),t[13]=-(a*d+u*g+c*y),t[14]=-(l*d+f*g+h*y),t[15]=1,t)}function m(t,e){var n=t[0],i=t[1],o=t[2],A=t[3],s=t[4],a=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],p=t[11],d=t[12],g=t[13],y=t[14],v=t[15],m=e[0],_=e[1],b=e[2],w=e[3],E=e[4],x=e[5],S=e[6],I=e[7],M=e[8],C=e[9],P=e[10],O=e[11],N=e[12],R=e[13],D=e[14],T=e[15];return Math.abs(n-m)<=r.Ib*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(i-_)<=r.Ib*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(o-b)<=r.Ib*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(A-w)<=r.Ib*Math.max(1,Math.abs(A),Math.abs(w))&&Math.abs(s-E)<=r.Ib*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(a-x)<=r.Ib*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(u-S)<=r.Ib*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-I)<=r.Ib*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(l-M)<=r.Ib*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(f-C)<=r.Ib*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(h-P)<=r.Ib*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(p-O)<=r.Ib*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(d-N)<=r.Ib*Math.max(1,Math.abs(d),Math.abs(N))&&Math.abs(g-R)<=r.Ib*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(y-D)<=r.Ib*Math.max(1,Math.abs(y),Math.abs(D))&&Math.abs(v-T)<=r.Ib*Math.max(1,Math.abs(v),Math.abs(T))}},1437:(t,e,n)=>{"use strict";n.d(e,{IH:()=>i,bA:()=>o,kE:()=>A,tk:()=>s,t7:()=>a,c:()=>u,iu:()=>c,kK:()=>l,fF:()=>f,lu:()=>p});var r=n(9685);function i(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function o(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function A(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function s(t,e){return t[0]=-e[0],t[1]=-e[1],t}function a(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function u(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function c(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function l(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function f(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}var h,p=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t};h=new r.WT(2),r.WT!=Float32Array&&(h[0]=0,h[1]=0)},7160:(t,e,n)=>{"use strict";n.d(e,{Ue:()=>i,kE:()=>o,al:()=>A,IH:()=>s,tk:()=>a,Fv:()=>u,AK:()=>c,kC:()=>l,fF:()=>f,kK:()=>h,VC:()=>p,lM:()=>d,uD:()=>g,jI:()=>y,EU:()=>v,dC:()=>m,Zh:()=>_});var r=n(9685);function i(){var t=new r.WT(3);return r.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function A(t,e,n){var i=new r.WT(3);return i[0]=t,i[1]=e,i[2]=n,i}function s(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function a(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function u(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function c(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function l(t,e,n){var r=e[0],i=e[1],o=e[2],A=n[0],s=n[1],a=n[2];return t[0]=i*a-o*s,t[1]=o*A-r*a,t[2]=r*s-i*A,t}function f(t,e,n){var r=e[0],i=e[1],o=e[2],A=n[3]*r+n[7]*i+n[11]*o+n[15];return A=A||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/A,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/A,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/A,t}function h(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function p(t,e,n){var r=n[0],i=n[1],o=n[2],A=n[3],s=e[0],a=e[1],u=e[2],c=i*u-o*a,l=o*s-r*u,f=r*a-i*s,h=i*f-o*l,p=o*c-r*f,d=r*l-i*c,g=2*A;return c*=g,l*=g,f*=g,h*=2,p*=2,d*=2,t[0]=s+c+h,t[1]=a+l+p,t[2]=u+f+d,t}function d(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function g(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function y(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function v(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],A=e[1],s=e[2],a=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+A*A+s*s),u=a&&c(t,e)/a;return Math.acos(Math.min(Math.max(u,-1),1))}var m=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},_=o;i()},8333:(t,e,n)=>{"use strict";n.d(e,{d9:()=>o,al:()=>A,JG:()=>s,t8:()=>a,IH:()=>u,bA:()=>c,kE:()=>l,we:()=>f,Fv:()=>h,AK:()=>p,t7:()=>d,fF:()=>g,VC:()=>y,I6:()=>v,fS:()=>m});var r,i=n(9685);function o(t){var e=new i.WT(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function A(t,e,n,r){var o=new i.WT(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function u(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function c(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function l(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function f(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function h(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],A=n*n+r*r+i*i+o*o;return A>0&&(A=1/Math.sqrt(A)),t[0]=n*A,t[1]=r*A,t[2]=i*A,t[3]=o*A,t}function p(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function d(t,e,n,r){var i=e[0],o=e[1],A=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=A+r*(n[2]-A),t[3]=s+r*(n[3]-s),t}function g(t,e,n){var r=e[0],i=e[1],o=e[2],A=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*A,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*A,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*A,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*A,t}function y(t,e,n){var r=e[0],i=e[1],o=e[2],A=n[0],s=n[1],a=n[2],u=n[3],c=u*r+s*o-a*i,l=u*i+a*r-A*o,f=u*o+A*i-s*r,h=-A*r-s*i-a*o;return t[0]=c*u+h*-A+l*-a-f*-s,t[1]=l*u+h*-s+f*-A-c*-a,t[2]=f*u+h*-a+c*-s-l*-A,t[3]=e[3],t}function v(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function m(t,e){var n=t[0],r=t[1],o=t[2],A=t[3],s=e[0],a=e[1],u=e[2],c=e[3];return Math.abs(n-s)<=i.Ib*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-a)<=i.Ib*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-u)<=i.Ib*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(A-c)<=i.Ib*Math.max(1,Math.abs(A),Math.abs(c))}r=new i.WT(4),i.WT!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0)},9947:(t,e,n)=>{"use strict";n.r(e),n.d(e,{UNITS:()=>p,h3IndexToSplitLong:()=>y,splitLongToh3Index:()=>m,h3IsValid:()=>D,h3IsPentagon:()=>T,h3IsResClassIII:()=>L,h3GetBaseCell:()=>k,h3GetFaces:()=>F,h3GetResolution:()=>j,geoToH3:()=>B,h3ToGeo:()=>G,h3ToGeoBoundary:()=>U,h3ToParent:()=>z,h3ToChildren:()=>q,h3ToCenterChild:()=>Q,kRing:()=>H,kRingDistances:()=>V,hexRing:()=>Y,polyfill:()=>X,h3SetToMultiPolygon:()=>W,compact:()=>Z,uncompact:()=>J,h3IndexesAreNeighbors:()=>K,getH3UnidirectionalEdge:()=>$,getOriginH3IndexFromUnidirectionalEdge:()=>tt,getDestinationH3IndexFromUnidirectionalEdge:()=>et,h3UnidirectionalEdgeIsValid:()=>nt,getH3IndexesFromUnidirectionalEdge:()=>rt,getH3UnidirectionalEdgesFromHexagon:()=>it,getH3UnidirectionalEdgeBoundary:()=>ot,h3Distance:()=>At,h3Line:()=>st,experimentalH3ToLocalIj:()=>at,experimentalLocalIjToH3:()=>ut,pointDist:()=>ct,cellArea:()=>lt,exactEdgeLength:()=>ft,hexArea:()=>ht,edgeLength:()=>pt,numHexagons:()=>dt,getRes0Indexes:()=>gt,getPentagonIndexes:()=>yt,degsToRads:()=>vt,radsToDegs:()=>mt});var r=function(t){var e,n=void 0!==(t=t||{})?t:{},r={};for(e in n)n.hasOwnProperty(e)&&(r[e]=n[e]);var i,o=[],A="";document.currentScript&&(A=document.currentScript.src),A=0!==A.indexOf("blob:")?A.substr(0,A.lastIndexOf("/")+1):"",i=function(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||0==r.status&&r.response)e(r.response);else{var i=X(t);i?e(i.buffer):n()}},r.onerror=n,r.send(null)};var s=n.print||console.log.bind(console),a=n.printErr||console.warn.bind(console);for(e in r)r.hasOwnProperty(e)&&(n[e]=r[e]);r=null,n.arguments&&(o=n.arguments);var u=0,c=function(){return u},l=!1;function f(t){var e=n["_"+t];return e||st("Assertion failed: "+("Cannot call unknown function "+t+", make sure it is exported")),e}function h(t,e,n,r,i){var o={string:function(t){var e=0;if(null!=t&&0!==t){var n=1+(t.length<<2);!function(t,e,n){!function(t,e,n,r){if(!(r>0))return 0;for(var i=n+r-1,o=0;o<t.length;++o){var A=t.charCodeAt(o);if(A>=55296&&A<=57343&&(A=65536+((1023&A)<<10)|1023&t.charCodeAt(++o)),A<=127){if(n>=i)break;e[n++]=A}else if(A<=2047){if(n+1>=i)break;e[n++]=192|A>>6,e[n++]=128|63&A}else if(A<=65535){if(n+2>=i)break;e[n++]=224|A>>12,e[n++]=128|A>>6&63,e[n++]=128|63&A}else{if(n+3>=i)break;e[n++]=240|A>>18,e[n++]=128|A>>12&63,e[n++]=128|A>>6&63,e[n++]=128|63&A}}e[n]=0}(t,g,e,n)}(t,e=$(n),n)}return e},array:function(t){var e=$(t.length);return function(t,e){d.set(t,e)}(t,e),e}},A=f(t),s=[],a=0;if(r)for(var u=0;u<r.length;u++){var c=o[n[u]];c?(0===a&&(a=et()),s[u]=c(r[u])):s[u]=r[u]}var l=A.apply(null,s);return l=function(t){return"string"===e?w(t):"boolean"===e?Boolean(t):t}(l),0!==a&&tt(a),l}var p,d,g,y,v,m,_,b="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function w(t,e){return t?function(t,e,n){for(var r=e+n,i=e;t[i]&&!(i>=r);)++i;if(i-e>16&&t.subarray&&b)return b.decode(t.subarray(e,i));for(var o="";e<i;){var A=t[e++];if(128&A){var s=63&t[e++];if(192!=(224&A)){var a=63&t[e++];if((A=224==(240&A)?(15&A)<<12|s<<6|a:(7&A)<<18|s<<12|a<<6|63&t[e++])<65536)o+=String.fromCharCode(A);else{var u=A-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&A)<<6|s)}else o+=String.fromCharCode(A)}return o}(g,t,e):""}function E(t,e){return t%e>0&&(t+=e-t%e),t}function x(t){p=t,n.HEAP8=d=new Int8Array(t),n.HEAP16=y=new Int16Array(t),n.HEAP32=v=new Int32Array(t),n.HEAPU8=g=new Uint8Array(t),n.HEAPU16=new Uint16Array(t),n.HEAPU32=new Uint32Array(t),n.HEAPF32=m=new Float32Array(t),n.HEAPF64=_=new Float64Array(t)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var S=n.TOTAL_MEMORY||33554432;function I(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var r=e.func;"number"==typeof r?void 0===e.arg?n.dynCall_v(r):n.dynCall_vi(r,e.arg):r(void 0===e.arg?null:e.arg)}else e()}}S=(p=n.buffer?n.buffer:new ArrayBuffer(S)).byteLength,x(p),v[6004]=5266928;var M=[],C=[],P=[],O=[],N=Math.abs,R=Math.ceil,D=Math.floor,T=Math.min,L=0,k=null,F=null;n.preloadedImages={},n.preloadedAudios={};var j,B,G=null,U="data:application/octet-stream;base64,";function z(t){return String.prototype.startsWith?t.startsWith(U):0===t.indexOf(U)}function q(t){return t.replace(/\b__Z[\w\d_]+/g,(function(t){return t==t?t:t+" ["+t+"]"}))}function Q(){var t=new Error;if(!t.stack){try{throw new Error(0)}catch(e){t=e}if(!t.stack)return"(no stack trace available)"}return t.stack.toString()}function H(){return d.length}function V(t){try{var e=new ArrayBuffer(t);if(e.byteLength!=t)return;return new Int8Array(e).set(d),K(e),x(e),1}catch(t){}}G="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var Y="function"==typeof atob?atob:function(t){var e,n,r,i,o,A,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="",u=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{e=s.indexOf(t.charAt(u++))<<2|(i=s.indexOf(t.charAt(u++)))>>4,n=(15&i)<<4|(o=s.indexOf(t.charAt(u++)))>>2,r=(3&o)<<6|(A=s.indexOf(t.charAt(u++))),a+=String.fromCharCode(e),64!==o&&(a+=String.fromCharCode(n)),64!==A&&(a+=String.fromCharCode(r))}while(u<t.length);return a};function X(t){if(z(t))return function(t){try{for(var e=Y(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}catch(t){throw new Error("Converting base64 string to bytes failed.")}}(t.slice(U.length))}var W,Z,J=function(t,e,n){var r=new t.Int8Array(n),i=new t.Int32Array(n),o=(new t.Uint8Array(n),new t.Float32Array(n),new t.Float64Array(n)),A=0|e.p,s=t.Math.floor,a=t.Math.abs,u=t.Math.sqrt,c=t.Math.pow,l=t.Math.cos,f=t.Math.sin,h=t.Math.tan,p=t.Math.acos,d=t.Math.asin,g=t.Math.atan,y=t.Math.atan2,v=t.Math.ceil,m=t.Math.imul,_=t.Math.min,b=t.Math.clz32,w=e.b,E=e.c,x=e.d,S=e.e,I=e.f,M=e.g,C=e.h,P=e.i,O=24048;function N(t,e,n,r){var i,o;0|R(t|=0,e|=0,n|=0,r|=0,0)&&(Ce(0|r,0,(o=1+(0|m(3*n|0,n+1|0))|0)<<3|0),(i=0|me(o,4))&&(D(t,e,n,r,i,o,0),ve(i)))}function R(t,e,n,r,o){t|=0,e|=0,n|=0,o|=0;var A,s=0,a=0,u=0,c=0,l=0,f=0,h=0,p=0;if(A=O,O=O+16|0,p=A,i[(s=r|=0)>>2]=t,i[s+4>>2]=e,(s=0!=(0|o))&&(i[o>>2]=0),0|Tt(t,e))return O=A,1;i[p>>2]=0;t:do{if((0|n)>=1)if(s)for(l=0,f=1,h=1,a=0,s=t;;){if(!(a|l)){if(0==(0|(s=0|T(s,e,4,p)))&0==(0|(e=0|E()))){s=2;break t}if(0|Tt(s,e)){s=1;break t}}if(0==(0|(s=0|T(s,e,0|i[16+(l<<2)>>2],p)))&0==(0|(e=0|E()))){s=2;break t}if(i[(t=r+(h<<3)|0)>>2]=s,i[t+4>>2]=e,i[o+(h<<2)>>2]=f,t=(0|(a=a+1|0))==(0|f),c=6==(0|(u=l+1|0)),0|Tt(s,e)){s=1;break t}if((0|(f=f+(c&t&1)|0))>(0|n)){s=0;break}l=t?c?0:u:l,h=h+1|0,a=t?0:a}else for(l=0,f=1,h=1,a=0,s=t;;){if(!(a|l)){if(0==(0|(s=0|T(s,e,4,p)))&0==(0|(e=0|E()))){s=2;break t}if(0|Tt(s,e)){s=1;break t}}if(0==(0|(s=0|T(s,e,0|i[16+(l<<2)>>2],p)))&0==(0|(e=0|E()))){s=2;break t}if(i[(t=r+(h<<3)|0)>>2]=s,i[t+4>>2]=e,t=(0|(a=a+1|0))==(0|f),c=6==(0|(u=l+1|0)),0|Tt(s,e)){s=1;break t}if((0|(f=f+(c&t&1)|0))>(0|n)){s=0;break}l=t?c?0:u:l,h=h+1|0,a=t?0:a}else s=0}while(0);return O=A,0|s}function D(t,e,n,r,o,A,s){n|=0,r|=0,o|=0,A|=0,s|=0;var a,u,c=0,l=0,f=0,h=0,p=0;if(u=O,O=O+16|0,a=u,0==(0|(t|=0))&0==(0|(e|=0)))O=u;else{if(c=0|we(0|t,0|e,0|A,((0|A)<0)<<31>>31|0),E(),!(0==(0|(p=0|i[(h=l=r+(c<<3)|0)>>2]))&0==(0|(h=0|i[h+4>>2]))|(f=(0|p)==(0|t)&(0|h)==(0|e))))do{f=(0|(h=0|i[(p=l=r+((c=(c+1|0)%(0|A)|0)<<3)|0)>>2]))==(0|t)&(0|(p=0|i[p+4>>2]))==(0|e)}while(!(0==(0|h)&0==(0|p)|f));c=o+(c<<2)|0,f&&(0|i[c>>2])<=(0|s)||(i[(p=l)>>2]=t,i[p+4>>2]=e,i[c>>2]=s,(0|s)>=(0|n)||(p=s+1|0,i[a>>2]=0,D(h=0|T(t,e,2,a),0|E(),n,r,o,A,p),i[a>>2]=0,D(h=0|T(t,e,3,a),0|E(),n,r,o,A,p),i[a>>2]=0,D(h=0|T(t,e,1,a),0|E(),n,r,o,A,p),i[a>>2]=0,D(h=0|T(t,e,5,a),0|E(),n,r,o,A,p),i[a>>2]=0,D(h=0|T(t,e,4,a),0|E(),n,r,o,A,p),i[a>>2]=0,D(h=0|T(t,e,6,a),0|E(),n,r,o,A,p))),O=u}}function T(t,e,n,r){t|=0,e|=0,n|=0;var o,A,s=0,a=0,u=0,c=0,l=0,f=0,h=0;if((0|i[(r|=0)>>2])>0){s=0;do{n=0|at(n),s=s+1|0}while((0|s)<(0|i[r>>2]))}o=0|Ee(0|t,0|e,45),E(),A=127&o,a=0|Lt(t,e),s=0|Ee(0|t,0|e,52),E(),s&=15;t:do{if(s)for(;;){if(f=0|Ee(0|t,0|e,0|(l=3*(15-s|0)|0)),E(),f&=7,h=0==(0|Gt(s)),s=s+-1|0,c=0|xe(7,0,0|l),e&=~(0|E()),t=(l=0|xe(0|i[(h?464:48)+(28*f|0)+(n<<2)>>2],0,0|l))|t&~c,e|=0|E(),!(n=0|i[(h?672:256)+(28*f|0)+(n<<2)>>2])){n=0;break t}if(!s){u=6;break}}else u=6}while(0);6==(0|u)&&(t|=f=0|xe(0|(h=0|i[880+(28*A|0)+(n<<2)>>2]),0,45),e=0|E()|-1040385&e,n=0|i[4304+(28*A|0)+(n<<2)>>2],127==(127&h|0)&&(h=0|xe(0|i[880+(28*A|0)+20>>2],0,45),e=0|E()|-1040385&e,n=0|i[4304+(28*A|0)+20>>2],t=0|Ft(h|t,e),e=0|E(),i[r>>2]=1+(0|i[r>>2]))),u=0|Ee(0|t,0|e,45),E(),u&=127;t:do{if(0|k(u)){e:do{if(1==(0|Lt(t,e))){if((0|A)!=(0|u)){if(0|G(u,0|i[7728+(28*A|0)>>2])){t=0|Bt(t,e),a=1,e=0|E();break}t=0|Ft(t,e),a=1,e=0|E();break}switch(0|a){case 5:t=0|Bt(t,e),e=0|E(),i[r>>2]=5+(0|i[r>>2]),a=0;break e;case 3:t=0|Ft(t,e),e=0|E(),i[r>>2]=1+(0|i[r>>2]),a=0;break e;default:return h=0,w(0|(f=0)),0|h}}else a=0}while(0);if((0|n)>0){s=0;do{t=0|kt(t,e),e=0|E(),s=s+1|0}while((0|s)!=(0|n))}if((0|A)!=(0|u)){if(!(0|F(u))){if(0!=(0|a)|5!=(0|Lt(t,e)))break;i[r>>2]=1+(0|i[r>>2]);break}switch(127&o){case 8:case 118:break t}3!=(0|Lt(t,e))&&(i[r>>2]=1+(0|i[r>>2]))}}else if((0|n)>0){s=0;do{t=0|Ft(t,e),e=0|E(),s=s+1|0}while((0|s)!=(0|n))}}while(0);return i[r>>2]=((0|i[r>>2])+n|0)%6|0,h=t,w(0|(f=e)),0|h}function L(t,e,n,r,A,s){e|=0,n|=0,r|=0,A|=0,s|=0;var a,u,c,l,f,h,p,d,g,y=0,v=0,m=0,_=0,b=0,w=0,x=0,S=0,I=0,M=0,C=0,P=0,N=0,R=0;if(g=O,O=O+48|0,h=g+32|0,p=g+16|0,d=g,(0|(y=0|i[(t|=0)>>2]))<=0)return O=g,0;a=t+4|0,u=h+8|0,c=p+8|0,l=d+8|0,f=((0|e)<0)<<31>>31,C=0;t:for(;;){I=(v=0|i[a>>2])+(C<<4)|0,i[h>>2]=i[I>>2],i[h+4>>2]=i[I+4>>2],i[h+8>>2]=i[I+8>>2],i[h+12>>2]=i[I+12>>2],(0|C)==(y+-1|0)?(i[p>>2]=i[v>>2],i[p+4>>2]=i[v+4>>2],i[p+8>>2]=i[v+8>>2],i[p+12>>2]=i[v+12>>2]):(I=v+(C+1<<4)|0,i[p>>2]=i[I>>2],i[p+4>>2]=i[I+4>>2],i[p+8>>2]=i[I+8>>2],i[p+12>>2]=i[I+12>>2]),I=0|V(h,p,n);e:do{if((0|I)>0){M=+(0|I),S=0;n:for(;;){R=+(I-S|0),N=+(0|S),o[d>>3]=+o[h>>3]*R/M+ +o[p>>3]*N/M,o[l>>3]=+o[u>>3]*R/M+ +o[c>>3]*N/M,v=0|we(0|(w=0|Ut(d,n)),0|(x=0|E()),0|e,0|f),E(),_=0|i[(m=y=s+(v<<3)|0)>>2],m=0|i[m+4>>2];r:do{if(0==(0|_)&0==(0|m))P=14;else for(b=0;;){if((0|b)>(0|e)){y=1;break r}if((0|_)==(0|w)&(0|m)==(0|x)){y=7;break r}if(0==(0|(_=0|i[(m=y=s+((v=(v+1|0)%(0|e)|0)<<3)|0)>>2]))&0==(0|(m=0|i[m+4>>2]))){P=14;break}b=b+1|0}}while(0);switch(14==(0|P)&&(P=0,0==(0|w)&0==(0|x)?y=7:(i[y>>2]=w,i[y+4>>2]=x,y=0|i[r>>2],i[(b=A+(y<<3)|0)>>2]=w,i[b+4>>2]=x,i[r>>2]=y+1,y=0)),7&y){case 7:case 0:break;default:break n}if((0|I)<=(0|(S=S+1|0))){P=8;break e}}if(0|y){y=-1,P=20;break t}}else P=8}while(0);if(8==(0|P)&&(P=0),(0|(C=C+1|0))>=(0|(y=0|i[t>>2]))){y=0,P=20;break}}return 20==(0|P)?(O=g,0|y):0}function k(t){return 0|i[7728+(28*(t|=0)|0)+16>>2]}function F(t){return 4==(0|(t|=0))|117==(0|t)|0}function j(t){return 0|i[11152+(216*(0|i[(t|=0)>>2])|0)+(72*(0|i[t+4>>2])|0)+(24*(0|i[t+8>>2])|0)+(i[t+12>>2]<<3)>>2]}function B(t){return 0|i[11152+(216*(0|i[(t|=0)>>2])|0)+(72*(0|i[t+4>>2])|0)+(24*(0|i[t+8>>2])|0)+(i[t+12>>2]<<3)+4>>2]}function G(t,e){return e|=0,(0|i[7728+(28*(t|=0)|0)+20>>2])==(0|e)?0|(e=1):0|(e=(0|i[7728+(28*t|0)+24>>2])==(0|e))}function U(t,e){return 0|i[880+(28*(t|=0)|0)+((e|=0)<<2)>>2]}function z(t,e){return e|=0,(0|i[880+(28*(t|=0)|0)>>2])==(0|e)?0|(e=0):(0|i[880+(28*t|0)+4>>2])==(0|e)?0|(e=1):(0|i[880+(28*t|0)+8>>2])==(0|e)?0|(e=2):(0|i[880+(28*t|0)+12>>2])==(0|e)?0|(e=3):(0|i[880+(28*t|0)+16>>2])==(0|e)?0|(e=4):(0|i[880+(28*t|0)+20>>2])==(0|e)?0|(e=5):0|((0|i[880+(28*t|0)+24>>2])==(0|e)?6:7)}function q(t){return+o[16+(t|=0)>>3]<+o[t+24>>3]|0}function Q(t,e){t|=0;var n,r,i=0;return(i=+o[(e|=0)>>3])>=+o[t+8>>3]&&i<=+o[t>>3]?(n=+o[t+16>>3],i=+o[t+24>>3],e=(r=+o[e+8>>3])>=i,t=r<=n&1,n<i?e&&(t=1):e||(t=0),0|(e=0!=(0|t))):0|(e=0)}function H(t,e){t|=0,e|=0;var n,r,A,s,u,c,l=0,f=0;s=O,O=O+288|0,n=s+264|0,r=s+96|0,f=(l=A=s)+96|0;do{i[l>>2]=0,l=l+4|0}while((0|l)<(0|f));return Vt(e,A),Qt(f=0|i[(l=A)>>2],l=0|i[l+4>>2],n),Ht(f,l,r),u=+Ct(n,r+8|0),o[n>>3]=+o[t>>3],o[(l=n+8|0)>>3]=+o[t+16>>3],o[r>>3]=+o[t+8>>3],o[(f=r+8|0)>>3]=+o[t+24>>3],c=+Ct(n,r),f=~~+v(+c*c/+Se(+ +a(+(+o[l>>3]-+o[f>>3])/(+o[n>>3]-+o[r>>3])),3)/(u*(2.59807621135*u)*.8)),O=s,0|(0==(0|f)?1:f)}function V(t,e,n){t|=0,e|=0,n|=0;var r,o,A,s,a,u=0,c=0;s=O,O=O+288|0,r=s+264|0,o=s+96|0,c=(u=A=s)+96|0;do{i[u>>2]=0,u=u+4|0}while((0|u)<(0|c));return Vt(n,A),Qt(u=0|i[(c=A)>>2],c=0|i[c+4>>2],r),Ht(u,c,o),a=+Ct(r,o+8|0),c=~~+v(+ +Ct(t,e)/(2*a)),O=s,0|(0==(0|c)?1:c)}function Y(t,e,n,r){e|=0,n|=0,r|=0,i[(t|=0)>>2]=e,i[t+4>>2]=n,i[t+8>>2]=r}function X(t,e){t|=0;var n,r,A,s,u=0,c=0,l=0,f=0,h=0,p=0,d=0;i[(s=8+(e|=0)|0)>>2]=0,r=+o[t>>3],f=+a(+r),A=+o[t+8>>3],f+=.5*(h=+a(+A)/.8660254037844386),f-=+(0|(u=~~f)),h-=+(0|(t=~~h));do{if(f<.5){if(f<.3333333333333333){if(i[e>>2]=u,h<.5*(f+1)){i[e+4>>2]=t;break}t=t+1|0,i[e+4>>2]=t;break}if(t=(1&!(h<(d=1-f)))+t|0,i[e+4>>2]=t,d<=h&h<2*f){u=u+1|0,i[e>>2]=u;break}i[e>>2]=u;break}if(!(f<.6666666666666666)){if(u=u+1|0,i[e>>2]=u,h<.5*f){i[e+4>>2]=t;break}t=t+1|0,i[e+4>>2]=t;break}if(h<1-f){if(i[e+4>>2]=t,2*f-1<h){i[e>>2]=u;break}}else t=t+1|0,i[e+4>>2]=t;u=u+1|0,i[e>>2]=u}while(0);do{if(r<0){if(1&t){u=~~(+(0|u)-(2*(+((p=0|_e(0|u,((0|u)<0)<<31>>31|0,0|(p=(t+1|0)/2|0),((0|p)<0)<<31>>31|0))>>>0)+4294967296*+(0|E()))+1)),i[e>>2]=u;break}u=~~(+(0|u)-2*(+((p=0|_e(0|u,((0|u)<0)<<31>>31|0,0|(p=(0|t)/2|0),((0|p)<0)<<31>>31|0))>>>0)+4294967296*+(0|E()))),i[e>>2]=u;break}}while(0);p=e+4|0,A<0&&(u=u-((1|t<<1)/2|0)|0,i[e>>2]=u,t=0-t|0,i[p>>2]=t),c=t-u|0,(0|u)<0?(l=0-u|0,i[p>>2]=c,i[s>>2]=l,i[e>>2]=0,t=c,u=0):l=0,(0|t)<0&&(u=u-t|0,i[e>>2]=u,l=l-t|0,i[s>>2]=l,i[p>>2]=0,t=0),n=u-l|0,c=t-l|0,(0|l)<0&&(i[e>>2]=n,i[p>>2]=c,i[s>>2]=0,t=c,u=n,l=0),(0|(c=(0|l)<(0|(c=(0|t)<(0|u)?t:u))?l:c))<=0||(i[e>>2]=u-c,i[p>>2]=t-c,i[s>>2]=l-c)}function W(t){var e,n=0,r=0,o=0,A=0,s=0;n=0|i[(t|=0)>>2],r=0|i[(e=t+4|0)>>2],(0|n)<0&&(r=r-n|0,i[e>>2]=r,i[(s=t+8|0)>>2]=(0|i[s>>2])-n,i[t>>2]=0,n=0),(0|r)<0?(n=n-r|0,i[t>>2]=n,A=(0|i[(s=t+8|0)>>2])-r|0,i[s>>2]=A,i[e>>2]=0,r=0):(s=A=t+8|0,A=0|i[A>>2]),(0|A)<0&&(n=n-A|0,i[t>>2]=n,r=r-A|0,i[e>>2]=r,i[s>>2]=0,A=0),(0|(o=(0|A)<(0|(o=(0|r)<(0|n)?r:n))?A:o))<=0||(i[t>>2]=n-o,i[e>>2]=r-o,i[s>>2]=A-o)}function Z(t,e){var n,r;e|=0,r=0|i[8+(t|=0)>>2],n=+((0|i[t+4>>2])-r|0),o[e>>3]=+((0|i[t>>2])-r|0)-.5*n,o[e+8>>3]=.8660254037844386*n}function J(t,e,n){t|=0,e|=0,i[(n|=0)>>2]=(0|i[e>>2])+(0|i[t>>2]),i[n+4>>2]=(0|i[e+4>>2])+(0|i[t+4>>2]),i[n+8>>2]=(0|i[e+8>>2])+(0|i[t+8>>2])}function K(t,e,n){t|=0,e|=0,i[(n|=0)>>2]=(0|i[t>>2])-(0|i[e>>2]),i[n+4>>2]=(0|i[t+4>>2])-(0|i[e+4>>2]),i[n+8>>2]=(0|i[t+8>>2])-(0|i[e+8>>2])}function $(t,e){e|=0;var n,r=0;r=0|m(0|i[(t|=0)>>2],e),i[t>>2]=r,n=0|m(0|i[(r=t+4|0)>>2],e),i[r>>2]=n,e=0|m(0|i[(t=t+8|0)>>2],e),i[t>>2]=e}function tt(t){var e,n,r=0,o=0,A=0,s=0,a=0;a=(0|(n=0|i[(t|=0)>>2]))<0,t=(t=(o=(0|(s=((e=(0|(A=(0|i[t+4>>2])-(a?n:0)|0))<0)?0-A|0:0)+((0|i[t+8>>2])-(a?n:0))|0))<0)?0:s)-((A=(0|(o=(0|t)<(0|(o=(0|(r=(e?0:A)-(o?s:0)|0))<(0|(s=(a?0:n)-(e?A:0)-(o?s:0)|0))?r:s))?t:o))>0)?o:0)|0,r=r-(A?o:0)|0;t:do{switch(s-(A?o:0)|0){case 0:switch(0|r){case 0:return 0|(0==(0|t)?0:1==(0|t)?1:7);case 1:return 0|(0==(0|t)?2:1==(0|t)?3:7);default:break t}case 1:switch(0|r){case 0:return 0|(0==(0|t)?4:1==(0|t)?5:7);case 1:if(t)break t;return 6;default:break t}}}while(0);return 7}function et(t){var e,n,r=0,o=0,A=0,s=0,a=0;o=0|i[(e=8+(t|=0)|0)>>2],A=0|ge(+((3*(r=(0|i[t>>2])-o|0)|0)-(o=(0|i[(n=t+4|0)>>2])-o|0)|0)/7),i[t>>2]=A,r=0|ge(+((o<<1)+r|0)/7),i[n>>2]=r,i[e>>2]=0,o=r-A|0,(0|A)<0?(a=0-A|0,i[n>>2]=o,i[e>>2]=a,i[t>>2]=0,r=o,A=0,o=a):o=0,(0|r)<0&&(A=A-r|0,i[t>>2]=A,o=o-r|0,i[e>>2]=o,i[n>>2]=0,r=0),a=A-o|0,s=r-o|0,(0|o)<0?(i[t>>2]=a,i[n>>2]=s,i[e>>2]=0,r=s,s=a,o=0):s=A,(0|(A=(0|o)<(0|(A=(0|r)<(0|s)?r:s))?o:A))<=0||(i[t>>2]=s-A,i[n>>2]=r-A,i[e>>2]=o-A)}function nt(t){var e,n,r=0,o=0,A=0,s=0,a=0;o=0|i[(e=8+(t|=0)|0)>>2],A=0|ge(+(((r=(0|i[t>>2])-o|0)<<1)+(o=(0|i[(n=t+4|0)>>2])-o|0)|0)/7),i[t>>2]=A,r=0|ge(+((3*o|0)-r|0)/7),i[n>>2]=r,i[e>>2]=0,o=r-A|0,(0|A)<0?(a=0-A|0,i[n>>2]=o,i[e>>2]=a,i[t>>2]=0,r=o,A=0,o=a):o=0,(0|r)<0&&(A=A-r|0,i[t>>2]=A,o=o-r|0,i[e>>2]=o,i[n>>2]=0,r=0),a=A-o|0,s=r-o|0,(0|o)<0?(i[t>>2]=a,i[n>>2]=s,i[e>>2]=0,r=s,s=a,o=0):s=A,(0|(A=(0|o)<(0|(A=(0|r)<(0|s)?r:s))?o:A))<=0||(i[t>>2]=s-A,i[n>>2]=r-A,i[e>>2]=o-A)}function rt(t){var e,n,r,o=0,A=0,s=0,a=0;o=0|i[(t|=0)>>2],A=0|i[(n=t+4|0)>>2],s=0|i[(r=t+8|0)>>2],a=A+(3*o|0)|0,i[t>>2]=a,A=s+(3*A|0)|0,i[n>>2]=A,o=(3*s|0)+o|0,i[r>>2]=o,s=A-a|0,(0|a)<0?(o=o-a|0,i[n>>2]=s,i[r>>2]=o,i[t>>2]=0,A=s,s=0):s=a,(0|A)<0&&(s=s-A|0,i[t>>2]=s,o=o-A|0,i[r>>2]=o,i[n>>2]=0,A=0),e=s-o|0,a=A-o|0,(0|o)<0?(i[t>>2]=e,i[n>>2]=a,i[r>>2]=0,s=e,o=0):a=A,(0|(A=(0|o)<(0|(A=(0|a)<(0|s)?a:s))?o:A))<=0||(i[t>>2]=s-A,i[n>>2]=a-A,i[r>>2]=o-A)}function it(t){var e,n,r,o=0,A=0,s=0,a=0;a=0|i[(t|=0)>>2],s=(3*(o=0|i[(n=t+4|0)>>2])|0)+a|0,a=(A=0|i[(r=t+8|0)>>2])+(3*a|0)|0,i[t>>2]=a,i[n>>2]=s,o=(3*A|0)+o|0,i[r>>2]=o,A=s-a|0,(0|a)<0?(o=o-a|0,i[n>>2]=A,i[r>>2]=o,i[t>>2]=0,a=0):A=s,(0|A)<0&&(a=a-A|0,i[t>>2]=a,o=o-A|0,i[r>>2]=o,i[n>>2]=0,A=0),e=a-o|0,s=A-o|0,(0|o)<0?(i[t>>2]=e,i[n>>2]=s,i[r>>2]=0,a=e,o=0):s=A,(0|(A=(0|o)<(0|(A=(0|s)<(0|a)?s:a))?o:A))<=0||(i[t>>2]=a-A,i[n>>2]=s-A,i[r>>2]=o-A)}function ot(t,e){t|=0;var n,r,o,A=0,s=0,a=0;((e|=0)-1|0)>>>0>=6||(a=(0|i[15472+(12*e|0)>>2])+(0|i[t>>2])|0,i[t>>2]=a,o=t+4|0,s=(0|i[15472+(12*e|0)+4>>2])+(0|i[o>>2])|0,i[o>>2]=s,r=t+8|0,e=(0|i[15472+(12*e|0)+8>>2])+(0|i[r>>2])|0,i[r>>2]=e,A=s-a|0,(0|a)<0?(e=e-a|0,i[o>>2]=A,i[r>>2]=e,i[t>>2]=0,s=0):(A=s,s=a),(0|A)<0&&(s=s-A|0,i[t>>2]=s,e=e-A|0,i[r>>2]=e,i[o>>2]=0,A=0),n=s-e|0,a=A-e|0,(0|e)<0?(i[t>>2]=n,i[o>>2]=a,i[r>>2]=0,s=n,e=0):a=A,(0|(A=(0|e)<(0|(A=(0|a)<(0|s)?a:s))?e:A))<=0||(i[t>>2]=s-A,i[o>>2]=a-A,i[r>>2]=e-A))}function At(t){var e,n,r,o=0,A=0,s=0,a=0;a=0|i[(t|=0)>>2],s=(o=0|i[(n=t+4|0)>>2])+a|0,a=(A=0|i[(r=t+8|0)>>2])+a|0,i[t>>2]=a,i[n>>2]=s,o=A+o|0,i[r>>2]=o,A=s-a|0,(0|a)<0?(o=o-a|0,i[n>>2]=A,i[r>>2]=o,i[t>>2]=0,s=0):(A=s,s=a),(0|A)<0&&(s=s-A|0,i[t>>2]=s,o=o-A|0,i[r>>2]=o,i[n>>2]=0,A=0),e=s-o|0,a=A-o|0,(0|o)<0?(i[t>>2]=e,i[n>>2]=a,i[r>>2]=0,s=e,o=0):a=A,(0|(A=(0|o)<(0|(A=(0|a)<(0|s)?a:s))?o:A))<=0||(i[t>>2]=s-A,i[n>>2]=a-A,i[r>>2]=o-A)}function st(t){var e,n,r,o=0,A=0,s=0,a=0;o=0|i[(t|=0)>>2],s=0|i[(n=t+4|0)>>2],A=0|i[(r=t+8|0)>>2],a=s+o|0,i[t>>2]=a,s=A+s|0,i[n>>2]=s,o=A+o|0,i[r>>2]=o,A=s-a|0,(0|a)<0?(o=o-a|0,i[n>>2]=A,i[r>>2]=o,i[t>>2]=0,s=0):(A=s,s=a),(0|A)<0&&(s=s-A|0,i[t>>2]=s,o=o-A|0,i[r>>2]=o,i[n>>2]=0,A=0),e=s-o|0,a=A-o|0,(0|o)<0?(i[t>>2]=e,i[n>>2]=a,i[r>>2]=0,s=e,o=0):a=A,(0|(A=(0|o)<(0|(A=(0|a)<(0|s)?a:s))?o:A))<=0||(i[t>>2]=s-A,i[n>>2]=a-A,i[r>>2]=o-A)}function at(t){switch(0|(t|=0)){case 1:t=5;break;case 5:t=4;break;case 4:t=6;break;case 6:t=2;break;case 2:t=3;break;case 3:t=1}return 0|t}function ut(t){switch(0|(t|=0)){case 1:t=3;break;case 3:t=2;break;case 2:t=6;break;case 6:t=4;break;case 4:t=5;break;case 5:t=1}return 0|t}function ct(t){var e,n,r,o=0,A=0,s=0,a=0;o=0|i[(t|=0)>>2],A=0|i[(n=t+4|0)>>2],s=0|i[(r=t+8|0)>>2],a=A+(o<<1)|0,i[t>>2]=a,A=s+(A<<1)|0,i[n>>2]=A,o=(s<<1)+o|0,i[r>>2]=o,s=A-a|0,(0|a)<0?(o=o-a|0,i[n>>2]=s,i[r>>2]=o,i[t>>2]=0,A=s,s=0):s=a,(0|A)<0&&(s=s-A|0,i[t>>2]=s,o=o-A|0,i[r>>2]=o,i[n>>2]=0,A=0),e=s-o|0,a=A-o|0,(0|o)<0?(i[t>>2]=e,i[n>>2]=a,i[r>>2]=0,s=e,o=0):a=A,(0|(A=(0|o)<(0|(A=(0|a)<(0|s)?a:s))?o:A))<=0||(i[t>>2]=s-A,i[n>>2]=a-A,i[r>>2]=o-A)}function lt(t){var e,n,r,o=0,A=0,s=0,a=0;a=0|i[(t|=0)>>2],s=((o=0|i[(n=t+4|0)>>2])<<1)+a|0,a=(A=0|i[(r=t+8|0)>>2])+(a<<1)|0,i[t>>2]=a,i[n>>2]=s,o=(A<<1)+o|0,i[r>>2]=o,A=s-a|0,(0|a)<0?(o=o-a|0,i[n>>2]=A,i[r>>2]=o,i[t>>2]=0,a=0):A=s,(0|A)<0&&(a=a-A|0,i[t>>2]=a,o=o-A|0,i[r>>2]=o,i[n>>2]=0,A=0),e=a-o|0,s=A-o|0,(0|o)<0?(i[t>>2]=e,i[n>>2]=s,i[r>>2]=0,a=e,o=0):s=A,(0|(A=(0|o)<(0|(A=(0|s)<(0|a)?s:a))?o:A))<=0||(i[t>>2]=a-A,i[n>>2]=s-A,i[r>>2]=o-A)}function ft(t,e){e|=0;var n,r,o,A=0,s=0,a=0;return o=(0|(r=(0|i[(t|=0)>>2])-(0|i[e>>2])|0))<0,n=(0|(s=(0|i[t+4>>2])-(0|i[e+4>>2])-(o?r:0)|0))<0,e=(e=(t=(0|(a=(o?0-r|0:0)+(0|i[t+8>>2])-(0|i[e+8>>2])+(n?0-s|0:0)|0))<0)?0:a)-((s=(0|(t=(0|e)<(0|(t=(0|(A=(n?0:s)-(t?a:0)|0))<(0|(a=(o?0:r)-(n?s:0)-(t?a:0)|0))?A:a))?e:t))>0)?t:0)|0,A=A-(s?t:0)|0,0|((0|(t=(0|(t=a-(s?t:0)|0))>-1?t:0-t|0))>(0|(e=(0|(A=(0|A)>-1?A:0-A|0))>(0|(e=(0|e)>-1?e:0-e|0))?A:e))?t:e)}function ht(t,e){var n;e|=0,n=0|i[8+(t|=0)>>2],i[e>>2]=(0|i[t>>2])-n,i[e+4>>2]=(0|i[t+4>>2])-n}function pt(t,e){e|=0;var n,r,o,A=0,s=0,a=0;s=0|i[(t|=0)>>2],i[e>>2]=s,t=0|i[t+4>>2],i[(r=e+4|0)>>2]=t,i[(o=e+8|0)>>2]=0,A=t-s|0,(0|s)<0?(t=0-s|0,i[r>>2]=A,i[o>>2]=t,i[e>>2]=0,s=0):(A=t,t=0),(0|A)<0&&(s=s-A|0,i[e>>2]=s,t=t-A|0,i[o>>2]=t,i[r>>2]=0,A=0),n=s-t|0,a=A-t|0,(0|t)<0?(i[e>>2]=n,i[r>>2]=a,i[o>>2]=0,A=a,a=n,t=0):a=s,(0|(s=(0|t)<(0|(s=(0|A)<(0|a)?A:a))?t:s))<=0||(i[e>>2]=a-s,i[r>>2]=A-s,i[o>>2]=t-s)}function dt(t){var e,n,r,o;n=(o=0|i[(e=8+(t|=0)|0)>>2])-(0|i[t>>2])|0,i[t>>2]=n,t=(0|i[(r=t+4|0)>>2])-o|0,i[r>>2]=t,i[e>>2]=0-(t+n)}function gt(t){var e,n,r=0,o=0,A=0,s=0,a=0;r=0-(o=0|i[(t|=0)>>2])|0,i[t>>2]=r,i[(e=t+8|0)>>2]=0,s=(A=0|i[(n=t+4|0)>>2])+o|0,(0|o)>0?(i[n>>2]=s,i[e>>2]=o,i[t>>2]=0,r=0,A=s):o=0,(0|A)<0?(a=r-A|0,i[t>>2]=a,o=o-A|0,i[e>>2]=o,i[n>>2]=0,s=a-o|0,r=0-o|0,(0|o)<0?(i[t>>2]=s,i[n>>2]=r,i[e>>2]=0,A=r,o=0):(A=0,s=a)):s=r,(0|(r=(0|o)<(0|(r=(0|A)<(0|s)?A:s))?o:r))<=0||(i[t>>2]=s-r,i[n>>2]=A-r,i[e>>2]=o-r)}function yt(t,e,n,r){e|=0,n|=0,r|=0;var A,s=0,a=0,u=0,c=0;if(A=O,O=O+32|0,function(t,e){e|=0;var n,r,i=0;i=+o[(t|=0)>>3],n=+l(+i),i=+f(+i),o[e+16>>3]=i,i=+o[t+8>>3],r=n*+l(+i),o[e>>3]=r,i=n*+f(+i),o[e+8>>3]=i}(t|=0,a=A),i[n>>2]=0,s=+ae(15888,a),(u=+ae(15912,a))<s&&(i[n>>2]=1,s=u),(u=+ae(15936,a))<s&&(i[n>>2]=2,s=u),(u=+ae(15960,a))<s&&(i[n>>2]=3,s=u),(u=+ae(15984,a))<s&&(i[n>>2]=4,s=u),(u=+ae(16008,a))<s&&(i[n>>2]=5,s=u),(u=+ae(16032,a))<s&&(i[n>>2]=6,s=u),(u=+ae(16056,a))<s&&(i[n>>2]=7,s=u),(u=+ae(16080,a))<s&&(i[n>>2]=8,s=u),(u=+ae(16104,a))<s&&(i[n>>2]=9,s=u),(u=+ae(16128,a))<s&&(i[n>>2]=10,s=u),(u=+ae(16152,a))<s&&(i[n>>2]=11,s=u),(u=+ae(16176,a))<s&&(i[n>>2]=12,s=u),(u=+ae(16200,a))<s&&(i[n>>2]=13,s=u),(u=+ae(16224,a))<s&&(i[n>>2]=14,s=u),(u=+ae(16248,a))<s&&(i[n>>2]=15,s=u),(u=+ae(16272,a))<s&&(i[n>>2]=16,s=u),(u=+ae(16296,a))<s&&(i[n>>2]=17,s=u),(u=+ae(16320,a))<s&&(i[n>>2]=18,s=u),(u=+ae(16344,a))<s&&(i[n>>2]=19,s=u),(u=+p(+(1-.5*s)))<1e-16)return i[r>>2]=0,i[r+4>>2]=0,i[r+8>>2]=0,i[r+12>>2]=0,void(O=A);if(n=0|i[n>>2],s=+It((s=+o[16368+(24*n|0)>>3])-+It(+function(t,e){t|=0;var n,r,i,A,s;return A=+o[(e|=0)>>3],r=+l(+A),i=+o[e+8>>3]-+o[t+8>>3],s=r*+f(+i),n=+o[t>>3],+ +y(+s,+(+f(+A)*+l(+n)-+l(+i)*(r*+f(+n))))}(15568+(n<<4)|0,t))),c=0|Gt(e)?+It(s+-.3334731722518321):s,s=+h(+u)/.381966011250105,(0|e)>0){a=0;do{s*=2.6457513110645907,a=a+1|0}while((0|a)!=(0|e))}u=+l(+c)*s,o[r>>3]=u,c=+f(+c)*s,o[r+8>>3]=c,O=A}function vt(t,e,n,r,A){e|=0,n|=0,r|=0,A|=0;var s=0,c=0;if((s=+function(t){var e,n;return n=+o[(t|=0)>>3],e=+o[t+8>>3],+ +u(+(n*n+e*e))}(t|=0))<1e-16)return e=15568+(e<<4)|0,i[A>>2]=i[e>>2],i[A+4>>2]=i[e+4>>2],i[A+8>>2]=i[e+8>>2],void(i[A+12>>2]=i[e+12>>2]);if(c=+y(+ +o[t+8>>3],+ +o[t>>3]),(0|n)>0){t=0;do{s/=2.6457513110645907,t=t+1|0}while((0|t)!=(0|n))}r?(s/=3,n=0==(0|Gt(n)),s=+g(.381966011250105*(n?s:s/2.6457513110645907))):(s=+g(.381966011250105*s),0|Gt(n)&&(c=+It(c+.3334731722518321))),function(t,e,n,r){t|=0,e=+e,r|=0;var A=0,s=0,u=0,c=0;if((n=+n)<1e-16)return i[r>>2]=i[t>>2],i[r+4>>2]=i[t+4>>2],i[r+8>>2]=i[t+8>>2],void(i[r+12>>2]=i[t+12>>2]);s=e<0?e+6.283185307179586:e,s=e>=6.283185307179586?s+-6.283185307179586:s;do{if(!(s<1e-16)){if(A=+a(+(s+-3.141592653589793))<1e-16,e=+o[t>>3],A){e-=n,o[r>>3]=e,A=r;break}if(u=+l(+n),n=+f(+n),e=u*+f(+e)+ +l(+s)*(n*+l(+e)),e=+d(+((e=e>1?1:e)<-1?-1:e)),o[r>>3]=e,+a(+(e+-1.5707963267948966))<1e-16)return o[r>>3]=1.5707963267948966,void(o[r+8>>3]=0);if(+a(+(e+1.5707963267948966))<1e-16)return o[r>>3]=-1.5707963267948966,void(o[r+8>>3]=0);if(c=+l(+e),s=n*+f(+s)/c,n=+o[t>>3],e=(u-+f(+e)*+f(+n))/+l(+n)/c,u=s>1?1:s,e=e>1?1:e,(e=+o[t+8>>3]+ +y(+(u<-1?-1:u),+(e<-1?-1:e)))>3.141592653589793)do{e+=-6.283185307179586}while(e>3.141592653589793);if(e<-3.141592653589793)do{e+=6.283185307179586}while(e<-3.141592653589793);return void(o[r+8>>3]=e)}e=+o[t>>3]+n,o[r>>3]=e,A=r}while(0);if(+a(+(e+-1.5707963267948966))<1e-16)return o[A>>3]=1.5707963267948966,void(o[r+8>>3]=0);if(+a(+(e+1.5707963267948966))<1e-16)return o[A>>3]=-1.5707963267948966,void(o[r+8>>3]=0);if((e=+o[t+8>>3])>3.141592653589793)do{e+=-6.283185307179586}while(e>3.141592653589793);if(e<-3.141592653589793)do{e+=6.283185307179586}while(e<-3.141592653589793);o[r+8>>3]=e}(15568+(e<<4)|0,+It(+o[16368+(24*e|0)>>3]-c),s,A)}function mt(t,e,n){var r,o;e|=0,n|=0,r=O,O=O+16|0,Z(4+(t|=0)|0,o=r),vt(o,0|i[t>>2],e,0,n),O=r}function _t(t,e,n,r,A){t|=0,e|=0,n|=0,r|=0,A|=0;var s,a,u,c,l,f,h,p,d,g,y,v,m,_,b,w,E,S,I,M,C,P,N=0,R=0,D=0,T=0,L=0,k=0;if(P=O,O=O+272|0,T=P+240|0,I=P,M=P+224|0,C=P+208|0,y=P+176|0,v=P+160|0,m=P+192|0,_=P+144|0,b=P+128|0,w=P+112|0,E=P+96|0,S=P+80|0,i[(N=P+256|0)>>2]=e,i[T>>2]=i[t>>2],i[T+4>>2]=i[t+4>>2],i[T+8>>2]=i[t+8>>2],i[T+12>>2]=i[t+12>>2],bt(T,N,I),i[A>>2]=0,(0|(T=r+n+(5==(0|r)&1)|0))<=(0|n))O=P;else{a=M+4|0,u=y+4|0,c=n+5|0,l=16848+((s=0|i[N>>2])<<2)|0,f=16928+(s<<2)|0,h=b+8|0,p=w+8|0,d=E+8|0,g=C+4|0,D=n;t:for(;;){R=I+(((0|D)%5|0)<<4)|0,i[C>>2]=i[R>>2],i[C+4>>2]=i[R+4>>2],i[C+8>>2]=i[R+8>>2],i[C+12>>2]=i[R+12>>2];do{}while(2==(0|wt(C,s,0,1)));if((0|D)>(0|n)&0!=(0|Gt(e))){if(i[y>>2]=i[C>>2],i[y+4>>2]=i[C+4>>2],i[y+8>>2]=i[C+8>>2],i[y+12>>2]=i[C+12>>2],Z(a,v),r=0|i[y>>2],N=0|i[17008+(80*r|0)+(i[M>>2]<<2)>>2],i[y>>2]=i[18608+(80*r|0)+(20*N|0)>>2],(0|(R=0|i[18608+(80*r|0)+(20*N|0)+16>>2]))>0){t=0;do{At(u),t=t+1|0}while((0|t)<(0|R))}switch(R=18608+(80*r|0)+(20*N|0)+4|0,i[m>>2]=i[R>>2],i[m+4>>2]=i[R+4>>2],i[m+8>>2]=i[R+8>>2],$(m,3*(0|i[l>>2])|0),J(u,m,u),W(u),Z(u,_),L=+(0|i[f>>2]),o[b>>3]=3*L,o[h>>3]=0,k=-1.5*L,o[w>>3]=k,o[p>>3]=2.598076211353316*L,o[E>>3]=k,o[d>>3]=-2.598076211353316*L,0|i[17008+(80*(0|i[y>>2])|0)+(i[C>>2]<<2)>>2]){case 1:t=w,r=b;break;case 3:t=E,r=w;break;case 2:t=b,r=E;break;default:t=12;break t}Ae(v,_,r,t,S),vt(S,0|i[y>>2],s,1,A+8+(i[A>>2]<<4)|0),i[A>>2]=1+(0|i[A>>2])}if((0|D)<(0|c)&&(Z(g,y),vt(y,0|i[C>>2],s,1,A+8+(i[A>>2]<<4)|0),i[A>>2]=1+(0|i[A>>2])),i[M>>2]=i[C>>2],i[M+4>>2]=i[C+4>>2],i[M+8>>2]=i[C+8>>2],i[M+12>>2]=i[C+12>>2],(0|(D=D+1|0))>=(0|T)){t=3;break}}3!=(0|t)?12==(0|t)&&x(22474,22521,581,22531):O=P}}function bt(t,e,n){t|=0,e|=0,n|=0;var r,o=0,A=0,s=0,a=0,u=0;r=O,O=O+128|0,A=r,a=20208,u=60+(s=o=r+64|0)|0;do{i[s>>2]=i[a>>2],s=s+4|0,a=a+4|0}while((0|s)<(0|u));a=20272,u=(s=A)+60|0;do{i[s>>2]=i[a>>2],s=s+4|0,a=a+4|0}while((0|s)<(0|u));o=(u=0==(0|Gt(0|i[e>>2])))?o:A,ct(A=t+4|0),lt(A),0|Gt(0|i[e>>2])&&(it(A),i[e>>2]=1+(0|i[e>>2])),i[n>>2]=i[t>>2],J(A,o,e=n+4|0),W(e),i[n+16>>2]=i[t>>2],J(A,o+12|0,e=n+20|0),W(e),i[n+32>>2]=i[t>>2],J(A,o+24|0,e=n+36|0),W(e),i[n+48>>2]=i[t>>2],J(A,o+36|0,e=n+52|0),W(e),i[n+64>>2]=i[t>>2],J(A,o+48|0,n=n+68|0),W(n),O=r}function wt(t,e,n,r){n|=0,r|=0;var o,A,s,a,u,c,l=0,f=0,h=0,p=0,d=0;if(c=O,O=O+32|0,u=c+12|0,A=c,d=4+(t|=0)|0,p=0|i[16928+((e|=0)<<2)>>2],p=(a=0!=(0|r))?3*p|0:p,l=0|i[d>>2],o=0|i[(s=t+8|0)>>2],a){if((0|(l=o+l+(r=0|i[(f=t+12|0)>>2])|0))==(0|p))return O=c,1;h=f}else l=o+l+(r=0|i[(h=t+12|0)>>2])|0;if((0|l)<=(0|p))return O=c,0;do{if((0|r)>0){if(r=0|i[t>>2],(0|o)>0){f=18608+(80*r|0)+60|0,r=t;break}r=18608+(80*r|0)+40|0,n?(Y(u,p,0,0),K(d,u,A),st(A),J(A,u,d),f=r,r=t):(f=r,r=t)}else f=18608+(80*(0|i[t>>2])|0)+20|0,r=t}while(0);if(i[r>>2]=i[f>>2],(0|i[(l=f+16|0)>>2])>0){r=0;do{At(d),r=r+1|0}while((0|r)<(0|i[l>>2]))}return t=f+4|0,i[u>>2]=i[t>>2],i[u+4>>2]=i[t+4>>2],i[u+8>>2]=i[t+8>>2],e=0|i[16848+(e<<2)>>2],$(u,a?3*e|0:e),J(d,u,d),W(d),r=a&&((0|i[s>>2])+(0|i[d>>2])+(0|i[h>>2])|0)==(0|p)?1:2,O=c,0|r}function Et(t,e){t|=0,e|=0;var n=0;do{n=0|wt(t,e,0,1)}while(2==(0|n));return 0|n}function xt(t,e,n,r,A){t|=0,e|=0,n|=0,r|=0,A|=0;var s,a,u,c,l,f,h,p,d,g,y,v,m,_,b,w,E,S,I=0,M=0,C=0,P=0,N=0;if(S=O,O=O+240|0,_=S+208|0,b=S,w=S+192|0,E=S+176|0,d=S+160|0,g=S+144|0,y=S+128|0,v=S+112|0,m=S+96|0,i[(I=S+224|0)>>2]=e,i[_>>2]=i[t>>2],i[_+4>>2]=i[t+4>>2],i[_+8>>2]=i[t+8>>2],i[_+12>>2]=i[t+12>>2],St(_,I,b),i[A>>2]=0,(0|(p=r+n+(6==(0|r)&1)|0))<=(0|n))O=S;else{a=n+6|0,u=16928+((s=0|i[I>>2])<<2)|0,c=g+8|0,l=y+8|0,f=v+8|0,h=w+4|0,M=0,C=n,r=-1;t:for(;;){if(t=b+((I=(0|C)%6|0)<<4)|0,i[w>>2]=i[t>>2],i[w+4>>2]=i[t+4>>2],i[w+8>>2]=i[t+8>>2],i[w+12>>2]=i[t+12>>2],t=M,M=0|wt(w,s,0,1),(0|C)>(0|n)&0!=(0|Gt(e))&&1!=(0|t)&&(0|i[w>>2])!=(0|r)){switch(Z(b+(((I+5|0)%6|0)<<4)+4|0,E),Z(b+(I<<4)+4|0,d),P=+(0|i[u>>2]),o[g>>3]=3*P,o[c>>3]=0,N=-1.5*P,o[y>>3]=N,o[l>>3]=2.598076211353316*P,o[v>>3]=N,o[f>>3]=-2.598076211353316*P,I=0|i[_>>2],0|i[17008+(80*I|0)+(((0|r)==(0|I)?0|i[w>>2]:r)<<2)>>2]){case 1:t=y,r=g;break;case 3:t=v,r=y;break;case 2:t=g,r=v;break;default:t=8;break t}Ae(E,d,r,t,m),0|se(E,m)||0|se(d,m)||(vt(m,0|i[_>>2],s,1,A+8+(i[A>>2]<<4)|0),i[A>>2]=1+(0|i[A>>2]))}if((0|C)<(0|a)&&(Z(h,E),vt(E,0|i[w>>2],s,1,A+8+(i[A>>2]<<4)|0),i[A>>2]=1+(0|i[A>>2])),(0|(C=C+1|0))>=(0|p)){t=3;break}r=0|i[w>>2]}3!=(0|t)?8==(0|t)&&x(22557,22521,746,22602):O=S}}function St(t,e,n){t|=0,e|=0,n|=0;var r,o=0,A=0,s=0,a=0,u=0;r=O,O=O+160|0,A=r,a=20336,u=72+(s=o=r+80|0)|0;do{i[s>>2]=i[a>>2],s=s+4|0,a=a+4|0}while((0|s)<(0|u));a=20416,u=(s=A)+72|0;do{i[s>>2]=i[a>>2],s=s+4|0,a=a+4|0}while((0|s)<(0|u));o=(u=0==(0|Gt(0|i[e>>2])))?o:A,ct(A=t+4|0),lt(A),0|Gt(0|i[e>>2])&&(it(A),i[e>>2]=1+(0|i[e>>2])),i[n>>2]=i[t>>2],J(A,o,e=n+4|0),W(e),i[n+16>>2]=i[t>>2],J(A,o+12|0,e=n+20|0),W(e),i[n+32>>2]=i[t>>2],J(A,o+24|0,e=n+36|0),W(e),i[n+48>>2]=i[t>>2],J(A,o+36|0,e=n+52|0),W(e),i[n+64>>2]=i[t>>2],J(A,o+48|0,e=n+68|0),W(e),i[n+80>>2]=i[t>>2],J(A,o+60|0,n=n+84|0),W(n),O=r}function It(t){var e;return e=(t=+t)<0?t+6.283185307179586:t,+(t>=6.283185307179586?e+-6.283185307179586:e)}function Mt(t,e){return e|=0,+a(+(+o[(t|=0)>>3]-+o[e>>3]))<17453292519943298e-27?0|(e=+a(+(+o[t+8>>3]-+o[e+8>>3]))<17453292519943298e-27):0|(e=0)}function Ct(t,e){t|=0;var n,r,i,A=0;return r=+o[(e|=0)>>3],n=+o[t>>3],A=(i=+f(.5*(r-n)))*i+(A=+f(.5*(+o[e+8>>3]-+o[t+8>>3])))*(+l(+r)*+l(+n)*A),2*+y(+ +u(+A),+ +u(+(1-A)))*6371.007180918475}function Pt(t,e,n){t|=0,n|=0;var r,i,A,s,a=0,c=0,p=0,d=0,v=0,m=0;return m=+o[(e|=0)>>3],A=+o[t>>3],v=+f(.5*(m-A)),p=+o[e+8>>3],i=+o[t+8>>3],d=+f(.5*(p-i)),r=+l(+A),s=+l(+m),d=2*+y(+ +u(+(d=v*v+d*(s*r*d))),+ +u(+(1-d))),v=+o[n>>3],m=+f(.5*(v-m)),a=+o[n+8>>3],p=+f(.5*(a-p)),c=+l(+v),p=2*+y(+ +u(+(p=m*m+p*(s*c*p))),+ +u(+(1-p))),v=+f(.5*(A-v)),a=+f(.5*(i-a)),a=2*+y(+ +u(+(a=v*v+a*(r*c*a))),+ +u(+(1-a))),4*+g(+ +u(+ +h(.5*(c=.5*(d+p+a)))*+h(.5*(c-d))*+h(.5*(c-p))*+h(.5*(c-a))))}function Ot(t,e){return e=0|Ee(0|(t|=0),0|(e|=0),45),E(),127&e|0}function Nt(t,e){var n=0,r=0,i=0,o=0,A=0,s=0;if(!(!0&134217728==(-16777216&(e|=0)|0)))return 0;if(A=0|Ee(0|(t|=0),0|e,45),E(),(A&=127)>>>0>121)return 0;n=0|Ee(0|t,0|e,52),E(),n&=15;do{if(0|n){for(i=1,r=0;;){if(o=0|Ee(0|t,0|e,3*(15-i|0)|0),E(),0!=(0|(o&=7))&(1^r)){if(1==(0|o)&0!=(0|k(A))){s=0,r=13;break}r=1}if(7==(0|o)){s=0,r=13;break}if(!(i>>>0<n>>>0)){r=9;break}i=i+1|0}if(9==(0|r)){if(15!=(0|n))break;return 1}if(13==(0|r))return 0|s}}while(0);for(;;){if(s=0|Ee(0|t,0|e,3*(14-n|0)|0),E(),!(7==(7&s|0)&!0)){s=0,r=13;break}if(!(n>>>0<14)){s=1,r=13;break}n=n+1|0}return 13==(0|r)?0|s:0}function Rt(t,e,n){n|=0;var r=0,i=0;if(r=0|Ee(0|(t|=0),0|(e|=0),52),E(),(0|(r&=15))>=(0|n)){if((0|r)!=(0|n))if(n>>>0<=15){if(t|=i=0|xe(0|n,0,52),e=0|E()|-15728641&e,(0|r)>(0|n))do{i=0|xe(7,0,3*(14-n|0)|0),n=n+1|0,t|=i,e=0|E()|e}while((0|n)<(0|r))}else e=0,t=0}else e=0,t=0;return w(0|e),0|t}function Dt(t,e,n,r){n|=0,r|=0;var o,A=0,s=0,a=0,u=0,c=0,l=0;if(a=0|Ee(0|(t|=0),0|(e|=0),52),E(),(0|n)<16&(0|(a&=15))<=(0|n)){if((0|a)==(0|n))return i[(n=r)>>2]=t,void(i[n+4>>2]=e);if(o=(0|(c=0|ee(7,n-a|0)))/7|0,u=0|Ee(0|t,0|e,45),E(),0|k(127&u)){t:do{if(a)for(s=1;;){if(A=0|Ee(0|t,0|e,3*(15-s|0)|0),E(),0|(A&=7))break t;if(!(s>>>0<a>>>0)){A=0;break}s=s+1|0}else A=0}while(0);s=0==(0|A)}else s=0;if(l=0|xe(a+1|0,0,52),A=0|E()|-15728641&e,Dt(e=(l|t)&~(e=0|xe(7,0,0|(u=3*(14-a|0)|0))),a=A&~(0|E()),n,r),A=r+(o<<3)|0,!s)return Dt((l=0|xe(1,0,0|u))|e,0|E()|a,n,A),l=A+(o<<3)|0,Dt((c=0|xe(2,0,0|u))|e,0|E()|a,n,l),l=l+(o<<3)|0,Dt((c=0|xe(3,0,0|u))|e,0|E()|a,n,l),l=l+(o<<3)|0,Dt((c=0|xe(4,0,0|u))|e,0|E()|a,n,l),l=l+(o<<3)|0,Dt((c=0|xe(5,0,0|u))|e,0|E()|a,n,l),void Dt((c=0|xe(6,0,0|u))|e,0|E()|a,n,l+(o<<3)|0);s=A+(o<<3)|0,(0|c)>6&&(Ce(0|A,0,8+(l=(s>>>0>(c=A+8|0)>>>0?s:c)+-1+(0-A)|0)&-8|0),A=c+(l>>>3<<3)|0),Dt((l=0|xe(2,0,0|u))|e,0|E()|a,n,A),l=A+(o<<3)|0,Dt((c=0|xe(3,0,0|u))|e,0|E()|a,n,l),l=l+(o<<3)|0,Dt((c=0|xe(4,0,0|u))|e,0|E()|a,n,l),l=l+(o<<3)|0,Dt((c=0|xe(5,0,0|u))|e,0|E()|a,n,l),Dt((c=0|xe(6,0,0|u))|e,0|E()|a,n,l+(o<<3)|0)}}function Tt(t,e){var n=0,r=0,i=0;if(i=0|Ee(0|(t|=0),0|(e|=0),45),E(),!(0|k(127&i)))return 0;i=0|Ee(0|t,0|e,52),E(),i&=15;t:do{if(i)for(r=1;;){if(n=0|Ee(0|t,0|e,3*(15-r|0)|0),E(),0|(n&=7))break t;if(!(r>>>0<i>>>0)){n=0;break}r=r+1|0}else n=0}while(0);return 0|0==(0|n)&1}function Lt(t,e){var n=0,r=0,i=0;if(i=0|Ee(0|(t|=0),0|(e|=0),52),E(),!(i&=15))return 0;for(r=1;;){if(n=0|Ee(0|t,0|e,3*(15-r|0)|0),E(),0|(n&=7)){r=5;break}if(!(r>>>0<i>>>0)){n=0,r=5;break}r=r+1|0}return 5==(0|r)?0|n:0}function kt(t,e){var n=0,r=0,i=0,o=0,A=0,s=0,a=0;if(a=0|Ee(0|(t|=0),0|(e|=0),52),E(),!(a&=15))return a=t,w(0|(s=e)),0|a;for(s=1,n=0;;){r=0|xe(7,0,0|(o=3*(15-s|0)|0)),i=0|E(),A=0|Ee(0|t,0|e,0|o),E(),t=(o=0|xe(0|at(7&A),0,0|o))|t&~r,e=(A=0|E())|e&~i;t:do{if(!n)if(0==(o&r|0)&0==(A&i|0))n=0;else if(r=0|Ee(0|t,0|e,52),E(),r&=15){n=1;e:for(;;){switch(A=0|Ee(0|t,0|e,3*(15-n|0)|0),E(),7&A){case 1:break e;case 0:break;default:n=1;break t}if(!(n>>>0<r>>>0)){n=1;break t}n=n+1|0}for(n=1;;){if(i=0|Ee(0|t,0|e,0|(A=3*(15-n|0)|0)),E(),o=0|xe(7,0,0|A),e&=~(0|E()),t=t&~o|(A=0|xe(0|at(7&i),0,0|A)),e=0|e|E(),!(n>>>0<r>>>0)){n=1;break}n=n+1|0}}else n=1}while(0);if(!(s>>>0<a>>>0))break;s=s+1|0}return w(0|e),0|t}function Ft(t,e){var n=0,r=0,i=0,o=0,A=0;if(r=0|Ee(0|(t|=0),0|(e|=0),52),E(),!(r&=15))return r=t,w(0|(n=e)),0|r;for(n=1;A=0|Ee(0|t,0|e,0|(o=3*(15-n|0)|0)),E(),i=0|xe(7,0,0|o),e&=~(0|E()),t=(o=0|xe(0|at(7&A),0,0|o))|t&~i,e=0|E()|e,n>>>0<r>>>0;)n=n+1|0;return w(0|e),0|t}function jt(t,e){var n=0,r=0,i=0,o=0,A=0,s=0,a=0;if(a=0|Ee(0|(t|=0),0|(e|=0),52),E(),!(a&=15))return a=t,w(0|(s=e)),0|a;for(s=1,n=0;;){r=0|xe(7,0,0|(o=3*(15-s|0)|0)),i=0|E(),A=0|Ee(0|t,0|e,0|o),E(),t=(o=0|xe(0|ut(7&A),0,0|o))|t&~r,e=(A=0|E())|e&~i;t:do{if(!n)if(0==(o&r|0)&0==(A&i|0))n=0;else if(r=0|Ee(0|t,0|e,52),E(),r&=15){n=1;e:for(;;){switch(A=0|Ee(0|t,0|e,3*(15-n|0)|0),E(),7&A){case 1:break e;case 0:break;default:n=1;break t}if(!(n>>>0<r>>>0)){n=1;break t}n=n+1|0}for(n=1;;){if(o=0|xe(7,0,0|(i=3*(15-n|0)|0)),A=e&~(0|E()),e=0|Ee(0|t,0|e,0|i),E(),t=t&~o|(e=0|xe(0|ut(7&e),0,0|i)),e=0|A|E(),!(n>>>0<r>>>0)){n=1;break}n=n+1|0}}else n=1}while(0);if(!(s>>>0<a>>>0))break;s=s+1|0}return w(0|e),0|t}function Bt(t,e){var n=0,r=0,i=0,o=0,A=0;if(r=0|Ee(0|(t|=0),0|(e|=0),52),E(),!(r&=15))return r=t,w(0|(n=e)),0|r;for(n=1;o=0|xe(7,0,0|(A=3*(15-n|0)|0)),i=e&~(0|E()),e=0|Ee(0|t,0|e,0|A),E(),t=(e=0|xe(0|ut(7&e),0,0|A))|t&~o,e=0|E()|i,n>>>0<r>>>0;)n=n+1|0;return w(0|e),0|t}function Gt(t){return 0|(0|(t|=0))%2}function Ut(t,e){var n,r;return t|=0,r=O,O=O+16|0,n=r,(e|=0)>>>0<=15&&2146435072!=(2146435072&i[t+4>>2]|0)&&2146435072!=(2146435072&i[t+8+4>>2]|0)?(function(t,e,n){var r,i;r=O,O=O+16|0,yt(t|=0,e|=0,n|=0,i=r),X(i,n+4|0),O=r}(t,e,n),e=0|function(t,e){t|=0;var n,r=0,o=0,A=0,s=0,a=0,u=0,c=0,l=0;if(n=O,O=O+64|0,u=n+40|0,o=n+24|0,A=n+12|0,s=n,xe(0|(e|=0),0,52),r=134225919|E(),!e)return(0|i[t+4>>2])>2||(0|i[t+8>>2])>2||(0|i[t+12>>2])>2?(u=0,w(0|(a=0)),O=n,0|u):(xe(0|j(t),0,45),a=0|E()|r,u=-1,w(0|a),O=n,0|u);if(i[u>>2]=i[t>>2],i[u+4>>2]=i[t+4>>2],i[u+8>>2]=i[t+8>>2],i[u+12>>2]=i[t+12>>2],a=u+4|0,(0|e)>0)for(t=-1;i[o>>2]=i[a>>2],i[o+4>>2]=i[a+4>>2],i[o+8>>2]=i[a+8>>2],1&e?(et(a),i[A>>2]=i[a>>2],i[A+4>>2]=i[a+4>>2],i[A+8>>2]=i[a+8>>2],rt(A)):(nt(a),i[A>>2]=i[a>>2],i[A+4>>2]=i[a+4>>2],i[A+8>>2]=i[a+8>>2],it(A)),K(o,A,s),W(s),c=0|xe(7,0,0|(l=3*(15-e|0)|0)),r&=~(0|E()),t=(l=0|xe(0|tt(s),0,0|l))|t&~c,r=0|E()|r,(0|e)>1;)e=e+-1|0;else t=-1;t:do{if((0|i[a>>2])<=2&&(0|i[u+8>>2])<=2&&(0|i[u+12>>2])<=2){if(e=0|xe(0|(o=0|j(u)),0,45),e|=t,t=0|E()|-1040385&r,s=0|B(u),!(0|k(o))){if((0|s)<=0)break;for(A=0;;){if(o=0|Ee(0|e,0|t,52),E(),o&=15)for(r=1;u=0|Ee(0|e,0|t,0|(l=3*(15-r|0)|0)),E(),c=0|xe(7,0,0|l),t&=~(0|E()),e=e&~c|(l=0|xe(0|at(7&u),0,0|l)),t=0|t|E(),r>>>0<o>>>0;)r=r+1|0;if((0|(A=A+1|0))==(0|s))break t}}A=0|Ee(0|e,0|t,52),E(),A&=15;e:do{if(A){r=1;n:for(;;){switch(l=0|Ee(0|e,0|t,3*(15-r|0)|0),E(),7&l){case 1:break n;case 0:break;default:break e}if(!(r>>>0<A>>>0))break e;r=r+1|0}if(0|G(o,0|i[u>>2]))for(r=1;c=0|xe(7,0,0|(u=3*(15-r|0)|0)),l=t&~(0|E()),t=0|Ee(0|e,0|t,0|u),E(),e=e&~c|(t=0|xe(0|ut(7&t),0,0|u)),t=0|l|E(),r>>>0<A>>>0;)r=r+1|0;else for(r=1;u=0|Ee(0|e,0|t,0|(l=3*(15-r|0)|0)),E(),c=0|xe(7,0,0|l),t&=~(0|E()),e=e&~c|(l=0|xe(0|at(7&u),0,0|l)),t=0|t|E(),r>>>0<A>>>0;)r=r+1|0}}while(0);if((0|s)>0){r=0;do{e=0|kt(e,t),t=0|E(),r=r+1|0}while((0|r)!=(0|s))}}else e=0,t=0}while(0);return l=e,w(0|(c=t)),O=n,0|l}(n,e),t=0|E()):(t=0,e=0),w(0|t),O=r,0|e}function zt(t,e,n){var r,o=0,A=0,s=0;if(r=4+(n|=0)|0,A=0|Ee(0|(t|=0),0|(e|=0),52),E(),A&=15,s=0|Ee(0|t,0|e,45),E(),o=0==(0|A),0|k(127&s)){if(o)return 1;o=1}else{if(o)return 0;o=0==(0|i[r>>2])&&0==(0|i[n+8>>2])?0!=(0|i[n+12>>2])&1:1}for(n=1;1&n?rt(r):it(r),s=0|Ee(0|t,0|e,3*(15-n|0)|0),E(),ot(r,7&s),n>>>0<A>>>0;)n=n+1|0;return 0|o}function qt(t,e,n){n|=0;var r,o,A=0,s=0,a=0,u=0,c=0,l=0;o=O,O=O+16|0,r=o,l=0|Ee(0|(t|=0),0|(e|=0),45),E(),l&=127;t:do{if(0!=(0|k(l))&&(a=0|Ee(0|t,0|e,52),E(),0!=(0|(a&=15)))){A=1;e:for(;;){switch(c=0|Ee(0|t,0|e,3*(15-A|0)|0),E(),7&c){case 5:break e;case 0:break;default:A=e;break t}if(!(A>>>0<a>>>0)){A=e;break t}A=A+1|0}for(s=1,A=e;u=0|xe(7,0,0|(e=3*(15-s|0)|0)),c=A&~(0|E()),A=0|Ee(0|t,0|A,0|e),E(),t=t&~u|(A=0|xe(0|ut(7&A),0,0|e)),A=0|c|E(),s>>>0<a>>>0;)s=s+1|0}else A=e}while(0);if(c=7728+(28*l|0)|0,i[n>>2]=i[c>>2],i[n+4>>2]=i[c+4>>2],i[n+8>>2]=i[c+8>>2],i[n+12>>2]=i[c+12>>2],0|zt(t,A,n)){if(u=n+4|0,i[r>>2]=i[u>>2],i[r+4>>2]=i[u+4>>2],i[r+8>>2]=i[u+8>>2],a=0|Ee(0|t,0|A,52),E(),c=15&a,1&a?(it(u),a=c+1|0):a=c,0|k(l)){t:do{if(c)for(e=1;;){if(s=0|Ee(0|t,0|A,3*(15-e|0)|0),E(),0|(s&=7)){A=s;break t}if(!(e>>>0<c>>>0)){A=0;break}e=e+1|0}else A=0}while(0);A=4==(0|A)&1}else A=0;if(0|wt(n,a,A,0)){if(0|k(l))do{}while(0!=(0|wt(n,a,0,0)));(0|a)!=(0|c)&&nt(u)}else(0|a)!=(0|c)&&(i[u>>2]=i[r>>2],i[u+4>>2]=i[r+4>>2],i[u+8>>2]=i[r+8>>2]);O=o}else O=o}function Qt(t,e,n){var r,i;n|=0,r=O,O=O+16|0,qt(t|=0,e|=0,i=r),e=0|Ee(0|t,0|e,52),E(),mt(i,15&e,n),O=r}function Ht(t,e,n){n|=0;var r,i,o=0,A=0;i=O,O=O+16|0,qt(t|=0,e|=0,r=i),o=0|Ee(0|t,0|e,45),E(),o=0==(0|k(127&o)),A=0|Ee(0|t,0|e,52),E(),A&=15;t:do{if(!o){if(0|A)for(o=1;;){if(!(0==((0|xe(7,0,3*(15-o|0)|0))&t|0)&0==((0|E())&e|0)))break t;if(!(o>>>0<A>>>0))break;o=o+1|0}return _t(r,A,0,5,n),void(O=i)}}while(0);xt(r,A,0,6,n),O=i}function Vt(t,e){e|=0;var n,r=0,o=0,A=0,s=0,a=0,u=0;if(xe(0|(t|=0),0,52),n=134225919|E(),(0|t)<1){o=0,r=0;do{0|k(o)&&(xe(0|o,0,45),a=0|n|E(),i[(t=e+(r<<3)|0)>>2]=-1,i[t+4>>2]=a,r=r+1|0),o=o+1|0}while(122!=(0|o))}else{a=0,r=0;do{if(0|k(a)){for(xe(0|a,0,45),o=1,A=-1,s=0|n|E();A&=~(u=0|xe(7,0,3*(15-o|0)|0)),s&=~(0|E()),(0|o)!=(0|t);)o=o+1|0;i[(u=e+(r<<3)|0)>>2]=A,i[u+4>>2]=s,r=r+1|0}a=a+1|0}while(122!=(0|a))}}function Yt(t,e,n,r){var o,A=0,s=0,a=0,u=0,c=0;if(o=O,O=O+64|0,a=o,(0|(t|=0))==(0|(n|=0))&(0|(e|=0))==(0|(r|=0))|!1|134217728!=(2013265920&e|0)|!1|134217728!=(2013265920&r|0))return O=o,0;if(A=0|Ee(0|t,0|e,52),E(),A&=15,s=0|Ee(0|n,0|r,52),E(),(0|A)!=(15&s|0))return O=o,0;if(s=A+-1|0,A>>>0>1&&(c=0|Rt(t,e,s),u=0|E(),(0|c)==(0|(s=0|Rt(n,r,s)))&(0|u)==(0|E()))){if(A=0|Ee(0|t,0|e,0|(s=3*(15^A)|0)),E(),A&=7,s=0|Ee(0|n,0|r,0|s),E(),0==(0|A)|0==(0|(s&=7)))return O=o,1;if((0|i[21136+(A<<2)>>2])==(0|s))return O=o,1;if((0|i[21168+(A<<2)>>2])==(0|s))return O=o,1}s=(A=a)+56|0;do{i[A>>2]=0,A=A+4|0}while((0|A)<(0|s));return N(t,e,1,a),A=(0|i[(c=a)>>2])==(0|n)&&(0|i[c+4>>2])==(0|r)||(0|i[(c=a+8|0)>>2])==(0|n)&&(0|i[c+4>>2])==(0|r)||(0|i[(c=a+16|0)>>2])==(0|n)&&(0|i[c+4>>2])==(0|r)||(0|i[(c=a+24|0)>>2])==(0|n)&&(0|i[c+4>>2])==(0|r)||(0|i[(c=a+32|0)>>2])==(0|n)&&(0|i[c+4>>2])==(0|r)||(0|i[(c=a+40|0)>>2])==(0|n)&&(0|i[c+4>>2])==(0|r)?1:1&((0|i[(A=a+48|0)>>2])==(0|n)?(0|i[A+4>>2])==(0|r):0),O=o,0|A}function Xt(t,e,n){n|=0;var r,o,A,s,a=0;if(A=O,O=O+16|0,o=A,a=0|Ee(0|(t|=0),0|(e|=0),56),E(),-1==(0|(e=0|function(t,e,n){n|=0;var r,o=0;return o=0|Tt(t|=0,e|=0),(n+-1|0)>>>0>5||1==(0|n)&(r=0!=(0|o))?-1:(o=0|function(t,e){var n,r,o,A=0,s=0,a=0,u=0,c=0;if(o=O,O=O+32|0,r=o,qt(t|=0,e|=0,n=o+16|0),a=0|Ot(t,e),c=0|Lt(t,e),function(t,e){t=7728+(28*(t|=0)|0)|0,i[(e|=0)>>2]=i[t>>2],i[e+4>>2]=i[t+4>>2],i[e+8>>2]=i[t+8>>2],i[e+12>>2]=i[t+12>>2]}(a,r),e=0|function(t,e){t|=0;var n=0,r=0;if((e|=0)>>>0>20)return-1;do{if((0|i[11152+(216*e|0)>>2])!=(0|t))if((0|i[11152+(216*e|0)+8>>2])!=(0|t))if((0|i[11152+(216*e|0)+16>>2])!=(0|t))if((0|i[11152+(216*e|0)+24>>2])!=(0|t))if((0|i[11152+(216*e|0)+32>>2])!=(0|t))if((0|i[11152+(216*e|0)+40>>2])!=(0|t))if((0|i[11152+(216*e|0)+48>>2])!=(0|t))if((0|i[11152+(216*e|0)+56>>2])!=(0|t))if((0|i[11152+(216*e|0)+64>>2])!=(0|t))if((0|i[11152+(216*e|0)+72>>2])!=(0|t))if((0|i[11152+(216*e|0)+80>>2])!=(0|t))if((0|i[11152+(216*e|0)+88>>2])!=(0|t))if((0|i[11152+(216*e|0)+96>>2])!=(0|t))if((0|i[11152+(216*e|0)+104>>2])!=(0|t))if((0|i[11152+(216*e|0)+112>>2])!=(0|t))if((0|i[11152+(216*e|0)+120>>2])!=(0|t))if((0|i[11152+(216*e|0)+128>>2])!=(0|t)){if((0|i[11152+(216*e|0)+136>>2])!=(0|t)){if((0|i[11152+(216*e|0)+144>>2])==(0|t)){t=0,n=2,r=0;break}if((0|i[11152+(216*e|0)+152>>2])==(0|t)){t=0,n=2,r=1;break}if((0|i[11152+(216*e|0)+160>>2])==(0|t)){t=0,n=2,r=2;break}if((0|i[11152+(216*e|0)+168>>2])==(0|t)){t=1,n=2,r=0;break}if((0|i[11152+(216*e|0)+176>>2])==(0|t)){t=1,n=2,r=1;break}if((0|i[11152+(216*e|0)+184>>2])==(0|t)){t=1,n=2,r=2;break}if((0|i[11152+(216*e|0)+192>>2])==(0|t)){t=2,n=2,r=0;break}if((0|i[11152+(216*e|0)+200>>2])==(0|t)){t=2,n=2,r=1;break}if((0|i[11152+(216*e|0)+208>>2])==(0|t)){t=2,n=2,r=2;break}return-1}t=2,n=1,r=2}else t=2,n=1,r=1;else t=2,n=1,r=0;else t=1,n=1,r=2;else t=1,n=1,r=1;else t=1,n=1,r=0;else t=0,n=1,r=2;else t=0,n=1,r=1;else t=0,n=1,r=0;else t=2,n=0,r=2;else t=2,n=0,r=1;else t=2,n=0,r=0;else t=1,n=0,r=2;else t=1,n=0,r=1;else t=1,n=0,r=0;else t=0,n=0,r=2;else t=0,n=0,r=1;else t=0,n=0,r=0}while(0);return 0|i[11152+(216*e|0)+(72*n|0)+(24*t|0)+(r<<3)+4>>2]}(a,0|i[n>>2]),!(0|k(a)))return O=o,0|e;switch(0|a){case 4:t=0,A=14;break;case 14:t=1,A=14;break;case 24:t=2,A=14;break;case 38:t=3,A=14;break;case 49:t=4,A=14;break;case 58:t=5,A=14;break;case 63:t=6,A=14;break;case 72:t=7,A=14;break;case 83:t=8,A=14;break;case 97:t=9,A=14;break;case 107:t=10,A=14;break;case 117:t=11,A=14;break;default:u=0,s=0}return 14==(0|A)&&(u=0|i[22096+(24*t|0)+8>>2],s=0|i[22096+(24*t|0)+16>>2]),(0|(t=0|i[n>>2]))!=(0|i[r>>2])&&(a=0|F(a))|(0|(t=0|i[n>>2]))==(0|s)&&(e=(e+1|0)%6|0),3==(0|c)&(0|t)==(0|s)?(O=o,0|(e+5|0)%6):5==(0|c)&(0|t)==(0|u)?(O=o,0|(e+1|0)%6):(O=o,0|e)}(t,e),r?0|(n=(5-o+(0|i[22384+(n<<2)>>2])|0)%5|0):0|(n=(6-o+(0|i[22416+(n<<2)>>2])|0)%6|0))}(r=(s=!0&268435456==(2013265920&e|0))?t:0,t=s?-2130706433&e|134217728:0,7&a))))return i[n>>2]=0,void(O=A);qt(r,t,o),a=0|Ee(0|r,0|t,52),E(),a&=15,0|Tt(r,t)?_t(o,a,e,2,n):xt(o,a,e,2,n),O=A}function Wt(t){t|=0;var e,n,r=0;return(e=0|me(1,12))||x(22691,22646,49,22704),0|(r=0|i[(n=t+4|0)>>2])?(i[(r=r+8|0)>>2]=e,i[n>>2]=e,0|e):(0|i[t>>2]&&x(22721,22646,61,22744),i[(r=t)>>2]=e,i[n>>2]=e,0|e)}function Zt(t,e){var n,r;return t|=0,e|=0,(r=0|ye(24))||x(22758,22646,78,22772),i[r>>2]=i[e>>2],i[r+4>>2]=i[e+4>>2],i[r+8>>2]=i[e+8>>2],i[r+12>>2]=i[e+12>>2],i[r+16>>2]=0,0|(n=0|i[(e=t+4|0)>>2])?(i[n+16>>2]=r,i[e>>2]=r,0|r):(0|i[t>>2]&&x(22787,22646,82,22772),i[t>>2]=r,i[e>>2]=r,0|r)}function Jt(t){var e,n,r=0,A=0,s=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,_=0,b=0,w=0,E=0,S=0,I=0,M=0,C=0,P=0,O=0,N=0,R=0,D=0,T=0,L=0,k=0;if(0|i[(u=8+(t|=0)|0)>>2])return 1;if(!(s=0|i[t>>2]))return 0;r=s,A=0;do{A=A+1|0,r=0|i[r+8>>2]}while(0!=(0|r));if(A>>>0<2)return 0;(n=0|ye(A<<2))||x(22807,22646,317,22826),(e=0|ye(A<<5))||x(22848,22646,321,22826),i[t>>2]=0,i[(C=t+4|0)>>2]=0,i[u>>2]=0,A=0,T=0,M=0,g=0;t:for(;;){if(d=0|i[s>>2]){c=0,l=d;do{if(h=+o[l+8>>3],r=l,l=0|i[l+16>>2],f=+o[(u=(p=0==(0|l))?d:l)+8>>3],+a(+(h-f))>3.141592653589793){k=14;break}c+=(f-h)*(+o[r>>3]+ +o[u>>3])}while(!p);if(14==(0|k)){k=0,c=0,r=d;do{I=+o[r+8>>3],R=0|i[(D=r+16|0)>>2],S=+o[(R=0==(0|R)?d:R)+8>>3],c+=(+o[r>>3]+ +o[R>>3])*((S<0?S+6.283185307179586:S)-(I<0?I+6.283185307179586:I)),r=0|i[(0==(0|r)?s:D)>>2]}while(0!=(0|r))}c>0?(i[n+(T<<2)>>2]=s,T=T+1|0,u=M,r=g):k=19}else k=19;if(19==(0|k)){k=0;do{if(!A){if(g){u=C,l=g+8|0,r=s,A=t;break}if(0|i[t>>2]){k=27;break t}u=C,l=t,r=s,A=t;break}if(0|i[(r=A+8|0)>>2]){k=21;break t}if(!(A=0|me(1,12))){k=23;break t}i[r>>2]=A,u=A+4|0,l=A,r=g}while(0);if(i[l>>2]=s,i[u>>2]=s,l=e+(M<<5)|0,p=0|i[s>>2]){for(o[(d=e+(M<<5)+8|0)>>3]=17976931348623157e292,o[(g=e+(M<<5)+24|0)>>3]=17976931348623157e292,o[l>>3]=-17976931348623157e292,o[(y=e+(M<<5)+16|0)>>3]=-17976931348623157e292,w=17976931348623157e292,E=-17976931348623157e292,u=0,v=p,h=17976931348623157e292,_=17976931348623157e292,b=-17976931348623157e292,f=-17976931348623157e292;c=+o[v>>3],I=+o[v+8>>3],v=0|i[v+16>>2],S=+o[((m=0==(0|v))?p:v)+8>>3],c<h&&(o[d>>3]=c,h=c),I<_&&(o[g>>3]=I,_=I),c>b?o[l>>3]=c:c=b,I>f&&(o[y>>3]=I,f=I),w=I>0&I<w?I:w,E=I<0&I>E?I:E,u|=+a(+(I-S))>3.141592653589793,!m;)b=c;u&&(o[y>>3]=E,o[g>>3]=w)}else i[l>>2]=0,i[l+4>>2]=0,i[l+8>>2]=0,i[l+12>>2]=0,i[l+16>>2]=0,i[l+20>>2]=0,i[l+24>>2]=0,i[l+28>>2]=0;u=M+1|0}if(s=0|i[(D=s+8|0)>>2],i[D>>2]=0,!s){k=45;break}M=u,g=r}if(21==(0|k))x(22624,22646,35,22658);else if(23==(0|k))x(22678,22646,37,22658);else if(27==(0|k))x(22721,22646,61,22744);else if(45==(0|k)){t:do{if((0|T)>0){for(D=0==(0|u),N=u<<2,R=0==(0|t),O=0,r=0;;){if(P=0|i[n+(O<<2)>>2],D)k=73;else{if(!(M=0|ye(N))){k=50;break}if(!(C=0|ye(N))){k=52;break}e:do{if(R)A=0;else{for(u=0,A=0,l=t;s=e+(u<<5)|0,0|Kt(0|i[l>>2],s,0|i[P>>2])?(i[M+(A<<2)>>2]=l,i[C+(A<<2)>>2]=s,m=A+1|0):m=A,l=0|i[l+8>>2];)u=u+1|0,A=m;if((0|m)>0)if(s=0|i[M>>2],1==(0|m))A=s;else for(y=0,v=-1,A=s,g=s;;){for(p=0|i[g>>2],s=0,l=0;d=(0|(u=0|i[i[M+(l<<2)>>2]>>2]))==(0|p)?s:s+(1&(0|Kt(u,0|i[C+(l<<2)>>2],0|i[p>>2])))|0,(0|(l=l+1|0))!=(0|m);)s=d;if(A=(u=(0|d)>(0|v))?g:A,(0|(s=y+1|0))==(0|m))break e;y=s,v=u?d:v,g=0|i[M+(s<<2)>>2]}else A=0}}while(0);if(ve(M),ve(C),A){if(s=0|i[(u=A+4|0)>>2])A=s+8|0;else if(0|i[A>>2]){k=70;break}i[A>>2]=P,i[u>>2]=P}else k=73}if(73==(0|k)){if(k=0,0|(r=0|i[P>>2]))do{C=r,r=0|i[r+16>>2],ve(C)}while(0!=(0|r));ve(P),r=2}if((0|(O=O+1|0))>=(0|T)){L=r;break t}}50==(0|k)?x(22863,22646,249,22882):52==(0|k)?x(22901,22646,252,22882):70==(0|k)&&x(22721,22646,61,22744)}else L=0}while(0);return ve(n),ve(e),0|L}return 0}function Kt(t,e,n){t|=0;var r,A=0,s=0,a=0,u=0,c=0,l=0,f=0;if(!(0|Q(e|=0,n|=0)))return 0;if(e=0|q(e),r=+o[n>>3],A=e&(A=+o[n+8>>3])<0?A+6.283185307179586:A,!(t=0|i[t>>2]))return 0;if(e){e=0,n=t;t:for(;;){for(;u=+o[n>>3],l=+o[n+8>>3],f=0|i[(n=n+16|0)>>2],a=+o[(f=0==(0|f)?t:f)>>3],s=+o[f+8>>3],u>a?(c=u,u=l):(c=a,a=u,u=s,s=l),r<a|r>c;)if(!(n=0|i[n>>2])){n=22;break t}if(A=(u=u<0?u+6.283185307179586:u)==A|(l=s<0?s+6.283185307179586:s)==A?A+-2220446049250313e-31:A,((l+=(r-a)/(c-a)*(u-l))<0?l+6.283185307179586:l)>A&&(e^=1),!(n=0|i[n>>2])){n=22;break}}if(22==(0|n))return 0|e}else{e=0,n=t;t:for(;;){for(;u=+o[n>>3],l=+o[n+8>>3],f=0|i[(n=n+16|0)>>2],a=+o[(f=0==(0|f)?t:f)>>3],s=+o[f+8>>3],u>a?(c=u,u=l):(c=a,a=u,u=s,s=l),r<a|r>c;)if(!(n=0|i[n>>2])){n=22;break t}if(s+(r-a)/(c-a)*(u-s)>(A=u==A|s==A?A+-2220446049250313e-31:A)&&(e^=1),!(n=0|i[n>>2])){n=22;break}}if(22==(0|n))return 0|e}return 0}function $t(t,e,n,o,A){n|=0,o|=0,A|=0;var s,a,u,c,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,_=0;if(c=O,O=O+32|0,_=c+16|0,u=c,l=0|Ee(0|(t|=0),0|(e|=0),52),E(),l&=15,y=0|Ee(0|n,0|o,52),E(),(0|l)!=(15&y|0))return O=c,1;if(d=0|Ee(0|t,0|e,45),E(),d&=127,g=0|Ee(0|n,0|o,45),E(),y=(0|d)!=(0|(g&=127))){if(7==(0|(h=0|z(d,g))))return O=c,2;7==(0|(p=0|z(g,d)))?x(22925,22949,151,22959):(v=h,f=p)}else v=0,f=0;s=0|k(d),a=0|k(g),i[_>>2]=0,i[_+4>>2]=0,i[_+8>>2]=0,i[_+12>>2]=0;do{if(v){if(h=(0|(g=0|i[4304+(28*d|0)+(v<<2)>>2]))>0,a)if(h){d=0,p=n,h=o;do{p=0|jt(p,h),h=0|E(),1==(0|(f=0|ut(f)))&&(f=0|ut(1)),d=d+1|0}while((0|d)!=(0|g));g=f,d=p,p=h}else g=f,d=n,p=o;else if(h){d=0,p=n,h=o;do{p=0|Bt(p,h),h=0|E(),f=0|ut(f),d=d+1|0}while((0|d)!=(0|g));g=f,d=p,p=h}else g=f,d=n,p=o;if(zt(d,p,_),y||x(22972,22949,181,22959),(h=0!=(0|s))&(f=0!=(0|a))&&x(22999,22949,182,22959),h){if(f=0|Lt(t,e),0|r[22032+(7*f|0)+v>>0]){l=3;break}d=p=0|i[21200+(28*f|0)+(v<<2)>>2],m=26}else if(f){if(f=0|Lt(d,p),0|r[22032+(7*f|0)+g>>0]){l=4;break}d=0,p=0|i[21200+(28*g|0)+(f<<2)>>2],m=26}else f=0;if(26==(0|m))if((0|p)<=-1&&x(23030,22949,212,22959),(0|d)<=-1&&x(23053,22949,213,22959),(0|p)>0){h=_+4|0,f=0;do{st(h),f=f+1|0}while((0|f)!=(0|p));f=d}else f=d;if(i[u>>2]=0,i[u+4>>2]=0,i[u+8>>2]=0,ot(u,v),0|l)for(;0|Gt(l)?rt(u):it(u),(0|l)>1;)l=l+-1|0;if((0|f)>0){l=0;do{st(u),l=l+1|0}while((0|l)!=(0|f))}J(m=_+4|0,u,m),W(m),m=50}else if(zt(n,o,_),0!=(0|s)&0!=(0|a))if((0|g)!=(0|d)&&x(23077,22949,243,22959),f=0|Lt(t,e),l=0|Lt(n,o),0|r[22032+(7*f|0)+l>>0])l=5;else if((0|(f=0|i[21200+(28*f|0)+(l<<2)>>2]))>0){h=_+4|0,l=0;do{st(h),l=l+1|0}while((0|l)!=(0|f));m=50}else m=50;else m=50}while(0);return 50==(0|m)&&(l=_+4|0,i[A>>2]=i[l>>2],i[A+4>>2]=i[l+4>>2],i[A+8>>2]=i[l+8>>2],l=0),O=c,0|l}function te(t,e,n,r){n|=0,r|=0;var o,A,s=0,a=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0;if(A=O,O=O+48|0,u=A+36|0,c=A+24|0,l=A+12|0,f=A,a=0|Ee(0|(t|=0),0|(e|=0),52),E(),a&=15,p=0|Ee(0|t,0|e,45),E(),o=0|k(p&=127),xe(0|a,0,52),y=134225919|E(),i[(g=r)>>2]=-1,i[g+4>>2]=y,!a)return(0|i[n>>2])>1||(0|i[n+4>>2])>1||(0|i[n+8>>2])>1||127==(0|(s=0|U(p,0|tt(n))))?(O=A,0|(y=1)):(d=0|xe(0|s,0,45),g=0|E(),g=-1040385&i[(p=r)+4>>2]|g,i[(y=r)>>2]=i[p>>2]|d,i[y+4>>2]=g,O=A,0|(y=0));for(i[u>>2]=i[n>>2],i[u+4>>2]=i[n+4>>2],i[u+8>>2]=i[n+8>>2];i[c>>2]=i[u>>2],i[c+4>>2]=i[u+4>>2],i[c+8>>2]=i[u+8>>2],0|Gt(a)?(et(u),i[l>>2]=i[u>>2],i[l+4>>2]=i[u+4>>2],i[l+8>>2]=i[u+8>>2],rt(l)):(nt(u),i[l>>2]=i[u>>2],i[l+4>>2]=i[u+4>>2],i[l+8>>2]=i[u+8>>2],it(l)),K(c,l,f),W(f),v=0|i[(g=r)>>2],g=0|i[g+4>>2],n=0|xe(7,0,0|(m=3*(15-a|0)|0)),g&=~(0|E()),m=0|xe(0|tt(f),0,0|m),g=0|E()|g,i[(y=r)>>2]=m|v&~n,i[y+4>>2]=g,(0|a)>1;)a=a+-1|0;t:do{if((0|i[u>>2])<=1&&(0|i[u+4>>2])<=1&&(0|i[u+8>>2])<=1){f=127==(0|(c=0|U(p,a=0|tt(u))))?0:0|k(c);e:do{if(a){if(o){if(u=21408+(28*(0|Lt(t,e))|0)+(a<<2)|0,(0|(u=0|i[u>>2]))>0){n=0;do{a=0|at(a),n=n+1|0}while((0|n)!=(0|u))}if(1==(0|a)){s=3;break t}127==(0|(n=0|U(p,a)))&&x(23104,22949,376,23134),0|k(n)?x(23147,22949,377,23134):(d=u,h=a,s=n)}else d=0,h=a,s=c;if((0|(l=0|i[4304+(28*p|0)+(h<<2)>>2]))<=-1&&x(23178,22949,384,23134),!f){if((0|d)<=-1&&x(23030,22949,417,23134),0|d){a=0,n=0|i[(u=r)>>2],u=0|i[u+4>>2];do{n=0|Ft(n,u),u=0|E(),i[(m=r)>>2]=n,i[m+4>>2]=u,a=a+1|0}while((0|a)<(0|d))}if((0|l)<=0){a=54;break}for(a=0,n=0|i[(u=r)>>2],u=0|i[u+4>>2];;)if(n=0|Ft(n,u),u=0|E(),i[(m=r)>>2]=n,i[m+4>>2]=u,(0|(a=a+1|0))==(0|l)){a=54;break e}}if(7==(0|(c=0|z(s,p)))&&x(22925,22949,393,23134),n=0|i[(a=r)>>2],a=0|i[a+4>>2],(0|l)>0){u=0;do{n=0|Ft(n,a),a=0|E(),i[(m=r)>>2]=n,i[m+4>>2]=a,u=u+1|0}while((0|u)!=(0|l))}if(n=0|Lt(n,a),m=0|F(s),(0|(n=0|i[(m?21824:21616)+(28*c|0)+(n<<2)>>2]))<=-1&&x(23030,22949,412,23134),n){a=0,u=0|i[(c=r)>>2],c=0|i[c+4>>2];do{u=0|kt(u,c),c=0|E(),i[(m=r)>>2]=u,i[m+4>>2]=c,a=a+1|0}while((0|a)<(0|n));a=54}else a=54}else if(0!=(0|o)&0!=(0|f))if(a=21408+(28*(m=0|Lt(t,e))|0)+((0|Lt(0|i[(a=r)>>2],0|i[a+4>>2]))<<2)|0,(0|(a=0|i[a>>2]))<=-1&&x(23201,22949,433,23134),a){s=0,n=0|i[(u=r)>>2],u=0|i[u+4>>2];do{n=0|Ft(n,u),u=0|E(),i[(m=r)>>2]=n,i[m+4>>2]=u,s=s+1|0}while((0|s)<(0|a));s=c,a=54}else s=c,a=55;else s=c,a=54}while(0);if(54==(0|a)&&f&&(a=55),55==(0|a)&&1==(0|Lt(0|i[(m=r)>>2],0|i[m+4>>2]))){s=4;break}y=0|i[(m=r)>>2],m=-1040385&i[m+4>>2],v=0|xe(0|s,0,45),m=0|m|E(),i[(s=r)>>2]=y|v,i[s+4>>2]=m,s=0}else s=2}while(0);return O=A,0|s}function ee(t,e){var n=0;if(!(e|=0))return 1;n=t|=0,t=1;do{t=0|m(0==(1&e|0)?1:n,t),e>>=1,n=0|m(n,n)}while(0!=(0|e));return 0|t}function ne(t,e,n){t|=0;var r,A,s=0,a=0,u=0,c=0,l=0,f=0,h=0,p=0;if(!(0|Q(e|=0,n|=0)))return 0;if(e=0|q(e),A=+o[n>>3],s=e&(s=+o[n+8>>3])<0?s+6.283185307179586:s,(0|(p=0|i[t>>2]))<=0)return 0;if(r=0|i[t+4>>2],e){e=0,n=-1,t=0;t:for(;;){for(h=t;c=+o[r+(h<<4)>>3],f=+o[r+(h<<4)+8>>3],u=+o[r+((t=(n+2|0)%(0|p)|0)<<4)>>3],a=+o[r+(t<<4)+8>>3],c>u?(l=c,c=f):(l=u,u=c,c=a,a=f),A<u|A>l;){if(!((0|(n=h+1|0))<(0|p))){n=22;break t}t=h,h=n,n=t}if(s=(c=c<0?c+6.283185307179586:c)==s|(f=a<0?a+6.283185307179586:a)==s?s+-2220446049250313e-31:s,((f+=(A-u)/(l-u)*(c-f))<0?f+6.283185307179586:f)>s&&(e^=1),(0|(t=h+1|0))>=(0|p)){n=22;break}n=h}if(22==(0|n))return 0|e}else{e=0,n=-1,t=0;t:for(;;){for(h=t;c=+o[r+(h<<4)>>3],f=+o[r+(h<<4)+8>>3],u=+o[r+((t=(n+2|0)%(0|p)|0)<<4)>>3],a=+o[r+(t<<4)+8>>3],c>u?(l=c,c=f):(l=u,u=c,c=a,a=f),A<u|A>l;){if(!((0|(n=h+1|0))<(0|p))){n=22;break t}t=h,h=n,n=t}if(a+(A-u)/(l-u)*(c-a)>(s=c==s|a==s?s+-2220446049250313e-31:s)&&(e^=1),(0|(t=h+1|0))>=(0|p)){n=22;break}n=h}if(22==(0|n))return 0|e}return 0}function re(t,e){e|=0;var n,r,A,s,u,c=0,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,_=0,b=0;if(!(r=0|i[(t|=0)>>2]))return i[e>>2]=0,i[e+4>>2]=0,i[e+8>>2]=0,i[e+12>>2]=0,i[e+16>>2]=0,i[e+20>>2]=0,i[e+24>>2]=0,void(i[e+28>>2]=0);if(o[(A=e+8|0)>>3]=17976931348623157e292,o[(s=e+24|0)>>3]=17976931348623157e292,o[e>>3]=-17976931348623157e292,o[(u=e+16|0)>>3]=-17976931348623157e292,!((0|r)<=0)){for(n=0|i[t+4>>2],y=17976931348623157e292,v=-17976931348623157e292,m=0,t=-1,h=17976931348623157e292,p=17976931348623157e292,g=-17976931348623157e292,l=-17976931348623157e292,_=0;c=+o[n+(_<<4)>>3],d=+o[n+(_<<4)+8>>3],f=+o[n+(((0|(t=t+2|0))==(0|r)?0:t)<<4)+8>>3],c<h&&(o[A>>3]=c,h=c),d<p&&(o[s>>3]=d,p=d),c>g?o[e>>3]=c:c=g,d>l&&(o[u>>3]=d,l=d),y=d>0&d<y?d:y,v=d<0&d>v?d:v,m|=+a(+(d-f))>3.141592653589793,(0|(t=_+1|0))!=(0|r);)b=_,g=c,_=t,t=b;m&&(o[u>>3]=v,o[s>>3]=y)}}function ie(t,e){e|=0;var n,r=0,A=0,s=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,_=0,b=0,w=0,E=0,x=0,S=0,I=0;if(v=0|i[(t|=0)>>2]){if(o[(m=e+8|0)>>3]=17976931348623157e292,o[(_=e+24|0)>>3]=17976931348623157e292,o[e>>3]=-17976931348623157e292,o[(b=e+16|0)>>3]=-17976931348623157e292,(0|v)>0){for(s=0|i[t+4>>2],g=17976931348623157e292,y=-17976931348623157e292,A=0,r=-1,f=17976931348623157e292,h=17976931348623157e292,d=-17976931348623157e292,c=-17976931348623157e292,w=0;u=+o[s+(w<<4)>>3],p=+o[s+(w<<4)+8>>3],l=+o[s+(((0|(S=r+2|0))==(0|v)?0:S)<<4)+8>>3],u<f&&(o[m>>3]=u,f=u),p<h&&(o[_>>3]=p,h=p),u>d?o[e>>3]=u:u=d,p>c&&(o[b>>3]=p,c=p),g=p>0&p<g?p:g,y=p<0&p>y?p:y,A|=+a(+(p-l))>3.141592653589793,(0|(r=w+1|0))!=(0|v);)S=w,d=u,w=r,r=S;A&&(o[b>>3]=y,o[_>>3]=g)}}else i[e>>2]=0,i[e+4>>2]=0,i[e+8>>2]=0,i[e+12>>2]=0,i[e+16>>2]=0,i[e+20>>2]=0,i[e+24>>2]=0,i[e+28>>2]=0;if(!((0|(r=0|i[(S=t+8|0)>>2]))<=0)){n=t+12|0,x=0;do{if(s=0|i[n>>2],A=x,_=e+((x=x+1|0)<<5)|0,b=0|i[s+(A<<3)>>2]){if(o[(w=e+(x<<5)+8|0)>>3]=17976931348623157e292,o[(t=e+(x<<5)+24|0)>>3]=17976931348623157e292,o[_>>3]=-17976931348623157e292,o[(E=e+(x<<5)+16|0)>>3]=-17976931348623157e292,(0|b)>0){for(v=0|i[s+(A<<3)+4>>2],g=17976931348623157e292,y=-17976931348623157e292,s=0,A=-1,m=0,f=17976931348623157e292,h=17976931348623157e292,p=-17976931348623157e292,c=-17976931348623157e292;u=+o[v+(m<<4)>>3],d=+o[v+(m<<4)+8>>3],l=+o[v+(((0|(A=A+2|0))==(0|b)?0:A)<<4)+8>>3],u<f&&(o[w>>3]=u,f=u),d<h&&(o[t>>3]=d,h=d),u>p?o[_>>3]=u:u=p,d>c&&(o[E>>3]=d,c=d),g=d>0&d<g?d:g,y=d<0&d>y?d:y,s|=+a(+(d-l))>3.141592653589793,(0|(A=m+1|0))!=(0|b);)I=m,m=A,p=u,A=I;s&&(o[E>>3]=y,o[t>>3]=g)}}else i[_>>2]=0,i[_+4>>2]=0,i[_+8>>2]=0,i[_+12>>2]=0,i[_+16>>2]=0,i[_+20>>2]=0,i[_+24>>2]=0,i[_+28>>2]=0,r=0|i[S>>2]}while((0|x)<(0|r))}}function oe(t,e,n){var r=0,o=0,A=0;if(!(0|ne(t|=0,e|=0,n|=0)))return 0;if((0|i[(o=t+8|0)>>2])<=0)return 1;for(r=t+12|0,t=0;;){if(A=t,t=t+1|0,0|ne((0|i[r>>2])+(A<<3)|0,e+(t<<5)|0,n)){t=0,r=6;break}if((0|t)>=(0|i[o>>2])){t=1,r=6;break}}return 6==(0|r)?0|t:0}function Ae(t,e,n,r,i){e|=0,n|=0,r|=0,i|=0;var A,s,a,u,c,l,f,h=0;u=+o[(t|=0)>>3],a=+o[e>>3]-u,s=+o[t+8>>3],A=+o[e+8>>3]-s,l=+o[n>>3],h=((h=+o[r>>3]-l)*(s-(f=+o[n+8>>3]))-(u-l)*(c=+o[r+8>>3]-f))/(a*c-A*h),o[i>>3]=u+a*h,o[i+8>>3]=s+A*h}function se(t,e){return e|=0,+o[(t|=0)>>3]!=+o[e>>3]?0|(e=0):0|(e=+o[t+8>>3]==+o[e+8>>3])}function ae(t,e){var n,r,i;return e|=0,+((i=+o[(t|=0)>>3]-+o[e>>3])*i+(r=+o[t+8>>3]-+o[e+8>>3])*r+(n=+o[t+16>>3]-+o[e+16>>3])*n)}function ue(t,e,n){t|=0,n|=0;var r=0;(0|(e|=0))>0?(r=0|me(e,4),i[t>>2]=r,r||x(23230,23253,40,23267)):i[t>>2]=0,i[t+4>>2]=e,i[t+8>>2]=0,i[t+12>>2]=n}function ce(t){var e,n,r,A=0,s=0,u=0,l=0;e=4+(t|=0)|0,n=t+12|0,r=t+8|0;t:for(;;){for(s=0|i[e>>2],A=0;;){if((0|A)>=(0|s))break t;if(u=0|i[t>>2],l=0|i[u+(A<<2)>>2])break;A=A+1|0}A=u+(~~(+a(+ +c(10,+ +(15-(0|i[n>>2])|0))*(+o[l>>3]+ +o[l+8>>3]))%+(0|s))>>>0<<2)|0,s=0|i[A>>2];e:do{if(0|s){if(u=l+32|0,(0|s)==(0|l))i[A>>2]=i[u>>2];else{if(!(A=0|i[(s=s+32|0)>>2]))break;for(;(0|A)!=(0|l);)if(!(A=0|i[(s=A+32|0)>>2]))break e;i[s>>2]=i[u>>2]}ve(l),i[r>>2]=(0|i[r>>2])-1}}while(0)}ve(0|i[t>>2])}function le(t){var e,n=0,r=0;for(e=0|i[4+(t|=0)>>2],r=0;;){if((0|r)>=(0|e)){n=0,r=4;break}if(n=0|i[(0|i[t>>2])+(r<<2)>>2]){r=4;break}r=r+1|0}return 4==(0|r)?0|n:0}function fe(t,e){e|=0;var n=0,r=0,A=0,s=0;if(n=~~(+a(+ +c(10,+ +(15-(0|i[12+(t|=0)>>2])|0))*(+o[e>>3]+ +o[e+8>>3]))%+(0|i[t+4>>2]))>>>0,n=(0|i[t>>2])+(n<<2)|0,!(r=0|i[n>>2]))return 1;s=e+32|0;do{if((0|r)!=(0|e)){if(!(n=0|i[r+32>>2]))return 1;for(A=n;;){if((0|A)==(0|e)){A=8;break}if(!(n=0|i[A+32>>2])){n=1,A=10;break}r=A,A=n}if(8==(0|A)){i[r+32>>2]=i[s>>2];break}if(10==(0|A))return 0|n}else i[n>>2]=i[s>>2]}while(0);return ve(e),i[(s=t+8|0)>>2]=(0|i[s>>2])-1,0}function he(t,e,n){t|=0,e|=0,n|=0;var r,A=0,s=0,u=0;(r=0|ye(40))||x(23283,23253,98,23296),i[r>>2]=i[e>>2],i[r+4>>2]=i[e+4>>2],i[r+8>>2]=i[e+8>>2],i[r+12>>2]=i[e+12>>2],i[(s=r+16|0)>>2]=i[n>>2],i[s+4>>2]=i[n+4>>2],i[s+8>>2]=i[n+8>>2],i[s+12>>2]=i[n+12>>2],i[r+32>>2]=0,s=~~(+a(+ +c(10,+ +(15-(0|i[t+12>>2])|0))*(+o[e>>3]+ +o[e+8>>3]))%+(0|i[t+4>>2]))>>>0,s=(0|i[t>>2])+(s<<2)|0,A=0|i[s>>2];do{if(A){for(;!(0|Mt(A,e)&&0|Mt(A+16|0,n));)if(s=0|i[A+32>>2],!(0|i[(A=0==(0|s)?A:s)+32>>2])){u=10;break}if(10==(0|u)){i[A+32>>2]=r;break}return ve(r),0|A}i[s>>2]=r}while(0);return i[(u=t+8|0)>>2]=1+(0|i[u>>2]),0|r}function pe(t,e,n){e|=0,n|=0;var r=0,A=0;if(A=~~(+a(+ +c(10,+ +(15-(0|i[12+(t|=0)>>2])|0))*(+o[e>>3]+ +o[e+8>>3]))%+(0|i[t+4>>2]))>>>0,!(A=0|i[(0|i[t>>2])+(A<<2)>>2]))return 0;if(!n){for(t=A;;){if(0|Mt(t,e)){r=10;break}if(!(t=0|i[t+32>>2])){t=0,r=10;break}}if(10==(0|r))return 0|t}for(t=A;;){if(0|Mt(t,e)&&0|Mt(t+16|0,n)){r=10;break}if(!(t=0|i[t+32>>2])){t=0,r=10;break}}return 10==(0|r)?0|t:0}function de(t,e){e|=0;var n=0;if(n=~~(+a(+ +c(10,+ +(15-(0|i[12+(t|=0)>>2])|0))*(+o[e>>3]+ +o[e+8>>3]))%+(0|i[t+4>>2]))>>>0,!(t=0|i[(0|i[t>>2])+(n<<2)>>2]))return 0;for(;;){if(0|Mt(t,e)){e=5;break}if(!(t=0|i[t+32>>2])){t=0,e=5;break}}return 5==(0|e)?0|t:0}function ge(t){return 0|~~+function(t){return+ +Pe(+(t=+t))}(t=+t)}function ye(t){t|=0;var e,n=0,r=0,o=0,A=0,s=0,a=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,_=0,b=0,w=0;e=O,O=O+16|0,p=e;do{if(t>>>0<245){if(t=(l=t>>>0<11?16:t+11&-8)>>>3,3&(r=(h=0|i[5829])>>>t)|0)return o=0|i[(r=8+(t=23356+((n=(1&r^1)+t|0)<<1<<2)|0)|0)>>2],(0|(s=0|i[(A=o+8|0)>>2]))==(0|t)?i[5829]=h&~(1<<n):(i[s+12>>2]=t,i[r>>2]=s),w=n<<3,i[o+4>>2]=3|w,i[(w=o+w+4|0)>>2]=1|i[w>>2],O=e,0|A;if(l>>>0>(f=0|i[5831])>>>0){if(0|r)return n=((n=r<<t&((n=2<<t)|0-n))&0-n)-1|0,s=0|i[(t=8+(n=23356+((o=((r=(n>>>=u=n>>>12&16)>>>5&8)|u|(s=(n>>>=r)>>>2&4)|(t=(n>>>=s)>>>1&2)|(o=(n>>>=t)>>>1&1))+(n>>>o)|0)<<1<<2)|0)|0)>>2],(0|(r=0|i[(u=s+8|0)>>2]))==(0|n)?(t=h&~(1<<o),i[5829]=t):(i[r+12>>2]=n,i[t>>2]=r,t=h),a=(w=o<<3)-l|0,i[s+4>>2]=3|l,i[4+(A=s+l|0)>>2]=1|a,i[s+w>>2]=a,0|f&&(o=0|i[5834],r=23356+((n=f>>>3)<<1<<2)|0,t&(n=1<<n)?n=0|i[(t=r+8|0)>>2]:(i[5829]=t|n,n=r,t=r+8|0),i[t>>2]=o,i[n+12>>2]=o,i[o+8>>2]=n,i[o+12>>2]=r),i[5831]=a,i[5834]=A,O=e,0|u;if(s=0|i[5830]){for(r=(s&0-s)-1|0,r=c=0|i[23620+(((o=(r>>>=A=r>>>12&16)>>>5&8)|A|(a=(r>>>=o)>>>2&4)|(u=(r>>>=a)>>>1&2)|(c=(r>>>=u)>>>1&1))+(r>>>c)<<2)>>2],u=c,c=(-8&i[c+4>>2])-l|0;(t=0|i[r+16>>2])||(t=0|i[r+20>>2]);)r=t,u=(A=(a=(-8&i[t+4>>2])-l|0)>>>0<c>>>0)?t:u,c=A?a:c;if((a=u+l|0)>>>0>u>>>0){A=0|i[u+24>>2],n=0|i[u+12>>2];do{if((0|n)==(0|u)){if(!(n=0|i[(t=u+20|0)>>2])&&!(n=0|i[(t=u+16|0)>>2])){r=0;break}for(;;)if(r=0|i[(o=n+20|0)>>2])n=r,t=o;else{if(!(r=0|i[(o=n+16|0)>>2]))break;n=r,t=o}i[t>>2]=0,r=n}else r=0|i[u+8>>2],i[r+12>>2]=n,i[n+8>>2]=r,r=n}while(0);do{if(0|A){if(n=0|i[u+28>>2],(0|u)==(0|i[(t=23620+(n<<2)|0)>>2])){if(i[t>>2]=r,!r){i[5830]=s&~(1<<n);break}}else if(i[((0|i[(w=A+16|0)>>2])==(0|u)?w:A+20|0)>>2]=r,!r)break;i[r+24>>2]=A,0|(n=0|i[u+16>>2])&&(i[r+16>>2]=n,i[n+24>>2]=r),0|(n=0|i[u+20>>2])&&(i[r+20>>2]=n,i[n+24>>2]=r)}}while(0);return c>>>0<16?(w=c+l|0,i[u+4>>2]=3|w,i[(w=u+w+4|0)>>2]=1|i[w>>2]):(i[u+4>>2]=3|l,i[a+4>>2]=1|c,i[a+c>>2]=c,0|f&&(o=0|i[5834],r=23356+((n=f>>>3)<<1<<2)|0,(n=1<<n)&h?n=0|i[(t=r+8|0)>>2]:(i[5829]=n|h,n=r,t=r+8|0),i[t>>2]=o,i[n+12>>2]=o,i[o+8>>2]=n,i[o+12>>2]=r),i[5831]=c,i[5834]=a),O=e,0|u+8}h=l}else h=l}else h=l}else if(t>>>0<=4294967231)if(l=-8&(t=t+11|0),o=0|i[5830]){A=0-l|0,c=(t>>>=8)?l>>>0>16777215?31:l>>>(7+(c=14-((u=(520192+(y=t<<(h=(t+1048320|0)>>>16&8))|0)>>>16&4)|h|(c=(245760+(y<<=u)|0)>>>16&2))+(y<<c>>>15)|0)|0)&1|c<<1:0,r=0|i[23620+(c<<2)>>2];t:do{if(r)for(t=0,u=l<<(31==(0|c)?0:25-(c>>>1)|0),s=0;;){if((a=(-8&i[r+4>>2])-l|0)>>>0<A>>>0){if(!a){t=r,A=0,y=65;break t}t=r,A=a}if(s=0==(0|(y=0|i[r+20>>2]))|(0|y)==(0|(r=0|i[r+16+(u>>>31<<2)>>2]))?s:y,!r){r=s,y=61;break}u<<=1}else r=0,t=0,y=61}while(0);if(61==(0|y)){if(0==(0|r)&0==(0|t)){if(!(t=((t=2<<c)|0-t)&o)){h=l;break}h=(t&0-t)-1|0,t=0,r=0|i[23620+(((s=(h>>>=a=h>>>12&16)>>>5&8)|a|(u=(h>>>=s)>>>2&4)|(c=(h>>>=u)>>>1&2)|(r=(h>>>=c)>>>1&1))+(h>>>r)<<2)>>2]}r?y=65:(u=t,a=A)}if(65==(0|y))for(s=r;;){if(A=(r=(h=(-8&i[s+4>>2])-l|0)>>>0<A>>>0)?h:A,t=r?s:t,(r=0|i[s+16>>2])||(r=0|i[s+20>>2]),!r){u=t,a=A;break}s=r}if(0!=(0|u)&&a>>>0<((0|i[5831])-l|0)>>>0&&(f=u+l|0)>>>0>u>>>0){s=0|i[u+24>>2],n=0|i[u+12>>2];do{if((0|n)==(0|u)){if(!(n=0|i[(t=u+20|0)>>2])&&!(n=0|i[(t=u+16|0)>>2])){n=0;break}for(;;)if(r=0|i[(A=n+20|0)>>2])n=r,t=A;else{if(!(r=0|i[(A=n+16|0)>>2]))break;n=r,t=A}i[t>>2]=0}else w=0|i[u+8>>2],i[w+12>>2]=n,i[n+8>>2]=w}while(0);do{if(s){if(t=0|i[u+28>>2],(0|u)==(0|i[(r=23620+(t<<2)|0)>>2])){if(i[r>>2]=n,!n){o&=~(1<<t),i[5830]=o;break}}else if(i[((0|i[(w=s+16|0)>>2])==(0|u)?w:s+20|0)>>2]=n,!n)break;i[n+24>>2]=s,0|(t=0|i[u+16>>2])&&(i[n+16>>2]=t,i[t+24>>2]=n),(t=0|i[u+20>>2])&&(i[n+20>>2]=t,i[t+24>>2]=n)}}while(0);t:do{if(a>>>0<16)w=a+l|0,i[u+4>>2]=3|w,i[(w=u+w+4|0)>>2]=1|i[w>>2];else{if(i[u+4>>2]=3|l,i[f+4>>2]=1|a,i[f+a>>2]=a,n=a>>>3,a>>>0<256){r=23356+(n<<1<<2)|0,(t=0|i[5829])&(n=1<<n)?n=0|i[(t=r+8|0)>>2]:(i[5829]=t|n,n=r,t=r+8|0),i[t>>2]=f,i[n+12>>2]=f,i[f+8>>2]=n,i[f+12>>2]=r;break}if(n=23620+((r=(n=a>>>8)?a>>>0>16777215?31:a>>>(7+(r=14-((_=(520192+(w=n<<(b=(n+1048320|0)>>>16&8))|0)>>>16&4)|b|(r=(245760+(w<<=_)|0)>>>16&2))+(w<<r>>>15)|0)|0)&1|r<<1:0)<<2)|0,i[f+28>>2]=r,i[4+(t=f+16|0)>>2]=0,i[t>>2]=0,!(o&(t=1<<r))){i[5830]=o|t,i[n>>2]=f,i[f+24>>2]=n,i[f+12>>2]=f,i[f+8>>2]=f;break}n=0|i[n>>2];e:do{if((-8&i[n+4>>2]|0)!=(0|a)){for(o=a<<(31==(0|r)?0:25-(r>>>1)|0);t=0|i[(r=n+16+(o>>>31<<2)|0)>>2];){if((-8&i[t+4>>2]|0)==(0|a)){n=t;break e}o<<=1,n=t}i[r>>2]=f,i[f+24>>2]=n,i[f+12>>2]=f,i[f+8>>2]=f;break t}}while(0);w=0|i[(b=n+8|0)>>2],i[w+12>>2]=f,i[b>>2]=f,i[f+8>>2]=w,i[f+12>>2]=n,i[f+24>>2]=0}}while(0);return O=e,0|u+8}h=l}else h=l;else h=-1}while(0);if((r=0|i[5831])>>>0>=h>>>0)return n=r-h|0,t=0|i[5834],n>>>0>15?(w=t+h|0,i[5834]=w,i[5831]=n,i[w+4>>2]=1|n,i[t+r>>2]=n,i[t+4>>2]=3|h):(i[5831]=0,i[5834]=0,i[t+4>>2]=3|r,i[(w=t+r+4|0)>>2]=1|i[w>>2]),O=e,0|t+8;if((a=0|i[5832])>>>0>h>>>0)return _=a-h|0,i[5832]=_,b=(w=0|i[5835])+h|0,i[5835]=b,i[b+4>>2]=1|_,i[w+4>>2]=3|h,O=e,0|w+8;if(0|i[5947]?t=0|i[5949]:(i[5949]=4096,i[5948]=4096,i[5950]=-1,i[5951]=-1,i[5952]=0,i[5940]=0,i[5947]=-16&p^1431655768,t=4096),u=h+48|0,(l=(s=t+(c=h+47|0)|0)&(A=0-t|0))>>>0<=h>>>0)return O=e,0;if(0|(t=0|i[5939])&&(p=(f=0|i[5937])+l|0)>>>0<=f>>>0|p>>>0>t>>>0)return O=e,0;t:do{if(4&i[5940])n=0,y=143;else{r=0|i[5835];e:do{if(r){for(o=23764;!((p=0|i[o>>2])>>>0<=r>>>0&&(p+(0|i[o+4>>2])|0)>>>0>r>>>0);){if(!(t=0|i[o+8>>2])){y=128;break e}o=t}if((n=s-a&A)>>>0<2147483647)if((0|(t=0|Oe(0|n)))==((0|i[o>>2])+(0|i[o+4>>2])|0)){if(-1!=(0|t)){a=n,s=t,y=145;break t}}else o=t,y=136;else n=0}else y=128}while(0);do{if(128==(0|y))if(-1!=(0|(r=0|Oe(0)))&&(n=r,g=(n=(0==((g=(d=0|i[5948])-1|0)&n|0)?0:(g+n&0-d)-n|0)+l|0)+(d=0|i[5937])|0,n>>>0>h>>>0&n>>>0<2147483647)){if(0|(p=0|i[5939])&&g>>>0<=d>>>0|g>>>0>p>>>0){n=0;break}if((0|(t=0|Oe(0|n)))==(0|r)){a=n,s=r,y=145;break t}o=t,y=136}else n=0}while(0);do{if(136==(0|y)){if(r=0-n|0,!(u>>>0>n>>>0&n>>>0<2147483647&-1!=(0|o))){if(-1==(0|o)){n=0;break}a=n,s=o,y=145;break t}if((t=c-n+(t=0|i[5949])&0-t)>>>0>=2147483647){a=n,s=o,y=145;break t}if(-1==(0|Oe(0|t))){Oe(0|r),n=0;break}a=t+n|0,s=o,y=145;break t}}while(0);i[5940]=4|i[5940],y=143}}while(0);if(143==(0|y)&&l>>>0<2147483647&&!(-1==(0|(_=0|Oe(0|l)))|1^(m=(v=(g=0|Oe(0))-_|0)>>>0>(h+40|0)>>>0)|_>>>0<g>>>0&-1!=(0|_)&-1!=(0|g)^1)&&(a=m?v:n,s=_,y=145),145==(0|y)){n=(0|i[5937])+a|0,i[5937]=n,n>>>0>(0|i[5938])>>>0&&(i[5938]=n),c=0|i[5835];t:do{if(c){for(n=23764;;){if((0|s)==((t=0|i[n>>2])+(r=0|i[n+4>>2])|0)){y=154;break}if(!(o=0|i[n+8>>2]))break;n=o}if(154==(0|y)&&(b=n+4|0,0==(8&i[n+12>>2]|0))&&s>>>0>c>>>0&t>>>0<=c>>>0){i[b>>2]=r+a,b=c+(_=0==(7&(_=c+8|0)|0)?0:0-_&7)|0,_=(w=(0|i[5832])+a|0)-_|0,i[5835]=b,i[5832]=_,i[b+4>>2]=1|_,i[c+w+4>>2]=40,i[5836]=i[5951];break}for(s>>>0<(0|i[5833])>>>0&&(i[5833]=s),r=s+a|0,n=23764;;){if((0|i[n>>2])==(0|r)){y=162;break}if(!(t=0|i[n+8>>2]))break;n=t}if(162==(0|y)&&0==(8&i[n+12>>2]|0)){i[n>>2]=s,i[(f=n+4|0)>>2]=(0|i[f>>2])+a,l=(f=s+(0==(7&(f=s+8|0)|0)?0:0-f&7)|0)+h|0,u=(n=r+(0==(7&(n=r+8|0)|0)?0:0-n&7)|0)-f-h|0,i[f+4>>2]=3|h;e:do{if((0|c)==(0|n))w=(0|i[5832])+u|0,i[5832]=w,i[5835]=l,i[l+4>>2]=1|w;else{if((0|i[5834])==(0|n)){w=(0|i[5831])+u|0,i[5831]=w,i[5834]=l,i[l+4>>2]=1|w,i[l+w>>2]=w;break}if(1==(3&(t=0|i[n+4>>2])|0)){a=-8&t,o=t>>>3;n:do{if(t>>>0<256){if(t=0|i[n+8>>2],(0|(r=0|i[n+12>>2]))==(0|t)){i[5829]=i[5829]&~(1<<o);break}i[t+12>>2]=r,i[r+8>>2]=t;break}s=0|i[n+24>>2],t=0|i[n+12>>2];do{if((0|t)==(0|n)){if(t=0|i[(o=4+(r=n+16|0)|0)>>2])r=o;else if(!(t=0|i[r>>2])){t=0;break}for(;;)if(o=0|i[(A=t+20|0)>>2])t=o,r=A;else{if(!(o=0|i[(A=t+16|0)>>2]))break;t=o,r=A}i[r>>2]=0}else w=0|i[n+8>>2],i[w+12>>2]=t,i[t+8>>2]=w}while(0);if(!s)break;o=23620+((r=0|i[n+28>>2])<<2)|0;do{if((0|i[o>>2])==(0|n)){if(i[o>>2]=t,0|t)break;i[5830]=i[5830]&~(1<<r);break n}if(i[((0|i[(w=s+16|0)>>2])==(0|n)?w:s+20|0)>>2]=t,!t)break n}while(0);if(i[t+24>>2]=s,0|(o=0|i[(r=n+16|0)>>2])&&(i[t+16>>2]=o,i[o+24>>2]=t),!(r=0|i[r+4>>2]))break;i[t+20>>2]=r,i[r+24>>2]=t}while(0);n=n+a|0,A=a+u|0}else A=u;if(i[(n=n+4|0)>>2]=-2&i[n>>2],i[l+4>>2]=1|A,i[l+A>>2]=A,n=A>>>3,A>>>0<256){r=23356+(n<<1<<2)|0,(t=0|i[5829])&(n=1<<n)?n=0|i[(t=r+8|0)>>2]:(i[5829]=t|n,n=r,t=r+8|0),i[t>>2]=l,i[n+12>>2]=l,i[l+8>>2]=n,i[l+12>>2]=r;break}n=A>>>8;do{if(n){if(A>>>0>16777215){o=31;break}o=A>>>(7+(o=14-((_=(520192+(w=n<<(b=(n+1048320|0)>>>16&8))|0)>>>16&4)|b|(o=(245760+(w<<=_)|0)>>>16&2))+(w<<o>>>15)|0)|0)&1|o<<1}else o=0}while(0);if(n=23620+(o<<2)|0,i[l+28>>2]=o,i[4+(t=l+16|0)>>2]=0,i[t>>2]=0,!((t=0|i[5830])&(r=1<<o))){i[5830]=t|r,i[n>>2]=l,i[l+24>>2]=n,i[l+12>>2]=l,i[l+8>>2]=l;break}n=0|i[n>>2];n:do{if((-8&i[n+4>>2]|0)!=(0|A)){for(o=A<<(31==(0|o)?0:25-(o>>>1)|0);t=0|i[(r=n+16+(o>>>31<<2)|0)>>2];){if((-8&i[t+4>>2]|0)==(0|A)){n=t;break n}o<<=1,n=t}i[r>>2]=l,i[l+24>>2]=n,i[l+12>>2]=l,i[l+8>>2]=l;break e}}while(0);w=0|i[(b=n+8|0)>>2],i[w+12>>2]=l,i[b>>2]=l,i[l+8>>2]=w,i[l+12>>2]=n,i[l+24>>2]=0}}while(0);return O=e,0|f+8}for(n=23764;!((t=0|i[n>>2])>>>0<=c>>>0&&(w=t+(0|i[n+4>>2])|0)>>>0>c>>>0);)n=0|i[n+8>>2];n=(t=(t=(A=w+-47|0)+(0==(7&(t=A+8|0)|0)?0:0-t&7)|0)>>>0<(A=c+16|0)>>>0?c:t)+8|0,b=s+(_=0==(7&(_=s+8|0)|0)?0:0-_&7)|0,_=(r=a+-40|0)-_|0,i[5835]=b,i[5832]=_,i[b+4>>2]=1|_,i[s+r+4>>2]=40,i[5836]=i[5951],i[(r=t+4|0)>>2]=27,i[n>>2]=i[5941],i[n+4>>2]=i[5942],i[n+8>>2]=i[5943],i[n+12>>2]=i[5944],i[5941]=s,i[5942]=a,i[5944]=0,i[5943]=n,n=t+24|0;do{b=n,i[(n=n+4|0)>>2]=7}while((b+8|0)>>>0<w>>>0);if((0|t)!=(0|c)){if(s=t-c|0,i[r>>2]=-2&i[r>>2],i[c+4>>2]=1|s,i[t>>2]=s,n=s>>>3,s>>>0<256){r=23356+(n<<1<<2)|0,(t=0|i[5829])&(n=1<<n)?n=0|i[(t=r+8|0)>>2]:(i[5829]=t|n,n=r,t=r+8|0),i[t>>2]=c,i[n+12>>2]=c,i[c+8>>2]=n,i[c+12>>2]=r;break}if(r=23620+((o=(n=s>>>8)?s>>>0>16777215?31:s>>>(7+(o=14-((_=(520192+(w=n<<(b=(n+1048320|0)>>>16&8))|0)>>>16&4)|b|(o=(245760+(w<<=_)|0)>>>16&2))+(w<<o>>>15)|0)|0)&1|o<<1:0)<<2)|0,i[c+28>>2]=o,i[c+20>>2]=0,i[A>>2]=0,!((n=0|i[5830])&(t=1<<o))){i[5830]=n|t,i[r>>2]=c,i[c+24>>2]=r,i[c+12>>2]=c,i[c+8>>2]=c;break}n=0|i[r>>2];e:do{if((-8&i[n+4>>2]|0)!=(0|s)){for(o=s<<(31==(0|o)?0:25-(o>>>1)|0);t=0|i[(r=n+16+(o>>>31<<2)|0)>>2];){if((-8&i[t+4>>2]|0)==(0|s)){n=t;break e}o<<=1,n=t}i[r>>2]=c,i[c+24>>2]=n,i[c+12>>2]=c,i[c+8>>2]=c;break t}}while(0);w=0|i[(b=n+8|0)>>2],i[w+12>>2]=c,i[b>>2]=c,i[c+8>>2]=w,i[c+12>>2]=n,i[c+24>>2]=0}}else 0==(0|(w=0|i[5833]))|s>>>0<w>>>0&&(i[5833]=s),i[5941]=s,i[5942]=a,i[5944]=0,i[5838]=i[5947],i[5837]=-1,i[5842]=23356,i[5841]=23356,i[5844]=23364,i[5843]=23364,i[5846]=23372,i[5845]=23372,i[5848]=23380,i[5847]=23380,i[5850]=23388,i[5849]=23388,i[5852]=23396,i[5851]=23396,i[5854]=23404,i[5853]=23404,i[5856]=23412,i[5855]=23412,i[5858]=23420,i[5857]=23420,i[5860]=23428,i[5859]=23428,i[5862]=23436,i[5861]=23436,i[5864]=23444,i[5863]=23444,i[5866]=23452,i[5865]=23452,i[5868]=23460,i[5867]=23460,i[5870]=23468,i[5869]=23468,i[5872]=23476,i[5871]=23476,i[5874]=23484,i[5873]=23484,i[5876]=23492,i[5875]=23492,i[5878]=23500,i[5877]=23500,i[5880]=23508,i[5879]=23508,i[5882]=23516,i[5881]=23516,i[5884]=23524,i[5883]=23524,i[5886]=23532,i[5885]=23532,i[5888]=23540,i[5887]=23540,i[5890]=23548,i[5889]=23548,i[5892]=23556,i[5891]=23556,i[5894]=23564,i[5893]=23564,i[5896]=23572,i[5895]=23572,i[5898]=23580,i[5897]=23580,i[5900]=23588,i[5899]=23588,i[5902]=23596,i[5901]=23596,i[5904]=23604,i[5903]=23604,b=s+(_=0==(7&(_=s+8|0)|0)?0:0-_&7)|0,_=(w=a+-40|0)-_|0,i[5835]=b,i[5832]=_,i[b+4>>2]=1|_,i[s+w+4>>2]=40,i[5836]=i[5951]}while(0);if((n=0|i[5832])>>>0>h>>>0)return _=n-h|0,i[5832]=_,b=(w=0|i[5835])+h|0,i[5835]=b,i[b+4>>2]=1|_,i[w+4>>2]=3|h,O=e,0|w+8}return i[(w=23312)>>2]=12,O=e,0}function ve(t){var e=0,n=0,r=0,o=0,A=0,s=0,a=0,u=0;if(t|=0){n=t+-8|0,o=0|i[5833],u=n+(e=-8&(t=0|i[t+-4>>2]))|0;do{if(1&t)a=n,s=n;else{if(r=0|i[n>>2],!(3&t))return;if(A=r+e|0,(s=n+(0-r)|0)>>>0<o>>>0)return;if((0|i[5834])==(0|s)){if(3!=(3&(e=0|i[(t=u+4|0)>>2])|0)){a=s,e=A;break}return i[5831]=A,i[t>>2]=-2&e,i[s+4>>2]=1|A,void(i[s+A>>2]=A)}if(n=r>>>3,r>>>0<256){if(t=0|i[s+8>>2],(0|(e=0|i[s+12>>2]))==(0|t)){i[5829]=i[5829]&~(1<<n),a=s,e=A;break}i[t+12>>2]=e,i[e+8>>2]=t,a=s,e=A;break}o=0|i[s+24>>2],t=0|i[s+12>>2];do{if((0|t)==(0|s)){if(t=0|i[(n=4+(e=s+16|0)|0)>>2])e=n;else if(!(t=0|i[e>>2])){t=0;break}for(;;)if(n=0|i[(r=t+20|0)>>2])t=n,e=r;else{if(!(n=0|i[(r=t+16|0)>>2]))break;t=n,e=r}i[e>>2]=0}else a=0|i[s+8>>2],i[a+12>>2]=t,i[t+8>>2]=a}while(0);if(o){if(e=0|i[s+28>>2],(0|i[(n=23620+(e<<2)|0)>>2])==(0|s)){if(i[n>>2]=t,!t){i[5830]=i[5830]&~(1<<e),a=s,e=A;break}}else if(i[((0|i[(a=o+16|0)>>2])==(0|s)?a:o+20|0)>>2]=t,!t){a=s,e=A;break}i[t+24>>2]=o,0|(n=0|i[(e=s+16|0)>>2])&&(i[t+16>>2]=n,i[n+24>>2]=t),(e=0|i[e+4>>2])?(i[t+20>>2]=e,i[e+24>>2]=t,a=s,e=A):(a=s,e=A)}else a=s,e=A}}while(0);if(!(s>>>0>=u>>>0)&&1&(r=0|i[(t=u+4|0)>>2])){if(2&r)i[t>>2]=-2&r,i[a+4>>2]=1|e,i[s+e>>2]=e,o=e;else{if((0|i[5835])==(0|u)){if(u=(0|i[5832])+e|0,i[5832]=u,i[5835]=a,i[a+4>>2]=1|u,(0|a)!=(0|i[5834]))return;return i[5834]=0,void(i[5831]=0)}if((0|i[5834])==(0|u))return u=(0|i[5831])+e|0,i[5831]=u,i[5834]=s,i[a+4>>2]=1|u,void(i[s+u>>2]=u);o=(-8&r)+e|0,n=r>>>3;do{if(r>>>0<256){if(e=0|i[u+8>>2],(0|(t=0|i[u+12>>2]))==(0|e)){i[5829]=i[5829]&~(1<<n);break}i[e+12>>2]=t,i[t+8>>2]=e;break}A=0|i[u+24>>2],t=0|i[u+12>>2];do{if((0|t)==(0|u)){if(t=0|i[(n=4+(e=u+16|0)|0)>>2])e=n;else if(!(t=0|i[e>>2])){n=0;break}for(;;)if(n=0|i[(r=t+20|0)>>2])t=n,e=r;else{if(!(n=0|i[(r=t+16|0)>>2]))break;t=n,e=r}i[e>>2]=0,n=t}else n=0|i[u+8>>2],i[n+12>>2]=t,i[t+8>>2]=n,n=t}while(0);if(0|A){if(t=0|i[u+28>>2],(0|i[(e=23620+(t<<2)|0)>>2])==(0|u)){if(i[e>>2]=n,!n){i[5830]=i[5830]&~(1<<t);break}}else if(i[((0|i[(r=A+16|0)>>2])==(0|u)?r:A+20|0)>>2]=n,!n)break;i[n+24>>2]=A,0|(e=0|i[(t=u+16|0)>>2])&&(i[n+16>>2]=e,i[e+24>>2]=n),0|(t=0|i[t+4>>2])&&(i[n+20>>2]=t,i[t+24>>2]=n)}}while(0);if(i[a+4>>2]=1|o,i[s+o>>2]=o,(0|a)==(0|i[5834]))return void(i[5831]=o)}if(t=o>>>3,o>>>0<256)return n=23356+(t<<1<<2)|0,(e=0|i[5829])&(t=1<<t)?t=0|i[(e=n+8|0)>>2]:(i[5829]=e|t,t=n,e=n+8|0),i[e>>2]=a,i[t+12>>2]=a,i[a+8>>2]=t,void(i[a+12>>2]=n);t=23620+((r=(t=o>>>8)?o>>>0>16777215?31:o>>>(7+(r=14-((A=(520192+(u=t<<(s=(t+1048320|0)>>>16&8))|0)>>>16&4)|s|(r=(245760+(u<<=A)|0)>>>16&2))+(u<<r>>>15)|0)|0)&1|r<<1:0)<<2)|0,i[a+28>>2]=r,i[a+20>>2]=0,i[a+16>>2]=0,e=0|i[5830],n=1<<r;t:do{if(e&n){t=0|i[t>>2];e:do{if((-8&i[t+4>>2]|0)!=(0|o)){for(r=o<<(31==(0|r)?0:25-(r>>>1)|0);e=0|i[(n=t+16+(r>>>31<<2)|0)>>2];){if((-8&i[e+4>>2]|0)==(0|o)){t=e;break e}r<<=1,t=e}i[n>>2]=a,i[a+24>>2]=t,i[a+12>>2]=a,i[a+8>>2]=a;break t}}while(0);u=0|i[(s=t+8|0)>>2],i[u+12>>2]=a,i[s>>2]=a,i[a+8>>2]=u,i[a+12>>2]=t,i[a+24>>2]=0}else i[5830]=e|n,i[t>>2]=a,i[a+24>>2]=t,i[a+12>>2]=a,i[a+8>>2]=a}while(0);if(u=(0|i[5837])-1|0,i[5837]=u,!(0|u)){for(t=23772;t=0|i[t>>2];)t=t+8|0;i[5837]=-1}}}}function me(t,e){e|=0;var n=0;return(t|=0)?(n=0|m(e,t),(e|t)>>>0>65535&&(n=(0|(n>>>0)/(t>>>0))==(0|e)?n:-1)):n=0,(t=0|ye(n))&&3&i[t+-4>>2]?(Ce(0|t,0,0|n),0|t):0|t}function _e(t,e,n,r){return 0|(w(0|(r=(e|=0)-(r|=0)-((n|=0)>>>0>(t|=0)>>>0|0)>>>0)),t-n>>>0|0)}function be(t){return 0|((t|=0)?31-(0|b(t^t-1))|0:32)}function we(t,e,n,r){var o,A;return A=O,O=O+16|0,function(t,e,n,r,o){o|=0;var A=0,s=0,a=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0;if(l=t|=0,s=n|=0,a=h=r|=0,!(c=u=e|=0))return A=0!=(0|o),a?A?(i[o>>2]=0|t,i[o+4>>2]=0&e,o=0,0|(w(0|(h=0)),o)):(o=0,0|(w(0|(h=0)),o)):(A&&(i[o>>2]=(l>>>0)%(s>>>0),i[o+4>>2]=0),o=(l>>>0)/(s>>>0)>>>0,0|(w(0|(h=0)),o));A=0==(0|a);do{if(s){if(!A){if((A=(0|b(0|a))-(0|b(0|c))|0)>>>0<=31){s=f=A+1|0,t=l>>>(f>>>0)&(e=A-31>>31)|c<<(a=31-A|0),e&=c>>>(f>>>0),A=0,a=l<<a;break}return o?(i[o>>2]=0|t,i[o+4>>2]=u|0&e,o=0,0|(w(0|(h=0)),o)):(o=0,0|(w(0|(h=0)),o))}if((A=s-1|0)&s|0){s=a=33+(0|b(0|s))-(0|b(0|c))|0,t=(f=32-a|0)-1>>31&c>>>((p=a-32|0)>>>0)|(c<<f|l>>>(a>>>0))&(e=p>>31),e&=c>>>(a>>>0),A=l<<(d=64-a|0)&(u=f>>31),a=(c<<d|l>>>(p>>>0))&u|l<<f&a-33>>31;break}return 0|o&&(i[o>>2]=A&l,i[o+4>>2]=0),1==(0|s)?(d=0|t,0|(w(0|(p=u|0&e)),d)):(p=c>>>((d=0|be(0|s))>>>0)|0,d=c<<32-d|l>>>(d>>>0)|0,0|(w(0|p),d))}if(A)return 0|o&&(i[o>>2]=(c>>>0)%(s>>>0),i[o+4>>2]=0),d=(c>>>0)/(s>>>0)>>>0,0|(w(0|(p=0)),d);if(!l)return 0|o&&(i[o>>2]=0,i[o+4>>2]=(c>>>0)%(a>>>0)),d=(c>>>0)/(a>>>0)>>>0,0|(w(0|(p=0)),d);if(!((A=a-1|0)&a))return 0|o&&(i[o>>2]=0|t,i[o+4>>2]=A&c|0&e),p=0,d=c>>>((0|be(0|a))>>>0),0|(w(0|p),d);if((A=(0|b(0|a))-(0|b(0|c))|0)>>>0<=30){s=e=A+1|0,t=c<<(a=31-A|0)|l>>>(e>>>0),e=c>>>(e>>>0),A=0,a=l<<a;break}return o?(i[o>>2]=0|t,i[o+4>>2]=u|0&e,d=0,0|(w(0|(p=0)),d)):(d=0,0|(w(0|(p=0)),d))}while(0);if(s){c=0|function(t,e,n,r){return 0|(w((e|=0)+(r|=0)+((n=(t|=0)+(n|=0)>>>0)>>>0<t>>>0|0)>>>0|0),0|n)}(0|(f=0|n),0|(l=h|0&r),-1,-1),n=0|E(),u=a,a=0;do{r=u,u=A>>>31|u<<1,A=a|A<<1,_e(0|c,0|n,0|(r=t<<1|r>>>31|0),0|(h=t>>>31|e<<1|0)),a=1&(p=(d=0|E())>>31|((0|d)<0?-1:0)<<1),t=0|_e(0|r,0|h,p&f|0,(((0|d)<0?-1:0)>>31|((0|d)<0?-1:0)<<1)&l|0),e=0|E(),s=s-1|0}while(0!=(0|s));c=u,u=0}else c=a,u=0,a=0;s=0,0|o&&(i[o>>2]=t,i[o+4>>2]=e),d=-2&(A<<1|0)|a,w(0|(p=(0|A)>>>31|(c|s)<<1|0&(s<<1|A>>>31)|u))}(t|=0,e|=0,n|=0,r|=0,o=0|A),O=A,0|(w(0|i[o+4>>2]),0|i[o>>2])}function Ee(t,e,n){return t|=0,e|=0,(0|(n|=0))<32?(w(e>>>n|0),t>>>n|(e&(1<<n)-1)<<32-n):(w(0),e>>>n-32|0)}function xe(t,e,n){return t|=0,(0|(n|=0))<32?(w((e|=0)<<n|(t&(1<<n)-1<<32-n)>>>32-n|0),t<<n):(w(t<<n-32|0),0)}function Se(t,e){return e=+e,(t=+t)!=t?+e:e!=e?+t:+_(+t,+e)}function Ie(t){return(t=+t)>=0?+s(t+.5):+v(t-.5)}function Me(t,e,n){t|=0,e|=0;var o,A,s=0;if((0|(n|=0))>=8192)return M(0|t,0|e,0|n),0|t;if(A=0|t,o=t+n|0,(3&t)==(3&e)){for(;3&t;){if(!n)return 0|A;r[t>>0]=0|r[e>>0],t=t+1|0,e=e+1|0,n=n-1|0}for(s=(n=-4&o|0)-64|0;(0|t)<=(0|s);)i[t>>2]=i[e>>2],i[t+4>>2]=i[e+4>>2],i[t+8>>2]=i[e+8>>2],i[t+12>>2]=i[e+12>>2],i[t+16>>2]=i[e+16>>2],i[t+20>>2]=i[e+20>>2],i[t+24>>2]=i[e+24>>2],i[t+28>>2]=i[e+28>>2],i[t+32>>2]=i[e+32>>2],i[t+36>>2]=i[e+36>>2],i[t+40>>2]=i[e+40>>2],i[t+44>>2]=i[e+44>>2],i[t+48>>2]=i[e+48>>2],i[t+52>>2]=i[e+52>>2],i[t+56>>2]=i[e+56>>2],i[t+60>>2]=i[e+60>>2],t=t+64|0,e=e+64|0;for(;(0|t)<(0|n);)i[t>>2]=i[e>>2],t=t+4|0,e=e+4|0}else for(n=o-4|0;(0|t)<(0|n);)r[t>>0]=0|r[e>>0],r[t+1>>0]=0|r[e+1>>0],r[t+2>>0]=0|r[e+2>>0],r[t+3>>0]=0|r[e+3>>0],t=t+4|0,e=e+4|0;for(;(0|t)<(0|o);)r[t>>0]=0|r[e>>0],t=t+1|0,e=e+1|0;return 0|A}function Ce(t,e,n){e|=0;var o,A=0,s=0,a=0;if(o=(t|=0)+(n|=0)|0,e&=255,(0|n)>=67){for(;3&t;)r[t>>0]=e,t=t+1|0;for(a=e|e<<8|e<<16|e<<24,s=(A=-4&o|0)-64|0;(0|t)<=(0|s);)i[t>>2]=a,i[t+4>>2]=a,i[t+8>>2]=a,i[t+12>>2]=a,i[t+16>>2]=a,i[t+20>>2]=a,i[t+24>>2]=a,i[t+28>>2]=a,i[t+32>>2]=a,i[t+36>>2]=a,i[t+40>>2]=a,i[t+44>>2]=a,i[t+48>>2]=a,i[t+52>>2]=a,i[t+56>>2]=a,i[t+60>>2]=a,t=t+64|0;for(;(0|t)<(0|A);)i[t>>2]=a,t=t+4|0}for(;(0|t)<(0|o);)r[t>>0]=e,t=t+1|0;return o-n|0}function Pe(t){return(t=+t)>=0?+s(t+.5):+v(t-.5)}function Oe(t){var e,n,r;return t|=0,r=0|I(),(0|t)>0&(0|(e=(n=0|i[A>>2])+t|0))<(0|n)|(0|e)<0?(P(0|e),S(12),-1):(0|e)>(0|r)&&!(0|C(0|e))?(S(12),-1):(i[A>>2]=e,0|n)}return{___uremdi3:we,_bitshift64Lshr:Ee,_bitshift64Shl:xe,_calloc:me,_cellAreaKm2:function(t,e){var n,r,o,A=0;if(o=O,O=O+192|0,r=o,Qt(t|=0,e|=0,n=o+168|0),Ht(t,e,r),(0|(e=0|i[r>>2]))>0){if(A=+Pt(r+8|0,r+8+((1!=(0|e)&1)<<4)|0,n)+0,1!=(0|e)){t=1;do{A+=+Pt(r+8+(t<<4)|0,r+8+(((0|(t=t+1|0))%(0|e)|0)<<4)|0,n)}while((0|t)<(0|e))}}else A=0;return O=o,6371.007180918475*A*6371.007180918475},_cellAreaM2:function(t,e){var n,r,o,A=0;if(o=O,O=O+192|0,r=o,Qt(t|=0,e|=0,n=o+168|0),Ht(t,e,r),(0|(e=0|i[r>>2]))>0){if(A=+Pt(r+8|0,r+8+((1!=(0|e)&1)<<4)|0,n)+0,1!=(0|e)){t=1;do{A+=+Pt(r+8+(t<<4)|0,r+8+(((0|(t=t+1|0))%(0|e)|0)<<4)|0,n)}while((0|t)<(0|e))}}else A=0;return O=o,6371.007180918475*A*6371.007180918475*1e3*1e3},_cellAreaRads2:function(t,e){var n,r,o,A=0;if(o=O,O=O+192|0,r=o,Qt(t|=0,e|=0,n=o+168|0),Ht(t,e,r),(0|(e=0|i[r>>2]))<=0)return O=o,+(A=0);if(A=+Pt(r+8|0,r+8+((1!=(0|e)&1)<<4)|0,n)+0,1==(0|e))return O=o,+A;t=1;do{A+=+Pt(r+8+(t<<4)|0,r+8+(((0|(t=t+1|0))%(0|e)|0)<<4)|0,n)}while((0|t)<(0|e));return O=o,+A},_compact:function(t,e,n){e|=0;var r,o=0,A=0,s=0,a=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,_=0,b=0,w=0,x=0,S=0,I=0;if(!(n|=0))return 0;if(o=0|i[(A=t|=0)>>2],!0&0==(15728640&(A=0|i[A+4>>2])|0)){if((0|n)<=0)return 0;if(i[(S=e)>>2]=o,i[S+4>>2]=A,1==(0|n))return 0;o=1;do{x=0|i[4+(w=t+(o<<3)|0)>>2],i[(S=e+(o<<3)|0)>>2]=i[w>>2],i[S+4>>2]=x,o=o+1|0}while((0|o)!=(0|n));return 0}if(!(x=0|ye(w=n<<3)))return-3;if(Me(0|x,0|t,0|w),!(r=0|me(n,8)))return ve(x),-3;o=n;t:for(;;){_=0|Ee(0|(f=0|i[(a=x)>>2]),0|(a=0|i[a+4>>2]),52),E(),b=(_&=15)-1|0,m=(0|o)>0;e:do{if(m){if(v=((0|o)<0)<<31>>31,g=0|xe(0|b,0,52),y=0|E(),b>>>0>15)for(A=0,t=f,n=a;;){if(!(0==(0|t)&0==(0|n))){if(s=0|Ee(0|t,0|n,52),E(),u=(0|(s&=15))<(0|b),s=(0|s)==(0|b),n=0|we(0|(l=u?0:s?t:0),0|(t=u?0:s?n:0),0|o,0|v),E(),0==(0|(c=0|i[(u=s=r+(n<<3)|0)>>2]))&0==(0|(u=0|i[u+4>>2])))n=l;else for(g=0,d=n,p=u,n=l;;){if((0|g)>(0|o)){S=41;break t}if((0|c)==(0|n)&(-117440513&p|0)==(0|t)){l=0|Ee(0|c,0|p,56),E(),h=1+(l&=7)|0,y=0|Ee(0|c,0|p,45),E();n:do{if(0|k(127&y)){if(c=0|Ee(0|c,0|p,52),E(),!(c&=15)){u=6;break}for(u=1;;){if(!(0==((y=0|xe(7,0,3*(15-u|0)|0))&n|0)&0==((0|E())&t|0))){u=7;break n}if(!(u>>>0<c>>>0)){u=6;break}u=u+1|0}}else u=7}while(0);if((l+2|0)>>>0>u>>>0){S=51;break t}y=0|xe(0|h,0,56),t=0|E()|-117440513&t,i[(u=s)>>2]=0,i[u+4>>2]=0,u=d,n|=y}else u=(d+1|0)%(0|o)|0;if(0==(0|(c=0|i[(p=s=r+(u<<3)|0)>>2]))&0==(0|(p=0|i[p+4>>2])))break;g=g+1|0,d=u}i[(y=s)>>2]=n,i[y+4>>2]=t}if((0|(A=A+1|0))>=(0|o))break e;t=0|i[(n=x+(A<<3)|0)>>2],n=0|i[n+4>>2]}for(A=0,t=f,n=a;;){if(!(0==(0|t)&0==(0|n))){if(u=0|Ee(0|t,0|n,52),E(),(0|(u&=15))>=(0|b)){if((0|u)!=(0|b)&&(t|=g,n=-15728641&n|y,u>>>0>=_>>>0)){s=b;do{d=0|xe(7,0,3*(14-s|0)|0),s=s+1|0,t|=d,n=0|E()|n}while(s>>>0<u>>>0)}}else t=0,n=0;if(u=0|we(0|t,0|n,0|o,0|v),E(),!(0==(0|(l=0|i[(c=s=r+(u<<3)|0)>>2]))&0==(0|(c=0|i[c+4>>2]))))for(d=0;;){if((0|d)>(0|o)){S=41;break t}if((0|l)==(0|t)&(-117440513&c|0)==(0|n)){h=0|Ee(0|l,0|c,56),E(),p=1+(h&=7)|0,I=0|Ee(0|l,0|c,45),E();n:do{if(0|k(127&I)){if(l=0|Ee(0|l,0|c,52),E(),!(l&=15)){c=6;break}for(c=1;;){if(!(0==((I=0|xe(7,0,3*(15-c|0)|0))&t|0)&0==((0|E())&n|0))){c=7;break n}if(!(c>>>0<l>>>0)){c=6;break}c=c+1|0}}else c=7}while(0);if((h+2|0)>>>0>c>>>0){S=51;break t}I=0|xe(0|p,0,56),n=0|E()|-117440513&n,i[(p=s)>>2]=0,i[p+4>>2]=0,t|=I}else u=(u+1|0)%(0|o)|0;if(0==(0|(l=0|i[(c=s=r+(u<<3)|0)>>2]))&0==(0|(c=0|i[c+4>>2])))break;d=d+1|0}i[(I=s)>>2]=t,i[I+4>>2]=n}if((0|(A=A+1|0))>=(0|o))break e;t=0|i[(n=x+(A<<3)|0)>>2],n=0|i[n+4>>2]}}}while(0);if((o+5|0)>>>0<11){S=99;break}if(!(y=0|me((0|o)/6|0,8))){S=58;break}e:do{if(m){d=0,p=0;do{if(!(0==(0|(A=0|i[(t=u=r+(d<<3)|0)>>2]))&0==(0|(t=0|i[t+4>>2])))){c=0|Ee(0|A,0|t,56),E(),n=1+(c&=7)|0,l=-117440513&t,I=0|Ee(0|A,0|t,45),E();n:do{if(0|k(127&I)){if(h=0|Ee(0|A,0|t,52),E(),0|(h&=15))for(s=1;;){if(!(0==(A&(I=0|xe(7,0,3*(15-s|0)|0))|0)&0==(l&(0|E())|0)))break n;if(!(s>>>0<h>>>0))break;s=s+1|0}A|=t=0|xe(0|n,0,56),t=0|E()|l,i[(n=u)>>2]=A,i[n+4>>2]=t,n=c+2|0}}while(0);7==(0|n)&&(i[(I=y+(p<<3)|0)>>2]=A,i[I+4>>2]=-117440513&t,p=p+1|0)}d=d+1|0}while((0|d)!=(0|o));if(m){if(g=((0|o)<0)<<31>>31,h=0|xe(0|b,0,52),d=0|E(),b>>>0>15)for(t=0,A=0;;){do{if(!(0==(0|f)&0==(0|a))){for(c=0|Ee(0|f,0|a,52),E(),s=(0|(c&=15))<(0|b),c=(0|c)==(0|b),s=0|we(0|(u=s?0:c?f:0),0|(c=s?0:c?a:0),0|o,0|g),E(),n=0;;){if((0|n)>(0|o)){S=98;break t}if((-117440513&(l=0|i[4+(I=r+(s<<3)|0)>>2])|0)==(0|c)&&(0|i[I>>2])==(0|u)){S=70;break}if((0|i[(I=r+((s=(s+1|0)%(0|o)|0)<<3)|0)>>2])==(0|u)&&(0|i[I+4>>2])==(0|c))break;n=n+1|0}if(70==(0|S)&&(S=0,!0&100663296==(117440512&l|0)))break;i[(I=e+(A<<3)|0)>>2]=f,i[I+4>>2]=a,A=A+1|0}}while(0);if((0|(t=t+1|0))>=(0|o)){o=p;break e}f=0|i[(a=x+(t<<3)|0)>>2],a=0|i[a+4>>2]}for(t=0,A=0;;){do{if(!(0==(0|f)&0==(0|a))){if(c=0|Ee(0|f,0|a,52),E(),(0|(c&=15))>=(0|b))if((0|c)!=(0|b))if(n=f|h,s=-15728641&a|d,c>>>0<_>>>0)c=s;else{u=b;do{I=0|xe(7,0,3*(14-u|0)|0),u=u+1|0,n|=I,s=0|E()|s}while(u>>>0<c>>>0);c=s}else n=f,c=a;else n=0,c=0;for(u=0|we(0|n,0|c,0|o,0|g),E(),s=0;;){if((0|s)>(0|o)){S=98;break t}if((-117440513&(l=0|i[4+(I=r+(u<<3)|0)>>2])|0)==(0|c)&&(0|i[I>>2])==(0|n)){S=93;break}if((0|i[(I=r+((u=(u+1|0)%(0|o)|0)<<3)|0)>>2])==(0|n)&&(0|i[I+4>>2])==(0|c))break;s=s+1|0}if(93==(0|S)&&(S=0,!0&100663296==(117440512&l|0)))break;i[(I=e+(A<<3)|0)>>2]=f,i[I+4>>2]=a,A=A+1|0}}while(0);if((0|(t=t+1|0))>=(0|o)){o=p;break e}f=0|i[(a=x+(t<<3)|0)>>2],a=0|i[a+4>>2]}}else A=0,o=p}else A=0,o=0}while(0);if(Ce(0|r,0,0|w),Me(0|x,0|y,o<<3|0),ve(y),!o)break;e=e+(A<<3)|0}return 41==(0|S)?(ve(x),ve(r),0|(I=-1)):51==(0|S)?(ve(x),ve(r),0|(I=-2)):58==(0|S)?(ve(x),ve(r),0|(I=-3)):98==(0|S)?(ve(y),ve(x),ve(r),0|(I=-1)):(99==(0|S)&&Me(0|e,0|x,o<<3|0),ve(x),ve(r),0|(I=0))},_destroyLinkedPolygon:function(t){var e=0,n=0,r=0,o=0;if(t|=0)for(r=1;;){if(0|(e=0|i[t>>2]))do{if(0|(n=0|i[e>>2]))do{o=n,n=0|i[n+16>>2],ve(o)}while(0!=(0|n));o=e,e=0|i[e+8>>2],ve(o)}while(0!=(0|e));if(e=t,t=0|i[t+8>>2],r||ve(e),!t)break;r=0}},_edgeLengthKm:function(t){return+ +o[20752+((t|=0)<<3)>>3]},_edgeLengthM:function(t){return+ +o[20880+((t|=0)<<3)>>3]},_emscripten_replace_memory:function(t){return r=new Int8Array(t),new Uint8Array(t),i=new Int32Array(t),new Float32Array(t),o=new Float64Array(t),n=t,!0},_exactEdgeLengthKm:function(t,e){var n,r,A=0,s=0,a=0,c=0,h=0,p=0;if(r=O,O=O+176|0,Xt(t|=0,e|=0,n=r),(0|(t=0|i[n>>2]))<=1)return O=r,+(a=0);e=t+-1|0,t=0,A=0,s=+o[n+8>>3],a=+o[n+16>>3];do{h=s,s=+o[n+8+((t=t+1|0)<<4)>>3],p=+f(.5*(s-h)),c=a,a=+o[n+8+(t<<4)+8>>3],c=p*p+(c=+f(.5*(a-c)))*(+l(+h)*+l(+s)*c),A+=2*+y(+ +u(+c),+ +u(+(1-c)))}while((0|t)!=(0|e));return O=r,+(p=6371.007180918475*A)},_exactEdgeLengthM:function(t,e){var n,r,A=0,s=0,a=0,c=0,h=0,p=0;if(r=O,O=O+176|0,Xt(t|=0,e|=0,n=r),(0|(t=0|i[n>>2]))<=1)return O=r,+(a=0);e=t+-1|0,t=0,A=0,s=+o[n+8>>3],a=+o[n+16>>3];do{h=s,s=+o[n+8+((t=t+1|0)<<4)>>3],p=+f(.5*(s-h)),c=a,a=+o[n+8+(t<<4)+8>>3],c=p*p+(c=+f(.5*(a-c)))*(+l(+h)*+l(+s)*c),A+=2*+y(+ +u(+c),+ +u(+(1-c)))}while((0|t)!=(0|e));return O=r,+(p=6371.007180918475*A*1e3)},_exactEdgeLengthRads:function(t,e){var n,r,A=0,s=0,a=0,c=0,h=0,p=0;if(r=O,O=O+176|0,Xt(t|=0,e|=0,n=r),(0|(t=0|i[n>>2]))<=1)return O=r,+(a=0);e=t+-1|0,t=0,A=0,s=+o[n+8>>3],a=+o[n+16>>3];do{h=s,s=+o[n+8+((t=t+1|0)<<4)>>3],p=+f(.5*(s-h)),c=a,a=+o[n+8+(t<<4)+8>>3],c=p*p+(c=+f(.5*(a-c)))*(+l(+s)*+l(+h)*c),A+=2*+y(+ +u(+c),+ +u(+(1-c)))}while((0|t)<(0|e));return O=r,+A},_experimentalH3ToLocalIj:function(t,e,n,r,i){var o,A;return i|=0,A=O,O=O+16|0,(t=0|$t(t|=0,e|=0,n|=0,r|=0,o=A))||(ht(o,i),t=0),O=A,0|t},_experimentalLocalIjToH3:function(t,e,n,r){var i,o;return t|=0,e|=0,r|=0,i=O,O=O+16|0,pt(n|=0,o=i),r=0|te(t,e,o,r),O=i,0|r},_free:ve,_geoToH3:Ut,_getDestinationH3IndexFromUnidirectionalEdge:function(t,e){t|=0;var n,r,o=0;return n=O,O=O+16|0,o=n,!0&268435456==(2013265920&(e|=0)|0)?(r=0|Ee(0|t,0|e,56),E(),i[o>>2]=0,o=0|T(t,-2130706433&e|134217728,7&r,o),e=0|E(),w(0|e),O=n,0|o):(o=0,w(0|(e=0)),O=n,0|o)},_getH3IndexesFromUnidirectionalEdge:function(t,e,n){t|=0;var r,o,A,s,a=0;A=O,O=O+16|0,r=A,s=!0&268435456==(2013265920&(e|=0)|0),o=-2130706433&e|134217728,i[(a=n|=0)>>2]=s?t:0,i[a+4>>2]=s?o:0,s?(e=0|Ee(0|t,0|e,56),E(),i[r>>2]=0,t=0|T(t,o,7&e,r),e=0|E()):(t=0,e=0),i[(a=n+8|0)>>2]=t,i[a+4>>2]=e,O=A},_getH3UnidirectionalEdge:function(t,e,n,r){var o,A,s=0,a=0,u=0,c=0,l=0;if(A=O,O=O+16|0,o=A,!(0|Yt(t|=0,e|=0,n|=0,r|=0)))return c=0,w(0|(u=0)),O=A,0|c;for(u=-2130706433&e,s=(s=0==(0|Tt(t,e)))?1:2;i[o>>2]=0,a=s+1|0,!((0|(l=0|T(t,e,s,o)))==(0|n)&(0|E())==(0|r));){if(!(a>>>0<7)){s=0,t=0,c=6;break}s=a}return 6==(0|c)?(w(0|s),O=A,0|t):(l=0|xe(0|s,0,56),c=0|u|E()|268435456,l|=t,w(0|c),O=A,0|l)},_getH3UnidirectionalEdgeBoundary:Xt,_getH3UnidirectionalEdgesFromHexagon:function(t,e,n){n|=0;var r,o=0;r=0==(0|Tt(t|=0,e|=0)),e&=-2130706433,i[(o=n)>>2]=r?t:0,i[o+4>>2]=r?285212672|e:0,i[(o=n+8|0)>>2]=t,i[o+4>>2]=301989888|e,i[(o=n+16|0)>>2]=t,i[o+4>>2]=318767104|e,i[(o=n+24|0)>>2]=t,i[o+4>>2]=335544320|e,i[(o=n+32|0)>>2]=t,i[o+4>>2]=352321536|e,i[(n=n+40|0)>>2]=t,i[n+4>>2]=369098752|e},_getOriginH3IndexFromUnidirectionalEdge:function(t,e){var n;return t|=0,w(0|((n=!0&268435456==(2013265920&(e|=0)|0))?-2130706433&e|134217728:0)),0|(n?t:0)},_getPentagonIndexes:Vt,_getRes0Indexes:function(t){t|=0;var e=0,n=0,r=0;e=0;do{xe(0|e,0,45),r=134225919|E(),i[(n=t+(e<<3)|0)>>2]=-1,i[n+4>>2]=r,e=e+1|0}while(122!=(0|e))},_h3Distance:function(t,e,n,r){var i,o,A;return n|=0,r|=0,A=O,O=O+32|0,o=A,t=0==(0|$t(t|=0,e|=0,t,e,i=A+12|0))&&0==(0|$t(t,e,n,r,o))?0|ft(i,o):-1,O=A,0|t},_h3GetBaseCell:Ot,_h3GetFaces:function t(e,n,r){r|=0;var o,A=0,s=0,a=0,u=0,c=0,l=0,f=0,h=0;o=O,O=O+128|0,f=o+112|0,a=o+96|0,h=o,s=0|Ee(0|(e|=0),0|(n|=0),52),E(),c=15&s,i[f>>2]=c,u=0|Ee(0|e,0|n,45),E(),u&=127;t:do{if(0|k(u)){if(0|c)for(A=1;;){if(!(0==((l=0|xe(7,0,3*(15-A|0)|0))&e|0)&0==((0|E())&n|0))){s=0;break t}if(!(A>>>0<c>>>0))break;A=A+1|0}if(!(1&s))return l=0|xe(c+1|0,0,52),h=0|E()|-15728641&n,t((l|e)&~(f=0|xe(7,0,3*(14-c|0)|0)),h&~(0|E()),r),void(O=o);s=1}else s=0}while(0);qt(e,n,a),s?(bt(a,f,h),l=5):(St(a,f,h),l=6);t:do{if(0|k(u))if(c)for(A=1;;){if(!(0==((u=0|xe(7,0,3*(15-A|0)|0))&e|0)&0==((0|E())&n|0))){A=8;break t}if(!(A>>>0<c>>>0)){A=20;break}A=A+1|0}else A=20;else A=8}while(0);if(Ce(0|r,-1,0|A),s){s=0;do{for(Et(a=h+(s<<4)|0,0|i[f>>2]),a=0|i[a>>2],A=0;!(-1==(0|(c=0|i[(u=r+(A<<2)|0)>>2]))|(0|c)==(0|a));)A=A+1|0;i[u>>2]=a,s=s+1|0}while((0|s)!=(0|l))}else{s=0;do{for(wt(a=h+(s<<4)|0,0|i[f>>2],0,1),a=0|i[a>>2],A=0;!(-1==(0|(c=0|i[(u=r+(A<<2)|0)>>2]))|(0|c)==(0|a));)A=A+1|0;i[u>>2]=a,s=s+1|0}while((0|s)!=(0|l))}O=o},_h3GetResolution:function(t,e){return e=0|Ee(0|(t|=0),0|(e|=0),52),E(),15&e|0},_h3IndexesAreNeighbors:Yt,_h3IsPentagon:Tt,_h3IsResClassIII:function(t,e){return e=0|Ee(0|(t|=0),0|(e|=0),52),E(),1&e|0},_h3IsValid:Nt,_h3Line:function(t,e,n,r,o){n|=0,r|=0,o|=0;var A,s=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,_=0,b=0,w=0,E=0,x=0;if(A=O,O=O+48|0,u=A+12|0,E=A,0==(0|$t(t|=0,e|=0,t,e,s=A+24|0))&&0==(0|$t(t,e,n,r,u))){if((0|(w=0|ft(s,u)))<0)return O=A,0|w;for(i[s>>2]=0,i[s+4>>2]=0,i[s+8>>2]=0,i[u>>2]=0,i[u+4>>2]=0,i[u+8>>2]=0,$t(t,e,t,e,s),$t(t,e,n,r,u),dt(s),dt(u),w?(g=+(0|w),b=s,n=h=0|i[s>>2],r=p=0|i[(m=s+4|0)>>2],s=d=0|i[(_=s+8|0)>>2],y=+((0|i[u>>2])-h|0)/g,v=+((0|i[u+4>>2])-p|0)/g,g=+((0|i[u+8>>2])-d|0)/g):(m=r=s+4|0,_=d=s+8|0,b=s,n=0|i[s>>2],r=0|i[r>>2],s=0|i[d>>2],y=0,v=0,g=0),i[E>>2]=n,i[(d=E+4|0)>>2]=r,i[(p=E+8|0)>>2]=s,h=0;;){x=y*(l=+(0|h))+ +(0|n),c=v*l+ +(0|i[m>>2]),l=g*l+ +(0|i[_>>2]),r=~~+Ie(+x),u=~~+Ie(+c),n=~~+Ie(+l),x=+a(+(+(0|r)-x)),c=+a(+(+(0|u)-c)),l=+a(+(+(0|n)-l));do{if(!(x>c&x>l)){if(f=0-r|0,c>l){s=f-n|0;break}s=u,n=f-u|0;break}r=0-(u+n)|0,s=u}while(0);if(i[E>>2]=r,i[d>>2]=s,i[p>>2]=n,gt(E),te(t,e,E,o+(h<<3)|0),(0|h)==(0|w))break;h=h+1|0,n=0|i[b>>2]}return O=A,0}return O=A,-1},_h3LineSize:function(t,e,n,r){var i,o,A;return n|=0,r|=0,A=O,O=O+32|0,o=A,t=0==(0|$t(t|=0,e|=0,t,e,i=A+12|0))&&0==(0|$t(t,e,n,r,o))?0|ft(i,o):-1,O=A,(t>>>31^1)+t|0},_h3SetToLinkedGeo:function(t,e,n){n|=0;var r,o,A,s=0;if(A=O,O=O+32|0,r=A,function(t,e,n){t|=0,n|=0;var r,o,A=0,s=0,a=0,u=0,c=0;if(o=O,O=O+176|0,r=o,(0|(e|=0))<1)return ue(n,0,0),void(O=o);u=0|Ee(0|i[(u=t)>>2],0|i[u+4>>2],52),E(),ue(n,(0|e)>6?e:6,15&u),u=0;do{if(Ht(0|i[(A=t+(u<<3)|0)>>2],0|i[A+4>>2],r),(0|(A=0|i[r>>2]))>0){c=0;do{a=r+8+(c<<4)|0,(s=0|pe(n,A=r+8+(((0|(c=c+1|0))%(0|A)|0)<<4)|0,a))?fe(n,s):he(n,a,A),A=0|i[r>>2]}while((0|c)<(0|A))}u=u+1|0}while((0|u)!=(0|e));O=o}(t|=0,e|=0,o=A+16|0),i[n>>2]=0,i[n+4>>2]=0,i[n+8>>2]=0,!(t=0|le(o)))return Jt(n),ce(o),void(O=A);do{e=0|Wt(n);do{Zt(e,t),s=t+16|0,i[r>>2]=i[s>>2],i[r+4>>2]=i[s+4>>2],i[r+8>>2]=i[s+8>>2],i[r+12>>2]=i[s+12>>2],fe(o,t),t=0|de(o,r)}while(0!=(0|t));t=0|le(o)}while(0!=(0|t));Jt(n),ce(o),O=A},_h3ToCenterChild:function(t,e,n){n|=0;var r=0,i=0;if(r=0|Ee(0|(t|=0),0|(e|=0),52),E(),(0|n)<16&(0|(r&=15))<=(0|n)){if((0|r)!=(0|n)&&(t|=i=0|xe(0|n,0,52),e=0|E()|-15728641&e,(0|r)<(0|n)))do{i=0|xe(7,0,3*(14-r|0)|0),r=r+1|0,t&=~i,e&=~(0|E())}while((0|r)<(0|n))}else e=0,t=0;return w(0|e),0|t},_h3ToChildren:Dt,_h3ToGeo:Qt,_h3ToGeoBoundary:Ht,_h3ToParent:Rt,_h3UnidirectionalEdgeIsValid:function(t,e){var n=0;if(!(!0&268435456==(2013265920&(e|=0)|0)))return 0;switch(n=0|Ee(0|(t|=0),0|e,56),E(),7&n){case 0:case 7:return 0}return!0&16777216==(117440512&e|0)&0!=(0|Tt(t,n=-2130706433&e|134217728))?0|(n=0):0|(n=0|Nt(t,n))},_hexAreaKm2:function(t){return+ +o[20496+((t|=0)<<3)>>3]},_hexAreaM2:function(t){return+ +o[20624+((t|=0)<<3)>>3]},_hexRing:function(t,e,n,r){t|=0,e|=0,r|=0;var o,A=0,s=0,a=0,u=0,c=0,l=0,f=0;if(o=O,O=O+16|0,f=o,!(n|=0))return i[(f=r)>>2]=t,i[f+4>>2]=e,O=o,0;i[f>>2]=0;t:do{if(0|Tt(t,e))t=1;else{if(s=(0|n)>0){A=0,l=t;do{if(0==(0|(l=0|T(l,e,4,f)))&0==(0|(e=0|E()))){t=2;break t}if(A=A+1|0,0|Tt(l,e)){t=1;break t}}while((0|A)<(0|n));if(i[(c=r)>>2]=l,i[c+4>>2]=e,c=n+-1|0,s){s=0,a=1,A=l,t=e;do{if(0==(0|(A=0|T(A,t,2,f)))&0==(0|(t=0|E()))){t=2;break t}if(i[(u=r+(a<<3)|0)>>2]=A,i[u+4>>2]=t,a=a+1|0,0|Tt(A,t)){t=1;break t}s=s+1|0}while((0|s)<(0|n));u=0,s=a;do{if(0==(0|(A=0|T(A,t,3,f)))&0==(0|(t=0|E()))){t=2;break t}if(i[(a=r+(s<<3)|0)>>2]=A,i[a+4>>2]=t,s=s+1|0,0|Tt(A,t)){t=1;break t}u=u+1|0}while((0|u)<(0|n));a=0;do{if(0==(0|(A=0|T(A,t,1,f)))&0==(0|(t=0|E()))){t=2;break t}if(i[(u=r+(s<<3)|0)>>2]=A,i[u+4>>2]=t,s=s+1|0,0|Tt(A,t)){t=1;break t}a=a+1|0}while((0|a)<(0|n));a=0;do{if(0==(0|(A=0|T(A,t,5,f)))&0==(0|(t=0|E()))){t=2;break t}if(i[(u=r+(s<<3)|0)>>2]=A,i[u+4>>2]=t,s=s+1|0,0|Tt(A,t)){t=1;break t}a=a+1|0}while((0|a)<(0|n));a=0;do{if(0==(0|(A=0|T(A,t,4,f)))&0==(0|(t=0|E()))){t=2;break t}if(i[(u=r+(s<<3)|0)>>2]=A,i[u+4>>2]=t,s=s+1|0,0|Tt(A,t)){t=1;break t}a=a+1|0}while((0|a)<(0|n));for(a=0;;){if(0==(0|(A=0|T(A,t,6,f)))&0==(0|(t=0|E()))){t=2;break t}if((0|a)!=(0|c)){if(i[(u=r+(s<<3)|0)>>2]=A,i[u+4>>2]=t,0|Tt(A,t)){t=1;break t}s=s+1|0}if((0|(a=a+1|0))>=(0|n)){a=l,s=e;break}}}else a=l,A=l,s=e,t=e}else i[(a=r)>>2]=t,i[a+4>>2]=e,a=t,A=t,s=e,t=e;t=1&((0|a)!=(0|A)|(0|s)!=(0|t))}}while(0);return O=o,0|t},_i64Subtract:_e,_kRing:N,_kRingDistances:function(t,e,n,r,i){var o;if(0|R(t|=0,e|=0,n|=0,r|=0,i|=0)){if(Ce(0|r,0,(o=1+(0|m(3*n|0,n+1|0))|0)<<3|0),0|i)return Ce(0|i,0,o<<2|0),void D(t,e,n,r,i,o,0);(i=0|me(o,4))&&(D(t,e,n,r,i,o,0),ve(i))}},_llvm_minnum_f64:Se,_llvm_round_f64:Ie,_malloc:ye,_maxFaceCount:function(t,e){var n=0,r=0;if(r=0|Ee(0|(t|=0),0|(e|=0),45),E(),!(0|k(127&r)))return 2;if(r=0|Ee(0|t,0|e,52),E(),!(r&=15))return 5;for(n=1;;){if(!(0==((0|xe(7,0,3*(15-n|0)|0))&t|0)&0==((0|E())&e|0))){n=2,t=6;break}if(!(n>>>0<r>>>0)){n=5,t=6;break}n=n+1|0}return 6==(0|t)?0|n:0},_maxH3ToChildrenSize:function(t,e,n){return n|=0,t=0|Ee(0|(t|=0),0|(e|=0),52),E(),(0|n)<16&(0|(t&=15))<=(0|n)?0|(n=0|ee(7,n-t|0)):0|(n=0)},_maxKringSize:function(t){return 1+(0|m(3*(t|=0)|0,t+1|0))|0},_maxPolyfillSize:function(t,e){e|=0;var n,r=0,o=0,A=0,s=0,a=0;if(n=O,O=O+48|0,A=n+8|0,o=n,s=0|i[4+(a=t|=0)>>2],i[(r=o)>>2]=i[a>>2],i[r+4>>2]=s,re(o,A),A=0|H(A,e),e=0|i[o>>2],(0|(o=0|i[t+8>>2]))<=0)return O=n,0|(a=(s=(0|A)<(0|(a=e)))?a:A)+12;r=0|i[t+12>>2],t=0;do{e=(0|i[r+(t<<3)>>2])+e|0,t=t+1|0}while((0|t)<(0|o));return O=n,0|(a=(a=(0|A)<(0|e))?e:A)+12},_maxUncompactSize:function(t,e,n){t|=0;var r=0,o=0,A=0,s=0;if((0|(e|=0))<=0)return 0;if((0|(n|=0))>=16){for(r=0;;){if(!(0==(0|i[(s=t+(r<<3)|0)>>2])&0==(0|i[s+4>>2]))){r=-1,o=13;break}if((0|(r=r+1|0))>=(0|e)){r=0,o=13;break}}if(13==(0|o))return 0|r}r=0,s=0;t:for(;;){A=0|i[(o=t+(s<<3)|0)>>2],o=0|i[o+4>>2];do{if(!(0==(0|A)&0==(0|o))){if(o=0|Ee(0|A,0|o,52),E(),(0|(o&=15))>(0|n)){r=-1,o=13;break t}if((0|o)==(0|n)){r=r+1|0;break}r=(0|ee(7,n-o|0))+r|0;break}}while(0);if((0|(s=s+1|0))>=(0|e)){o=13;break}}return 13==(0|o)?0|r:0},_memcpy:Me,_memset:Ce,_numHexagons:function(t){var e;return t=0|i[(e=21008+((t|=0)<<3)|0)>>2],w(0|i[e+4>>2]),0|t},_pentagonIndexCount:function(){return 12},_pointDistKm:Ct,_pointDistM:function(t,e){t|=0;var n,r,i,A=0;return r=+o[(e|=0)>>3],n=+o[t>>3],A=(i=+f(.5*(r-n)))*i+(A=+f(.5*(+o[e+8>>3]-+o[t+8>>3])))*(+l(+r)*+l(+n)*A),2*+y(+ +u(+A),+ +u(+(1-A)))*6371.007180918475*1e3},_pointDistRads:function(t,e){t|=0;var n,r,i,A=0;return r=+o[(e|=0)>>3],n=+o[t>>3],A=(i=+f(.5*(r-n)))*i+(A=+f(.5*(+o[e+8>>3]-+o[t+8>>3])))*(+l(+r)*+l(+n)*A),2*+y(+ +u(+A),+ +u(+(1-A)))},_polyfill:function(t,e,n){var r,o=0,A=0,s=0,a=0,u=0;if(r=O,O=O+48|0,o=r+8|0,A=r,0|function(t,e,n){e|=0,n|=0;var r,o,A,s,a,u=0,c=0,l=0,f=0,h=0,p=0,d=0,g=0,y=0,v=0,m=0,_=0,b=0,w=0,S=0,I=0,M=0,C=0,P=0,N=0,T=0,k=0,F=0,j=0,B=0;if(a=O,O=O+112|0,o=a+80|0,p=a+72|0,A=a,s=a+56|0,(B=0|ye(32+(i[(d=8+(t|=0)|0)>>2]<<5)|0))||x(22848,22448,800,22456),ie(t,B),u=0|i[(l=t)+4>>2],i[(h=p)>>2]=i[l>>2],i[h+4>>2]=u,re(p,o),h=0|H(o,e),u=0|i[p>>2],(0|(l=0|i[d>>2]))>0){f=0|i[t+12>>2],c=0;do{u=(0|i[f+(c<<3)>>2])+u|0,c=c+1|0}while((0|c)!=(0|l))}if(c=0|me(r=(h=(0|h)<(0|u)?u:h)+12|0,8),g=0|me(r,8),i[o>>2]=0,j=0|i[(F=t)+4>>2],i[(u=p)>>2]=i[F>>2],i[u+4>>2]=j,0|(u=0|L(p,r,e,o,c,g)))return ve(c),ve(g),ve(B),O=a,0|u;t:do{if((0|i[d>>2])>0){for(l=t+12|0,u=0;f=0|L((0|i[l>>2])+(u<<3)|0,r,e,o,c,g),u=u+1|0,!(0|f);)if((0|u)>=(0|i[d>>2]))break t;return ve(c),ve(g),ve(B),O=a,0|f}}while(0);(0|h)>-12&&Ce(0|g,0,((0|r)>1?r:1)<<3|0);t:do{if((0|i[o>>2])>0){j=((0|r)<0)<<31>>31,C=c,P=g,N=c,T=c,k=g,F=c,u=c,w=c,S=g,I=g,M=g,c=g;e:for(;;){for(b=0|i[o>>2],m=0,_=0,l=0;;){h=(f=A)+56|0;do{i[f>>2]=0,f=f+4|0}while((0|f)<(0|h));if(0|R(p=0|i[(e=C+(m<<3)|0)>>2],e=0|i[e+4>>2],1,A,0)){h=(f=A)+56|0;do{i[f>>2]=0,f=f+4|0}while((0|f)<(0|h));0|(f=0|me(7,4))&&(D(p,e,1,A,f,7,0),ve(f))}v=0;do{g=0|i[(y=A+(v<<3)|0)>>2],y=0|i[y+4>>2];n:do{if(!(0==(0|g)&0==(0|y))){if(p=0|we(0|g,0|y,0|r,0|j),E(),!(0==(0|(e=0|i[(h=f=n+(p<<3)|0)>>2]))&0==(0|(h=0|i[h+4>>2]))))for(d=0;;){if((0|d)>(0|r))break e;if((0|e)==(0|g)&(0|h)==(0|y))break n;if(0==(0|(e=0|i[(h=f=n+((p=(p+1|0)%(0|r)|0)<<3)|0)>>2]))&0==(0|(h=0|i[h+4>>2])))break;d=d+1|0}0==(0|g)&0==(0|y)||(Qt(g,y,s),0|oe(t,B,s)&&(i[(d=f)>>2]=g,i[d+4>>2]=y,i[(d=P+(l<<3)|0)>>2]=g,i[d+4>>2]=y,l=l+1|0))}}while(0);v=v+1|0}while(v>>>0<7);if((0|(_=_+1|0))>=(0|b))break;m=m+1|0}if((0|b)>0&&Ce(0|N,0,b<<3|0),i[o>>2]=l,!((0|l)>0))break t;g=c,y=M,v=F,m=I,_=S,b=P,c=w,M=u,I=T,S=N,w=g,u=y,F=k,k=v,T=m,N=_,P=C,C=b}return ve(T),ve(k),ve(B),O=a,-1}u=g}while(0);return ve(B),ve(c),ve(u),O=a,0}(t|=0,e|=0,n|=0)){if(s=0|i[(u=t)+4>>2],i[(a=A)>>2]=i[u>>2],i[a+4>>2]=s,re(A,o),a=0|H(o,e),e=0|i[A>>2],(0|(s=0|i[t+8>>2]))>0){A=0|i[t+12>>2],o=0;do{e=(0|i[A+(o<<3)>>2])+e|0,o=o+1|0}while((0|o)!=(0|s))}(0|(e=(0|a)<(0|e)?e:a))<=-12||Ce(0|n,0,8+(((0|(u=e+11|0))>0?u:0)<<3)|0),O=r}else O=r},_res0IndexCount:function(){return 122},_round:Pe,_sbrk:Oe,_sizeOfCoordIJ:function(){return 8},_sizeOfGeoBoundary:function(){return 168},_sizeOfGeoCoord:function(){return 16},_sizeOfGeoPolygon:function(){return 16},_sizeOfGeofence:function(){return 8},_sizeOfH3Index:function(){return 8},_sizeOfLinkedGeoPolygon:function(){return 12},_uncompact:function(t,e,n,r,o){t|=0,n|=0,r|=0;var A=0,s=0,a=0,u=0,c=0,l=0;if((0|(e|=0))<=0)return 0;if((0|(o|=0))>=16){for(A=0;;){if(!(0==(0|i[(l=t+(A<<3)|0)>>2])&0==(0|i[l+4>>2]))){A=14;break}if((0|(A=A+1|0))>=(0|e)){s=0,A=16;break}}if(14==(0|A))return 0|((0|r)>0?-2:-1);if(16==(0|A))return 0|s}A=0,l=0;t:for(;;){s=0|i[(a=c=t+(l<<3)|0)>>2],a=0|i[a+4>>2];do{if(!(0==(0|s)&0==(0|a))){if((0|A)>=(0|r)){s=-1,A=16;break t}if(u=0|Ee(0|s,0|a,52),E(),(0|(u&=15))>(0|o)){s=-2,A=16;break t}if((0|u)==(0|o)){i[(c=n+(A<<3)|0)>>2]=s,i[c+4>>2]=a,A=A+1|0;break}if((0|(s=(0|ee(7,o-u|0))+A|0))>(0|r)){s=-1,A=16;break t}Dt(0|i[c>>2],0|i[c+4>>2],o,n+(A<<3)|0),A=s}}while(0);if((0|(l=l+1|0))>=(0|e)){s=0,A=16;break}}return 16==(0|A)?0|s:0},establishStackSpace:function(t,e){O=t|=0},stackAlloc:function(t){var e;return e=O,O=15+(O=O+(t|=0)|0)&-16,0|e},stackRestore:function(t){O=t|=0},stackSave:function(){return 0|O}}}({Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},{a:st,b:function(t){u=t},c,d:function(t,e,n,r){st("Assertion failed: "+w(t)+", at: "+[e?w(e):"unknown filename",n,r?w(r):"unknown function"])},e:function(t){return n.___errno_location&&(v[n.___errno_location()>>2]=t),t},f:H,g:function(t,e,n){g.set(g.subarray(e,e+n),t)},h:function(t){var e=H(),n=16777216,r=2130706432;if(t>r)return!1;for(var i=Math.max(e,16777216);i<t;)i=i<=536870912?E(2*i,n):Math.min(E((3*i+2147483648)/4,n),r);return!!V(i)},i:function(t){st("OOM")},j:function(t){return t},k:q,l:V,m:Q,n:function(){var t=Q();return n.extraStackTrace&&(t+="\n"+n.extraStackTrace()),q(t)},o:24032,p:24016},p),K=(n.___uremdi3=J.___uremdi3,n._bitshift64Lshr=J._bitshift64Lshr,n._bitshift64Shl=J._bitshift64Shl,n._calloc=J._calloc,n._cellAreaKm2=J._cellAreaKm2,n._cellAreaM2=J._cellAreaM2,n._cellAreaRads2=J._cellAreaRads2,n._compact=J._compact,n._destroyLinkedPolygon=J._destroyLinkedPolygon,n._edgeLengthKm=J._edgeLengthKm,n._edgeLengthM=J._edgeLengthM,n._emscripten_replace_memory=J._emscripten_replace_memory),$=(n._exactEdgeLengthKm=J._exactEdgeLengthKm,n._exactEdgeLengthM=J._exactEdgeLengthM,n._exactEdgeLengthRads=J._exactEdgeLengthRads,n._experimentalH3ToLocalIj=J._experimentalH3ToLocalIj,n._experimentalLocalIjToH3=J._experimentalLocalIjToH3,n._free=J._free,n._geoToH3=J._geoToH3,n._getDestinationH3IndexFromUnidirectionalEdge=J._getDestinationH3IndexFromUnidirectionalEdge,n._getH3IndexesFromUnidirectionalEdge=J._getH3IndexesFromUnidirectionalEdge,n._getH3UnidirectionalEdge=J._getH3UnidirectionalEdge,n._getH3UnidirectionalEdgeBoundary=J._getH3UnidirectionalEdgeBoundary,n._getH3UnidirectionalEdgesFromHexagon=J._getH3UnidirectionalEdgesFromHexagon,n._getOriginH3IndexFromUnidirectionalEdge=J._getOriginH3IndexFromUnidirectionalEdge,n._getPentagonIndexes=J._getPentagonIndexes,n._getRes0Indexes=J._getRes0Indexes,n._h3Distance=J._h3Distance,n._h3GetBaseCell=J._h3GetBaseCell,n._h3GetFaces=J._h3GetFaces,n._h3GetResolution=J._h3GetResolution,n._h3IndexesAreNeighbors=J._h3IndexesAreNeighbors,n._h3IsPentagon=J._h3IsPentagon,n._h3IsResClassIII=J._h3IsResClassIII,n._h3IsValid=J._h3IsValid,n._h3Line=J._h3Line,n._h3LineSize=J._h3LineSize,n._h3SetToLinkedGeo=J._h3SetToLinkedGeo,n._h3ToCenterChild=J._h3ToCenterChild,n._h3ToChildren=J._h3ToChildren,n._h3ToGeo=J._h3ToGeo,n._h3ToGeoBoundary=J._h3ToGeoBoundary,n._h3ToParent=J._h3ToParent,n._h3UnidirectionalEdgeIsValid=J._h3UnidirectionalEdgeIsValid,n._hexAreaKm2=J._hexAreaKm2,n._hexAreaM2=J._hexAreaM2,n._hexRing=J._hexRing,n._i64Subtract=J._i64Subtract,n._kRing=J._kRing,n._kRingDistances=J._kRingDistances,n._llvm_minnum_f64=J._llvm_minnum_f64,n._llvm_round_f64=J._llvm_round_f64,n._malloc=J._malloc,n._maxFaceCount=J._maxFaceCount,n._maxH3ToChildrenSize=J._maxH3ToChildrenSize,n._maxKringSize=J._maxKringSize,n._maxPolyfillSize=J._maxPolyfillSize,n._maxUncompactSize=J._maxUncompactSize,n._memcpy=J._memcpy,n._memset=J._memset,n._numHexagons=J._numHexagons,n._pentagonIndexCount=J._pentagonIndexCount,n._pointDistKm=J._pointDistKm,n._pointDistM=J._pointDistM,n._pointDistRads=J._pointDistRads,n._polyfill=J._polyfill,n._res0IndexCount=J._res0IndexCount,n._round=J._round,n._sbrk=J._sbrk,n._sizeOfCoordIJ=J._sizeOfCoordIJ,n._sizeOfGeoBoundary=J._sizeOfGeoBoundary,n._sizeOfGeoCoord=J._sizeOfGeoCoord,n._sizeOfGeoPolygon=J._sizeOfGeoPolygon,n._sizeOfGeofence=J._sizeOfGeofence,n._sizeOfH3Index=J._sizeOfH3Index,n._sizeOfLinkedGeoPolygon=J._sizeOfLinkedGeoPolygon,n._uncompact=J._uncompact,n.establishStackSpace=J.establishStackSpace,n.stackAlloc=J.stackAlloc),tt=n.stackRestore=J.stackRestore,et=n.stackSave=J.stackSave;if(n.asm=J,n.cwrap=function(t,e,n,r){var i=(n=n||[]).every((function(t){return"number"===t}));return"string"!==e&&i&&!r?f(t):function(){return h(t,e,n,arguments)}},n.setValue=function(t,e,n,r){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":d[t>>0]=e;break;case"i16":y[t>>1]=e;break;case"i32":v[t>>2]=e;break;case"i64":B=[e>>>0,(j=e,+N(j)>=1?j>0?(0|T(+D(j/4294967296),4294967295))>>>0:~~+R((j-+(~~j>>>0))/4294967296)>>>0:0)],v[t>>2]=B[0],v[t+4>>2]=B[1];break;case"float":m[t>>2]=e;break;case"double":_[t>>3]=e;break;default:st("invalid type for setValue: "+n)}},n.getValue=function(t,e,n){switch("*"===(e=e||"i8").charAt(e.length-1)&&(e="i32"),e){case"i1":case"i8":return d[t>>0];case"i16":return y[t>>1];case"i32":case"i64":return v[t>>2];case"float":return m[t>>2];case"double":return _[t>>3];default:st("invalid type for getValue: "+e)}return null},n.getTempRet0=c,G){z(G)||(W=G,G=n.locateFile?n.locateFile(W,A):A+W),L++,n.monitorRunDependencies&&n.monitorRunDependencies(L);var nt=function(t){t.byteLength&&(t=new Uint8Array(t)),g.set(t,8),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,function(t){if(L--,n.monitorRunDependencies&&n.monitorRunDependencies(L),0==L&&(null!==k&&(clearInterval(k),k=null),F)){var e=F;F=null,e()}}()},rt=function(){i(G,nt,(function(){throw"could not load memory initializer "+G}))},it=X(G);if(it)nt(it.buffer);else if(n.memoryInitializerRequest){var ot=function(){var t=n.memoryInitializerRequest,e=t.response;if(200!==t.status&&0!==t.status){var r=X(n.memoryInitializerRequestURL);if(!r)return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+t.status+", retrying "+G),void rt();e=r.buffer}nt(e)};n.memoryInitializerRequest.response?setTimeout(ot,0):n.memoryInitializerRequest.addEventListener("load",ot)}else rt()}function At(t){function e(){Z||(Z=!0,l||(I(C),I(P),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)t=n.postRun.shift(),O.unshift(t);var t;I(O)}()))}t=t||o,L>0||(function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)t=n.preRun.shift(),M.unshift(t);var t;I(M)}(),L>0||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),e()}),1)):e()))}function st(t){throw n.onAbort&&n.onAbort(t),s(t+=""),a(t),l=!0,"abort("+t+"). Build with -s ASSERTIONS=1 for more info."}if(F=function t(){Z||At(),Z||(F=t)},n.run=At,n.abort=st,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return At(),t}("object"==typeof r?r:{}),i="number",o={};[["sizeOfH3Index",i],["sizeOfGeoCoord",i],["sizeOfGeoBoundary",i],["sizeOfGeoPolygon",i],["sizeOfGeofence",i],["sizeOfLinkedGeoPolygon",i],["sizeOfCoordIJ",i],["h3IsValid",i,[i,i]],["geoToH3",i,[i,i,i]],["h3ToGeo",null,[i,i,i]],["h3ToGeoBoundary",null,[i,i,i]],["maxKringSize",i,[i]],["kRing",null,[i,i,i,i]],["kRingDistances",null,[i,i,i,i,i]],["hexRing",null,[i,i,i,i]],["maxPolyfillSize",i,[i,i]],["polyfill",null,[i,i,i]],["h3SetToLinkedGeo",null,[i,i,i]],["destroyLinkedPolygon",null,[i]],["compact",i,[i,i,i]],["uncompact",i,[i,i,i,i,i]],["maxUncompactSize",i,[i,i,i]],["h3IsPentagon",i,[i,i]],["h3IsResClassIII",i,[i,i]],["h3GetBaseCell",i,[i,i]],["h3GetResolution",i,[i,i]],["maxFaceCount",i,[i,i]],["h3GetFaces",null,[i,i,i]],["h3ToParent",i,[i,i,i]],["h3ToChildren",null,[i,i,i,i]],["h3ToCenterChild",i,[i,i,i]],["maxH3ToChildrenSize",i,[i,i,i]],["h3IndexesAreNeighbors",i,[i,i,i,i]],["getH3UnidirectionalEdge",i,[i,i,i,i]],["getOriginH3IndexFromUnidirectionalEdge",i,[i,i]],["getDestinationH3IndexFromUnidirectionalEdge",i,[i,i]],["h3UnidirectionalEdgeIsValid",i,[i,i]],["getH3IndexesFromUnidirectionalEdge",null,[i,i,i]],["getH3UnidirectionalEdgesFromHexagon",null,[i,i,i]],["getH3UnidirectionalEdgeBoundary",null,[i,i,i]],["h3Distance",i,[i,i,i,i]],["h3Line",i,[i,i,i,i,i]],["h3LineSize",i,[i,i,i,i]],["experimentalH3ToLocalIj",i,[i,i,i,i,i]],["experimentalLocalIjToH3",i,[i,i,i,i]],["hexAreaM2",i,[i]],["hexAreaKm2",i,[i]],["edgeLengthM",i,[i]],["edgeLengthKm",i,[i]],["pointDistM",i,[i,i]],["pointDistKm",i,[i,i]],["pointDistRads",i,[i,i]],["cellAreaM2",i,[i,i]],["cellAreaKm2",i,[i,i]],["cellAreaRads2",i,[i,i]],["exactEdgeLengthM",i,[i,i]],["exactEdgeLengthKm",i,[i,i]],["exactEdgeLengthRads",i,[i,i]],["numHexagons",i,[i]],["getRes0Indexes",null,[i]],["res0IndexCount",i],["getPentagonIndexes",null,[i,i]],["pentagonIndexCount",i]].forEach((function(t){o[t[0]]=r.cwrap.apply(r,t)}));var A=16,s=o.sizeOfH3Index(),a=o.sizeOfGeoCoord(),u=o.sizeOfGeoBoundary(),c=o.sizeOfGeoPolygon(),l=o.sizeOfGeofence(),f=o.sizeOfLinkedGeoPolygon(),h=o.sizeOfCoordIJ(),p={m:"m",m2:"m2",km:"km",km2:"km2",rads:"rads",rads2:"rads2"};function d(t){if("number"!=typeof t||t<0||t>15||Math.floor(t)!==t)throw new Error("Invalid resolution: "+t)}var g=/[^0-9a-fA-F]/;function y(t){if(Array.isArray(t)&&2===t.length&&Number.isInteger(t[0])&&Number.isInteger(t[1]))return t;if("string"!=typeof t||g.test(t))return[0,0];var e=parseInt(t.substring(0,t.length-8),A);return[parseInt(t.substring(t.length-8),A),e]}function v(t){if(t>=0)return t.toString(A);var e=_(8,(t&=2147483647).toString(A));return(parseInt(e[0],A)+8).toString(A)+e.substring(1)}function m(t,e){return v(e)+_(8,v(t))}function _(t,e){for(var n=t-e.length,r="",i=0;i<n;i++)r+="0";return r+e}function b(t,e,n){for(var i=t.length,o=r._calloc(i,a),A=n?1:0,s=n?0:1,u=0;u<2*i;u+=2)r.HEAPF64.set([t[u/2][A],t[u/2][s]].map(vt),o/8+u);return r.HEAPU32.set([i,o],e/4),e}function w(t){return[t,r.getTempRet0()]}function E(t){var e=w(t),n=e[0],r=e[1];return r?m(n,r):null}function x(t,e){void 0===e&&(e=0);var n=r.getValue(t+4*e*2,"i32"),i=r.getValue(t+4*(2*e+1),"i32");return i?m(n,i):null}function S(t,e,n){r.HEAPU32.set(y(t),e/4+2*n)}function I(t,e){for(var n=[],r=0;r<e;r++){var i=x(t,r);null!==i&&n.push(i)}return n}function M(t,e){for(var n=e.length,r=0;r<n;r++)S(e[r],t,r)}function C(t,e){var n=r._calloc(1,a);return r.HEAPF64.set([t,e].map(vt),n/8),n}function P(t){return mt(r.getValue(t,"double"))}function O(t){return[P(t),P(t+8)]}function N(t){return[P(t+8),P(t)]}function R(t,e,n){for(var i=r.getValue(t,"i32"),o=t+8,A=[],s=e?N:O,a=0;a<2*i;a+=2)A.push(s(o+8*a));return n&&A.push(A[0]),A}function D(t){var e=y(t),n=e[0],r=e[1];return Boolean(o.h3IsValid(n,r))}function T(t){var e=y(t),n=e[0],r=e[1];return Boolean(o.h3IsPentagon(n,r))}function L(t){var e=y(t),n=e[0],r=e[1];return Boolean(o.h3IsResClassIII(n,r))}function k(t){var e=y(t),n=e[0],r=e[1];return o.h3GetBaseCell(n,r)}function F(t){var e=y(t),n=e[0],i=e[1],A=o.maxFaceCount(n,i),s=r._malloc(4*A);o.h3GetFaces(n,i,s);var a=function(t,e){for(var n=[],i=0;i<e;i++){var o=r.getValue(t+4*i,"i32");o>=0&&n.push(o)}return n}(s,A);return r._free(s),a}function j(t){var e=y(t),n=e[0],r=e[1];return o.h3IsValid(n,r)?o.h3GetResolution(n,r):-1}function B(t,e,n){var i=r._malloc(a);r.HEAPF64.set([t,e].map(vt),i/8);var A=E(o.geoToH3(i,n));return r._free(i),A}function G(t){var e=r._malloc(a),n=y(t),i=n[0],A=n[1];o.h3ToGeo(i,A,e);var s=O(e);return r._free(e),s}function U(t,e){var n=r._malloc(u),i=y(t),A=i[0],s=i[1];o.h3ToGeoBoundary(A,s,n);var a=R(n,e,e);return r._free(n),a}function z(t,e){var n=y(t),r=n[0],i=n[1];return E(o.h3ToParent(r,i,e))}function q(t,e){if(!D(t))return[];var n=y(t),i=n[0],A=n[1],a=o.maxH3ToChildrenSize(i,A,e),u=r._calloc(a,s);o.h3ToChildren(i,A,e,u);var c=I(u,a);return r._free(u),c}function Q(t,e){var n=y(t),r=n[0],i=n[1];return E(o.h3ToCenterChild(r,i,e))}function H(t,e){var n=y(t),i=n[0],A=n[1],a=o.maxKringSize(e),u=r._calloc(a,s);o.kRing(i,A,e,u);var c=I(u,a);return r._free(u),c}function V(t,e){var n=y(t),i=n[0],A=n[1],a=o.maxKringSize(e),u=r._calloc(a,s),c=r._calloc(a,4);o.kRingDistances(i,A,e,u,c);for(var l=[],f=0;f<e+1;f++)l.push([]);for(var h=0;h<2*a;h+=2){var p=r.getValue(u+4*h,"i32"),d=r.getValue(u+4*(h+1),"i32"),g=r.getValue(c+h/2*4,"i32");0===p&&0===d||l[g].push(m(p,d))}return r._free(u),r._free(c),l}function Y(t,e){var n=0===e?1:6*e,i=r._calloc(n,s);if(0!==o.hexRing.apply(o,y(t).concat([e],[i])))throw r._free(i),new Error("Failed to get hexRing (encountered a pentagon?)");var A=I(i,n);return r._free(i),A}function X(t,e,n){if(d(e),n=Boolean(n),0===t.length||0===t[0].length)return[];"number"==typeof t[0][0]&&(t=[t]);var i=function(t,e){var n,i=t.length-1,o=r._calloc(c),A=0+l,s=A+4;if(b(t[0],o+0,e),i>0){n=r._calloc(i,l);for(var a=0;a<i;a++)b(t[a+1],n+l*a,e)}return r.setValue(o+A,i,"i32"),r.setValue(o+s,n,"i32"),o}(t,n),A=o.maxPolyfillSize(i,e),a=r._calloc(A,s);o.polyfill(i,e,a);var u=I(a,A);return r._free(a),function(t){var e=0+l,n=e+4;r._free(r.getValue(t+0+4,"i8*"));var i=r.getValue(t+e,"i32");if(i>0){for(var o=r.getValue(t+n,"i32"),A=0;A<i;A++)r._free(r.getValue(o+l*A+4,"i8*"));r._free(o)}r._free(t)}(i),u}function W(t,e){if(!t||!t.length)return[];var n=t.length,i=r._calloc(n,s);M(i,t);var A=r._calloc(f),a=A;o.h3SetToLinkedGeo(i,n,A);var u=function(t,e){for(var n,i,o,A,s=[],a=e?N:O;t;){for(s.push(n=[]),i=r.getValue(t,"i8*");i;){for(n.push(o=[]),A=r.getValue(i,"i8*");A;)o.push(a(A)),A=r.getValue(A+16,"i8*");e&&o.push(o[0]),i=r.getValue(i+8,"i8*")}t=r.getValue(t+8,"i8*")}return s}(A,e);return o.destroyLinkedPolygon(a),r._free(a),r._free(i),u}function Z(t){if(!t||!t.length)return[];var e=t.length,n=r._calloc(e,s);M(n,t);var i=r._calloc(e,s);if(0!==o.compact(n,i,e))throw r._free(n),r._free(i),new Error("Failed to compact, malformed input data (duplicate hexagons?)");var A=I(i,e);return r._free(n),r._free(i),A}function J(t,e){if(d(e),!t||!t.length)return[];var n=t.length,i=r._calloc(n,s);M(i,t);var A=o.maxUncompactSize(i,n,e),a=r._calloc(A,s);if(0!==o.uncompact(i,n,a,A,e))throw r._free(i),r._free(a),new Error("Failed to uncompact (bad resolution?)");var u=I(a,A);return r._free(i),r._free(a),u}function K(t,e){var n=y(t),r=n[0],i=n[1],A=y(e),s=A[0],a=A[1];return Boolean(o.h3IndexesAreNeighbors(r,i,s,a))}function $(t,e){var n=y(t),r=n[0],i=n[1],A=y(e),s=A[0],a=A[1];return E(o.getH3UnidirectionalEdge(r,i,s,a))}function tt(t){var e=y(t),n=e[0],r=e[1];return E(o.getOriginH3IndexFromUnidirectionalEdge(n,r))}function et(t){var e=y(t),n=e[0],r=e[1];return E(o.getDestinationH3IndexFromUnidirectionalEdge(n,r))}function nt(t){var e=y(t),n=e[0],r=e[1];return Boolean(o.h3UnidirectionalEdgeIsValid(n,r))}function rt(t){var e=y(t),n=e[0],i=e[1],A=r._calloc(2,s);o.getH3IndexesFromUnidirectionalEdge(n,i,A);var a=I(A,2);return r._free(A),a}function it(t){var e=y(t),n=e[0],i=e[1],A=r._calloc(6,s);o.getH3UnidirectionalEdgesFromHexagon(n,i,A);var a=I(A,6);return r._free(A),a}function ot(t,e){var n=r._malloc(u),i=y(t),A=i[0],s=i[1];o.getH3UnidirectionalEdgeBoundary(A,s,n);var a=R(n,e);return r._free(n),a}function At(t,e){var n=y(t),r=n[0],i=n[1],A=y(e),s=A[0],a=A[1];return o.h3Distance(r,i,s,a)}function st(t,e){var n=y(t),i=n[0],A=n[1],a=y(e),u=a[0],c=a[1],l=o.h3LineSize(i,A,u,c);if(l<0)throw new Error("Line cannot be calculated");var f=r._calloc(l,s);o.h3Line(i,A,u,c,f);var h=I(f,l);return r._free(f),h}function at(t,e){var n,i=r._malloc(h),A=o.experimentalH3ToLocalIj.apply(o,y(t).concat(y(e),[i])),s=(n=i,{i:r.getValue(n,"i32"),j:r.getValue(n+4,"i32")});switch(r._free(i),A){case 0:return s;case 1:throw new Error("Incompatible origin and index.");case 2:default:throw new Error("Local IJ coordinates undefined for this origin and index pair. The index may be too far from the origin.");case 3:case 4:case 5:throw new Error("Encountered possible pentagon distortion")}}function ut(t,e){if(!e||"number"!=typeof e.i||"number"!=typeof e.j)throw new Error("Coordinates must be provided as an {i, j} object");var n,i,A,a,u=r._malloc(h),c=r._malloc(s);n=u,A=(i=e).i,a=i.j,r.setValue(n,A,"i32"),r.setValue(n+4,a,"i32");var l=o.experimentalLocalIjToH3.apply(o,y(t).concat([u],[c])),f=x(c);if(r._free(u),r._free(c),0!==l)throw new Error("Index not defined for this origin and IJ coordinates pair. IJ coordinates may be too far from origin, or a pentagon distortion was encountered.");return f}function ct(t,e,n){var i,A=C(t[0],t[1]),s=C(e[0],e[1]);switch(n){case p.m:i=o.pointDistM(A,s);break;case p.km:i=o.pointDistKm(A,s);break;case p.rads:i=o.pointDistRads(A,s);break;default:i=null}if(r._free(A),r._free(s),null===i)throw new Error("Unknown unit: "+n);return i}function lt(t,e){var n=y(t),r=n[0],i=n[1];switch(e){case p.m2:return o.cellAreaM2(r,i);case p.km2:return o.cellAreaKm2(r,i);case p.rads2:return o.cellAreaRads2(r,i);default:throw new Error("Unknown unit: "+e)}}function ft(t,e){var n=y(t),r=n[0],i=n[1];switch(e){case p.m:return o.exactEdgeLengthM(r,i);case p.km:return o.exactEdgeLengthKm(r,i);case p.rads:return o.exactEdgeLengthRads(r,i);default:throw new Error("Unknown unit: "+e)}}function ht(t,e){switch(d(t),e){case p.m2:return o.hexAreaM2(t);case p.km2:return o.hexAreaKm2(t);default:throw new Error("Unknown unit: "+e)}}function pt(t,e){switch(d(t),e){case p.m:return o.edgeLengthM(t);case p.km:return o.edgeLengthKm(t);default:throw new Error("Unknown unit: "+e)}}function dt(t){d(t);var e=w(o.numHexagons(t)),n=e[0],r=e[1];return r?r*Math.pow(2,32)+n:n}function gt(){var t=o.res0IndexCount(),e=r._malloc(s*t);o.getRes0Indexes(e);var n=I(e,t);return r._free(e),n}function yt(t){d(t);var e=o.pentagonIndexCount(),n=r._malloc(s*e);o.getPentagonIndexes(t,n);var i=I(n,e);return r._free(n),i}function vt(t){return t*Math.PI/180}function mt(t){return 180*t/Math.PI}},3096:(t,e,n)=>{var r="Expected a function",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,l=u||c||Function("return this")(),f=Object.prototype.toString,h=Math.max,p=Math.min,d=function(){return l.Date.now()};function g(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function y(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==f.call(t)}(t))return NaN;if(g(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=g(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var n=A.test(t);return n||s.test(t)?a(t.slice(2),n?2:8):o.test(t)?NaN:+t}t.exports=function(t,e,n){var i=!0,o=!0;if("function"!=typeof t)throw new TypeError(r);return g(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),function(t,e,n){var i,o,A,s,a,u,c=0,l=!1,f=!1,v=!0;if("function"!=typeof t)throw new TypeError(r);function m(e){var n=i,r=o;return i=o=void 0,c=e,s=t.apply(r,n)}function _(t){return c=t,a=setTimeout(w,e),l?m(t):s}function b(t){var n=t-u;return void 0===u||n>=e||n<0||f&&t-c>=A}function w(){var t=d();if(b(t))return E(t);a=setTimeout(w,function(t){var n=e-(t-u);return f?p(n,A-(t-c)):n}(t))}function E(t){return a=void 0,v&&i?m(t):(i=o=void 0,s)}function x(){var t=d(),n=b(t);if(i=arguments,o=this,u=t,n){if(void 0===a)return _(u);if(f)return a=setTimeout(w,e),m(u)}return void 0===a&&(a=setTimeout(w,e)),s}return e=y(e)||0,g(n)&&(l=!!n.leading,A=(f="maxWait"in n)?h(y(n.maxWait)||0,e):A,v="trailing"in n?!!n.trailing:v),x.cancel=function(){void 0!==a&&clearTimeout(a),c=0,i=u=o=a=void 0},x.flush=function(){return void 0===a?s:E(d())},x}(t,e,{leading:i,maxWait:e,trailing:o})}},7871:(t,e,n)=>{"use strict";function r(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}n.r(e),n.d(e,{Euler:()=>Ct,Matrix3:()=>K,Matrix4:()=>ot,Pose:()=>Pt,Quaternion:()=>wt,SphericalCoordinates:()=>St,Vector2:()=>F,Vector3:()=>U,Vector4:()=>q,_Euler:()=>Ct,_MathUtils:()=>Et,_Pose:()=>Pt,_SphericalCoordinates:()=>St,acos:()=>_,asin:()=>m,assert:()=>r,atan:()=>b,checkNumber:()=>C,clamp:()=>w,clone:()=>c,config:()=>A,configure:()=>s,cos:()=>y,degrees:()=>d,equals:()=>x,exactEquals:()=>S,formatValue:()=>a,isArray:()=>u,lerp:()=>E,radians:()=>p,sin:()=>g,tan:()=>v,toDegrees:()=>h,toRadians:()=>f,withEpsilon:()=>I});const i=1/Math.PI*180,o=1/180*Math.PI,A={};function s(t={}){for(const e in t)r(e in A),A[e]=t[e];return A}function a(t,{precision:e=A.precision||4}={}){return t=function(t){return Math.round(t/A.EPSILON)*A.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function u(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function c(t){return t.clone?t.clone():new Array(...t)}function l(t,e,n){if(u(t)){n=n||((r=t).clone?r.clone():new Array(r.length));for(let r=0;r<n.length&&r<t.length;++r)n[r]=e(t[r],r,n);return n}var r;return e(t)}function f(t){return p(t)}function h(t){return d(t)}function p(t,e){return l(t,(t=>t*o),e)}function d(t,e){return l(t,(t=>t*i),e)}function g(t){return l(t,(t=>Math.sin(t)))}function y(t){return l(t,(t=>Math.cos(t)))}function v(t){return l(t,(t=>Math.tan(t)))}function m(t){return l(t,(t=>Math.asin(t)))}function _(t){return l(t,(t=>Math.acos(t)))}function b(t){return l(t,(t=>Math.atan(t)))}function w(t,e,n){return l(t,(t=>Math.max(e,Math.min(n,t))))}function E(t,e,n){return u(t)?t.map(((t,r)=>E(t,e[r],n))):n*e+(1-n)*t}function x(t,e,n){const r=A.EPSILON;n&&(A.EPSILON=n);try{if(t===e)return!0;if(u(t)&&u(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!x(t[n],e[n]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):!(!Number.isFinite(t)||!Number.isFinite(e))&&Math.abs(t-e)<=A.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{A.EPSILON=r}}function S(t,e){if(t===e)return!0;if(t&&"object"==typeof t&&e&&"object"==typeof e){if(t.constructor!==e.constructor)return!1;if(t.exactEquals)return t.exactEquals(e)}if(u(t)&&u(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!S(t[n],e[n]))return!1;return!0}return!1}function I(t,e){const n=A.EPSILON;let r;A.EPSILON=t;try{r=e()}finally{A.EPSILON=n}return r}A.EPSILON=1e-12,A.debug=!1,A.precision=4,A.printTypes=!1,A.printDegrees=!1,A.printRowMajor=!0;class M extends(function(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){get ELEMENTS(){return r(!1),0}clone(){return(new this.constructor).copy(this)}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}fromArray(t,e=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}to(t){return t===this?this:u(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toArray(t=[],e=0){for(let n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(A)}formatString(t){let e="";for(let n=0;n<this.ELEMENTS;++n)e+=(n>0?", ":"")+a(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!x(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,n){void 0===n&&(n=e,e=t,t=this);for(let r=0;r<this.ELEMENTS;++r){const i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}add(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if(Array.isArray(t))return this.multiply(t);for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.scale(1/t)}clampScalar(t,e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}multiplyByScalar(t){return this.scale(t)}get elements(){return this}check(){if(A.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}}function C(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function P(t,e,n=""){if(A.debug&&!function(t,e){if(t.length!==e)return!1;for(let e=0;e<t.length;++e)if(!Number.isFinite(t[e]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}const O={};function N(t,e){O[t]||(O[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}class R extends M{get ELEMENTS(){return r(!1),0}copy(t){return r(!1),this}get x(){return this[0]}set x(t){this[0]=C(t)}get y(){return this[1]}set y(t){this[1]=C(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let n=0;n<this.ELEMENTS;++n){const r=this[n]-t[n];e+=r*r}return C(e)}dot(t){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return C(e)}normalize(){const t=this.magnitude();if(0!==t)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e[t];return this.check()}divide(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e[t];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return r(t>=0&&t<this.ELEMENTS,"index is out of range"),C(this[t])}setComponent(t,e){return r(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}}var D=n(1437);function T(t,e,n){const r=e[0],i=e[1],o=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/o,t[1]=(n[1]*r+n[5]*i)/o,t}function L(t,e,n){const r=e[0],i=e[1],o=e[2],A=n[3]*r+n[7]*i+n[11]*o||1;return t[0]=(n[0]*r+n[4]*i+n[8]*o)/A,t[1]=(n[1]*r+n[5]*i+n[9]*o)/A,t[2]=(n[2]*r+n[6]*i+n[10]*o)/A,t}function k(t,e,n){const r=e[0],i=e[1],o=e[2];return t[0]=n[0]*r+n[3]*i+n[6]*o,t[1]=n[1]*r+n[4]*i+n[7]*o,t[2]=n[2]*r+n[5]*i+n[8]*o,t[3]=e[3],t}class F extends R{constructor(t=0,e=0){super(2),u(t)&&1===arguments.length?this.copy(t):(A.debug&&(C(t),C(e)),this[0]=t,this[1]=e)}set(t,e){return this[0]=t,this[1]=e,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this.check()}fromObject(t){return A.debug&&(C(t.x),C(t.y)),this[0]=t.x,this[1]=t.y,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t}get ELEMENTS(){return 2}horizontalAngle(){return Math.atan2(this.y,this.x)}verticalAngle(){return Math.atan2(this.x,this.y)}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return D.fF(this,this,t),this.check()}transformAsVector(t){return T(this,this,t),this.check()}transformByMatrix3(t){return D.kK(this,this,t),this.check()}transformByMatrix2x3(t){return D.iu(this,this,t),this.check()}transformByMatrix2(t){return D.c(this,this,t),this.check()}}var j=n(7160);const B=[0,0,0],G={};class U extends R{static get ZERO(){return G.ZERO=G.ZERO||Object.freeze(new U(0,0,0,0))}constructor(t=0,e=0,n=0){super(-0,-0,-0),1===arguments.length&&u(t)?this.copy(t):(A.debug&&(C(t),C(e),C(n)),this[0]=t,this[1]=e,this[2]=n)}set(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return A.debug&&(C(t.x),C(t.y),C(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=C(t)}angle(t){return j.EU(this,t)}cross(t){return j.kC(this,this,t),this.check()}rotateX({radians:t,origin:e=B}){return j.lM(this,this,e,t),this.check()}rotateY({radians:t,origin:e=B}){return j.uD(this,this,e,t),this.check()}rotateZ({radians:t,origin:e=B}){return j.jI(this,this,e,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return j.fF(this,this,t),this.check()}transformAsVector(t){return L(this,this,t),this.check()}transformByMatrix3(t){return j.kK(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,n){const r=e[0],i=e[1];t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2]}(this,this,t),this.check()}transformByQuaternion(t){return j.VC(this,this,t),this.check()}}const z={};class q extends R{static get ZERO(){return z.ZERO=z.ZERO||Object.freeze(new q(0,0,0,0))}constructor(t=0,e=0,n=0,r=0){super(-0,-0,-0,-0),u(t)&&1===arguments.length?this.copy(t):(A.debug&&(C(t),C(e),C(n),C(r)),this[0]=t,this[1]=e,this[2]=n,this[3]=r)}set(t,e,n,r){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return A.debug&&(C(t.x),C(t.y),C(t.z),C(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=C(t)}get w(){return this[3]}set w(t){this[3]=C(t)}transform(t){return j.fF(this,this,t),this.check()}transformByMatrix3(t){return k(this,this,t),this.check()}transformByMatrix2(t){return function(t,e,n){const r=e[0],i=e[1];t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t[3]=e[3]}(this,this,t),this.check()}transformByQuaternion(t){return j.VC(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}class Q extends M{get ELEMENTS(){return r(!1),0}get RANK(){return r(!1),0}toString(){let t="[";if(A.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,n){return this[e*this.RANK+t]=C(n),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const n=t*this.RANK;for(let t=0;t<this.RANK;++t)e[t]=this[n+t];return e}setColumn(t,e){const n=t*this.RANK;for(let t=0;t<this.RANK;++t)this[n+t]=e[t];return this}}var H=n(9685);function V(t,e,n){var r=e[0],i=e[1],o=e[2],A=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],f=n[0],h=n[1],p=n[2],d=n[3],g=n[4],y=n[5],v=n[6],m=n[7],_=n[8];return t[0]=f*r+h*A+p*u,t[1]=f*i+h*s+p*c,t[2]=f*o+h*a+p*l,t[3]=d*r+g*A+y*u,t[4]=d*i+g*s+y*c,t[5]=d*o+g*a+y*l,t[6]=v*r+m*A+_*u,t[7]=v*i+m*s+_*c,t[8]=v*o+m*a+_*l,t}function Y(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}const X=Object.freeze([1,0,0,0,1,0,0,0,1]),W=Object.freeze([0,0,0,0,0,0,0,0,0]),Z=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),J={};class K extends Q{static get IDENTITY(){return J.IDENTITY=J.IDENTITY||Object.freeze(new K(X)),J.IDENTITY}static get ZERO(){return J.ZERO=J.ZERO||Object.freeze(new K(W)),J.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return Z}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}set(t,e,n,r,i,o,A,s,a){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=A,this[7]=s,this[8]=a,this.check()}setRowMajor(t,e,n,r,i,o,A,s,a){return this[0]=t,this[1]=r,this[2]=A,this[3]=e,this[4]=i,this[5]=s,this[6]=n,this[7]=o,this[8]=a,this.check()}determinant(){return e=(t=this)[0],n=t[1],r=t[2],i=t[3],o=t[4],A=t[5],s=t[6],a=t[7],e*((u=t[8])*o-A*a)+n*(-u*i+A*s)+r*(a*i-o*s);var t,e,n,r,i,o,A,s,a,u}identity(){return this.copy(X)}fromQuaternion(t){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],A=n+n,s=r+r,a=i+i,u=n*A,c=r*A,l=r*s,f=i*A,h=i*s,p=i*a,d=o*A,g=o*s,y=o*a;t[0]=1-l-p,t[3]=c-y,t[6]=f+g,t[1]=c+y,t[4]=1-u-p,t[7]=h-d,t[2]=f-g,t[5]=h+d,t[8]=1-u-l}(this,t),this.check()}transpose(){return function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){var t,e,n,r,i,o,A,s,a,u,c,l,f,h,p;return t=this,n=(e=this)[0],r=e[1],i=e[2],o=e[3],A=e[4],s=e[5],a=e[6],u=e[7],(p=n*(l=(c=e[8])*A-s*u)+r*(f=-c*o+s*a)+i*(h=u*o-A*a))&&(p=1/p,t[0]=l*p,t[1]=(-c*r+i*u)*p,t[2]=(s*r-i*A)*p,t[3]=f*p,t[4]=(c*n-i*a)*p,t[5]=(-s*n+i*o)*p,t[6]=h*p,t[7]=(-u*n+r*a)*p,t[8]=(A*n-r*o)*p),this.check()}multiplyLeft(t){return V(this,t,this),this.check()}multiplyRight(t){return V(this,this,t),this.check()}rotate(t){var e,n,r,i,o,A,s,a,u,c,l,f,h,p;return e=this,r=t,i=(n=this)[0],o=n[1],A=n[2],s=n[3],a=n[4],u=n[5],c=n[6],l=n[7],f=n[8],h=Math.sin(r),p=Math.cos(r),e[0]=p*i+h*s,e[1]=p*o+h*a,e[2]=p*A+h*u,e[3]=p*s-h*i,e[4]=p*a-h*o,e[5]=p*u-h*A,e[6]=c,e[7]=l,e[8]=f,this.check()}scale(t){return Array.isArray(t)?Y(this,this,t):Y(this,this,[t,t,t]),this.check()}translate(t){var e,n,r,i,o,A,s,a,u,c,l,f,h,p;return e=this,r=t,i=(n=this)[0],o=n[1],A=n[2],s=n[3],a=n[4],u=n[5],c=n[6],l=n[7],f=n[8],h=r[0],p=r[1],e[0]=i,e[1]=o,e[2]=A,e[3]=s,e[4]=a,e[5]=u,e[6]=h*i+p*s+c,e[7]=h*o+p*a+l,e[8]=h*A+p*u+f,this.check()}transform(t,e){switch(t.length){case 2:e=D.kK(e||[-0,-0],t,this);break;case 3:e=j.kK(e||[-0,-0,-0],t,this);break;case 4:e=k(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return P(e,t.length),e}transformVector(t,e){return N("Matrix3.transformVector"),this.transform(t,e)}transformVector2(t,e){return N("Matrix3.transformVector"),this.transform(t,e)}transformVector3(t,e){return N("Matrix3.transformVector"),this.transform(t,e)}}var $=n(5975),tt=n(8333);const et=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),nt=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),rt=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),it={};class ot extends Q{static get IDENTITY(){return it.IDENTITY=it.IDENTITY||Object.freeze(new ot(et)),it.IDENTITY}static get ZERO(){return it.ZERO=it.ZERO||Object.freeze(new ot(nt)),it.ZERO}get INDICES(){return rt}get ELEMENTS(){return 16}get RANK(){return 4}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,n,r,i,o,A,s,a,u,c,l,f,h,p,d){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=o,this[6]=A,this[7]=s,this[8]=a,this[9]=u,this[10]=c,this[11]=l,this[12]=f,this[13]=h,this[14]=p,this[15]=d,this.check()}setRowMajor(t,e,n,r,i,o,A,s,a,u,c,l,f,h,p,d){return this[0]=t,this[1]=i,this[2]=a,this[3]=f,this[4]=e,this[5]=o,this[6]=u,this[7]=h,this[8]=n,this[9]=A,this[10]=c,this[11]=p,this[12]=r,this[13]=s,this[14]=l,this[15]=d,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(et)}fromQuaternion(t){return $.en(this,t),this.check()}frustum({left:t,right:e,bottom:n,top:r,near:i,far:o}){return o===1/0?ot._computeInfinitePerspectiveOffCenter(this,t,e,n,r,i):$.oy(this,t,e,n,r,i,o),this.check()}static _computeInfinitePerspectiveOffCenter(t,e,n,r,i,o){const A=2*o/(n-e),s=2*o/(i-r),a=(n+e)/(n-e),u=(i+r)/(i-r),c=-2*o;return t[0]=A,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=a,t[9]=u,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=c,t[15]=0,t}lookAt(t,e,n){return 1===arguments.length&&({eye:t,center:e,up:n}=t),e=e||[0,0,0],n=n||[0,1,0],$.zB(this,t,e,n),this.check()}ortho({left:t,right:e,bottom:n,top:r,near:i=.1,far:o=500}){return $.M5(this,t,e,n,r,i,o),this.check()}orthographic({fovy:t=45*Math.PI/180,aspect:e=1,focalDistance:n=1,near:r=.1,far:i=500}){if(t>2*Math.PI)throw Error("radians");const o=t/2,A=n*Math.tan(o),s=A*e;return(new ot).ortho({left:-s,right:s,bottom:-A,top:A,near:r,far:i})}perspective({fovy:t,fov:e=45*Math.PI/180,aspect:n=1,near:r=.1,far:i=500}={}){if((t=t||e)>2*Math.PI)throw Error("radians");return $.G3(this,t,n,r,i),this.check()}determinant(){return $.GH(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=null){const n=this.getScale(e||[-0,-0,-0]),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*i,t[6]=this[6]*o,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*i,t[10]=this[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t=[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=null){const n=this.getScale(e||[-0,-0,-0]),r=1/n[0],i=1/n[1],o=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*o,t[3]=this[4]*r,t[4]=this[5]*i,t[5]=this[6]*o,t[6]=this[8]*r,t[7]=this[9]*i,t[8]=this[10]*o,t}transpose(){return $.p4(this,this),this.check()}invert(){return $.U_(this,this),this.check()}multiplyLeft(t){return $.Jp(this,t,this),this.check()}multiplyRight(t){return $.Jp(this,this,t),this.check()}rotateX(t){return $.lM(this,this,t),this.check()}rotateY(t){return $.uD(this,this,t),this.check()}rotateZ(t){return $.jI(this,this,t),this.check()}rotateXYZ([t,e,n]){return this.rotateX(t).rotateY(e).rotateZ(n)}rotateAxis(t,e){return $.U1(this,this,t,e),this.check()}scale(t){return Array.isArray(t)?$.bA(this,this,t):$.bA(this,this,[t,t,t]),this.check()}translate(t){return $.Iu(this,this,t),this.check()}transform(t,e){return 4===t.length?(P(e=tt.fF(e||[-0,-0,-0,-0],t,this),4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:n}=t;switch(n){case 2:e=D.fF(e||[-0,-0],t,this);break;case 3:e=j.fF(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return P(e,t.length),e}transformAsVector(t,e){switch(t.length){case 2:e=T(e||[-0,-0],t,this);break;case 3:e=L(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return P(e,t.length),e}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,n){return this.identity().translate([t,e,n])}transformPoint(t,e){return N("Matrix4.transformPoint","3.0"),this.transformAsPoint(t,e)}transformVector(t,e){return N("Matrix4.transformVector","3.0"),this.transformAsPoint(t,e)}transformDirection(t,e){return N("Matrix4.transformDirection","3.0"),this.transformAsVector(t,e)}}function At(){var t=new H.WT(4);return H.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function st(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function at(t,e,n){var r=e[0],i=e[1],o=e[2],A=e[3],s=n[0],a=n[1],u=n[2],c=n[3];return t[0]=r*c+A*s+i*u-o*a,t[1]=i*c+A*a+o*s-r*u,t[2]=o*c+A*u+r*a-i*s,t[3]=A*c-r*s-i*a-o*u,t}tt.d9,tt.al,tt.JG,tt.t8;var ut,ct,lt,ft,ht=tt.IH,pt=tt.bA,dt=tt.AK,gt=tt.t7,yt=tt.kE,vt=tt.we,mt=tt.Fv,_t=(tt.I6,tt.fS,ut=j.Ue(),ct=j.al(1,0,0),lt=j.al(0,1,0),function(t,e,n){var r=j.AK(e,n);return r<-.999999?(j.kC(ut,ct,e),j.Zh(ut)<1e-6&&j.kC(ut,lt,e),j.Fv(ut,ut),st(t,ut,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(j.kC(ut,e,n),t[0]=ut[0],t[1]=ut[1],t[2]=ut[2],t[3]=1+r,mt(t,t))});At(),At(),ft=new H.WT(9),H.WT!=Float32Array&&(ft[1]=0,ft[2]=0,ft[3]=0,ft[5]=0,ft[6]=0,ft[7]=0),ft[0]=1,ft[4]=1,ft[8]=1;const bt=[0,0,0,1];class wt extends M{constructor(t=0,e=0,n=0,r=1){super(-0,-0,-0,-0),Array.isArray(t)&&1===arguments.length?this.copy(t):this.set(t,e,n,r)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,e,n,r){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this.check()}fromMatrix3(t){return function(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,A=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*A+A]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+A]-e[3*A+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[A]=(e[3*A+i]+e[3*i+A])*n}}(this,t),this.check()}identity(){return function(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}fromAxisRotation(t,e){return st(this,t,e),this.check()}setAxisAngle(t,e){return this.fromAxisRotation(t,e)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=C(t)}get y(){return this[1]}set y(t){this[1]=C(t)}get z(){return this[2]}set z(t){this[2]=C(t)}get w(){return this[3]}set w(t){this[3]=C(t)}len(){return yt(this)}lengthSquared(){return vt(this)}dot(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return dt(this,t)}rotationTo(t,e){return _t(this,t,e),this.check()}add(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return ht(this,this,t),this.check()}calculateW(){return function(t,e){var n=e[0],r=e[1],i=e[2];t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i))}(this,this),this.check()}conjugate(){return function(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],A=n*n+r*r+i*i+o*o,s=A?1/A:0;t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s}(this,this),this.check()}lerp(t,e,n){return gt(this,t,e,n),this.check()}multiplyRight(t,e){return r(!e),at(this,this,t),this.check()}multiplyLeft(t,e){return r(!e),at(this,t,this),this.check()}normalize(){const t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}rotateX(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],A=e[3],s=Math.sin(n),a=Math.cos(n);t[0]=r*a+A*s,t[1]=i*a+o*s,t[2]=o*a-i*s,t[3]=A*a-r*s}(this,this,t),this.check()}rotateY(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],A=e[3],s=Math.sin(n),a=Math.cos(n);t[0]=r*a-o*s,t[1]=i*a+A*s,t[2]=o*a+r*s,t[3]=A*a-i*s}(this,this,t),this.check()}rotateZ(t){return function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],A=e[3],s=Math.sin(n),a=Math.cos(n);t[0]=r*a+i*s,t[1]=i*a-r*s,t[2]=o*a+A*s,t[3]=A*a-o*s}(this,this,t),this.check()}scale(t){return pt(this,this,t),this.check()}slerp(t,e,n){switch(arguments.length){case 1:({start:t=bt,target:e,ratio:n}=arguments[0]);break;case 2:[e,n]=arguments,t=this}return function(t,e,n,r){var i,o,A,s,a,u=e[0],c=e[1],l=e[2],f=e[3],h=n[0],p=n[1],d=n[2],g=n[3];(o=u*h+c*p+l*d+f*g)<0&&(o=-o,h=-h,p=-p,d=-d,g=-g),1-o>H.Ib?(i=Math.acos(o),A=Math.sin(i),s=Math.sin((1-r)*i)/A,a=Math.sin(r*i)/A):(s=1-r,a=r),t[0]=s*u+a*h,t[1]=s*c+a*p,t[2]=s*l+a*d,t[3]=s*f+a*g}(this,t,e,n),this.check()}transformVector4(t,e=t){return tt.VC(e,t,this),P(e,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,e){return this.setAxisAngle(t,e)}premultiply(t,e){return this.multiplyLeft(t,e)}multiply(t,e){return this.multiplyRight(t,e)}}const Et={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI},xt=1e-6;class St{constructor({phi:t=0,theta:e=0,radius:n=1,bearing:r,pitch:i,altitude:o,radiusScale:A=6371e3}={}){this.phi=t,this.theta=e,this.radius=n||o||1,this.radiusScale=A||1,void 0!==r&&(this.bearing=r),void 0!==i&&(this.pitch=i),this.check()}toString(){return this.formatString(A)}formatString({printTypes:t=!1}){const e=a;return"".concat(t?"Spherical":"","[rho:").concat(e(this.radius),",theta:").concat(e(this.theta),",phi:").concat(e(this.phi),"]")}equals(t){return x(this.radius,t.radius)&&x(this.theta,t.theta)&&x(this.phi,t.phi)}exactEquals(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}get bearing(){return 180-d(this.phi)}set bearing(t){this.phi=Math.PI-p(t)}get pitch(){return d(this.theta)}set pitch(t){this.theta=p(t)}get longitude(){return d(this.phi)}get latitude(){return d(this.theta)}get lng(){return d(this.phi)}get lat(){return d(this.theta)}get z(){return(this.radius-1)*this.radiusScale}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this.check()}clone(){return(new St).copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}fromLngLatZ([t,e,n]){this.radius=1+n/this.radiusScale,this.phi=p(e),this.theta=p(t)}fromVector3(t){return this.radius=j.kE(t),this.radius>0&&(this.theta=Math.atan2(t[0],t[1]),this.phi=Math.acos(w(t[2]/this.radius,-1,1))),this.check()}toVector3(){return new U(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}makeSafe(){return this.phi=Math.max(xt,Math.min(Math.PI-xt,this.phi)),this}check(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}}const It="Unknown Euler angle order",Mt=.99999;class Ct extends M{static get ZYX(){return 0}static get YXZ(){return 1}static get XZY(){return 2}static get ZXY(){return 3}static get YZX(){return 4}static get XYZ(){return 5}static get RollPitchYaw(){return 0}static get DefaultOrder(){return Ct.ZYX}static get RotationOrders(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}static rotationOrder(t){return Ct.RotationOrders[t]}get ELEMENTS(){return 4}constructor(t=0,e=0,n=0,r=Ct.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(t,e,n,r)}fromQuaternion(t){const[e,n,r,i]=t,o=n*n,A=-2*(o+r*r)+1,s=2*(e*n+i*r);let a=-2*(e*r-i*n);const u=2*(n*r+i*e),c=-2*(e*e+o)+1;a=a>1?1:a,a=a<-1?-1:a;const l=Math.atan2(u,c),f=Math.asin(a),h=Math.atan2(s,A);return new Ct(l,f,h,Ct.RollPitchYaw)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=Number.isFinite(t[3])||this.order,this.check()}set(t=0,e=0,n=0,r){return this[0]=t,this[1]=e,this[2]=n,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return(t=this[3])>=0&&t<6&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2]);var t}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}toArray4(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}toVector3(t=[-0,-0,-0]){return t[0]=this[0],t[1]=this[1],t[2]=this[2],t}get x(){return this[0]}set x(t){this[0]=C(t)}get y(){return this[1]}set y(t){this[1]=C(t)}get z(){return this[2]}set z(t){this[2]=C(t)}get alpha(){return this[0]}set alpha(t){this[0]=C(t)}get beta(){return this[1]}set beta(t){this[1]=C(t)}get gamma(){return this[2]}set gamma(t){this[2]=C(t)}get phi(){return this[0]}set phi(t){this[0]=C(t)}get theta(){return this[1]}set theta(t){this[1]=C(t)}get psi(){return this[2]}set psi(t){this[2]=C(t)}get roll(){return this[0]}set roll(t){this[0]=C(t)}get pitch(){return this[1]}set pitch(t){this[1]=C(t)}get yaw(){return this[2]}set yaw(t){this[2]=C(t)}get order(){return this[3]}set order(t){this[3]=function(t){if(t<0&&t>=6)throw new Error(It);return t}(t)}fromVector3(t,e){return this.set(t[0],t[1],t[2],Number.isFinite(e)?e:this[3])}fromArray(t,e=0){return this[0]=t[0+e],this[1]=t[1+e],this[2]=t[2+e],void 0!==t[3]&&(this[3]=t[3]),this.check()}fromRollPitchYaw(t,e,n){return this.set(t,e,n,Ct.ZYX)}fromRotationMatrix(t,e=Ct.DefaultOrder){return this._fromRotationMatrix(t,e),this.check()}getRotationMatrix(t){return this._getRotationMatrix(t)}getQuaternion(){const t=new wt;switch(this[3]){case Ct.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case Ct.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case Ct.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case Ct.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case Ct.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case Ct.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(It)}}_fromRotationMatrix(t,e=Ct.DefaultOrder){const n=t.elements,r=n[0],i=n[4],o=n[8],A=n[1],s=n[5],a=n[9],u=n[2],c=n[6],l=n[10];switch(e=e||this[3]){case Ct.XYZ:this[1]=Math.asin(w(o,-1,1)),Math.abs(o)<Mt?(this[0]=Math.atan2(-a,l),this[2]=Math.atan2(-i,r)):(this[0]=Math.atan2(c,s),this[2]=0);break;case Ct.YXZ:this[0]=Math.asin(-w(a,-1,1)),Math.abs(a)<Mt?(this[1]=Math.atan2(o,l),this[2]=Math.atan2(A,s)):(this[1]=Math.atan2(-u,r),this[2]=0);break;case Ct.ZXY:this[0]=Math.asin(w(c,-1,1)),Math.abs(c)<Mt?(this[1]=Math.atan2(-u,l),this[2]=Math.atan2(-i,s)):(this[1]=0,this[2]=Math.atan2(A,r));break;case Ct.ZYX:this[1]=Math.asin(-w(u,-1,1)),Math.abs(u)<Mt?(this[0]=Math.atan2(c,l),this[2]=Math.atan2(A,r)):(this[0]=0,this[2]=Math.atan2(-i,s));break;case Ct.YZX:this[2]=Math.asin(w(A,-1,1)),Math.abs(A)<Mt?(this[0]=Math.atan2(-a,s),this[1]=Math.atan2(-u,r)):(this[0]=0,this[1]=Math.atan2(o,l));break;case Ct.XZY:this[2]=Math.asin(-w(i,-1,1)),Math.abs(i)<Mt?(this[0]=Math.atan2(c,s),this[1]=Math.atan2(o,r)):(this[0]=Math.atan2(-a,l),this[1]=0);break;default:throw new Error(It)}return this[3]=e,this}_getRotationMatrix(t){const e=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=this.x,r=this.y,i=this.z,o=Math.cos(n),A=Math.cos(r),s=Math.cos(i),a=Math.sin(n),u=Math.sin(r),c=Math.sin(i);switch(this[3]){case Ct.XYZ:{const t=o*s,n=o*c,r=a*s,i=a*c;e[0]=A*s,e[4]=-A*c,e[8]=u,e[1]=n+r*u,e[5]=t-i*u,e[9]=-a*A,e[2]=i-t*u,e[6]=r+n*u,e[10]=o*A;break}case Ct.YXZ:{const t=A*s,n=A*c,r=u*s,i=u*c;e[0]=t+i*a,e[4]=r*a-n,e[8]=o*u,e[1]=o*c,e[5]=o*s,e[9]=-a,e[2]=n*a-r,e[6]=i+t*a,e[10]=o*A;break}case Ct.ZXY:{const t=A*s,n=A*c,r=u*s,i=u*c;e[0]=t-i*a,e[4]=-o*c,e[8]=r+n*a,e[1]=n+r*a,e[5]=o*s,e[9]=i-t*a,e[2]=-o*u,e[6]=a,e[10]=o*A;break}case Ct.ZYX:{const t=o*s,n=o*c,r=a*s,i=a*c;e[0]=A*s,e[4]=r*u-n,e[8]=t*u+i,e[1]=A*c,e[5]=i*u+t,e[9]=n*u-r,e[2]=-u,e[6]=a*A,e[10]=o*A;break}case Ct.YZX:{const t=o*A,n=o*u,r=a*A,i=a*u;e[0]=A*s,e[4]=i-t*c,e[8]=r*c+n,e[1]=c,e[5]=o*s,e[9]=-a*s,e[2]=-u*s,e[6]=n*c+r,e[10]=t-i*c;break}case Ct.XZY:{const t=o*A,n=o*u,r=a*A,i=a*u;e[0]=A*s,e[4]=-c,e[8]=u*s,e[1]=t*c+i,e[5]=o*s,e[9]=n*c-r,e[2]=r*c-n,e[6]=a*s,e[10]=i*c+t;break}default:throw new Error(It)}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}toQuaternion(){const t=Math.cos(.5*this.yaw),e=Math.sin(.5*this.yaw),n=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),i=Math.cos(.5*this.pitch),o=Math.sin(.5*this.pitch);return new wt(t*r*i-e*n*o,t*n*o+e*r*i,e*n*i-t*r*o,t*n*i+e*r*o)}}class Pt{constructor({x:t=0,y:e=0,z:n=0,roll:r=0,pitch:i=0,yaw:o=0,position:A,orientation:s}={}){Array.isArray(A)&&3===A.length?this.position=new U(A):this.position=new U(t,e,n),Array.isArray(s)&&4===s.length?this.orientation=new Ct(s,s[3]):this.orientation=new Ct(r,i,o,Ct.RollPitchYaw)}get x(){return this.position.x}set x(t){this.position.x=t}get y(){return this.position.y}set y(t){this.position.y=t}get z(){return this.position.z}set z(t){this.position.z=t}get roll(){return this.orientation.roll}set roll(t){this.orientation.roll=t}get pitch(){return this.orientation.pitch}set pitch(t){this.orientation.pitch=t}get yaw(){return this.orientation.yaw}set yaw(t){this.orientation.yaw=t}getPosition(){return this.position}getOrientation(){return this.orientation}equals(t){return!!t&&this.position.equals(t.position)&&this.orientation.equals(t.orientation)}exactEquals(t){return!!t&&this.position.exactEquals(t.position)&&this.orientation.exactEquals(t.orientation)}getTransformationMatrix(){const t=Math.sin(this.roll),e=Math.sin(this.pitch),n=Math.sin(this.yaw),r=Math.cos(this.roll),i=Math.cos(this.pitch),o=Math.cos(this.yaw);return(new ot).setRowMajor(o*i,-n*r+o*e*t,n*t+o*e*r,this.x,n*i,o*r+n*e*t,-o*t+n*e*r,this.y,-e,i*t,i*r,this.z,0,0,0,1)}getTransformationMatrixFromPose(t){return(new ot).multiplyRight(this.getTransformationMatrix()).multiplyRight(t.getTransformationMatrix().invert())}getTransformationMatrixToPose(t){return(new ot).multiplyRight(t.getTransformationMatrix()).multiplyRight(this.getTransformationMatrix().invert())}}const Ot="undefined"!=typeof self&&self,Nt="undefined"!=typeof window&&window;(void 0!==n.g&&n.g||Ot||Nt).mathgl={config:A}},2676:function(t){t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}var r=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function i(t,e){return t>e?1:t<e?-1:0}function o(t,e,n){for(var i=new r(null,null),o=i,A=i;;){var s=n(t,e.key);if(s<0){if(null===e.left)break;if(n(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,null===(e=a).left)break}A.left=e,A=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(a=e.right,e.right=a.left,a.left=e,null===(e=a).right))break;o.right=e,o=e,e=e.right}}return o.right=e.left,A.left=e.right,e.left=i.right,e.right=i.left,e}function A(t,e,n,i){var A=new r(t,e);if(null===n)return A.left=A.right=null,A;var s=i(t,(n=o(t,n,i)).key);return s<0?(A.left=n.left,A.right=n,n.left=null):s>=0&&(A.right=n.right,A.left=n,n.right=null),A}function s(t,e,n){var r=null,i=null;if(e){var A=n((e=o(t,e,n)).key,t);0===A?(r=e.left,i=e.right):A<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function a(t,e,n,r,i){if(t){r(e+(n?"└── ":"├── ")+i(t)+"\n");var o=e+(n?"    ":"│   ");t.left&&a(t.left,o,!1,r,i),t.right&&a(t.right,o,!0,r,i)}}var u=function(){function t(t){void 0===t&&(t=i),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=A(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new r(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,A=o(t,this._root,i),s=i(t,A.key);return 0===s?this._root=A:(s<0?(n.left=A.left,n.right=A,A.left=null):s>0&&(n.right=A.right,n.left=A,A.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=o(t,e,n)).key)?(null===e.left?r=e.right:(r=o(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=o(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=o(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,A=this._root;0!==i.length||A;)if(A)i.push(A),A=A.left;else{if(o((A=i.pop()).key,e)>0)break;if(o(A.key,t)>=0&&n.call(r,A))return this;A=A.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],i=!1,o=new r(null,null),A=o;!i;)e?(n.push(e),e=e.left):n.length>0?e=(e=A=A.next=n.pop()).right:i=!0;return A.next=null,o.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var i=t.length,o=this._comparator;if(n&&f(t,e,0,i-1,o),null===this._root)this._root=c(t,e,0,i),this._size=i;else{var A=function(t,e,n){for(var i=new r(null,null),o=i,A=t,s=e;null!==A&&null!==s;)n(A.key,s.key)<0?(o.next=A,A=A.next):(o.next=s,s=s.next),o=o.next;return null!==A?o.next=A:null!==s&&(o.next=s),i.next}(this.toList(),function(t,e){for(var n=new r(null,null),i=n,o=0;o<t.length;o++)i=i.next=new r(t[o],e[o]);return i.next=null,n.next}(t,e),o);i=this._size+i,this._root=l({head:A},0,i)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return a(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=s(t,this._root,r),a=i.left,u=i.right;r(t,e)<0?u=A(e,n,u,r):a=A(e,n,a,r),this._root=function(t,e,n){return null===e?t:(null===t||((e=o(t.key,e,n)).left=t),e)}(a,u,r)},t.prototype.split=function(t){return s(t,this._root,this._comparator)},t}();function c(t,e,n,i){var o=i-n;if(o>0){var A=n+Math.floor(o/2),s=t[A],a=e[A],u=new r(s,a);return u.left=c(t,e,n,A),u.right=c(t,e,A+1,i),u}return null}function l(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=l(t,e,i),A=t.head;return A.left=o,t.head=t.head.next,A.right=l(t,i+1,n),A}return null}function f(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],A=n-1,s=r+1;;){do{A++}while(i(t[A],o)<0);do{s--}while(i(t[s],o)>0);if(A>=s)break;var a=t[A];t[A]=t[s],t[s]=a,a=e[A],e[A]=e[s],e[s]=a}f(t,e,n,s,i),f(t,e,s+1,r,i)}}var h=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},p=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},d=Number.EPSILON;void 0===d&&(d=Math.pow(2,-52));var g=d*d,y=function(t,e){if(-d<t&&t<d&&-d<e&&e<d)return 0;var n=t-e;return n*n<g*t*e?0:t<e?-1:1},v=function(){function e(){t(this,e),this.reset()}return n(e,[{key:"reset",value:function(){this.xRounder=new m,this.yRounder=new m}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),m=function(){function e(){t(this,e),this.tree=new u,this.round(0)}return n(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===y(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===y(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),e}(),_=new v,b=function(t,e){return t.x*e.y-t.y*e.x},w=function(t,e){return t.x*e.x+t.y*e.y},E=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=b(r,i);return y(o,0)},x=function(t){return Math.sqrt(w(t,t))},S=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return w(i,r)/x(i)/x(r)},I=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},M=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},C=function(){function e(n,r){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return n(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return 0!==r?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:O.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i,o,A,s,a,u=r.otherSE;n.set(r,{sine:(i=e.point,o=t.point,A=u.point,s={x:o.x-i.x,y:o.y-i.y},a={x:A.x-i.x,y:A.y-i.y},b(a,s)/x(a)/x(s)),cosine:S(e.point,t.point,u.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,A=i.cosine,s=n.get(e),a=s.sine,u=s.cosine;return o>=0&&a>=0?A<u?1:A>u?-1:0:o<0&&a<0?A<u?-1:A>u?1:0:a<o?-1:a>o?1:0}}}]),e}(),P=0,O=function(){function e(n,r,i,o){t(this,e),this.id=++P,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return n(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var A=t.leftSE.point.y,s=e.leftSE.point.y,a=t.rightSE.point.y,u=e.rightSE.point.y;if(n<r){if(s<A&&s<a)return 1;if(s>A&&s>a)return-1;var c=t.comparePoint(e.leftSE.point);if(c<0)return 1;if(c>0)return-1;var l=e.comparePoint(t.rightSE.point);return 0!==l?l:-1}if(n>r){if(A<s&&A<u)return-1;if(A>s&&A>u)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var h=t.comparePoint(e.rightSE.point);return h<0?1:h>0?-1:1}if(A<s)return-1;if(A>s)return 1;if(i<o){var p=e.comparePoint(t.rightSE.point);if(0!==p)return p}if(i>o){var d=t.comparePoint(e.rightSE.point);if(d<0)return 1;if(d>0)return-1}if(i!==o){var g=a-A,y=i-n,v=u-s,m=o-r;if(g>y&&v<m)return 1;if(g<y&&v>m)return-1}return i>o?1:i<o||a<u?-1:a>u?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var A=(t.x-e.x)/r.x,s=e.y+A*r.y;return t.y===s?0:t.y<s?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=p(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,A=t.leftSE.point,s=t.rightSE.point,a=h(e,A)&&0===this.comparePoint(A),u=h(n,i)&&0===t.comparePoint(i),c=h(e,s)&&0===this.comparePoint(s),l=h(n,o)&&0===t.comparePoint(o);if(u&&a)return l&&!c?o:!l&&c?s:null;if(u)return c&&i.x===s.x&&i.y===s.y?null:i;if(a)return l&&o.x===A.x&&o.y===A.y?null:A;if(l&&c)return null;if(l)return o;if(c)return s;var f=function(t,e,n,r){if(0===e.x)return M(n,r,t.x);if(0===r.x)return M(t,e,n.x);if(0===e.y)return I(n,r,t.y);if(0===r.y)return I(t,e,n.y);var i=b(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},A=b(o,e)/i,s=b(o,r)/i;return{x:(t.x+s*e.x+(n.x+A*r.x))/2,y:(t.y+s*e.y+(n.y+A*r.y))/2}}(i,this.vector(),A,t.vector());return null===f?null:h(r,f)?_.round(f.x,f.y):null}},{key:"split",value:function(t){var n=[],r=void 0!==t.events,i=new C(t,!0),o=new C(t,!1),A=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var s=new e(i,A,this.rings.slice(),this.windings.slice());return C.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),C.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var A=n;n=r,r=A}for(var s=0,a=r.rings.length;s<a;s++){var u=r.rings[s],c=r.windings[s],l=n.rings.indexOf(u);-1===l?(n.rings.push(u),n.windings.push(c)):n.windings[l]+=c}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var A=this.rings[i],s=this.windings[i],a=e.indexOf(A);-1===a?(e.push(A),n.push(s)):n[a]+=s}for(var u=[],c=[],l=0,f=e.length;l<f;l++)if(0!==n[l]){var h=e[l],p=h.poly;if(-1===c.indexOf(p))if(h.isExterior)u.push(p);else{-1===c.indexOf(p)&&c.push(p);var d=u.indexOf(h.poly);-1!==d&&u.splice(d,1)}}for(var g=0,y=u.length;g<y;g++){var v=u[g].multiPoly;-1===r.indexOf(v)&&r.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(G.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===G.numMultiPolys&&i<o;break;case"xor":var A=Math.abs(t.length-e.length);this._isInResult=A%2==1;break;case"difference":var s=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=s(t)!==s(e);break;default:throw new Error("Unrecognized operation type found ".concat(G.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,A,s=C.comparePoints(t,n);if(s<0)i=t,o=n,A=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));i=n,o=t,A=-1}return new e(new C(i,!0),new C(o,!1),[r],[A])}}]),e}(),N=function(){function e(n,r,i){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!=typeof n[0][0]||"number"!=typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=_.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var A=o,s=1,a=n.length;s<a;s++){if("number"!=typeof n[s][0]||"number"!=typeof n[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=_.round(n[s][0],n[s][1]);u.x===A.x&&u.y===A.y||(this.segments.push(O.fromRing(A,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),A=u)}o.x===A.x&&o.y===A.y||this.segments.push(O.fromRing(A,o,this))}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),e}(),R=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new N(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var A=new N(n[i],this,!1);A.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=A.bbox.ll.x),A.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=A.bbox.ll.y),A.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=A.bbox.ur.x),A.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=A.bbox.ur.y),this.interiorRings.push(A)}this.multiPoly=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),D=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof n[0][0][0]&&(n=[n])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var A=new R(n[i],this);A.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=A.bbox.ll.x),A.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=A.bbox.ll.y),A.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=A.bbox.ur.x),A.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=A.bbox.ur.y),this.polys.push(A)}this.isSubject=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),T=function(){function e(n){t(this,e),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return n(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(o.isInResult()&&!o.ringOut){for(var A=null,s=o.leftSE,a=o.rightSE,u=[s],c=s.point,l=[];A=s,s=a,u.push(s),s.point!==c;)for(;;){var f=s.getAvailableLinkedEvents();if(0===f.length){var h=u[0].point,p=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(h.x,",")+" ".concat(h.y,"]. Last matching segment found ends at")+" [".concat(p.x,", ").concat(p.y,"]."))}if(1===f.length){a=f[0].otherSE;break}for(var d=null,g=0,y=l.length;g<y;g++)if(l[g].point===s.point){d=g;break}if(null===d){l.push({index:u.length,point:s.point});var v=s.getLeftmostComparator(A);a=f.sort(v)[0].otherSE;break}var m=l.splice(d)[0],_=u.splice(m.index);_.unshift(_[0].otherSE),n.push(new e(_.reverse()))}n.push(new e(u))}}return n}}]),n(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==E(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var A=e[0],s=e[1];0===E(A,t,s)&&e.shift(),e.push(e[0]);for(var a=this.isExteriorRing()?1:-1,u=this.isExteriorRing()?0:e.length-1,c=this.isExteriorRing()?e.length:-1,l=[],f=u;f!=c;f+=a)l.push([e[f].x,e[f].y]);return l}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];C.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),e}(),L=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),e}(),k=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return n(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new L(i));else{var o=i.enclosingRing();o.poly||e.push(new L(o)),o.poly.addInterior(i)}}return e}}]),e}(),F=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.compare;t(this,e),this.queue=n,this.tree=new u(r),this.segments=[]}return n(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,A=void 0,s=void 0;void 0===A;)null===(i=this.tree.prev(i))?A=null:void 0===i.key.consumedBy&&(A=i.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(t.isLeft){var a=null;if(A){var u=A.getIntersection(e);if(null!==u&&(e.isAnEndpoint(u)||(a=u),!A.isAnEndpoint(u)))for(var c=this._splitSafely(A,u),l=0,f=c.length;l<f;l++)n.push(c[l])}var h=null;if(s){var p=s.getIntersection(e);if(null!==p&&(e.isAnEndpoint(p)||(h=p),!s.isAnEndpoint(p)))for(var d=this._splitSafely(s,p),g=0,y=d.length;g<y;g++)n.push(d[g])}if(null!==a||null!==h){var v;v=null===a?h:null===h||C.comparePoints(a,h)<=0?a:h,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var m=e.split(v),_=0,b=m.length;_<b;_++)n.push(m[_])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=A)}else{if(A&&s){var w=A.getIntersection(s);if(null!==w){if(!A.isAnEndpoint(w))for(var E=this._splitSafely(A,w),x=0,S=E.length;x<S;x++)n.push(E[x]);if(!s.isAnEndpoint(w))for(var I=this._splitSafely(s,w),M=0,P=I.length;M<P;M++)n.push(I[M])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),e}(),j="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,B="undefined"!=typeof process&&process.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,G=new(function(){function e(){t(this,e)}return n(e,[{key:"run",value:function(t,e,n){G.type=t,_.reset();for(var r=[new D(e,!0)],i=0,o=n.length;i<o;i++)r.push(new D(n[i],!1));if(G.numMultiPolys=r.length,"difference"===G.type)for(var A=r[0],s=1;s<r.length;)null!==p(r[s].bbox,A.bbox)?s++:r.splice(s,1);if("intersection"===G.type)for(var a=0,c=r.length;a<c;a++)for(var l=r[a],f=a+1,h=r.length;f<h;f++)if(null===p(l.bbox,r[f].bbox))return[];for(var d=new u(C.compare),g=0,y=r.length;g<y;g++)for(var v=r[g].getSweepEvents(),m=0,b=v.length;m<b;m++)if(d.insert(v[m]),d.size>j)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var w=new F(d),E=d.size,x=d.pop();x;){var S=x.key;if(d.size===E){var I=S.segment;throw new Error("Unable to pop() ".concat(S.isLeft?"left":"right"," SweepEvent ")+"[".concat(S.point.x,", ").concat(S.point.y,"] from segment #").concat(I.id," ")+"[".concat(I.leftSE.point.x,", ").concat(I.leftSE.point.y,"] -> ")+"[".concat(I.rightSE.point.x,", ").concat(I.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>j)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(w.segments.length>B)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var M=w.process(S),P=0,O=M.length;P<O;P++){var N=M[P];void 0===N.consumedBy&&d.insert(N)}E=d.size,x=d.pop()}_.reset();var R=T.factory(w.segments);return new k(R).getGeom()}}]),e}());return{union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return G.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return G.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return G.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return G.run("difference",t,n)}}}()},2582:function(t){t.exports=function(){"use strict";function t(t,r,i,o,A){!function t(n,r,i,o,A){for(;o>i;){if(o-i>600){var s=o-i+1,a=r-i+1,u=Math.log(s),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(s-c)/s)*(a-s/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-a*c/s+l)),Math.min(o,Math.floor(r+(s-a)*c/s+l)),A)}var f=n[r],h=i,p=o;for(e(n,i,r),A(n[o],f)>0&&e(n,i,o);h<p;){for(e(n,h,p),h++,p--;A(n[h],f)<0;)h++;for(;A(n[p],f)>0;)p--}0===A(n[i],f)?e(n,i,p):e(n,++p,o),p<=r&&(i=p+1),r<=p&&(o=p-1)}}(t,r,i||0,o||t.length-1,A||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){A(t,0,t.children.length,e,t)}function A(t,e,n,r,i){i||(i=p(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var A=t.children[o];s(i,t.leaf?r(A):A)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function a(t,e){return t.minX-e.minX}function u(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function l(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function h(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(e,n,r,i,o){for(var A=[n,r];A.length;)if(!((r=A.pop())-(n=A.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,o),A.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!h(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var A=e.children[o],s=e.leaf?r(A):A;h(t,s)&&(e.leaf?n.push(A):f(t,s)?this._all(A,n):i.push(A))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!h(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(h(t,o)){if(e.leaf||f(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,A=this.data,s=this.toBBox(t),a=[],u=[];A||a.length;){if(A||(A=a.pop(),r=a[a.length-1],n=u.pop(),o=!0),A.leaf){var c=i(t,A.children,e);if(-1!==c)return A.children.splice(c,1),a.push(A),this._condense(a),this}o||A.leaf||!f(A,s)?r?(n++,A=r.children[n],o=!1):A=null:(a.push(A),u.push(n),n=0,r=A,A=A.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,A=n-e+1,s=this._maxEntries;if(A<=s)return o(i=p(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(A)/Math.log(s)),s=Math.ceil(A/Math.pow(s,r-1))),(i=p([])).leaf=!1,i.height=r;var a=Math.ceil(A/s),u=a*Math.ceil(Math.sqrt(s));d(t,e,n,u,this.compareMinX);for(var c=e;c<=n;c+=u){var l=Math.min(c+u-1,n);d(t,c,l,a,this.compareMinY);for(var f=c;f<=l;f+=a){var h=Math.min(f+a-1,l);i.children.push(this._build(t,f,h,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,A=void 0,s=0;s<e.children.length;s++){var a=e.children[s],u=c(a),l=(f=t,h=a,(Math.max(h.maxX,f.maxX)-Math.min(h.minX,f.minX))*(Math.max(h.maxY,f.maxY)-Math.min(h.minY,f.minY))-u);l<o?(o=l,i=u<i?u:i,A=a):l===o&&u<i&&(i=u,A=a)}e=A||e.children[0]}var f,h;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),s(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var A=this._chooseSplitIndex(n,i,r),s=p(n.children.splice(A,n.children.length-A));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,s,a,u,l,f=1/0,h=1/0,p=e;p<=n-e;p++){var d=A(t,0,p,this.toBBox),g=A(t,p,n,this.toBBox),y=(i=d,o=g,void 0,void 0,void 0,void 0,s=Math.max(i.minX,o.minX),a=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),l=Math.min(i.maxY,o.maxY),Math.max(0,u-s)*Math.max(0,l-a)),v=c(d)+c(g);y<f?(f=y,r=p,h=v<h?v:h):y===f&&v<h&&(h=v,r=p)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:a,i=t.leaf?this.compareMinY:u;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=A(t,0,e,i),a=A(t,n-e,n,i),u=l(o)+l(a),c=e;c<n-e;c++){var f=t.children[c];s(o,t.leaf?i(f):f),u+=l(o)}for(var h=n-e-1;h>=e;h--){var p=t.children[h];s(a,t.leaf?i(p):p),u+=l(a)}return u},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)s(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},2044:(t,e,n)=>{var r=n(3379),i=n(5107);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.id,i,""]]);r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},3379:(t,e,n)=>{"use strict";var r,i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function A(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function s(t,e){for(var n={},r=[],i=0;i<t.length;i++){var s=t[i],a=e.base?s[0]+e.base:s[0],u=n[a]||0,c="".concat(a," ").concat(u);n[a]=u+1;var l=A(c),f={css:s[1],media:s[2],sourceMap:s[3]};-1!==l?(o[l].references++,o[l].updater(f)):o.push({identifier:c,updater:d(f,e),references:1}),r.push(c)}return r}function a(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var A=i(t.insert||"head");if(!A)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");A.appendChild(e)}return e}var u,c=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function l(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=c(e,i);else{var o=document.createTextNode(i),A=t.childNodes;A[e]&&t.removeChild(A[e]),A.length?t.insertBefore(o,A[e]):t.appendChild(o)}}function f(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var h=null,p=0;function d(t,e){var n,r,i;if(e.singleton){var o=p++;n=h||(h=a(e)),r=l.bind(null,n,o,!1),i=l.bind(null,n,o,!0)}else n=a(e),r=f.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=A(n[r]);o[i].references--}for(var a=s(t,e),u=0;u<n.length;u++){var c=A(n[u]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=a}}}},675:function(t,e){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function A(t){return null===t?Tt:t.color}function s(t){return null===t?null:t.parent}function a(t,e){null!==t&&(t.color=e)}function u(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function l(){this.root_=null,this.size_=0}function f(){}function h(){this.array_=[],arguments[0]instanceof _t&&this.addAll(arguments[0])}function p(){}function d(t){this.message=t||""}function g(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var y=function(){};y.prototype.interfaces_=function(){return[]},y.prototype.getClass=function(){return y},y.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var v=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),m=function(){},_={MAX_VALUE:{configurable:!0}};m.isNaN=function(t){return Number.isNaN(t)},m.doubleToLongBits=function(t){return t},m.longBitsToDouble=function(t){return t},m.isInfinite=function(t){return!Number.isFinite(t)},_.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(m,_);var b=function(){},w=function(){},E=function(){},x=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},S={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};x.prototype.setOrdinate=function(t,e){switch(t){case x.X:this.x=e;break;case x.Y:this.y=e;break;case x.Z:this.z=e;break;default:throw new v("Invalid ordinate index: "+t)}},x.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!y.equalsWithTolerance(this.x,e.x,n)&&!!y.equalsWithTolerance(this.y,e.y,n)}},x.prototype.getOrdinate=function(t){switch(t){case x.X:return this.x;case x.Y:return this.y;case x.Z:return this.z}throw new v("Invalid ordinate index: "+t)},x.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||m.isNaN(this.z))&&m.isNaN(t.z)},x.prototype.equals=function(t){return t instanceof x&&this.equals2D(t)},x.prototype.equalInZ=function(t,e){return y.equalsWithTolerance(this.z,t.z,e)},x.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},x.prototype.clone=function(){},x.prototype.copy=function(){return new x(this)},x.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},x.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},x.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},x.prototype.hashCode=function(){var t=17;return 37*(t=37*t+x.hashCode(this.x))+x.hashCode(this.y)},x.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},x.prototype.interfaces_=function(){return[b,w,e]},x.prototype.getClass=function(){return x},x.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=m.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},S.DimensionalComparator.get=function(){return I},S.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},S.NULL_ORDINATE.get=function(){return m.NaN},S.X.get=function(){return 0},S.Y.get=function(){return 1},S.Z.get=function(){return 2},Object.defineProperties(x,S);var I=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new v("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};I.prototype.compare=function(t,e){var n=t,r=e,i=I.compare(n.x,r.x);if(0!==i)return i;var o=I.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:I.compare(n.z,r.z)},I.prototype.interfaces_=function(){return[E]},I.prototype.getClass=function(){return I},I.compare=function(t,e){return t<e?-1:t>e?1:m.isNaN(t)?m.isNaN(e)?0:-1:m.isNaN(e)?1:0};var M=function(){};M.prototype.create=function(){},M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M};var C=function(){},P={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};C.prototype.interfaces_=function(){return[]},C.prototype.getClass=function(){return C},C.toLocationSymbol=function(t){switch(t){case C.EXTERIOR:return"e";case C.BOUNDARY:return"b";case C.INTERIOR:return"i";case C.NONE:return"-"}throw new v("Unknown location value: "+t)},P.INTERIOR.get=function(){return 0},P.BOUNDARY.get=function(){return 1},P.EXTERIOR.get=function(){return 2},P.NONE.get=function(){return-1},Object.defineProperties(C,P);var O=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},N=function(){},R={LOG_10:{configurable:!0}};N.prototype.interfaces_=function(){return[]},N.prototype.getClass=function(){return N},N.log10=function(t){var e=Math.log(t);return m.isInfinite(e)||m.isNaN(e)?e:e/N.LOG_10},N.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},N.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},N.wrap=function(t,e){return t<0?e- -t%e:t%e},N.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],A=arguments[0];return r>A&&(A=r),i>A&&(A=i),o>A&&(A=o),A}},N.average=function(t,e){return(t+e)/2},R.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(N,R);var D=function(t){this.str=t};D.prototype.append=function(t){this.str+=t},D.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},D.prototype.toString=function(t){return this.str};var T=function(t){this.value=t};T.prototype.intValue=function(){return this.value},T.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},T.isNaN=function(t){return Number.isNaN(t)};var L=function(){};L.isWhitespace=function(t){return t<=32&&t>=0||127===t},L.toUpperCase=function(t){return t.toUpperCase()};var k=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},F={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};k.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},k.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=k.magnitude(n._hi),i=k.TEN.pow(r);(n=n.divide(i)).gt(k.TEN)?(n=n.divide(k.TEN),r+=1):n.lt(k.ONE)&&(n=n.multiply(k.TEN),r-=1);for(var o=r+1,A=new D,s=k.MAX_PRINT_DIGITS-1,a=0;a<=s;a++){t&&a===o&&A.append(".");var u=Math.trunc(n._hi);if(u<0)break;var c=!1,l=0;u>9?(c=!0,l="9"):l="0"+u,A.append(l),n=n.subtract(k.valueOf(u)).multiply(k.TEN),c&&n.selfAdd(k.TEN);var f=!0,h=k.magnitude(n._hi);if(h<0&&Math.abs(h)>=s-a&&(f=!1),!f)break}return e[0]=r,A.toString()},k.prototype.sqr=function(){return this.multiply(this)},k.prototype.doubleValue=function(){return this._hi+this._lo},k.prototype.subtract=function(){if(arguments[0]instanceof k){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},k.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},k.prototype.isZero=function(){return 0===this._hi&&0===this._lo},k.prototype.selfSubtract=function(){if(arguments[0]instanceof k){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},k.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},k.prototype.min=function(t){return this.le(t)?this:t},k.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,A=null,s=null,a=null,u=null,c=null,l=null;return a=this._hi/n,l=(i=(u=k.SPLIT*a)-(i=u-a))*(A=(l=k.SPLIT*n)-(A=l-n))-(c=a*n)+i*(s=n-A)+(o=a-i)*A+o*s,l=a+(u=(this._hi-c-l+this._lo-a*r)/n),this._hi=l,this._lo=a-l+u,this}},k.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},k.prototype.divide=function(){if(arguments[0]instanceof k){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,A=null,s=null,a=null;return n=(o=this._hi/t._hi)-(e=(A=k.SPLIT*o)-(e=A-o)),a=e*(r=(a=k.SPLIT*t._hi)-(r=a-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,A=(this._hi-s-a+this._lo-o*t._lo)/t._hi,new k(a=o+A,o-a+A)}if("number"==typeof arguments[0]){var u=arguments[0];return m.isNaN(u)?k.createNaN():k.copy(this).selfDivide(u,0)}},k.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},k.prototype.pow=function(t){if(0===t)return k.valueOf(1);var e=new k(this),n=k.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},k.prototype.ceil=function(){if(this.isNaN())return k.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new k(t,e)},k.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},k.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},k.prototype.setValue=function(){if(arguments[0]instanceof k){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},k.prototype.max=function(t){return this.ge(t)?this:t},k.prototype.sqrt=function(){if(this.isZero())return k.valueOf(0);if(this.isNegative())return k.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=k.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},k.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,A=null,s=null;return o=(i=this._hi+e)-(A=i-this._hi),r=(s=(o=e-A+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var a=arguments[0],u=arguments[1],c=null,l=null,f=null,h=null,p=null,d=null,g=null;h=this._hi+a,l=this._lo+u,p=h-(d=h-this._hi),f=l-(g=l-this._lo);var y=(c=h+(d=(p=a-d+(this._hi-p))+l))+(d=(f=u-g+(this._lo-f))+(d+(h-c))),v=d+(c-y);return this._hi=y,this._lo=v,this}},k.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,A=null,s=null,a=null,u=null;i=(a=k.SPLIT*this._hi)-this._hi,u=k.SPLIT*n,i=a-i,o=this._hi-i,A=u-n;var c=(a=this._hi*n)+(u=i*(A=u-A)-a+i*(s=n-A)+o*A+o*s+(this._hi*r+this._lo*n)),l=u+(i=a-c);return this._hi=c,this._lo=l,this}},k.prototype.selfSqr=function(){return this.selfMultiply(this)},k.prototype.floor=function(){if(this.isNaN())return k.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new k(t,e)},k.prototype.negate=function(){return this.isNaN()?this:new k(-this._hi,-this._lo)},k.prototype.clone=function(){},k.prototype.multiply=function(){if(arguments[0]instanceof k){var t=arguments[0];return t.isNaN()?k.createNaN():k.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return m.isNaN(e)?k.createNaN():k.copy(this).selfMultiply(e,0)}},k.prototype.isNaN=function(){return m.isNaN(this._hi)},k.prototype.intValue=function(){return Math.trunc(this._hi)},k.prototype.toString=function(){var t=k.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},k.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+k.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+k.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},k.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,A=null,s=null;t=(n=1/this._hi)-(i=(A=k.SPLIT*n)-(i=A-n)),o=(s=k.SPLIT*this._hi)-this._hi;var a=n+(A=(1-(r=n*this._hi)-(s=i*(o=s-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new k(a,n-a+A)},k.prototype.toSciNotation=function(){if(this.isZero())return k.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=k.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},k.prototype.abs=function(){return this.isNaN()?k.NaN:this.isNegative()?this.negate():new k(this)},k.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},k.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},k.prototype.add=function(){if(arguments[0]instanceof k){var t=arguments[0];return k.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return k.copy(this).selfAdd(e)}},k.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof k){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},k.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},k.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},k.prototype.trunc=function(){return this.isNaN()?k.NaN:this.isPositive()?this.floor():this.ceil()},k.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},k.prototype.interfaces_=function(){return[e,b,w]},k.prototype.getClass=function(){return k},k.sqr=function(t){return k.valueOf(t).selfMultiply(t)},k.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return k.parse(t)}if("number"==typeof arguments[0])return new k(arguments[0])},k.sqrt=function(t){return k.valueOf(t).sqrt()},k.parse=function(t){for(var e=0,n=t.length;L.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new k,A=0,s=0,a=0;!(e>=n);){var u=t.charAt(e);if(e++,L.isDigit(u)){var c=u-"0";o.selfMultiply(k.TEN),o.selfAdd(c),A++}else{if("."!==u){if("e"===u||"E"===u){var l=t.substring(e);try{a=T.parseInt(l)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+l+" in string "+t):e}break}throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t)}s=A}}var f=o,h=A-s-a;if(0===h)f=o;else if(h>0){var p=k.TEN.pow(h);f=o.divide(p)}else if(h<0){var d=k.TEN.pow(-h);f=o.multiply(d)}return r?f.negate():f},k.createNaN=function(){return new k(m.NaN,m.NaN)},k.copy=function(t){return new k(t)},k.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},k.stringOfChar=function(t,e){for(var n=new D,r=0;r<e;r++)n.append(t);return n.toString()},F.PI.get=function(){return new k(3.141592653589793,12246467991473532e-32)},F.TWO_PI.get=function(){return new k(6.283185307179586,24492935982947064e-32)},F.PI_2.get=function(){return new k(1.5707963267948966,6123233995736766e-32)},F.E.get=function(){return new k(2.718281828459045,14456468917292502e-32)},F.NaN.get=function(){return new k(m.NaN,m.NaN)},F.EPS.get=function(){return 123259516440783e-46},F.SPLIT.get=function(){return 134217729},F.MAX_PRINT_DIGITS.get=function(){return 32},F.TEN.get=function(){return k.valueOf(10)},F.ONE.get=function(){return k.valueOf(1)},F.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},F.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(k,F);var j=function(){},B={DP_SAFE_EPSILON:{configurable:!0}};j.prototype.interfaces_=function(){return[]},j.prototype.getClass=function(){return j},j.orientationIndex=function(t,e,n){var r=j.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=k.valueOf(e.x).selfAdd(-t.x),o=k.valueOf(e.y).selfAdd(-t.y),A=k.valueOf(n.x).selfAdd(-e.x),s=k.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(A)).signum()},j.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},j.intersection=function(t,e,n,r){var i=k.valueOf(r.y).selfSubtract(n.y).selfMultiply(k.valueOf(e.x).selfSubtract(t.x)),o=k.valueOf(r.x).selfSubtract(n.x).selfMultiply(k.valueOf(e.y).selfSubtract(t.y)),A=i.subtract(o),s=k.valueOf(r.x).selfSubtract(n.x).selfMultiply(k.valueOf(t.y).selfSubtract(n.y)),a=k.valueOf(r.y).selfSubtract(n.y).selfMultiply(k.valueOf(t.x).selfSubtract(n.x)),u=s.subtract(a).selfDivide(A).doubleValue(),c=k.valueOf(t.x).selfAdd(k.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),l=k.valueOf(e.x).selfSubtract(t.x).selfMultiply(k.valueOf(t.y).selfSubtract(n.y)),f=k.valueOf(e.y).selfSubtract(t.y).selfMultiply(k.valueOf(t.x).selfSubtract(n.x)),h=l.subtract(f).selfDivide(A).doubleValue(),p=k.valueOf(n.y).selfAdd(k.valueOf(r.y).selfSubtract(n.y).selfMultiply(h)).doubleValue();return new x(c,p)},j.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),A=i-o;if(i>0){if(o<=0)return j.signum(A);r=i+o}else{if(!(i<0))return j.signum(A);if(o>=0)return j.signum(A);r=-i-o}var s=j.DP_SAFE_EPSILON*r;return A>=s||-A>=s?j.signum(A):2},j.signum=function(t){return t>0?1:t<0?-1:0},B.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(j,B);var G=function(){},U={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};U.X.get=function(){return 0},U.Y.get=function(){return 1},U.Z.get=function(){return 2},U.M.get=function(){return 3},G.prototype.setOrdinate=function(t,e,n){},G.prototype.size=function(){},G.prototype.getOrdinate=function(t,e){},G.prototype.getCoordinate=function(){},G.prototype.getCoordinateCopy=function(t){},G.prototype.getDimension=function(){},G.prototype.getX=function(t){},G.prototype.clone=function(){},G.prototype.expandEnvelope=function(t){},G.prototype.copy=function(){},G.prototype.getY=function(t){},G.prototype.toCoordinateArray=function(){},G.prototype.interfaces_=function(){return[w]},G.prototype.getClass=function(){return G},Object.defineProperties(G,U);var z=function(){},q=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(z),Q=function(){};Q.arraycopy=function(t,e,n,r,i){for(var o=0,A=e;A<e+i;A++)n[r+o]=t[A],o++},Q.getProperty=function(t){return{"line.separator":"\n"}[t]};var H=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof x&&arguments[1]instanceof x){var A=arguments[0],s=arguments[1];this.x=A.y-s.y,this.y=s.x-A.x,this.w=A.x*s.y-s.x*A.y}}else if(3===arguments.length){var a=arguments[0],u=arguments[1],c=arguments[2];this.x=a,this.y=u,this.w=c}else if(4===arguments.length){var l=arguments[0],f=arguments[1],h=arguments[2],p=arguments[3],d=l.y-f.y,g=f.x-l.x,y=l.x*f.y-f.x*l.y,v=h.y-p.y,m=p.x-h.x,_=h.x*p.y-p.x*h.y;this.x=g*_-m*y,this.y=v*y-d*_,this.w=d*m-v*g}};H.prototype.getY=function(){var t=this.y/this.w;if(m.isNaN(t)||m.isInfinite(t))throw new q;return t},H.prototype.getX=function(){var t=this.x/this.w;if(m.isNaN(t)||m.isInfinite(t))throw new q;return t},H.prototype.getCoordinate=function(){var t=new x;return t.x=this.getX(),t.y=this.getY(),t},H.prototype.interfaces_=function(){return[]},H.prototype.getClass=function(){return H},H.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,A=t.x*e.y-e.x*t.y,s=n.y-r.y,a=r.x-n.x,u=n.x*r.y-r.x*n.y,c=i*a-s*o,l=(o*u-a*A)/c,f=(s*A-i*u)/c;if(m.isNaN(l)||m.isInfinite(l)||m.isNaN(f)||m.isInfinite(f))throw new q;return new x(l,f)};var V=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof x){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],A=arguments[1],s=arguments[2],a=arguments[3];this.init(o,A,s,a)}},Y={serialVersionUID:{configurable:!0}};V.prototype.getArea=function(){return this.getWidth()*this.getHeight()},V.prototype.equals=function(t){if(!(t instanceof V))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},V.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new V;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new V(e,r,n,i)},V.prototype.isNull=function(){return this._maxx<this._minx},V.prototype.getMaxX=function(){return this._maxx},V.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof x){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof V){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},V.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof V){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof x){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},V.prototype.getMinY=function(){return this._miny},V.prototype.getMinX=function(){return this._minx},V.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof x){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof V){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},V.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},V.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},V.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},V.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},V.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},V.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},V.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},V.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},V.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},V.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof V){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof x){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},V.prototype.centre=function(){return this.isNull()?null:new x((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},V.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof x){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof V){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],A=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),A<s?(this._miny=A,this._maxy=s):(this._miny=s,this._maxy=A)}},V.prototype.getMaxY=function(){return this._maxy},V.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},V.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+x.hashCode(this._minx))+x.hashCode(this._maxx))+x.hashCode(this._miny))+x.hashCode(this._maxy)},V.prototype.interfaces_=function(){return[b,e]},V.prototype.getClass=function(){return V},V.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],A=arguments[3],s=Math.min(o.x,A.x),a=Math.max(o.x,A.x),u=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(u>a||c<s||(s=Math.min(o.y,A.y),a=Math.max(o.y,A.y),u=Math.min(r.y,i.y),c=Math.max(r.y,i.y),u>a||c<s))}},Y.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(V,Y);var X={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},W=function(t){this.geometryFactory=t||new ye};W.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=X.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=X.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],J[n]&&(e=J[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},W.prototype.write=function(t){return this.extractGeometry(t)},W.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Z[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Z[e].apply(this,[t])+")"};var Z={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Z.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Z.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(Z.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Z.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+Z.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+Z.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},J={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(X.spaces);return this.geometryFactory.createPoint(new x(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(X.trimParens,"$1"),r.push(J.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(X.spaces),r.push(new x(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(X.spaces),r.push(new x(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(X.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(X.trimParens,"$1"),r.push(J.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(X.parenComma),A=[],s=0,a=o.length;s<a;++s)e=o[s].replace(X.trimParens,"$1"),n=J.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:A.push(r);return this.geometryFactory.createPolygon(i,A)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(X.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(X.trimParens,"$1"),r.push(J.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},K=function(t){this.parser=new W(t)};K.prototype.write=function(t){return this.parser.write(t)},K.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var $=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}($),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t;if(1===arguments.length)et.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new tt:new tt(t)},et.equals=function(){var t,e,n;if(2===arguments.length)et.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new x,this._intPt[1]=new x,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new D;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return K.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+K.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var A=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?A:s)||t.equals(e)||(o=Math.max(A,s))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new V(this._inputLines[0][0],this._inputLines[0][1]),n=new V(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,V.intersects(n,r,e)&&0===st.orientationIndex(n,r,e)&&0===st.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=H.intersection(t,n,r,i)}catch(A){if(!(A instanceof q))throw A;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new x(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=j.intersection(t,e,n,r),A=this.isInSegmentEnvelopes(o);Q.out.println("DD in env = "+A+"  --------------------- "+o),i.distance(o)>1e-4&&Q.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new x(t),o=new x(e),A=new x(n),s=new x(r),a=new x;this.normalizeToEnvCentre(i,o,A,s,a);var u=this.safeHCoordinateIntersection(i,o,A,s);return u.x+=a.x,u.y+=a.y,u},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=V.intersects(e,n,r),A=V.intersects(e,n,i),s=V.intersects(r,i,e),a=V.intersects(r,i,n);return o&&A?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&a?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||A||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||A||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):A&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):A&&a?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,A=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,a=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,l=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,h=((o>u?o:u)+(s<l?s:l))/2,p=((A>c?A:c)+(a<f?a:f))/2;i.x=h,i.y=p,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!V.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=st.orientationIndex(e,n,r),A=st.orientationIndex(e,n,i);if(o>0&&A>0||o<0&&A<0)return t.NO_INTERSECTION;var s=st.orientationIndex(r,i,e),a=st.orientationIndex(r,i,n);return s>0&&a>0||s<0&&a<0?t.NO_INTERSECTION:0===o&&0===A&&0===s&&0===a?this.computeCollinearIntersection(e,n,r,i):(0===o||0===A||0===s||0===a?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new x(r):0===A?this._intPt[0]=new x(i):0===s?this._intPt[0]=new x(e):0===a&&(this._intPt[0]=new x(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=st.distancePointLine(t,n,r),A=st.distancePointLine(e,n,r);return A<o&&(o=A,i=e),(A=st.distancePointLine(n,t,e))<o&&(o=A,i=n),(A=st.distancePointLine(r,t,e))<o&&(o=A,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,A=n.y-e.y;return ot.signOfDet2x2(r,i,o,A)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,A=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(A=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=A*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(A=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=A*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var At=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};At.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,A=e.x-this._p.x,s=e.y-this._p.y,a=ot.signOfDet2x2(i,o,A,s);if(0===a)return this._isPointOnSegment=!0,null;s<o&&(a=-a),a>0&&this._crossingCount++}},At.prototype.isPointInPolygon=function(){return this.getLocation()!==C.EXTERIOR},At.prototype.getLocation=function(){return this._isPointOnSegment?C.BOUNDARY:this._crossingCount%2==1?C.INTERIOR:C.EXTERIOR},At.prototype.isOnSegment=function(){return this._isPointOnSegment},At.prototype.interfaces_=function(){return[]},At.prototype.getClass=function(){return At},At.locatePointInRing=function(){if(arguments[0]instanceof x&&O(arguments[1],G)){for(var t=arguments[1],e=new At(arguments[0]),n=new x,r=new x,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof x&&arguments[1]instanceof Array){for(var o=arguments[1],A=new At(arguments[0]),s=1;s<o.length;s++){var a=o[s],u=o[s-1];if(A.countSegment(a,u),A.isOnSegment())return A.getLocation()}return A.getLocation()}};var st=function(){},at={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,n){return j.orientationIndex(t,e,n)},st.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(O(arguments[0],G)){var A=arguments[0],s=A.size();if(s<3)return 0;var a=new x,u=new x,c=new x;A.getCoordinate(0,u),A.getCoordinate(1,c);var l=u.x;c.x-=l;for(var f=0,h=1;h<s-1;h++)a.y=u.y,u.x=c.x,u.y=c.y,A.getCoordinate(h+1,c),c.x-=l,f+=u.x*(a.y-c.y);return f/2}},st.distanceLineLine=function(t,e,n,r){if(t.equals(e))return st.distancePointLine(t,n,r);if(n.equals(r))return st.distancePointLine(r,t,e);var i=!1;if(V.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var A=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,a=A/o;(a<0||a>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?N.min(st.distancePointLine(t,n,r),st.distancePointLine(e,n,r),st.distancePointLine(n,t,e),st.distancePointLine(r,t,e)):0},st.isPointInRing=function(t,e){return st.locatePointInRing(t,e)!==C.EXTERIOR},st.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new x;t.getCoordinate(0,r);for(var i=r.x,o=r.y,A=1;A<e;A++){t.getCoordinate(A,r);var s=r.x,a=r.y,u=s-i,c=a-o;n+=Math.sqrt(u*u+c*c),i=s,o=a}return n},st.isCCW=function(t){var e=t.length-1;if(e<3)throw new v("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var A=r;do{(A-=1)<0&&(A=e)}while(t[A].equals2D(n)&&A!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var a=t[A],u=t[s];if(a.equals2D(n)||u.equals2D(n)||a.equals2D(u))return!1;var c=st.computeOrientation(a,n,u);return 0===c?a.x>u.x:c>0},st.locatePointInRing=function(t,e){return At.locatePointInRing(t,e)},st.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},st.computeOrientation=function(t,e,n){return st.orientationIndex(t,e,n)},st.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new v("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=st.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],A=arguments[1],s=arguments[2];if(A.x===s.x&&A.y===s.y)return o.distance(A);var a=(s.x-A.x)*(s.x-A.x)+(s.y-A.y)*(s.y-A.y),u=((o.x-A.x)*(s.x-A.x)+(o.y-A.y)*(s.y-A.y))/a;if(u<=0)return o.distance(A);if(u>=1)return o.distance(s);var c=((A.y-o.y)*(s.x-A.x)-(A.x-o.x)*(s.y-A.y))/a;return Math.abs(c)*Math.sqrt(a)}},st.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},at.CLOCKWISE.get=function(){return-1},at.RIGHT.get=function(){return st.CLOCKWISE},at.COUNTERCLOCKWISE.get=function(){return 1},at.LEFT.get=function(){return st.COUNTERCLOCKWISE},at.COLLINEAR.get=function(){return 0},at.STRAIGHT.get=function(){return st.COLLINEAR},Object.defineProperties(st,at);var ut=function(){};ut.prototype.filter=function(t){},ut.prototype.interfaces_=function(){return[]},ut.prototype.getClass=function(){return ut};var ct=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},lt={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var n=e;return this.equalsExact(n)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new v("This method does not support GeometryCollection arguments")},ct.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new V(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),A=i.compareTo(o);if(0!==A)return A}return n.hasNext()?1:r.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[w,b,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},lt.serialVersionUID.get=function(){return 0x799ea46522854c00},lt.SORTINDEX_POINT.get=function(){return 0},lt.SORTINDEX_MULTIPOINT.get=function(){return 1},lt.SORTINDEX_LINESTRING.get=function(){return 2},lt.SORTINDEX_LINEARRING.get=function(){return 3},lt.SORTINDEX_MULTILINESTRING.get=function(){return 4},lt.SORTINDEX_POLYGON.get=function(){return 5},lt.SORTINDEX_MULTIPOLYGON.get=function(){return 6},lt.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},lt.geometryChangedFilter.get=function(){return ft},Object.defineProperties(ct,lt);var ft=function(){};ft.interfaces_=function(){return[ut]},ft.filter=function(t){t.geometryChangedAction()};var ht=function(){};ht.prototype.filter=function(t){},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht};var pt=function(){},dt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};pt.prototype.isInBoundary=function(t){},pt.prototype.interfaces_=function(){return[]},pt.prototype.getClass=function(){return pt},dt.Mod2BoundaryNodeRule.get=function(){return gt},dt.EndPointBoundaryNodeRule.get=function(){return yt},dt.MultiValentEndPointBoundaryNodeRule.get=function(){return vt},dt.MonoValentEndPointBoundaryNodeRule.get=function(){return mt},dt.MOD2_BOUNDARY_RULE.get=function(){return new gt},dt.ENDPOINT_BOUNDARY_RULE.get=function(){return new yt},dt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new vt},dt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},dt.OGC_SFS_BOUNDARY_RULE.get=function(){return pt.MOD2_BOUNDARY_RULE},Object.defineProperties(pt,dt);var gt=function(){};gt.prototype.isInBoundary=function(t){return t%2==1},gt.prototype.interfaces_=function(){return[pt]},gt.prototype.getClass=function(){return gt};var yt=function(){};yt.prototype.isInBoundary=function(t){return t>0},yt.prototype.interfaces_=function(){return[pt]},yt.prototype.getClass=function(){return yt};var vt=function(){};vt.prototype.isInBoundary=function(t){return t>1},vt.prototype.interfaces_=function(){return[pt]},vt.prototype.getClass=function(){return vt};var mt=function(){};mt.prototype.isInBoundary=function(t){return 1===t},mt.prototype.interfaces_=function(){return[pt]},mt.prototype.getClass=function(){return mt};var _t=function(){};_t.prototype.add=function(){},_t.prototype.addAll=function(){},_t.prototype.isEmpty=function(){},_t.prototype.iterator=function(){},_t.prototype.size=function(){},_t.prototype.toArray=function(){},_t.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var bt=function(){};bt.prototype.hasNext=function(){},bt.prototype.next=function(){},bt.prototype.remove=function(){};var wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(_t);(r.prototype=new Error).name="NoSuchElementException";var Et=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof _t&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,_t]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new xt(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wt),xt=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(bt),St=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof x&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],A=arguments[1];return this.add(o,A),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],a=arguments[1];if(arguments[2])for(var u=0;u<s.length;u++)this.add(s[u],a);else for(var c=s.length-1;c>=0;c--)this.add(s[c],a);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof x){var l=arguments[0],f=arguments[1];if(!arguments[2]){var h=this.size();if(h>0){if(l>0&&this.get(l-1).equals2D(f))return null;if(l<h&&this.get(l).equals2D(f))return null}}t.prototype.add.call(this,l,f)}}else if(4===arguments.length){var p=arguments[0],d=arguments[1],g=arguments[2],y=arguments[3],v=1;g>y&&(v=-1);for(var m=g;m!==y;m+=v)this.add(p[m],d);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new x(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Et),It=function(){},Mt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Mt.ForwardComparator.get=function(){return Ct},Mt.BidirectionalComparator.get=function(){return Pt},Mt.coordArrayType.get=function(){return new Array(0).fill(null)},It.prototype.interfaces_=function(){return[]},It.prototype.getClass=function(){return It},It.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},It.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(It.indexOf(r,e)<0)return r}return null},It.scroll=function(t,e){var n=It.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Q.arraycopy(t,n,r,0,t.length-n),Q.arraycopy(t,0,r,t.length-n,n),Q.arraycopy(r,0,t,0,t.length)},It.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var A=0;A<r.length;A++)if(0!==o.compare(r[A],i[A]))return!1;return!0}},It.intersection=function(t,e){for(var n=new St,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},It.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},It.removeRepeatedPoints=function(t){return It.hasRepeatedPoints(t)?new St(t,!1).toCoordinateArray():t},It.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},It.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},It.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new x(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],A=arguments[3],s=arguments[4],a=0;a<s;a++)o[A+a]=new x(r[i+a])},It.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},It.envelope=function(t){for(var e=new V,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},It.toCoordinateArray=function(t){return t.toArray(It.coordArrayType)},It.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},It.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},It.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},It.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},It.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},It.extract=function(t,e,n){e=N.clamp(e,0,t.length);var r=(n=N.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,A=e;A<=n;A++)i[o++]=t[A];return i},Object.defineProperties(It,Mt);var Ct=function(){};Ct.prototype.compare=function(t,e){return It.compare(t,e)},Ct.prototype.interfaces_=function(){return[E]},Ct.prototype.getClass=function(){return Ct};var Pt=function(){};Pt.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=It.compare(n,r);return It.isEqualReversed(n,r)?0:i},Pt.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=It.increasingDirection(n),o=It.increasingDirection(r),A=i>0?0:n.length-1,s=o>0?0:n.length-1,a=0;a<n.length;a++){var u=n[A].compareTo(r[s]);if(0!==u)return u;A+=i,s+=o}return 0},Pt.prototype.interfaces_=function(){return[E]},Pt.prototype.getClass=function(){return Pt};var Ot=function(){};Ot.prototype.get=function(){},Ot.prototype.put=function(){},Ot.prototype.size=function(){},Ot.prototype.values=function(){},Ot.prototype.entrySet=function(){};var Nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ot);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new _t).contains=function(){};var Rt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof _t&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Dt(this)},e}(o),Dt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(bt),Tt=0;(l.prototype=new Nt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},l.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Tt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var A={key:t,left:null,right:null,value:e,parent:n,color:Tt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=A:n.right=A,this.fixAfterInsertion(A),this.size_++,null},l.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(s(t)===u(s(s(t)))){var e=c(s(s(t)));1===A(e)?(a(s(t),Tt),a(e,Tt),a(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateLeft(t)),a(s(t),Tt),a(s(s(t)),1),this.rotateRight(s(s(t))))}else{var n=u(s(s(t)));1===A(n)?(a(s(t),Tt),a(n,Tt),a(s(s(t)),1),t=s(s(t))):(t===u(s(t))&&(t=s(t),this.rotateRight(t)),a(s(t),Tt),a(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=Tt},l.prototype.values=function(){var t=new Et,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=l.successor(e));)t.add(e.value);return t},l.prototype.entrySet=function(){var t=new Rt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=l.successor(e));)t.add(e);return t},l.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},l.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},l.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},l.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},l.prototype.size=function(){return this.size_};var Lt=function(){};Lt.prototype.interfaces_=function(){return[]},Lt.prototype.getClass=function(){return Lt},f.prototype=new o,(h.prototype=new f).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},h.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},h.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},h.prototype.remove=function(t){throw new i},h.prototype.size=function(){return this.array_.length},h.prototype.isEmpty=function(){return 0===this.array_.length},h.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},h.prototype.iterator=function(){return new kt(this)};var kt=function(t){this.treeSet_=t,this.position_=0};kt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},kt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},kt.prototype.remove=function(){throw new i};var Ft=function(){};Ft.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Ft.asList=function(t){for(var e=new Et,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var jt=function(){},Bt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Bt.P.get=function(){return 0},Bt.L.get=function(){return 1},Bt.A.get=function(){return 2},Bt.FALSE.get=function(){return-1},Bt.TRUE.get=function(){return-2},Bt.DONTCARE.get=function(){return-3},Bt.SYM_FALSE.get=function(){return"F"},Bt.SYM_TRUE.get=function(){return"T"},Bt.SYM_DONTCARE.get=function(){return"*"},Bt.SYM_P.get=function(){return"0"},Bt.SYM_L.get=function(){return"1"},Bt.SYM_A.get=function(){return"2"},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt},jt.toDimensionSymbol=function(t){switch(t){case jt.FALSE:return jt.SYM_FALSE;case jt.TRUE:return jt.SYM_TRUE;case jt.DONTCARE:return jt.SYM_DONTCARE;case jt.P:return jt.SYM_P;case jt.L:return jt.SYM_L;case jt.A:return jt.SYM_A}throw new v("Unknown dimension value: "+t)},jt.toDimensionValue=function(t){switch(L.toUpperCase(t)){case jt.SYM_FALSE:return jt.FALSE;case jt.SYM_TRUE:return jt.TRUE;case jt.SYM_DONTCARE:return jt.DONTCARE;case jt.SYM_P:return jt.P;case jt.SYM_L:return jt.L;case jt.SYM_A:return jt.A}throw new v("Unknown dimension symbol: "+t)},Object.defineProperties(jt,Bt);var Gt=function(){};Gt.prototype.filter=function(t){},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var Ut=function(){};Ut.prototype.filter=function(t,e){},Ut.prototype.isDone=function(){},Ut.prototype.isGeometryChanged=function(){},Ut.prototype.interfaces_=function(){return[]},Ut.prototype.getClass=function(){return Ut};var zt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new v("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new V,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Ft.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new h(Ft.asList(this._geometries)),n=new h(Ft.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),A=i.getNumGeometries(),s=0;s<o&&s<A;){var a=this.getGeometryN(s),u=i.getGeometryN(s),c=a.compareToSameClass(u,r);if(0!==c)return c;s++}return s<o?1:s<A?-1:0}},e.prototype.apply=function(){if(O(arguments[0],ht))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(O(arguments[0],Ut)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(O(arguments[0],Gt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(O(arguments[0],ut)){var A=arguments[0];A.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(A)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(ct),qt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Qt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Lt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(zt),Qt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=pt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Qt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Qt.prototype.getBoundary=function(){return this._geom instanceof Wt?this.boundaryLineString(this._geom):this._geom instanceof qt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Qt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Qt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Qt.prototype.computeBoundaryCoordinates=function(t){var e=new Et;this._endpointMap=new l;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),A=o.getValue().count;this._bnRule.isInBoundary(A)&&e.add(o.getKey())}return It.toCoordinateArray(e)},Qt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Ht,this._endpointMap.put(t,e)),e.count++},Qt.prototype.interfaces_=function(){return[]},Qt.prototype.getClass=function(){return Qt},Qt.getBoundary=function(){return 1===arguments.length?new Qt(arguments[0]).getBoundary():2===arguments.length?new Qt(arguments[0],arguments[1]).getBoundary():void 0};var Ht=function(){this.count=null};Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht};var Vt=function(){},Yt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt},Vt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Vt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",A=new function(){}(new function(){}(Vt.getStackTrace(r))),s=0;s<i;s++)try{o+=A.readLine()+Vt.NEWLINE}catch(t){if(!(t instanceof p))throw t;et.shouldNeverReachHere()}return o}},Vt.split=function(t,e){for(var n=e.length,r=new Et,i=""+t,o=i.indexOf(e);o>=0;){var A=i.substring(0,o);r.add(A),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),a=0;a<s.length;a++)s[a]=r.get(a);return s},Vt.toString=function(){if(1===arguments.length){var t=arguments[0];return Vt.SIMPLE_ORDINATE_FORMAT.format(t)}},Vt.spaces=function(t){return Vt.chars(" ",t)},Yt.NEWLINE.get=function(){return Q.getProperty("line.separator")},Yt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Vt,Yt);var Xt=function(){};Xt.prototype.interfaces_=function(){return[]},Xt.prototype.getClass=function(){return Xt},Xt.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Xt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,G.X)===t.getOrdinate(e-1,G.X)&&t.getOrdinate(0,G.Y)===t.getOrdinate(e-1,G.Y)},Xt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var A=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||m.isNaN(A)&&m.isNaN(s)))return!1}return!0},Xt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Xt.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Xt.copy(e,i-1,r,o,1);return r},Xt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Xt.swap(t,r,e-r)},Xt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Xt.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Xt.copyCoord(t,e+o,n,r+o)},Xt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new D;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Vt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Xt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Xt.createClosedRing(t,e,4):e.getOrdinate(0,G.X)===e.getOrdinate(n-1,G.X)&&e.getOrdinate(0,G.Y)===e.getOrdinate(n-1,G.Y)?e:Xt.createClosedRing(t,e,n+1)},Xt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Xt.copy(e,0,r,0,i);for(var o=i;o<n;o++)Xt.copy(e,0,r,o,1);return r};var Wt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new V:this._points.expandEnvelope(new V)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Xt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return st.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Xt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(O(arguments[0],ht))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(O(arguments[0],Ut)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(O(arguments[0],Gt)||O(arguments[0],ut))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Qt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new v("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Lt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(ct),Zt=function(){};Zt.prototype.interfaces_=function(){return[]},Zt.prototype.getClass=function(){return Zt};var Jt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new V;var t=new V;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(O(arguments[0],ht)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(O(arguments[0],Ut)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(O(arguments[0],Gt)||O(arguments[0],ut))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(ct),Kt=function(){};Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt};var $t=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new v("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new v("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),A=0;A<o.length;A++)t[++e]=o[A];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(st.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(st.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),A=t.getY(0),s=1;s<=4;s++){var a=t.getX(s),u=t.getY(s);if(a!==o==(u!==A))return!1;o=a,A=u}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var A=0;A<this._holes.length;A++)if(!this._holes[A].equalsExact(r._holes[A],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Ft.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);Q.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=It.minCoordinate(e.getCoordinates());It.scroll(r,i),Q.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],st.isCCW(e.getCoordinates())===n&&It.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,A=i._shell,s=o.compareToSameClass(A,r);if(0!==s)return s;for(var a=this.getNumInteriorRing(),u=i.getNumInteriorRing(),c=0;c<a&&c<u;){var l=this.getInteriorRingN(c),f=i.getInteriorRingN(c),h=l.compareToSameClass(f,r);if(0!==h)return h;c++}return c<a?1:c<u?-1:0}},e.prototype.apply=function(t){if(O(t,ht)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(O(t,Ut)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(O(t,Gt))t.filter(this);else if(O(t,ut)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(ct),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Zt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(zt),ee=function(t){function e(e,n){e instanceof x&&n instanceof ye&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Xt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new v("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new v("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Wt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Et,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Kt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(zt),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof zt?this.editGeometryCollection(t,e):t instanceof $t?this.editPolygon(t,e):t instanceof Jt||t instanceof Wt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Et,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===qt?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Et,o=0;o<n.getNumInteriorRing();o++){var A=this.edit(n.getInteriorRingN(o),e);null===A||A.isEmpty()||i.add(A)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return Ae},ie.CoordinateSequenceOperation.get=function(){return se},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var Ae=function(){};Ae.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Wt?e.createLineString(n):t instanceof Jt?n.length>0?e.createPoint(n[0]):e.createPoint():t},Ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},Ae.prototype.getClass=function(){return Ae};var se=function(){};se.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Wt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Jt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ae=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new x}else if(O(arguments[0],G)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var A=arguments[0],s=arguments[1];this._coordinates=new Array(A).fill(null),this._dimension=s;for(var a=0;a<A;a++)this._coordinates[a]=new x}},ue={serialVersionUID:{configurable:!0}};ae.prototype.setOrdinate=function(t,e,n){switch(e){case G.X:this._coordinates[t].x=n;break;case G.Y:this._coordinates[t].y=n;break;case G.Z:this._coordinates[t].z=n;break;default:throw new v("invalid ordinateIndex")}},ae.prototype.size=function(){return this._coordinates.length},ae.prototype.getOrdinate=function(t,e){switch(e){case G.X:return this._coordinates[t].x;case G.Y:return this._coordinates[t].y;case G.Z:return this._coordinates[t].z}return m.NaN},ae.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ae.prototype.getCoordinateCopy=function(t){return new x(this._coordinates[t])},ae.prototype.getDimension=function(){return this._dimension},ae.prototype.getX=function(t){return this._coordinates[t].x},ae.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ae(t,this._dimension)},ae.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ae.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ae(t,this._dimension)},ae.prototype.toString=function(){if(this._coordinates.length>0){var t=new D(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ae.prototype.getY=function(t){return this._coordinates[t].y},ae.prototype.toCoordinateArray=function(){return this._coordinates},ae.prototype.interfaces_=function(){return[G,e]},ae.prototype.getClass=function(){return ae},ue.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ae,ue);var ce=function(){},le={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ce.prototype.readResolve=function(){return ce.instance()},ce.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ae(arguments[0]);if(O(arguments[0],G))return new ae(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new ae(t):new ae(t,e)}},ce.prototype.interfaces_=function(){return[M,e]},ce.prototype.getClass=function(){return ce},ce.instance=function(){return ce.instanceObject},le.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},le.instanceObject.get=function(){return new ce},Object.defineProperties(ce,le);var fe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Et,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Rt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Ot),he=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof de){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},pe={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};he.prototype.equals=function(t){if(!(t instanceof he))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},he.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new T(n).compareTo(new T(r))},he.prototype.getScale=function(){return this._scale},he.prototype.isFloating=function(){return this._modelType===he.FLOATING||this._modelType===he.FLOATING_SINGLE},he.prototype.getType=function(){return this._modelType},he.prototype.toString=function(){var t="UNKNOWN";return this._modelType===he.FLOATING?t="Floating":this._modelType===he.FLOATING_SINGLE?t="Floating-Single":this._modelType===he.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},he.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return m.isNaN(t)||this._modelType===he.FLOATING_SINGLE?t:this._modelType===he.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof x){var e=arguments[0];if(this._modelType===he.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},he.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===he.FLOATING?t=16:this._modelType===he.FLOATING_SINGLE?t=6:this._modelType===he.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},he.prototype.setScale=function(t){this._scale=Math.abs(t)},he.prototype.interfaces_=function(){return[e,b]},he.prototype.getClass=function(){return he},he.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},pe.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},pe.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(he,pe);var de=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ge={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};de.prototype.readResolve=function(){return de.nameToTypeMap.get(this._name)},de.prototype.toString=function(){return this._name},de.prototype.interfaces_=function(){return[e]},de.prototype.getClass=function(){return de},ge.serialVersionUID.get=function(){return-552860263173159e4},ge.nameToTypeMap.get=function(){return new fe},Object.defineProperties(de,ge),he.Type=de,he.FIXED=new de("FIXED"),he.FLOATING=new de("FLOATING"),he.FLOATING_SINGLE=new de("FLOATING SINGLE");var ye=function t(){this._precisionModel=new he,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?O(arguments[0],M)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof he&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ve={serialVersionUID:{configurable:!0}};ye.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new x(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new x(t.getMinX(),t.getMinY()),new x(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new x(t.getMinX(),t.getMinY()),new x(t.getMinX(),t.getMaxY()),new x(t.getMaxX(),t.getMaxY()),new x(t.getMaxX(),t.getMinY()),new x(t.getMinX(),t.getMinY())]),null)},ye.prototype.createLineString=function(t){return t?t instanceof Array?new Wt(this.getCoordinateSequenceFactory().create(t),this):O(t,G)?new Wt(t,this):void 0:new Wt(this.getCoordinateSequenceFactory().create([]),this)},ye.prototype.createMultiLineString=function(){return 0===arguments.length?new qt(null,this):1===arguments.length?new qt(arguments[0],this):void 0},ye.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),A=o.getClass();null===e&&(e=A),A!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(ye.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof $t)return this.createMultiPolygon(ye.toPolygonArray(t));if(s instanceof Wt)return this.createMultiLineString(ye.toLineStringArray(t));if(s instanceof Jt)return this.createMultiPoint(ye.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},ye.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ye.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof x){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(O(arguments[0],G))return new Jt(arguments[0],this)}},ye.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ye.prototype.createPolygon=function(){if(0===arguments.length)return new $t(null,null,this);if(1===arguments.length){if(O(arguments[0],G)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new $t(arguments[0],arguments[1],this)},ye.prototype.getSRID=function(){return this._SRID},ye.prototype.createGeometryCollection=function(){return 0===arguments.length?new zt(null,this):1===arguments.length?new zt(arguments[0],this):void 0},ye.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},ye.prototype.getPrecisionModel=function(){return this._precisionModel},ye.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(O(arguments[0],G))return new ee(arguments[0],this)}},ye.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},ye.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(O(arguments[0],G)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());Xt.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},ye.prototype.interfaces_=function(){return[e]},ye.prototype.getClass=function(){return ye},ye.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.getDefaultCoordinateSequenceFactory=function(){return ce.instance()},ye.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ve.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ye,ve);var me=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],_e=function(t){this.geometryFactory=t||new ye};_e.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!be[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==me.indexOf(n)?be[n].apply(this,[e.coordinates]):"GeometryCollection"===n?be[n].apply(this,[e.geometries]):be[n].apply(this,[e])},_e.prototype.write=function(t){var e=t.getGeometryType();if(!we[e])throw new Error("Geometry is not supported");return we[e].apply(this,[t])};var be={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!be[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=be.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new x(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new x(t[0],t[1]),new x(t[2],t[1]),new x(t[2],t[3]),new x(t[0],t[3]),new x(t[0],t[1])])},Point:function(t){var e=new x(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(be.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=be.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(be.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=be.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],A=be.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(A);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(be.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},we={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:we.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(we.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=we.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=we.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(we[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Ee=function(t){this.geometryFactory=t||new ye,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new _e(this.geometryFactory)};Ee.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===he.FIXED&&this.reducePrecision(e),e},Ee.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var xe=function(){this.parser=new _e(this.geometryFactory)};xe.prototype.write=function(t){return this.parser.write(t)};var Se=function(){},Ie={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Se.prototype.interfaces_=function(){return[]},Se.prototype.getClass=function(){return Se},Se.opposite=function(t){return t===Se.LEFT?Se.RIGHT:t===Se.RIGHT?Se.LEFT:t},Ie.ON.get=function(){return 0},Ie.LEFT.get=function(){return 1},Ie.RIGHT.get=function(){return 2},Object.defineProperties(Se,Ie),(d.prototype=new Error).name="EmptyStackException",(g.prototype=new wt).add=function(t){return this.array_.push(t),!0},g.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},g.prototype.push=function(t){return this.array_.push(t),t},g.prototype.pop=function(t){if(0===this.array_.length)throw new d;return this.array_.pop()},g.prototype.peek=function(){if(0===this.array_.length)throw new d;return this.array_[this.array_.length-1]},g.prototype.empty=function(){return 0===this.array_.length},g.prototype.isEmpty=function(){return this.empty()},g.prototype.search=function(t){return this.array_.indexOf(t)},g.prototype.size=function(){return this.array_.length},g.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Me=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Me.prototype.getCoordinate=function(){return this._minCoord},Me.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Me.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=st.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===st.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===st.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Me.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Se.LEFT;return n[e].y<n[e+1].y&&(r=Se.RIGHT),r},Me.prototype.getEdge=function(){return this._orientedDe},Me.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Me.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Me.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Se.LEFT&&(this._orientedDe=this._minDe.getSym())},Me.prototype.interfaces_=function(){return[]},Me.prototype.getClass=function(){return Me};var Ce=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new x(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}($),Pe=function(){this.array_=[]};Pe.prototype.addLast=function(t){this.array_.push(t)},Pe.prototype.removeFirst=function(){return this.array_.shift()},Pe.prototype.isEmpty=function(){return 0===this.array_.length};var Oe=function(){this._finder=null,this._dirEdgeList=new Et,this._nodes=new Et,this._rightMostCoord=null,this._env=null,this._finder=new Me};Oe.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Oe.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Oe.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Ce("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Oe.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Se.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Oe.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Oe.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Se.RIGHT)>=1&&e.getDepth(Se.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Oe.prototype.computeDepths=function(t){var e=new Rt,n=new Pe,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var A=o.next().getSym();if(!A.isVisited()){var s=A.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Oe.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Oe.prototype.getEnvelope=function(){if(null===this._env){for(var t=new V,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Oe.prototype.addReachable=function(t){var e=new g;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Oe.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Se.LEFT,t.getDepth(Se.RIGHT)),e.setDepth(Se.RIGHT,t.getDepth(Se.LEFT))},Oe.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Oe.prototype.getNodes=function(){return this._nodes},Oe.prototype.getDirectedEdges=function(){return this._dirEdgeList},Oe.prototype.interfaces_=function(){return[b]},Oe.prototype.getClass=function(){return Oe};var Ne=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Se.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],A=arguments[1],s=arguments[2];this.init(3),this.location[Se.ON]=o,this.location[Se.LEFT]=A,this.location[Se.RIGHT]=s}};Ne.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Ne.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==C.NONE)return!1;return!0},Ne.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===C.NONE&&(this.location[e]=t)},Ne.prototype.isLine=function(){return 1===this.location.length},Ne.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Se.ON]=this.location[Se.ON],e[Se.LEFT]=C.NONE,e[Se.RIGHT]=C.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===C.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Ne.prototype.getLocations=function(){return this.location},Ne.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Se.LEFT];this.location[Se.LEFT]=this.location[Se.RIGHT],this.location[Se.RIGHT]=t},Ne.prototype.toString=function(){var t=new D;return this.location.length>1&&t.append(C.toLocationSymbol(this.location[Se.LEFT])),t.append(C.toLocationSymbol(this.location[Se.ON])),this.location.length>1&&t.append(C.toLocationSymbol(this.location[Se.RIGHT])),t.toString()},Ne.prototype.setLocations=function(t,e,n){this.location[Se.ON]=t,this.location[Se.LEFT]=e,this.location[Se.RIGHT]=n},Ne.prototype.get=function(t){return t<this.location.length?this.location[t]:C.NONE},Ne.prototype.isArea=function(){return this.location.length>1},Ne.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===C.NONE)return!0;return!1},Ne.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Se.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Ne.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(C.NONE)},Ne.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Ne.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne};var Re=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Ne(e),this.elt[1]=new Ne(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Ne(n.elt[0]),this.elt[1]=new Ne(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Ne(C.NONE),this.elt[1]=new Ne(C.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],A=arguments[1],s=arguments[2];this.elt[0]=new Ne(o,A,s),this.elt[1]=new Ne(o,A,s)}else if(4===arguments.length){var a=arguments[0],u=arguments[1],c=arguments[2],l=arguments[3];this.elt[0]=new Ne(C.NONE,C.NONE,C.NONE),this.elt[1]=new Ne(C.NONE,C.NONE,C.NONE),this.elt[a].setLocations(u,c,l)}};Re.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Re.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Re.prototype.isNull=function(t){return this.elt[t].isNull()},Re.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Re.prototype.isLine=function(t){return this.elt[t].isLine()},Re.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Ne(t.elt[e]):this.elt[e].merge(t.elt[e])},Re.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Re.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Se.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Re.prototype.toString=function(){var t=new D;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Re.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Re.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Re.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Se.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Re.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Re.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Re.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Ne(this.elt[t].location[0]))},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re},Re.toLineLabel=function(t){for(var e=new Re(C.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var De=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Et,this._pts=new Et,this._label=new Re(C.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Et,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};De.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=st.isCCW(this._ring.getCoordinates())},De.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},De.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Ce("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Ce("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},De.prototype.getLinearRing=function(){return this._ring},De.prototype.getCoordinate=function(t){return this._pts.get(t)},De.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},De.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var A=r.length-2;n&&(A=r.length-1);for(var s=A;s>=0;s--)this._pts.add(r[s])}},De.prototype.isHole=function(){return this._isHole},De.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},De.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!st.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},De.prototype.addHole=function(t){this._holes.add(t)},De.prototype.isShell=function(){return null===this._shell},De.prototype.getLabel=function(){return this._label},De.prototype.getEdges=function(){return this._edges},De.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},De.prototype.getShell=function(){return this._shell},De.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Se.RIGHT);if(n===C.NONE)return null;if(this._label.getLocation(e)===C.NONE)return this._label.setLocation(e,n),null}},De.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},De.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var Te=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),Le=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Et,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Te(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),ke=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};ke.prototype.setVisited=function(t){this._isVisited=t},ke.prototype.setInResult=function(t){this._isInResult=t},ke.prototype.isCovered=function(){return this._isCovered},ke.prototype.isCoveredSet=function(){return this._isCoveredSet},ke.prototype.setLabel=function(t){this._label=t},ke.prototype.getLabel=function(){return this._label},ke.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},ke.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},ke.prototype.isInResult=function(){return this._isInResult},ke.prototype.isVisited=function(){return this._isVisited},ke.prototype.interfaces_=function(){return[]},ke.prototype.getClass=function(){return ke};var Fe=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Re(0,C.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=C.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==C.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Re(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Re)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===C.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=C.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case C.BOUNDARY:n=C.INTERIOR;break;case C.INTERIOR:default:n=C.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ke),je=function(){this.nodeMap=new l,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};je.prototype.find=function(t){return this.nodeMap.get(t)},je.prototype.addNode=function(){if(arguments[0]instanceof x){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Fe){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},je.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},je.prototype.iterator=function(){return this.nodeMap.values().iterator()},je.prototype.values=function(){return this.nodeMap.values()},je.prototype.getBoundaryNodes=function(t){for(var e=new Et,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===C.BOUNDARY&&e.add(r)}return e},je.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je};var Be=function(){},Ge={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be},Be.isNorthern=function(t){return t===Be.NE||t===Be.NW},Be.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},Be.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},Be.isInHalfPlane=function(t,e){return e===Be.SE?t===Be.SE||t===Be.SW:t===e||t===e+1},Be.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Be.NE:Be.SE:e>=0?Be.NW:Be.SW}if(arguments[0]instanceof x&&arguments[1]instanceof x){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new v("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Be.NE:Be.SE:r.y>=n.y?Be.NW:Be.SW}},Ge.NE.get=function(){return 0},Ge.NW.get=function(){return 1},Ge.SW.get=function(){return 2},Ge.SE.get=function(){return 3},Object.defineProperties(Be,Ge);var Ue=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],A=arguments[2],s=arguments[3];this._edge=i,this.init(o,A),this._label=s}};Ue.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:st.computeOrientation(t._p0,t._p1,this._p1)},Ue.prototype.getDy=function(){return this._dy},Ue.prototype.getCoordinate=function(){return this._p0},Ue.prototype.setNode=function(t){this._node=t},Ue.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ue.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ue.prototype.getDirectedCoordinate=function(){return this._p1},Ue.prototype.getDx=function(){return this._dx},Ue.prototype.getLabel=function(){return this._label},Ue.prototype.getEdge=function(){return this._edge},Ue.prototype.getQuadrant=function(){return this._quadrant},Ue.prototype.getNode=function(){return this._node},Ue.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ue.prototype.computeLabel=function(t){},Ue.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Be.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ue.prototype.interfaces_=function(){return[b]},Ue.prototype.getClass=function(){return Ue};var ze=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Re(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ce("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Se.LEFT)===C.INTERIOR&&this._label.getLocation(e,Se.RIGHT)===C.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Se.LEFT]+"/"+this._depth[Se.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,C.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,C.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Se.LEFT&&(r=-1);var i=Se.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===C.EXTERIOR&&e===C.INTERIOR?1:t===C.INTERIOR&&e===C.EXTERIOR?-1:0},e}(Ue),qe=function(){};qe.prototype.createNode=function(t){return new Fe(t,null)},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe};var Qe=function(){if(this._edges=new Et,this._nodes=null,this._edgeEndList=new Et,0===arguments.length)this._nodes=new je(new qe);else if(1===arguments.length){var t=arguments[0];this._nodes=new je(t)}};Qe.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Qe.prototype.find=function(t){return this._nodes.find(t)},Qe.prototype.addNode=function(){if(arguments[0]instanceof Fe){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof x){var e=arguments[0];return this._nodes.addNode(e)}},Qe.prototype.getNodeIterator=function(){return this._nodes.iterator()},Qe.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Qe.prototype.debugPrintln=function(t){Q.out.println(t)},Qe.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===C.BOUNDARY},Qe.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Qe.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&st.computeOrientation(t,e,r)===st.COLLINEAR&&Be.quadrant(t,e)===Be.quadrant(n,r)},Qe.prototype.getEdgeEnds=function(){return this._edgeEndList},Qe.prototype.debugPrint=function(t){Q.out.print(t)},Qe.prototype.getEdgeIterator=function(){return this._edges.iterator()},Qe.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Qe.prototype.insertEdge=function(t){this._edges.add(t)},Qe.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Qe.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new ze(n,!0),i=new ze(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Qe.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Qe.prototype.getNodes=function(){return this._nodes.values()},Qe.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Qe.prototype.interfaces_=function(){return[]},Qe.prototype.getClass=function(){return Qe},Qe.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var He=function(){this._geometryFactory=null,this._shellList=new Et;var t=arguments[0];this._geometryFactory=t};He.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},He.prototype.computePolygons=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},He.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Ce("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},He.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Et,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var A=o.buildMinimalRings(),s=this.findShell(A);null!==s?(this.placePolygonHoles(s,A),e.add(s)):n.addAll(A)}else r.add(o)}return r},He.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},He.prototype.buildMaximalEdgeRings=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Le(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},He.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},He.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},He.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,A=null,s=e.iterator();s.hasNext();){var a=s.next(),u=a.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(A=o.getLinearRing().getEnvelopeInternal());var l=!1;c.contains(r)&&st.isPointInRing(i,u.getCoordinates())&&(l=!0),l&&(null===o||A.contains(c))&&(o=a)}return o},He.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},He.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Qe.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new Et,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var Ve=function(){};Ve.prototype.getBounds=function(){},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve};var Ye=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Ye.prototype.getItem=function(){return this._item},Ye.prototype.getBounds=function(){return this._bounds},Ye.prototype.interfaces_=function(){return[Ve,e]},Ye.prototype.getClass=function(){return Ye};var Xe=function(){this._size=null,this._items=null,this._size=0,this._items=new Et,this._items.add(null)};Xe.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Xe.prototype.size=function(){return this._size},Xe.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},Xe.prototype.clear=function(){this._size=0,this._items.clear()},Xe.prototype.isEmpty=function(){return 0===this._size},Xe.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Xe.prototype.interfaces_=function(){return[]},Xe.prototype.getClass=function(){return Xe};var We=function(){};We.prototype.visitItem=function(t){},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var Ze=function(){};Ze.prototype.insert=function(t,e){},Ze.prototype.remove=function(t,e){},Ze.prototype.query=function(){},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Je=function(){if(this._childBoundables=new Et,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Ke={serialVersionUID:{configurable:!0}};Je.prototype.getLevel=function(){return this._level},Je.prototype.size=function(){return this._childBoundables.size()},Je.prototype.getChildBoundables=function(){return this._childBoundables},Je.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Je.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Je.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Je.prototype.interfaces_=function(){return[Ve,e]},Je.prototype.getClass=function(){return Je},Ke.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Je,Ke);var $e=function(){};$e.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},$e.min=function(t){return $e.sort(t),t.get(0)},$e.sort=function(t,e){var n=t.toArray();e?Ft.sort(n,e):Ft.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},$e.singletonList=function(t){var e=new Et;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new v("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),A=new tn(o,e,this._itemDistance);A.getDistance()<r&&n.add(A)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[b]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Je};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Et,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Je?t+=this.size(n):n instanceof Ye&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Ye&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Et:t}if(1===arguments.length){for(var e=arguments[0],n=new Et,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Je){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof Ye?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Ye(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Et;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var A=o.next();A instanceof Je?this.boundablesAtLevel(n,A,i):(et.isTrue(A instanceof Ye),-1===n&&i.add(A))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Et;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(O(arguments[2],We)&&arguments[0]instanceof Object&&arguments[1]instanceof Je)for(var i=arguments[0],o=arguments[2],A=arguments[1].getChildBoundables(),s=0;s<A.size();s++){var a=A.get(s);this.getIntersectsOp().intersects(a.getBounds(),i)&&(a instanceof Je?this.query(i,a,o):a instanceof Ye?o.visitItem(a.getItem()):et.shouldNeverReachHere())}else if(O(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Je)for(var u=arguments[0],c=arguments[2],l=arguments[1].getChildBoundables(),f=0;f<l.size();f++){var h=l.get(f);this.getIntersectsOp().intersects(h.getBounds(),u)&&(h instanceof Je?this.query(u,h,c):h instanceof Ye?c.add(h.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var A=null,s=r.getChildBoundables().iterator();s.hasNext();){var a=s.next();if(this.getIntersectsOp().intersects(a.getBounds(),n)&&a instanceof Je&&(o=this.remove(n,a,i))){A=a;break}}return null!==A&&A.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(A),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Je){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new Et;n.add(this.createNode(e));var r=new Et(t);$e.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var An=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new Et,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new sn(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Et;for(var A=0;i.hasNext()&&A<n;){var s=i.next();r[o].add(s),A++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(O(arguments[2],We)&&arguments[0]instanceof Object&&arguments[1]instanceof Je){var i=arguments[0],o=arguments[1],A=arguments[2];t.prototype.query.call(this,i,o,A)}else if(O(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Je){var s=arguments[0],a=arguments[1],u=arguments[2];t.prototype.query.call(this,s,a,u)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new Et(t);$e.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(O(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,m.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&O(arguments[1],on)){var i=arguments[0],o=arguments[1],A=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(A)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],u=null,c=new Xe;for(c.add(s);!c.isEmpty()&&a>0;){var l=c.poll(),f=l.getDistance();if(f>=a)break;l.isLeaves()?(a=f,u=l):l.expandToQueue(c,a)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var h=arguments[2],p=new Ye(arguments[0],arguments[1]),d=new tn(this.getRoot(),p,h);return this.nearestNeighbour(d)[0]}},n.prototype.interfaces_=function(){return[Ze,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return sn},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),sn=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new V(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Je),an=function(){};an.prototype.interfaces_=function(){return[]},an.prototype.getClass=function(){return an},an.relativeSign=function(t,e){return t<e?-1:t>e?1:0},an.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=an.relativeSign(e.x,n.x),i=an.relativeSign(e.y,n.y);switch(t){case 0:return an.compareValue(r,i);case 1:return an.compareValue(i,r);case 2:return an.compareValue(i,-r);case 3:return an.compareValue(-r,i);case 4:return an.compareValue(-r,-i);case 5:return an.compareValue(-i,-r);case 6:return an.compareValue(-i,r);case 7:return an.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},an.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var un=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new x(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};un.prototype.getCoordinate=function(){return this.coord},un.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},un.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:an.compare(this._segmentOctant,this.coord,e.coord)},un.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},un.prototype.isInterior=function(){return this._isInterior},un.prototype.interfaces_=function(){return[b]},un.prototype.getClass=function(){return un};var cn=function(){this._nodeMap=new l,this._edge=null;var t=arguments[0];this._edge=t};cn.prototype.getSplitCoordinates=function(){var t=new St;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},cn.prototype.addCollapsedNodes=function(){var t=new Et;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},cn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},cn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new T(e+1))}},cn.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new x(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new x(e.coord))},cn.prototype.iterator=function(){return this._nodeMap.values().iterator()},cn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},cn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},cn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new T(e[0])),r=i}},cn.prototype.getEdge=function(){return this._edge},cn.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},cn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),A=0;o[A++]=new x(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[A++]=this._edge.getCoordinate(s);return i&&(o[A]=new x(e.coord)),new pn(o,this._edge.getData())},cn.prototype.add=function(t,e){var n=new un(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},cn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new $("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new $("bad split edge end point at "+i)},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn};var ln=function(){};ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln},ln.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new v("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof x&&arguments[1]instanceof x){var i=arguments[0],o=arguments[1],A=o.x-i.x,s=o.y-i.y;if(0===A&&0===s)throw new v("Cannot compute the octant for two identical points "+i);return ln.octant(A,s)}};var fn=function(){};fn.prototype.getCoordinates=function(){},fn.prototype.size=function(){},fn.prototype.getCoordinate=function(t){},fn.prototype.isClosed=function(){},fn.prototype.setData=function(t){},fn.prototype.getData=function(){},fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn};var hn=function(){};hn.prototype.addIntersection=function(t,e){},hn.prototype.interfaces_=function(){return[fn]},hn.prototype.getClass=function(){return hn};var pn=function(){this._nodeList=new cn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};pn.prototype.getCoordinates=function(){return this._pts},pn.prototype.size=function(){return this._pts.length},pn.prototype.getCoordinate=function(t){return this._pts[t]},pn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},pn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},pn.prototype.setData=function(t){this._data=t},pn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:ln.octant(t,e)},pn.prototype.getData=function(){return this._data},pn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new x(arguments[0].getIntersection(r));this.addIntersection(i,n)}},pn.prototype.toString=function(){return K.toLineString(new ae(this._pts))},pn.prototype.getNodeList=function(){return this._nodeList},pn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},pn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},pn.prototype.interfaces_=function(){return[hn]},pn.prototype.getClass=function(){return pn},pn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Et;return pn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var dn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new x,this.p1=new x;else if(1===arguments.length){var t=arguments[0];this.p0=new x(t.p0),this.p1=new x(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new x(e,n),this.p1=new x(r,i)}},gn={serialVersionUID:{configurable:!0}};dn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},dn.prototype.orientationIndex=function(){if(arguments[0]instanceof dn){var t=arguments[0],e=st.orientationIndex(this.p0,this.p1,t.p0),n=st.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof x){var r=arguments[0];return st.orientationIndex(this.p0,this.p1,r)}},dn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},dn.prototype.isVertical=function(){return this.p0.x===this.p1.x},dn.prototype.equals=function(t){if(!(t instanceof dn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},dn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},dn.prototype.project=function(){if(arguments[0]instanceof x){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new x(t);var e=this.projectionFactor(t),n=new x;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof dn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var A=this.project(r.p0);i<0&&(A=this.p0),i>1&&(A=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new dn(A,s)}},dn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},dn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},dn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},dn.prototype.distancePerpendicular=function(t){return st.distancePointLinePerpendicular(t,this.p0,this.p1)},dn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},dn.prototype.midPoint=function(){return dn.midPoint(this.p0,this.p1)},dn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?m.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},dn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=m.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var A=this.closestPoint(t.p1);(i=A.distance(t.p1))<r&&(r=i,n[0]=A,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var a=t.closestPoint(this.p1);return(i=a.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=a),n},dn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},dn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},dn.prototype.getLength=function(){return this.p0.distance(this.p1)},dn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},dn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},dn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},dn.prototype.lineIntersection=function(t){try{return H.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof q))throw t}return null},dn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},dn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,A=Math.sqrt(i*i+o*o),s=0,a=0;if(0!==e){if(A<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/A,a=e*o/A}return new x(n-a,r+s)},dn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},dn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||m.isNaN(e))&&(e=1),e},dn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},dn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},dn.prototype.distance=function(){if(arguments[0]instanceof dn){var t=arguments[0];return st.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof x){var e=arguments[0];return st.distancePointLine(e,this.p0,this.p1)}},dn.prototype.pointAlong=function(t){var e=new x;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},dn.prototype.hashCode=function(){var t=m.doubleToLongBits(this.p0.x);t^=31*m.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=m.doubleToLongBits(this.p1.x);return n^=31*m.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},dn.prototype.interfaces_=function(){return[b,e]},dn.prototype.getClass=function(){return dn},dn.midPoint=function(t,e){return new x((t.x+e.x)/2,(t.y+e.y)/2)},gn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(dn,gn);var yn=function(){this.tempEnv1=new V,this.tempEnv2=new V,this._overlapSeg1=new dn,this._overlapSeg2=new dn};yn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn};var vn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};vn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},vn.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var A=Math.trunc((e+n)/2);e<A&&this.computeSelect(t,e,A,r),A<n&&this.computeSelect(t,A,n,r)},vn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},vn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},vn.prototype.setId=function(t){this._id=t},vn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},vn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new V(t,e)}return this._env},vn.prototype.getEndIndex=function(){return this._end},vn.prototype.getStartIndex=function(){return this._start},vn.prototype.getContext=function(){return this._context},vn.prototype.getId=function(){return this._id},vn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var A=this._pts[t],s=this._pts[e],a=n._pts[r],u=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(A,s),o.tempEnv2.init(a,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),l=Math.trunc((r+i)/2);t<c&&(r<l&&this.computeOverlapsInternal(t,c,n,r,l,o),l<i&&this.computeOverlapsInternal(t,c,n,l,i,o)),c<e&&(r<l&&this.computeOverlapsInternal(c,e,n,r,l,o),l<i&&this.computeOverlapsInternal(c,e,n,l,i,o))},vn.prototype.interfaces_=function(){return[]},vn.prototype.getClass=function(){return vn};var mn=function(){};mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn},mn.getChainStartIndices=function(t){var e=0,n=new Et;n.add(new T(e));do{var r=mn.findChainEnd(t,e);n.add(new T(r)),e=r}while(e<t.length-1);return mn.toIntArray(n)},mn.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Be.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||Be.quadrant(t[i-1],t[i])===r);)i++;return i-1},mn.getChains=function(){if(1===arguments.length){var t=arguments[0];return mn.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new Et,i=mn.getChainStartIndices(e),o=0;o<i.length-1;o++){var A=new vn(e,i[o],i[o+1],n);r.add(A)}return r}},mn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var _n=function(){};_n.prototype.computeNodes=function(t){},_n.prototype.getNodedSubstrings=function(){},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n};var bn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};bn.prototype.setSegmentIntersector=function(t){this._segInt=t},bn.prototype.interfaces_=function(){return[_n]},bn.prototype.getClass=function(){return bn};var wn=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Et,this._index=new An,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return pn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=mn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new En(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return En},Object.defineProperties(e,n),e}(bn),En=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yn),xn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],A=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(A),this.setMitreLimit(s)}},Sn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};xn.prototype.getEndCapStyle=function(){return this._endCapStyle},xn.prototype.isSingleSided=function(){return this._isSingleSided},xn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=xn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=xn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==xn.JOIN_ROUND&&(this._quadrantSegments=xn.DEFAULT_QUADRANT_SEGMENTS)},xn.prototype.getJoinStyle=function(){return this._joinStyle},xn.prototype.setJoinStyle=function(t){this._joinStyle=t},xn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},xn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},xn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},xn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},xn.prototype.getMitreLimit=function(){return this._mitreLimit},xn.prototype.setMitreLimit=function(t){this._mitreLimit=t},xn.prototype.setSingleSided=function(t){this._isSingleSided=t},xn.prototype.interfaces_=function(){return[]},xn.prototype.getClass=function(){return xn},xn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Sn.CAP_ROUND.get=function(){return 1},Sn.CAP_FLAT.get=function(){return 2},Sn.CAP_SQUARE.get=function(){return 3},Sn.JOIN_ROUND.get=function(){return 1},Sn.JOIN_MITRE.get=function(){return 2},Sn.JOIN_BEVEL.get=function(){return 3},Sn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Sn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Sn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(xn,Sn);var In=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=st.COUNTERCLOCKWISE,this._inputLine=t||null},Mn={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};In.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],A=this._inputLine[n];return!!this.isConcave(i,o,A)&&!!this.isShallow(i,o,A,r)&&this.isShallowSampled(i,o,t,n,r)},In.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=In.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},In.prototype.isShallowConcavity=function(t,e,n,r){return st.computeOrientation(t,e,n)===this._angleOrientation&&st.distancePointLine(e,t,n)<r},In.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/In.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var A=n;A<r;A+=o)if(!this.isShallow(t,e,this._inputLine[A],i))return!1;return!0},In.prototype.isConcave=function(t,e,n){return st.computeOrientation(t,e,n)===this._angleOrientation},In.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=st.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},In.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===In.DELETE;)e++;return e},In.prototype.isShallow=function(t,e,n,r){return st.distancePointLine(e,t,n)<r},In.prototype.collapseLine=function(){for(var t=new St,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==In.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In},In.simplify=function(t,e){return new In(t).simplify(e)},Mn.INIT.get=function(){return 0},Mn.DELETE.get=function(){return 1},Mn.KEEP.get=function(){return 1},Mn.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(In,Mn);var Cn=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Et},Pn={COORDINATE_ARRAY_TYPE:{configurable:!0}};Cn.prototype.getCoordinates=function(){return this._ptList.toArray(Cn.COORDINATE_ARRAY_TYPE)},Cn.prototype.setPrecisionModel=function(t){this._precisionModel=t},Cn.prototype.addPt=function(t){var e=new x(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Cn.prototype.revere=function(){},Cn.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Cn.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Cn.prototype.toString=function(){return(new ye).createLineString(this.getCoordinates()).toString()},Cn.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new x(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Cn.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Cn.prototype.interfaces_=function(){return[]},Cn.prototype.getClass=function(){return Cn},Pn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Cn,Pn);var On=function(){},Nn={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},On.toDegrees=function(t){return 180*t/Math.PI},On.normalize=function(t){for(;t>Math.PI;)t-=On.PI_TIMES_2;for(;t<=-Math.PI;)t+=On.PI_TIMES_2;return t},On.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},On.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},On.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},On.interiorAngle=function(t,e,n){var r=On.angle(e,t),i=On.angle(e,n);return Math.abs(i-r)},On.normalizePositive=function(t){if(t<0){for(;t<0;)t+=On.PI_TIMES_2;t>=On.PI_TIMES_2&&(t=0)}else{for(;t>=On.PI_TIMES_2;)t-=On.PI_TIMES_2;t<0&&(t=0)}return t},On.angleBetween=function(t,e,n){var r=On.angle(e,t),i=On.angle(e,n);return On.diff(r,i)},On.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},On.toRadians=function(t){return t*Math.PI/180},On.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?On.COUNTERCLOCKWISE:n<0?On.CLOCKWISE:On.NONE},On.angleBetweenOriented=function(t,e,n){var r=On.angle(e,t),i=On.angle(e,n)-r;return i<=-Math.PI?i+On.PI_TIMES_2:i>Math.PI?i-On.PI_TIMES_2:i},Nn.PI_TIMES_2.get=function(){return 2*Math.PI},Nn.PI_OVER_2.get=function(){return Math.PI/2},Nn.PI_OVER_4.get=function(){return Math.PI/4},Nn.COUNTERCLOCKWISE.get=function(){return st.COUNTERCLOCKWISE},Nn.CLOCKWISE.get=function(){return st.CLOCKWISE},Nn.NONE.get=function(){return st.COLLINEAR},Object.defineProperties(On,Nn);var Rn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new dn,this._seg1=new dn,this._offset0=new dn,this._offset1=new dn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===xn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},Dn={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Rn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=st.computeOrientation(this._s0,this._s1,this._s2),r=n===st.CLOCKWISE&&this._side===Se.LEFT||n===st.COUNTERCLOCKWISE&&this._side===Se.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Rn.prototype.addLineEndCap=function(t,e){var n=new dn(t,e),r=new dn;this.computeOffsetSegment(n,Se.LEFT,this._distance,r);var i=new dn;this.computeOffsetSegment(n,Se.RIGHT,this._distance,i);var o=e.x-t.x,A=e.y-t.y,s=Math.atan2(A,o);switch(this._bufParams.getEndCapStyle()){case xn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,st.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case xn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case xn.CAP_SQUARE:var a=new x;a.x=Math.abs(this._distance)*Math.cos(s),a.y=Math.abs(this._distance)*Math.sin(s);var u=new x(r.p1.x+a.x,r.p1.y+a.y),c=new x(i.p1.x+a.x,i.p1.y+a.y);this._segList.addPt(u),this._segList.addPt(c)}},Rn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Rn.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=H.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof q))throw t;o=new x(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Rn.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,A=e.y-t.y,s=Math.atan2(A,o),a=n.x-t.x,u=n.y-t.y,c=Math.atan2(u,a);r===st.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,i),this._segList.addPt(n)},Rn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Rn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===xn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===xn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Rn.prototype.createSquare=function(t){this._segList.addPt(new x(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new x(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new x(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new x(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Rn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Rn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Rn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Rn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Rn.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=On.angle(i,this._seg0.p0),A=On.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=On.normalize(o+A),a=On.normalize(s+Math.PI),u=r*n,c=n-u*Math.abs(Math.sin(A)),l=i.x+u*Math.cos(a),f=i.y+u*Math.sin(a),h=new x(l,f),p=new dn(i,h),d=p.pointAlongOffset(1,c),g=p.pointAlongOffset(1,-c);this._side===Se.LEFT?(this._segList.addPt(d),this._segList.addPt(g)):(this._segList.addPt(g),this._segList.addPt(d))},Rn.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Se.LEFT?1:-1,o=t.p1.x-t.p0.x,A=t.p1.y-t.p0.y,s=Math.sqrt(o*o+A*A),a=i*n*o/s,u=i*n*A/s;r.p0.x=t.p0.x-u,r.p0.y=t.p0.y+a,r.p1.x=t.p1.x-u,r.p1.y=t.p1.y+a},Rn.prototype.addFilletArc=function(t,e,n,r,i){var o=r===st.CLOCKWISE?-1:1,A=Math.abs(e-n),s=Math.trunc(A/this._filletAngleQuantum+.5);if(s<1)return null;for(var a=A/s,u=0,c=new x;u<A;){var l=e+o*u;c.x=t.x+i*Math.cos(l),c.y=t.y+i*Math.sin(l),this._segList.addPt(c),u+=a}},Rn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Rn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new x((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new x((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Rn.prototype.createCircle=function(t){var e=new x(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Rn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Rn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Cn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Rn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Rn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===xn.JOIN_BEVEL||this._bufParams.getJoinStyle()===xn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st.CLOCKWISE,this._distance))},Rn.prototype.closeRing=function(){this._segList.closeRing()},Rn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},Dn.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Dn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Dn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Dn.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Rn,Dn);var Tn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Tn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&It.reverse(o),o},Tn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=In.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Se.LEFT),n.addFirstSegment();for(var A=o-2;A>=0;A--)n.addNextSegment(i[A],!0)}else{n.addSegments(t,!1);var s=In.simplify(t,r),a=s.length-1;n.initSideSegments(s[0],s[1],Se.LEFT),n.addFirstSegment();for(var u=2;u<=a;u++)n.addNextSegment(s[u],!0)}n.addLastSegment(),n.closeRing()},Tn.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Se.RIGHT&&(r=-r);var i=In.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var A=1;A<=o;A++){var s=1!==A;n.addNextSegment(i[A],s)}n.closeRing()},Tn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=In.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Se.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var A=In.simplify(t,-n),s=A.length-1;e.initSideSegments(A[s],A[s-1],Se.LEFT);for(var a=s-2;a>=0;a--)e.addNextSegment(A[a],!0);e.addLastSegment(),e.addLineEndCap(A[1],A[0]),e.closeRing()},Tn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case xn.CAP_ROUND:e.createCircle(t);break;case xn.CAP_SQUARE:e.createSquare(t)}},Tn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},Tn.prototype.getBufferParameters=function(){return this._bufParams},Tn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Tn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Tn.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Tn.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=In.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Se.LEFT),n.addFirstSegment();for(var A=o-2;A>=0;A--)n.addNextSegment(i[A],!0)}else{var s=In.simplify(t,r),a=s.length-1;n.initSideSegments(s[0],s[1],Se.LEFT),n.addFirstSegment();for(var u=2;u<=a;u++)n.addNextSegment(s[u],!0)}n.addLastSegment()},Tn.prototype.getSegGen=function(t){return new Rn(this._precisionModel,this._bufParams,t)},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Tn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new x(t[n]);return e};var Ln=function(){this._subgraphs=null,this._seg=new dn,this._cga=new st;var t=arguments[0];this._subgraphs=t},kn={DepthSegment:{configurable:!0}};Ln.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Et,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(O(arguments[2],wt)&&arguments[0]instanceof x&&arguments[1]instanceof ze){for(var o=arguments[0],A=arguments[1],s=arguments[2],a=A.getEdge().getCoordinates(),u=0;u<a.length-1;u++)if(this._seg.p0=a[u],this._seg.p1=a[u+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||st.computeOrientation(this._seg.p0,this._seg.p1,o)===st.RIGHT)){var c=A.getDepth(Se.LEFT);this._seg.p0.equals(a[u])||(c=A.getDepth(Se.RIGHT));var l=new Fn(this._seg,c);s.add(l)}}else if(O(arguments[2],wt)&&arguments[0]instanceof x&&O(arguments[1],wt))for(var f=arguments[0],h=arguments[2],p=arguments[1].iterator();p.hasNext();){var d=p.next();d.isForward()&&this.findStabbedSegments(f,d,h)}},Ln.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:$e.min(e)._leftDepth},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},kn.DepthSegment.get=function(){return Fn},Object.defineProperties(Ln,kn);var Fn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new dn(t),this._leftDepth=e};Fn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Fn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Fn.prototype.toString=function(){return this._upwardSeg.toString()},Fn.prototype.interfaces_=function(){return[b]},Fn.prototype.getClass=function(){return Fn};var jn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};jn.prototype.area=function(){return jn.area(this.p0,this.p1,this.p2)},jn.prototype.signedArea=function(){return jn.signedArea(this.p0,this.p1,this.p2)},jn.prototype.interpolateZ=function(t){if(null===t)throw new v("Supplied point is null.");return jn.interpolateZ(t,this.p0,this.p1,this.p2)},jn.prototype.longestSideLength=function(){return jn.longestSideLength(this.p0,this.p1,this.p2)},jn.prototype.isAcute=function(){return jn.isAcute(this.p0,this.p1,this.p2)},jn.prototype.circumcentre=function(){return jn.circumcentre(this.p0,this.p1,this.p2)},jn.prototype.area3D=function(){return jn.area3D(this.p0,this.p1,this.p2)},jn.prototype.centroid=function(){return jn.centroid(this.p0,this.p1,this.p2)},jn.prototype.inCentre=function(){return jn.inCentre(this.p0,this.p1,this.p2)},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn},jn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},jn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},jn.det=function(t,e,n,r){return t*r-e*n},jn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,A=n.x-i,s=r.x-i,a=n.y-o,u=r.y-o,c=A*u-s*a,l=t.x-i,f=t.y-o,h=(u*l-s*f)/c,p=(-a*l+A*f)/c;return e.z+h*(n.z-e.z)+p*(r.z-e.z)},jn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),A=r;return i>A&&(A=i),o>A&&(A=o),A},jn.isAcute=function(t,e,n){return!!On.isAcute(t,e,n)&&!!On.isAcute(e,n,t)&&!!On.isAcute(n,t,e)},jn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,A=t.y-i,s=e.x-r,a=e.y-i,u=2*jn.det(o,A,s,a),c=jn.det(A,o*o+A*A,a,s*s+a*a),l=jn.det(o,o*o+A*A,s,s*s+a*a);return new x(r-c/u,i+l/u)},jn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new H(t.x+n/2,t.y+r/2,1),o=new H(t.x-r+n/2,t.y+n+r/2,1);return new H(i,o)},jn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,A=n.y-t.y;return new x(t.x+i*o,t.y+i*A)},jn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,A=n.x-t.x,s=n.y-t.y,a=n.z-t.z,u=i*a-o*s,c=o*A-r*a,l=r*s-i*A,f=u*u+c*c+l*l;return Math.sqrt(f)/2},jn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new x(r,i)},jn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),A=r+i+o,s=(r*t.x+i*e.x+o*n.x)/A,a=(r*t.y+i*e.y+o*n.y)/A;return new x(s,a)};var Bn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Et;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Bn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,C.EXTERIOR,C.INTERIOR)},Bn.prototype.addPolygon=function(t){var e=this._distance,n=Se.LEFT;this._distance<0&&(e=-this._distance,n=Se.RIGHT);var r=t.getExteriorRing(),i=It.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,C.EXTERIOR,C.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var A=t.getInteriorRingN(o),s=It.removeRepeatedPoints(A.getCoordinates());this._distance>0&&this.isErodedCompletely(A,-this._distance)||this.addPolygonRing(s,e,Se.opposite(n),C.INTERIOR,C.EXTERIOR)}},Bn.prototype.isTriangleErodedCompletely=function(t,e){var n=new jn(t[0],t[1],t[2]),r=n.inCentre();return st.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Bn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=It.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,C.EXTERIOR,C.INTERIOR)},Bn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new pn(t,new Re(0,C.BOUNDARY,e,n));this._curveList.add(r)},Bn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Bn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,A=i;t.length>=ee.MINIMUM_VALID_SIZE&&st.isCCW(t)&&(o=i,A=r,n=Se.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,A)},Bn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof $t?this.addPolygon(t):t instanceof Wt?this.addLineString(t):t instanceof Jt?this.addPoint(t):(t instanceof te||t instanceof qt||t instanceof ne||t instanceof zt)&&this.addCollection(t)},Bn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Bn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var Gn=function(){};Gn.prototype.locate=function(t){},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn};var Un=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Un.prototype.next=function(){if(this._atStart)return this._atStart=!1,Un.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof zt?(this._subcollectionIterator=new Un(t),this._subcollectionIterator.next()):t},Un.prototype.remove=function(){throw new Error(this.getClass().getName())},Un.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Un.prototype.interfaces_=function(){return[bt]},Un.prototype.getClass=function(){return Un},Un.isAtomic=function(t){return!(t instanceof zt)};var zn=function(){this._geom=null;var t=arguments[0];this._geom=t};zn.prototype.locate=function(t){return zn.locate(t,this._geom)},zn.prototype.interfaces_=function(){return[Gn]},zn.prototype.getClass=function(){return zn},zn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&st.isPointInRing(t,e.getCoordinates())},zn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!zn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(zn.isPointInRing(t,i))return!1}return!0},zn.containsPoint=function(t,e){if(e instanceof $t)return zn.containsPointInPolygon(t,e);if(e instanceof zt)for(var n=new Un(e);n.hasNext();){var r=n.next();if(r!==e&&zn.containsPoint(t,r))return!0}return!1},zn.locate=function(t,e){return e.isEmpty()?C.EXTERIOR:zn.containsPoint(t,e)?C.INTERIOR:C.EXTERIOR};var qn=function(){this._edgeMap=new l,this._edgeList=null,this._ptInAreaLocation=[C.NONE,C.NONE]};qn.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},qn.prototype.propagateSideLabels=function(t){for(var e=C.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Se.LEFT)!==C.NONE&&(e=r.getLocation(t,Se.LEFT))}if(e===C.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var A=o.next(),s=A.getLabel();if(s.getLocation(t,Se.ON)===C.NONE&&s.setLocation(t,Se.ON,i),s.isArea(t)){var a=s.getLocation(t,Se.LEFT),u=s.getLocation(t,Se.RIGHT);if(u!==C.NONE){if(u!==i)throw new Ce("side location conflict",A.getCoordinate());a===C.NONE&&et.shouldNeverReachHere("found single null side (at "+A.getCoordinate()+")"),i=a}else et.isTrue(s.getLocation(t,Se.LEFT)===C.NONE,"found single null side"),s.setLocation(t,Se.RIGHT,i),s.setLocation(t,Se.LEFT,i)}}},qn.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},qn.prototype.print=function(t){Q.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},qn.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},qn.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Se.LEFT);et.isTrue(r!==C.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var A=o.next().getLabel();et.isTrue(A.isArea(t),"Found non-area edge");var s=A.getLocation(t,Se.LEFT),a=A.getLocation(t,Se.RIGHT);if(s===a)return!1;if(a!==i)return!1;i=s}return!0},qn.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},qn.prototype.iterator=function(){return this.getEdges().iterator()},qn.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Et(this._edgeMap.values())),this._edgeList},qn.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===C.NONE&&(this._ptInAreaLocation[t]=zn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},qn.prototype.toString=function(){var t=new D;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},qn.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},qn.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===C.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var A=o.next(),s=A.getLabel(),a=0;a<2;a++)if(s.isAnyNull(a)){var u=C.NONE;if(e[a])u=C.EXTERIOR;else{var c=A.getCoordinate();u=this.getLocation(a,c,t)}s.setAllLocationsIfNull(a,u)}},qn.prototype.getDegree=function(){return this._edgeMap.size()},qn.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},qn.prototype.interfaces_=function(){return[]},qn.prototype.getClass=function(){return qn};var Qn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Ce("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Be.isNorthern(i)&&Be.isNorthern(o)?n:Be.isNorthern(i)||Be.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){Q.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Et;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Se.LEFT),r=t.getDepth(Se.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Ce("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],A=arguments[2],s=arguments[0];s<o;s++){var a=this._edgeList.get(s);a.setEdgeDepths(Se.RIGHT,A),A=a.getDepth(Se.LEFT)}return A}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),A=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(A.getEdgeRing()!==t)continue;n=A,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=C.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=C.INTERIOR;break}if(r.isInResult()){t=C.EXTERIOR;break}}}if(t===C.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var A=o.next(),s=A.getSym();A.isLineEdge()?A.getEdge().setCovered(i===C.INTERIOR):(A.isInResult()&&(i=C.EXTERIOR),s.isInResult()&&(i=C.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Re(C.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==C.INTERIOR&&o!==C.BOUNDARY||this._label.setLocation(i,C.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qn),Hn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Fe(t,new Qn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(qe),Vn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Vn.prototype.compareTo=function(t){var e=t;return Vn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Vn.prototype.interfaces_=function(){return[b]},Vn.prototype.getClass=function(){return Vn},Vn.orientation=function(t){return 1===It.increasingDirection(t)},Vn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,A=e?t.length:-1,s=r?n.length:-1,a=e?0:t.length-1,u=r?0:n.length-1;;){var c=t[a].compareTo(n[u]);if(0!==c)return c;var l=(a+=i)===A,f=(u+=o)===s;if(l&&!f)return-1;if(!l&&f)return 1;if(l&&f)return 0}};var Yn=function(){this._edges=new Et,this._ocaMap=new l};Yn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Yn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Yn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Yn.prototype.iterator=function(){return this._edges.iterator()},Yn.prototype.getEdges=function(){return this._edges},Yn.prototype.get=function(t){return this._edges.get(t)},Yn.prototype.findEqualEdge=function(t){var e=new Vn(t.getCoordinates());return this._ocaMap.get(e)},Yn.prototype.add=function(t){this._edges.add(t);var e=new Vn(t.getCoordinates());this._ocaMap.put(e,t)},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn};var Xn=function(){};Xn.prototype.processIntersections=function(t,e,n,r){},Xn.prototype.isDone=function(){},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn};var Wn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Wn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Wn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Wn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Wn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Wn.prototype.getLineIntersector=function(){return this._li},Wn.prototype.hasProperIntersection=function(){return this._hasProper},Wn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],A=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,A,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Wn.prototype.hasIntersection=function(){return this._hasIntersection},Wn.prototype.isDone=function(){return!1},Wn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Wn.prototype.interfaces_=function(){return[Xn]},Wn.prototype.getClass=function(){return Wn},Wn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Zn=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new x(t),this.segmentIndex=e,this.dist=n};Zn.prototype.getSegmentIndex=function(){return this.segmentIndex},Zn.prototype.getCoordinate=function(){return this.coord},Zn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Zn.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Zn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Zn.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Zn.prototype.getDistance=function(){return this.dist},Zn.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Zn.prototype.interfaces_=function(){return[b]},Zn.prototype.getClass=function(){return Zn};var Jn=function(){this._nodeMap=new l,this.edge=null;var t=arguments[0];this.edge=t};Jn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Jn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Jn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Jn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Jn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),A=0;o[A++]=new x(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[A++]=this.edge.pts[s];return i&&(o[A]=e.coord),new nr(o,new Re(this.edge._label))},Jn.prototype.add=function(t,e,n){var r=new Zn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Jn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn};var Kn=function(){};Kn.prototype.getChainStartIndices=function(t){var e=0,n=new Et;n.add(new T(e));do{var r=this.findChainEnd(t,e);n.add(new T(r)),e=r}while(e<t.length-1);return Kn.toIntArray(n)},Kn.prototype.findChainEnd=function(t,e){for(var n=Be.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&Be.quadrant(t[r-1],t[r])===n;)r++;return r-1},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn},Kn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var $n=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new V,this.env2=new V;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Kn;this.startIndex=e.getChainStartIndices(this.pts)};$n.prototype.getCoordinates=function(){return this.pts},$n.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},$n.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},$n.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],A=arguments[2],s=arguments[3],a=arguments[4],u=arguments[5],c=this.pts[i],l=this.pts[o],f=A.pts[s],h=A.pts[a];if(o-i==1&&a-s==1)return u.addIntersections(this.e,i,A.e,s),null;if(this.env1.init(c,l),this.env2.init(f,h),!this.env1.intersects(this.env2))return null;var p=Math.trunc((i+o)/2),d=Math.trunc((s+a)/2);i<p&&(s<d&&this.computeIntersectsForChain(i,p,A,s,d,u),d<a&&this.computeIntersectsForChain(i,p,A,d,a,u)),p<o&&(s<d&&this.computeIntersectsForChain(p,o,A,s,d,u),d<a&&this.computeIntersectsForChain(p,o,A,d,a,u))}},$n.prototype.getStartIndexes=function(){return this.startIndex},$n.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},$n.prototype.interfaces_=function(){return[]},$n.prototype.getClass=function(){return $n};var tr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Se.RIGHT]-this._depth[t][Se.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?C.EXTERIOR:C.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==C.EXTERIOR&&r!==C.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===C.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===C.EXTERIOR?0:t===C.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Jn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Re.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,A=0;A<this.pts.length;A++)if(this.pts[A].equals2D(n.pts[A])||(r=!1),this.pts[A].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new $n(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new V;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new x(t.getIntersection(r)),o=e,A=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var a=this.pts[s];i.equals2D(a)&&(o=s,A=0)}this.eiList.add(i,o,A)},e.prototype.toString=function(){var t=new D;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Se.ON),e.getLocation(1,Se.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Se.LEFT),e.getLocation(1,Se.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Se.RIGHT),e.getLocation(1,Se.RIGHT),2))},e}(ke),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Yn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Re(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new Et,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),A=new Ln(n).getDepth(o);i.computeDepth(A),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new Et,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Oe;i.create(r),e.add(i)}}return $e.sort(e,$e.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new wn,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new Wn(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Tn(n,this._bufParams),i=new Bn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Qe(new Hn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),A=new He(this._geomFact);this.buildSubgraphs(o,A);var s=A.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var A=i.getData(),s=new nr(i.getCoordinates(),new Re(A));this.insertUniqueEdge(s)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Se.LEFT),n=t.getLocation(0,Se.RIGHT);return e===C.INTERIOR&&n===C.EXTERIOR?1:e===C.EXTERIOR&&n===C.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new ye,n=new Et;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(O(arguments[0],_t))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&Q.out.println(n)}},ir.prototype.scale=function(){if(O(arguments[0],_t)){for(var t=arguments[0],e=new Et,n=t.iterator();n.hasNext();){var r=n.next();e.add(new pn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),A=0;A<i.length;A++)o[A]=new x(Math.round((i[A].x-this._offsetX)*this._scaleFactor),Math.round((i[A].y-this._offsetY)*this._scaleFactor),i[A].z);return It.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[_n]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},Ar={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new $("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],A=i.getCoordinates(),s=o.getCoordinates(),a=0;a<A.length-1;a++)for(var u=0;u<s.length-1;u++)this.checkInteriorIntersections(i,a,o,u);else if(4===arguments.length){var c=arguments[0],l=arguments[1],f=arguments[2],h=arguments[3];if(c===f&&l===h)return null;var p=c.getCoordinates()[l],d=c.getCoordinates()[l+1],g=f.getCoordinates()[h],y=f.getCoordinates()[h+1];if(this._li.computeIntersection(p,d,g,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,p,d)||this.hasInteriorIntersection(this._li,g,y)))throw new $("found non-noded intersection at "+p+"-"+d+" and "+g+"-"+y)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new $("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},Ar.fact.get=function(){return new ye},Object.defineProperties(or,Ar);var sr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new v("Scale factor must be non-zero");1!==e&&(this._pt=new x(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new x,this._p1Scaled=new x),this.initCorners(this._pt)},ar={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),A=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(A)return!1;var s=this.intersectsToleranceSquare(t,e);return et.isTrue(!(A&&s),"Found bad envelope test"),s},sr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new x(this._maxx,this._maxy),this._corner[1]=new x(this._minx,this._maxy),this._corner[2]=new x(this._minx,this._miny),this._corner[3]=new x(this._maxx,this._miny)},sr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sr.prototype.getCoordinate=function(){return this._originalPt},sr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new V(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},sr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},sr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},ar.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sr,ar);var ur=function(){this.tempEnv1=new V,this.selectedSegment=new dn};ur.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur};var cr=function(){this._index=null;var t=arguments[0];this._index=t},lr={HotPixelSnapAction:{configurable:!0}};cr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new fr(e,n,r);return this._index.query(i,{interfaces_:function(){return[We]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},lr.HotPixelSnapAction.get=function(){return fr},Object.defineProperties(cr,lr);var fr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ur),hr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Et};hr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],A=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,A,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var a=0;a<this._li.getIntersectionNum();a++)this._interiorIntersections.add(this._li.getIntersection(a));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},hr.prototype.isDone=function(){return!1},hr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},hr.prototype.interfaces_=function(){return[Xn]},hr.prototype.getClass=function(){return hr};var pr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};pr.prototype.checkCorrectness=function(t){var e=pn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof z))throw t;t.printStackTrace()}},pr.prototype.getNodedSubstrings=function(){return pn.getNodedSubstrings(this._nodedSegStrings)},pr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},pr.prototype.findInteriorIntersections=function(t,e){var n=new hr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},pr.prototype.computeVertexSnaps=function(){if(O(arguments[0],_t))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof pn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},pr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new wn,this._pointSnapper=new cr(this._noder.getIndex()),this.snapRound(t,this._li)},pr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},pr.prototype.interfaces_=function(){return[_n]},pr.prototype.getClass=function(){return pr};var dr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new xn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},gr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};dr.prototype.bufferFixedPrecision=function(t){var e=new ir(new pr(new he(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},dr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=dr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ce))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=dr.precisionScaleFactor(this._argGeom,this._distance,n),i=new he(r);this.bufferFixedPrecision(i)}},dr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===he.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},dr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},dr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof $))throw t;this._saveException=t}},dr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},dr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},dr.prototype.interfaces_=function(){return[]},dr.prototype.getClass=function(){return dr},dr.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new dr(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new dr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof xn&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var i=arguments[1];return new dr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],A=arguments[2],s=arguments[3],a=new dr(arguments[0]);return a.setQuadrantSegments(A),a.setEndCapStyle(s),a.getResultGeometry(o)}},dr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=N.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},gr.CAP_ROUND.get=function(){return xn.CAP_ROUND},gr.CAP_BUTT.get=function(){return xn.CAP_FLAT},gr.CAP_FLAT.get=function(){return xn.CAP_FLAT},gr.CAP_SQUARE.get=function(){return xn.CAP_SQUARE},gr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(dr,gr);var yr=function(){this._pt=[new x,new x],this._distance=m.NaN,this._isNull=!0};yr.prototype.getCoordinates=function(){return this._pt},yr.prototype.getCoordinate=function(t){return this._pt[t]},yr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},yr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},yr.prototype.getDistance=function(){return this._distance},yr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr};var vr=function(){};vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},vr.computeDistance=function(){if(arguments[2]instanceof yr&&arguments[0]instanceof Wt&&arguments[1]instanceof x)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new dn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof yr&&arguments[0]instanceof $t&&arguments[1]instanceof x){var A=arguments[0],s=arguments[1],a=arguments[2];vr.computeDistance(A.getExteriorRing(),s,a);for(var u=0;u<A.getNumInteriorRing();u++)vr.computeDistance(A.getInteriorRingN(u),s,a)}else if(arguments[2]instanceof yr&&arguments[0]instanceof ct&&arguments[1]instanceof x){var c=arguments[0],l=arguments[1],f=arguments[2];if(c instanceof Wt)vr.computeDistance(c,l,f);else if(c instanceof $t)vr.computeDistance(c,l,f);else if(c instanceof zt)for(var h=c,p=0;p<h.getNumGeometries();p++){var d=h.getGeometryN(p);vr.computeDistance(d,l,f)}else f.setMinimum(c.getCoordinate(),l)}else if(arguments[2]instanceof yr&&arguments[0]instanceof dn&&arguments[1]instanceof x){var g=arguments[1],y=arguments[2],v=arguments[0].closestPoint(g);y.setMinimum(v,g)}};var mr=function(t){this._maxPtDist=new yr,this._inputGeom=t||null},_r={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};mr.prototype.computeMaxMidpointDistance=function(t){var e=new wr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},mr.prototype.computeMaxVertexDistance=function(t){var e=new br(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},mr.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},mr.prototype.getDistancePoints=function(){return this._maxPtDist},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},_r.MaxPointDistanceFilter.get=function(){return br},_r.MaxMidpointDistanceFilter.get=function(){return wr},Object.defineProperties(mr,_r);var br=function(t){this._maxPtDist=new yr,this._minPtDist=new yr,this._geom=t||null};br.prototype.filter=function(t){this._minPtDist.initialize(),vr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},br.prototype.getMaxPointDistance=function(){return this._maxPtDist},br.prototype.interfaces_=function(){return[ht]},br.prototype.getClass=function(){return br};var wr=function(t){this._maxPtDist=new yr,this._minPtDist=new yr,this._geom=t||null};wr.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new x((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),vr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wr.prototype.isDone=function(){return!1},wr.prototype.isGeometryChanged=function(){return!1},wr.prototype.getMaxPointDistance=function(){return this._maxPtDist},wr.prototype.interfaces_=function(){return[Ut]},wr.prototype.getClass=function(){return wr};var Er=function(t){this._comps=t||null};Er.prototype.filter=function(t){t instanceof $t&&this._comps.add(t)},Er.prototype.interfaces_=function(){return[Gt]},Er.prototype.getClass=function(){return Er},Er.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Er.getPolygons(t,new Et)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof $t?n.add(e):e instanceof zt&&e.apply(new Er(n)),n}};var xr=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};xr.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Wt&&this._lines.add(t)},xr.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},xr.prototype.interfaces_=function(){return[ut]},xr.prototype.getClass=function(){return xr},xr.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(xr.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(xr.getLines(e,n))}},xr.getLines=function(){if(1===arguments.length){var t=arguments[0];return xr.getLines(t,!1)}if(2===arguments.length){if(O(arguments[0],_t)&&O(arguments[1],_t)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();xr.getLines(r,e)}return e}if(arguments[0]instanceof ct&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],A=new Et;return i.apply(new xr(A,o)),A}if(arguments[0]instanceof ct&&O(arguments[1],_t)){var s=arguments[0],a=arguments[1];return s instanceof Wt?a.add(s):s.apply(new xr(a)),a}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&O(arguments[0],_t)&&O(arguments[1],_t)){for(var u=arguments[1],c=arguments[2],l=arguments[0].iterator();l.hasNext();){var f=l.next();xr.getLines(f,u,c)}return u}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ct&&O(arguments[1],_t)){var h=arguments[1],p=arguments[2];return arguments[0].apply(new xr(h,p)),h}}};var Sr=function(){if(this._boundaryRule=pt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new v("Rule must be non-null");this._boundaryRule=t}};Sr.prototype.locateInternal=function(){if(arguments[0]instanceof x&&arguments[1]instanceof $t){var t=arguments[0],e=arguments[1];if(e.isEmpty())return C.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===C.EXTERIOR)return C.EXTERIOR;if(r===C.BOUNDARY)return C.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),A=this.locateInPolygonRing(t,o);if(A===C.INTERIOR)return C.EXTERIOR;if(A===C.BOUNDARY)return C.BOUNDARY}return C.INTERIOR}if(arguments[0]instanceof x&&arguments[1]instanceof Wt){var s=arguments[0],a=arguments[1];if(!a.getEnvelopeInternal().intersects(s))return C.EXTERIOR;var u=a.getCoordinates();return a.isClosed()||!s.equals(u[0])&&!s.equals(u[u.length-1])?st.isOnLine(s,u)?C.INTERIOR:C.EXTERIOR:C.BOUNDARY}if(arguments[0]instanceof x&&arguments[1]instanceof Jt){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?C.INTERIOR:C.EXTERIOR}},Sr.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?st.locatePointInRing(t,e.getCoordinates()):C.EXTERIOR},Sr.prototype.intersects=function(t,e){return this.locate(t,e)!==C.EXTERIOR},Sr.prototype.updateLocationInfo=function(t){t===C.INTERIOR&&(this._isIn=!0),t===C.BOUNDARY&&this._numBoundaries++},Sr.prototype.computeLocation=function(t,e){if(e instanceof Jt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Wt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof $t)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof qt)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,A=0;A<o.getNumGeometries();A++){var s=o.getGeometryN(A);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof zt)for(var a=new Un(e);a.hasNext();){var u=a.next();u!==e&&this.computeLocation(t,u)}},Sr.prototype.locate=function(t,e){return e.isEmpty()?C.EXTERIOR:e instanceof Wt||e instanceof $t?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?C.BOUNDARY:this._numBoundaries>0||this._isIn?C.INTERIOR:C.EXTERIOR)},Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr};var Ir=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Mr={INSIDE_AREA:{configurable:!0}};Ir.prototype.isInsideArea=function(){return this._segIndex===Ir.INSIDE_AREA},Ir.prototype.getCoordinate=function(){return this._pt},Ir.prototype.getGeometryComponent=function(){return this._component},Ir.prototype.getSegmentIndex=function(){return this._segIndex},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir},Mr.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Ir,Mr);var Cr=function(t){this._pts=t||null};Cr.prototype.filter=function(t){t instanceof Jt&&this._pts.add(t)},Cr.prototype.interfaces_=function(){return[Gt]},Cr.prototype.getClass=function(){return Cr},Cr.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Jt?$e.singletonList(t):Cr.getPoints(t,new Et)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Jt?n.add(e):e instanceof zt&&e.apply(new Cr(n)),n}};var Pr=function(){this._locations=null;var t=arguments[0];this._locations=t};Pr.prototype.filter=function(t){(t instanceof Jt||t instanceof Wt||t instanceof $t)&&this._locations.add(new Ir(t,0,t.getCoordinate()))},Pr.prototype.interfaces_=function(){return[Gt]},Pr.prototype.getClass=function(){return Pr},Pr.getLocations=function(t){var e=new Et;return t.apply(new Pr(e)),e};var Or=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Sr,this._minDistanceLocation=null,this._minDistance=m.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Or.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Er.getPolygons(this._geom[e]);if(i.size()>0){var o=Pr.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&O(arguments[0],wt)&&O(arguments[1],wt)){for(var A=arguments[0],s=arguments[1],a=arguments[2],u=0;u<A.size();u++)for(var c=A.get(u),l=0;l<s.size();l++)if(this.computeContainmentDistance(c,s.get(l),a),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ir&&arguments[1]instanceof $t){var f=arguments[0],h=arguments[1],p=arguments[2],d=f.getCoordinate();if(C.EXTERIOR!==this._ptLocator.locate(d,h))return this._minDistance=0,p[0]=f,p[1]=new Ir(h,d),null}},Or.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var A=e.get(o);if(this.computeMinDistance(i,A,n),this._minDistance<=this._terminateDistance)return null}},Or.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=xr.getLines(this._geom[0]),n=xr.getLines(this._geom[1]),r=Cr.getPoints(this._geom[0]),i=Cr.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Or.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Or.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Or.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Or.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Wt&&arguments[1]instanceof Jt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var A=st.distancePointLine(i,r[o],r[o+1]);if(A<this._minDistance){this._minDistance=A;var s=new dn(r[o],r[o+1]).closestPoint(i);n[0]=new Ir(t,o,s),n[1]=new Ir(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Wt&&arguments[1]instanceof Wt){var a=arguments[0],u=arguments[1],c=arguments[2];if(a.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this._minDistance)return null;for(var l=a.getCoordinates(),f=u.getCoordinates(),h=0;h<l.length-1;h++)for(var p=0;p<f.length-1;p++){var d=st.distanceLineLine(l[h],l[h+1],f[p],f[p+1]);if(d<this._minDistance){this._minDistance=d;var g=new dn(l[h],l[h+1]),y=new dn(f[p],f[p+1]),v=g.closestPoints(y);c[0]=new Ir(a,h,v[0]),c[1]=new Ir(u,p,v[1])}if(this._minDistance<=this._terminateDistance)return null}}},Or.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var A=e.get(o),s=i.getCoordinate().distance(A.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Ir(i,0,i.getCoordinate()),n[1]=new Ir(A,0,A.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Or.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new v("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Or.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var A=e.get(o);if(this.computeMinDistance(i,A,n),this._minDistance<=this._terminateDistance)return null}},Or.prototype.interfaces_=function(){return[]},Or.prototype.getClass=function(){return Or},Or.distance=function(t,e){return new Or(t,e).distance()},Or.isWithinDistance=function(t,e,n){return new Or(t,e,n).distance()<=n},Or.nearestPoints=function(t,e){return new Or(t,e).nearestPoints()};var Nr=function(){this._pt=[new x,new x],this._distance=m.NaN,this._isNull=!0};Nr.prototype.getCoordinates=function(){return this._pt},Nr.prototype.getCoordinate=function(t){return this._pt[t]},Nr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Nr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Nr.prototype.toString=function(){return K.toLineString(this._pt[0],this._pt[1])},Nr.prototype.getDistance=function(){return this._distance},Nr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr};var Rr=function(){};Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr},Rr.computeDistance=function(){if(arguments[2]instanceof Nr&&arguments[0]instanceof Wt&&arguments[1]instanceof x)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new dn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var A=r.closestPoint(e);n.setMinimum(A,e)}else if(arguments[2]instanceof Nr&&arguments[0]instanceof $t&&arguments[1]instanceof x){var s=arguments[0],a=arguments[1],u=arguments[2];Rr.computeDistance(s.getExteriorRing(),a,u);for(var c=0;c<s.getNumInteriorRing();c++)Rr.computeDistance(s.getInteriorRingN(c),a,u)}else if(arguments[2]instanceof Nr&&arguments[0]instanceof ct&&arguments[1]instanceof x){var l=arguments[0],f=arguments[1],h=arguments[2];if(l instanceof Wt)Rr.computeDistance(l,f,h);else if(l instanceof $t)Rr.computeDistance(l,f,h);else if(l instanceof zt)for(var p=l,d=0;d<p.getNumGeometries();d++){var g=p.getGeometryN(d);Rr.computeDistance(g,f,h)}else h.setMinimum(l.getCoordinate(),f)}else if(arguments[2]instanceof Nr&&arguments[0]instanceof dn&&arguments[1]instanceof x){var y=arguments[1],v=arguments[2],m=arguments[0].closestPoint(y);v.setMinimum(m,y)}};var Dr=function(){this._g0=null,this._g1=null,this._ptDist=new Nr,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Tr={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Dr.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Dr.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new v("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Dr.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Dr.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Dr.prototype.computeOrientedDistance=function(t,e,n){var r=new Lr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new kr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Dr.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.distance=function(){if(2===arguments.length)return new Dr(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Dr(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Tr.MaxPointDistanceFilter.get=function(){return Lr},Tr.MaxDensifiedByFractionDistanceFilter.get=function(){return kr},Object.defineProperties(Dr,Tr);var Lr=function(){this._maxPtDist=new Nr,this._minPtDist=new Nr,this._euclideanDist=new Rr,this._geom=null;var t=arguments[0];this._geom=t};Lr.prototype.filter=function(t){this._minPtDist.initialize(),Rr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Lr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Lr.prototype.interfaces_=function(){return[ht]},Lr.prototype.getClass=function(){return Lr};var kr=function(){this._maxPtDist=new Nr,this._minPtDist=new Nr,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};kr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,A=0;A<this._numSubSegs;A++){var s=n.x+A*i,a=n.y+A*o,u=new x(s,a);this._minPtDist.initialize(),Rr.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},kr.prototype.isDone=function(){return!1},kr.prototype.isGeometryChanged=function(){return!1},kr.prototype.getMaxPointDistance=function(){return this._maxPtDist},kr.prototype.interfaces_=function(){return[Ut]},kr.prototype.getClass=function(){return kr};var Fr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},jr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Fr.prototype.checkMaximumDistance=function(t,e,n){var r=new Dr(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+K.toLineString(i[0],i[1])+")"}},Fr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Fr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Fr.VERBOSE&&Q.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Fr.prototype.checkNegativeValid=function(){if(!(this._input instanceof $t||this._input instanceof ne||this._input instanceof zt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Fr.prototype.getErrorIndicator=function(){return this._errorIndicator},Fr.prototype.checkMinimumDistance=function(t,e,n){var r=new Or(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+K.toLineString(i[0],i[1])+" )"}},Fr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Fr.prototype.getErrorLocation=function(){return this._errorLocation},Fr.prototype.getPolygonLines=function(t){for(var e=new Et,n=new xr(e),r=Er.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Fr.prototype.getErrorMessage=function(){return this._errMsg},Fr.prototype.interfaces_=function(){return[]},Fr.prototype.getClass=function(){return Fr},jr.VERBOSE.get=function(){return!1},jr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Fr,jr);var Br=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Gr={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Br.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Br.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Br.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new V(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new V(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Br.prototype.checkDistance=function(){var t=new Fr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Br.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Br.prototype.checkPolygonal=function(){this._result instanceof $t||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Br.prototype.getErrorIndicator=function(){return this._errorIndicator},Br.prototype.getErrorLocation=function(){return this._errorLocation},Br.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Br.prototype.report=function(t){if(!Br.VERBOSE)return null;Q.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Br.prototype.getErrorMessage=function(){return this._errorMsg},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br},Br.isValidMsg=function(t,e,n){var r=new Br(t,e,n);return r.isValid()?null:r.getErrorMessage()},Br.isValid=function(t,e,n){return!!new Br(t,e,n).isValid()},Gr.VERBOSE.get=function(){return!1},Gr.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Br,Gr);var Ur=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Ur.prototype.getCoordinates=function(){return this._pts},Ur.prototype.size=function(){return this._pts.length},Ur.prototype.getCoordinate=function(t){return this._pts[t]},Ur.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ur.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:ln.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Ur.prototype.setData=function(t){this._data=t},Ur.prototype.getData=function(){return this._data},Ur.prototype.toString=function(){return K.toLineString(new ae(this._pts))},Ur.prototype.interfaces_=function(){return[fn]},Ur.prototype.getClass=function(){return Ur};var zr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Et,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};zr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},zr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},zr.prototype.getIntersectionSegments=function(){return this._intSegments},zr.prototype.count=function(){return this._intersectionCount},zr.prototype.getIntersections=function(){return this._intersections},zr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},zr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},zr.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],A=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,A,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=A,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},zr.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},zr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},zr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},zr.prototype.interfaces_=function(){return[Xn]},zr.prototype.getClass=function(){return zr},zr.createAllIntersectionsFinder=function(t){var e=new zr(t);return e.setFindAllIntersections(!0),e},zr.createAnyIntersectionFinder=function(t){return new zr(t)},zr.createIntersectionCounter=function(t){var e=new zr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var qr=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};qr.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},qr.prototype.getIntersections=function(){return this._segInt.getIntersections()},qr.prototype.isValid=function(){return this.execute(),this._isValid},qr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},qr.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new zr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new wn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},qr.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ce(this.getErrorMessage(),this._segInt.getInteriorIntersection())},qr.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+K.toLineString(t[0],t[1])+" and "+K.toLineString(t[2],t[3])},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr},qr.computeIntersections=function(t){var e=new qr(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Qr=function t(){this._nv=null;var e=arguments[0];this._nv=new qr(t.toSegmentStrings(e))};Qr.prototype.checkValid=function(){this._nv.checkValid()},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},Qr.toSegmentStrings=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Ur(r.getCoordinates(),r))}return e},Qr.checkValid=function(t){new Qr(t).checkValid()};var Hr=function(t){this._mapOp=t};Hr.prototype.map=function(t){for(var e=new Et,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(ye.toGeometryArray(e))},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr},Hr.map=function(t,e){return new Hr(e).map(t)};var Vr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Et,this._resultLineList=new Et;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Vr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Vr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Vr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Vr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ii.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Vr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Vr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Vr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Vr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ii.isResultOfOp(r,e)&&e===Ii.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr};var Yr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Et;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Yr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Yr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Ii.INTERSECTION)){var r=n.getLabel();Ii.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Yr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr};var Xr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Xr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Xr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new Et,o=0;o<t.getNumInteriorRing();o++){var A=this.transformLinearRing(t.getInteriorRingN(o),t);null===A||A.isEmpty()||(A instanceof ee||(n=!1),i.add(A))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new Et;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Xr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Xr.prototype.getInputGeometry=function(){return this._inputGeom},Xr.prototype.transformMultiLineString=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Xr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Xr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Xr.prototype.transformMultiPoint=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Xr.prototype.transformMultiPolygon=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Xr.prototype.copy=function(t){return t.copy()},Xr.prototype.transformGeometryCollection=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ye.toGeometryArray(n)):this._factory.buildGeometry(n)},Xr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Jt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Wt)return this.transformLineString(t,null);if(t instanceof qt)return this.transformMultiLineString(t,null);if(t instanceof $t)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof zt)return this.transformGeometryCollection(t,null);throw new v("Unknown Geometry subtype: "+t.getClass().getName())},Xr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Xr.prototype.interfaces_=function(){return[]},Xr.prototype.getClass=function(){return Xr};var Wr=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new dn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Wt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Wr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new x(o)),0===r&&this._isClosed&&t.set(t.size()-1,new x(o)))}},Wr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Wr.prototype.snapTo=function(t){var e=new St(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Wr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new x(i),!1)}},Wr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=m.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Wr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr},Wr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Zr=function(t){this._srcGeom=t||null},Jr={SNAP_PRECISION_FACTOR:{configurable:!0}};Zr.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Kr(e,n).transform(this._srcGeom)},Zr.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Kr(t,n,!0).transform(this._srcGeom),i=r;return e&&O(i,Kt)&&(i=r.buffer(0)),i},Zr.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Zr.prototype.extractTargetCoordinates=function(t){for(var e=new h,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Zr.prototype.computeMinimumSegmentLength=function(t){for(var e=m.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Zr.prototype.interfaces_=function(){return[]},Zr.prototype.getClass=function(){return Zr},Zr.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Zr(t);r[0]=i.snapTo(e,n);var o=new Zr(e);return r[1]=o.snapTo(r[0],n),r},Zr.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Zr.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===he.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Zr.computeOverlaySnapTolerance(i),Zr.computeOverlaySnapTolerance(o))}},Zr.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Zr.SNAP_PRECISION_FACTOR},Zr.snapToSelf=function(t,e,n){return new Zr(t).snapToSelf(e,n)},Jr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Zr,Jr);var Kr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Wr(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xr),$r=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};$r.prototype.getCommon=function(){return m.longBitsToDouble(this._commonBits)},$r.prototype.add=function(t){var e=m.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=$r.signExpBits(this._commonBits),this._isFirst=!1,null):$r.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=$r.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=$r.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},$r.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=m.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+m.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.getBit=function(t,e){return 0!=(t&1<<e)?1:0},$r.signExpBits=function(t){return t>>52},$r.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},$r.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if($r.getBit(t,r)!==$r.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new x(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new $r,this._commonBitsY=new $r};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new x(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[ht]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[Ut]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new Zr(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ii.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||Q.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=Zr.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return Zr.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,Ii.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Ii.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Ii.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Ii.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Ii.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof $))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof $?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,Ii.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Ii.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Ii.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Ii.DIFFERENCE)};var Ai=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};Ai.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai};var si=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},ai={INSERT:{configurable:!0},DELETE:{configurable:!0}};si.prototype.isDelete=function(){return this._eventType===si.DELETE},si.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},si.prototype.getObject=function(){return this._obj},si.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},si.prototype.getInsertEvent=function(){return this._insertEvent},si.prototype.isInsert=function(){return this._eventType===si.INSERT},si.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},si.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},si.prototype.interfaces_=function(){return[b]},si.prototype.getClass=function(){return si},ai.INSERT.get=function(){return 1},ai.DELETE.get=function(){return 2},Object.defineProperties(si,ai);var ui=function(){};ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui};var ci=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};ci.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(ci.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},ci.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ci.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},ci.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ci.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},ci.prototype.hasProperIntersection=function(){return this._hasProper},ci.prototype.hasIntersection=function(){return this._hasIntersection},ci.prototype.isDone=function(){return this._isDone},ci.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},ci.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},ci.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],A=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,A,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var li=function(t){function e(){t.call(this),this.events=new Et,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){$e.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof ci&&O(arguments[0],wt)&&O(arguments[1],wt)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&O(arguments[0],wt)&&arguments[1]instanceof ci){var A=arguments[0],s=arguments[1];arguments[2]?this.addEdges(A,null):this.addEdges(A),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new Ai(n,i),A=new si(e,n.getMinX(i),o);this.events.add(A),this.events.add(new si(n.getMaxX(i),A))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var A=this.events.get(o);if(A.isInsert()){var s=A.getObject();n.isSameLabel(A)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ui),fi=function(){this._min=m.POSITIVE_INFINITY,this._max=m.NEGATIVE_INFINITY},hi={NodeComparator:{configurable:!0}};fi.prototype.getMin=function(){return this._min},fi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},fi.prototype.getMax=function(){return this._max},fi.prototype.toString=function(){return K.toLineString(new x(this._min,0),new x(this._max,0))},fi.prototype.interfaces_=function(){return[]},fi.prototype.getClass=function(){return fi},hi.NodeComparator.get=function(){return pi},Object.defineProperties(fi,hi);var pi=function(){};pi.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},pi.prototype.interfaces_=function(){return[E]},pi.prototype.getClass=function(){return pi};var di=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fi),gi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fi),yi=function(){this._leaves=new Et,this._root=null,this._level=0};yi.prototype.buildTree=function(){$e.sort(this._leaves,new fi.NodeComparator);for(var t=this._leaves,e=null,n=new Et;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},yi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new di(t,e,n))},yi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},yi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},yi.prototype.printNode=function(t){Q.out.println(K.toLineString(new x(t._min,this._level),new x(t._max,this._level)))},yi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},yi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new gi(t.get(n),t.get(n+1));e.add(i)}}},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi};var vi=function(){this._items=new Et};vi.prototype.visitItem=function(t){this._items.add(t)},vi.prototype.getItems=function(){return this._items},vi.prototype.interfaces_=function(){return[We]},vi.prototype.getClass=function(){return vi};var mi=function(){this._index=null;var t=arguments[0];if(!O(t,Kt))throw new v("Argument must be Polygonal");this._index=new wi(t)},_i={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};mi.prototype.locate=function(t){var e=new At(t),n=new bi(e);return this._index.query(t.y,t.y,n),e.getLocation()},mi.prototype.interfaces_=function(){return[Gn]},mi.prototype.getClass=function(){return mi},_i.SegmentVisitor.get=function(){return bi},_i.IntervalIndexedGeometry.get=function(){return wi},Object.defineProperties(mi,_i);var bi=function(){this._counter=null;var t=arguments[0];this._counter=t};bi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},bi.prototype.interfaces_=function(){return[We]},bi.prototype.getClass=function(){return bi};var wi=function(){this._index=new yi;var t=arguments[0];this.init(t)};wi.prototype.init=function(t){for(var e=xr.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wi.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new dn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},wi.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new vi;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var Ei=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new fe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Sr,2===arguments.length){var e=arguments[0],n=arguments[1],r=pt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],A=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=A,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,Se.ON)===C.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new ci(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),A=this._parentGeom instanceof ee||this._parentGeom instanceof $t||this._parentGeom instanceof ne,s=n||!A;return o.computeIntersections(this._edges,i,s),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new ci(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Jt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,C.INTERIOR)}else if(arguments[0]instanceof x){var e=arguments[0];this.insertPoint(this._argIndex,e,C.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),C.EXTERIOR,C.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,C.INTERIOR,C.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],C.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],C.BOUNDARY)},e.prototype.addLineString=function(t){var e=It.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Re(this._argIndex,C.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===C.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=It.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;st.isCCW(r)&&(i=n,o=e);var A=new nr(r,new Re(this._argIndex,C.BOUNDARY,i,o));this._lineEdgeMap.put(t,A),this.insertEdge(A),this.insertPoint(this._argIndex,r[0],C.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Re(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new li},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof $t)this.addPolygon(e);else if(e instanceof Wt)this.addLineString(e);else if(e instanceof Jt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof qt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof zt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return O(this._parentGeom,Kt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new mi(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?C.BOUNDARY:C.INTERIOR},e}(Qe),xi=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ei(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=pt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ei(0,e,r),this._arg[1]=new Ei(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],A=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ei(0,i,A),this._arg[1]=new Ei(1,o,A)}};xi.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},xi.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},xi.prototype.interfaces_=function(){return[]},xi.prototype.getClass=function(){return xi};var Si=function(){};Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si},Si.map=function(){if(arguments[0]instanceof ct&&O(arguments[1],Si.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Et,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(O(arguments[0],_t)&&O(arguments[1],Si.MapOp)){for(var o=arguments[0],A=arguments[1],s=new Et,a=o.iterator();a.hasNext();){var u=a.next(),c=A.map(u);null!==c&&s.add(c)}return s}},Si.MapOp=function(){};var Ii=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Sr,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Yn,this._resultPolyList=new Et,this._resultLineList=new Et,this._resultPointList=new Et,this._graph=new Qe(new Hn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Re(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new Et;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==C.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Et,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Et;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Qr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new He(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Vr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Yr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Se.RIGHT),i.getLocation(1,Se.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Se.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Se.LEFT,r.getLocation(i,Se.LEFT)),et.isTrue(!r.isNull(i,Se.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Se.RIGHT,r.getLocation(i,Se.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(xi);Ii.overlayOp=function(t,e,n){return new Ii(t,e).getResultGeometry(n)},Ii.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ii.createEmptyResult(Ii.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Hr.map(t,{interfaces_:function(){return[Si.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ii.INTERSECTION)},Ii.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ii.createEmptyResult(Ii.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ii.SYMDIFFERENCE)},Ii.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Ii.INTERSECTION:o=Math.min(r,i);break;case Ii.UNION:o=Math.max(r,i);break;case Ii.DIFFERENCE:o=r;break;case Ii.SYMDIFFERENCE:o=Math.max(r,i)}return o},Ii.createEmptyResult=function(t,e,n,r){var i=null;switch(Ii.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Ii.difference=function(t,e){return t.isEmpty()?Ii.createEmptyResult(Ii.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ii.DIFFERENCE))},Ii.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Ii.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],A=arguments[2];switch(i===C.BOUNDARY&&(i=C.INTERIOR),o===C.BOUNDARY&&(o=C.INTERIOR),A){case Ii.INTERSECTION:return i===C.INTERIOR&&o===C.INTERIOR;case Ii.UNION:return i===C.INTERIOR||o===C.INTERIOR;case Ii.DIFFERENCE:return i===C.INTERIOR&&o!==C.INTERIOR;case Ii.SYMDIFFERENCE:return i===C.INTERIOR&&o!==C.INTERIOR||i!==C.INTERIOR&&o===C.INTERIOR}return!1}},Ii.INTERSECTION=1,Ii.UNION=2,Ii.DIFFERENCE=3,Ii.SYMDIFFERENCE=4;var Mi=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Sr,this._seg=new dn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Mi.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Mi.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?C.BOUNDARY:this._ptLocator.locate(t,this._g)},Mi.prototype.extractLinework=function(t){var e=new Ci;t.apply(e);var n=e.getLinework(),r=ye.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi};var Ci=function(){this._linework=null,this._linework=new Et};Ci.prototype.getLinework=function(){return this._linework},Ci.prototype.filter=function(t){if(t instanceof $t){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Ci.prototype.interfaces_=function(){return[Gt]},Ci.prototype.getClass=function(){return Ci};var Pi=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Pi.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Pi.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Pi.prototype.getPoints=function(t){for(var e=new Et,n=xr.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Pi.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,A=Math.sqrt(i*i+o*o),s=n*i/A,a=n*o/A,u=(e.x+t.x)/2,c=(e.y+t.y)/2;if(this._doLeft){var l=new x(u-a,c+s);r.add(l)}if(this._doRight){var f=new x(u+a,c-s);r.add(f)}},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi};var Oi=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Et;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Mi(this._geom[0],this._boundaryDistanceTolerance),new Mi(this._geom[1],this._boundaryDistanceTolerance),new Mi(this._geom[2],this._boundaryDistanceTolerance)]},Ni={TOLERANCE:{configurable:!0}};Oi.prototype.reportResult=function(t,e,n){Q.out.println("Overlay result invalid - A:"+C.toLocationSymbol(e[0])+" B:"+C.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+C.toLocationSymbol(e[2]))},Oi.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Oi.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Oi.hasLocation(this._location,C.BOUNDARY)||this.isValidResult(r,this._location)}},Oi.prototype.addTestPts=function(t){var e=new Pi(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Oi.prototype.isValidResult=function(t,e){var n=Ii.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===C.INTERIOR);return r||this.reportResult(t,e,n),r},Oi.prototype.getInvalidLocation=function(){return this._invalidLocation},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Oi.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Oi.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Zr.computeSizeBasedSnapTolerance(t),Zr.computeSizeBasedSnapTolerance(e))},Oi.isValid=function(t,e,n,r){return new Oi(t,e,r).isValid(n)},Ni.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Oi,Ni);var Ri=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Ri.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Ri.prototype.combine=function(){for(var t=new Et,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.combine=function(){if(1===arguments.length)return new Ri(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Ri(Ri.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Ri(Ri.createList(n,r,i)).combine()}},Ri.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Ri.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Et;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],A=new Et;return A.add(r),A.add(i),A.add(o),A}};var Di=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Et)},Ti={STRTREE_NODE_CAPACITY:{configurable:!0}};Di.prototype.reduceToGeometries=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next(),i=null;O(r,wt)?i=this.unionTree(r):r instanceof ct&&(i=r),e.add(i)}return e},Di.prototype.extractByEnvelope=function(t,e,n){for(var r=new Et,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Di.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Ri.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Di.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new An(Di.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Di.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Di.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Di.getGeometry(e,n),Di.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),A=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(A,s)}},Di.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Di.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Di.prototype.unionActual=function(t,e){return Di.restrictToPolygons(t.union(e))},Di.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Di.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Et,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),A=this.unionActual(i,o);return r.add(A),Ri.combine(r)},Di.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di},Di.restrictToPolygons=function(t){if(O(t,Kt))return t;var e=Er.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ye.toPolygonArray(e))},Di.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Di.union=function(t){return new Di(t).union()},Ti.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Di,Ti);var Li=function(){};Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ii.createEmptyResult(Ii.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ii.UNION)},t.GeoJSONReader=Ee,t.GeoJSONWriter=xe,t.OverlayOp=Ii,t.UnionOp=Li,t.BufferOp=dr,Object.defineProperty(t,"__esModule",{value:!0})}(e)},2004:(t,e,n)=>{"use strict";n.r(e),n.d(e,{WebMercatorViewport:()=>T,addMetersToLngLat:()=>w,altitudeToFovy:()=>I,default:()=>T,fitBounds:()=>O,flyToViewport:()=>j,fovyToAltitude:()=>M,getBounds:()=>R,getDistanceScales:()=>b,getFlyToDuration:()=>B,getMeterZoom:()=>_,getProjectionMatrix:()=>S,getProjectionParameters:()=>x,getViewMatrix:()=>E,lngLatToWorld:()=>v,normalizeViewportProps:()=>L,pixelsToWorld:()=>P,scaleToZoom:()=>y,worldToLngLat:()=>m,worldToPixels:()=>C,zoomToScale:()=>g});var r=n(8333);function i(t,e){const n=r.fF([],e,t);return r.bA(n,n,1/n[3]),n}function o(t,e){const n=t%e;return n<0?e+n:n}const A=Math.log2||function(t){return Math.log(t)*Math.LOG2E};var s=n(5975),a=n(1437),u=n(7160);function c(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const l=Math.PI,f=l/4,h=l/180,p=180/l,d=512;function g(t){return Math.pow(2,t)}function y(t){return A(t)}function v([t,e]){c(Number.isFinite(t)),c(Number.isFinite(e)&&e>=-90&&e<=90,"invalid latitude");const n=e*h;return[d*(t*h+l)/(2*l),d*(l+Math.log(Math.tan(f+.5*n)))/(2*l)]}function m([t,e]){const n=t/d*(2*l)-l,r=2*(Math.atan(Math.exp(e/d*(2*l)-l))-f);return[n*p,r*p]}function _({latitude:t}){c(Number.isFinite(t));return y(4003e4*Math.cos(t*h))-9}function b({latitude:t,longitude:e,highPrecision:n=!1}){c(Number.isFinite(t)&&Number.isFinite(e));const r={},i=Math.cos(t*h),o=512/360,A=o/i,s=12790407194604047e-21/i;if(r.unitsPerMeter=[s,s,s],r.metersPerUnit=[1/s,1/s,1/s],r.unitsPerDegree=[o,A,s],r.degreesPerUnit=[.703125,1/A,1/s],n){const e=h*Math.tan(t*h)/i,n=o*e/2,a=12790407194604047e-21*e,u=a/A*s;r.unitsPerDegree2=[0,n,a],r.unitsPerMeter2=[u,0,u]}return r}function w(t,e){const[n,r,i]=t,[o,A,s]=e,{unitsPerMeter:a,unitsPerMeter2:u}=b({longitude:n,latitude:r,highPrecision:!0}),c=v(t);c[0]+=o*(a[0]+u[0]*A),c[1]+=A*(a[1]+u[1]*A);const l=m(c),f=(i||0)+(s||0);return Number.isFinite(i)||Number.isFinite(s)?[l[0],l[1],f]:l}function E({height:t,pitch:e,bearing:n,altitude:r,scale:i,center:o=null}){const A=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return s.Iu(A,A,[0,0,-r]),s.lM(A,A,-e*h),s.jI(A,A,n*h),i/=t,s.bA(A,A,[i,i,i]),o&&s.Iu(A,A,u.tk([],o)),A}function x({width:t,height:e,fovy:n=I(1.5),altitude:r,pitch:i=0,nearZMultiplier:o=1,farZMultiplier:A=1}){void 0!==r&&(n=I(r));const s=.5*n*h,a=M(n),u=i*h,c=Math.sin(s)*a/Math.sin(Math.min(Math.max(Math.PI/2-u-s,.01),Math.PI-.01));return{fov:2*s,aspect:t/e,focalDistance:a,near:o,far:(Math.sin(u)*c+a)*A}}function S({width:t,height:e,pitch:n,altitude:r,fovy:i,nearZMultiplier:o,farZMultiplier:A}){const{fov:a,aspect:u,near:c,far:l}=x({width:t,height:e,altitude:r,fovy:i,pitch:n,nearZMultiplier:o,farZMultiplier:A});return s.G3([],a,u,c,l)}function I(t){return 2*Math.atan(.5/t)*p}function M(t){return.5/Math.tan(.5*t*h)}function C(t,e){const[n,r,o=0]=t;return c(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(o)),i(e,[n,r,o,1])}function P(t,e,n=0){const[r,o,A]=t;if(c(Number.isFinite(r)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(A))return i(e,[r,o,A,1]);const s=i(e,[r,o,0,1]),u=i(e,[r,o,1,1]),l=s[2],f=u[2],h=l===f?0:((n||0)-l)/(f-l);return a.t7([],s,u,h)}function O({width:t,height:e,bounds:n,minExtent:r=0,maxZoom:i=24,padding:o=0,offset:s=[0,0]}){const[[a,u],[l,f]]=n;Number.isFinite(o)?o={top:o,bottom:o,left:o,right:o}:c(Number.isFinite(o.top)&&Number.isFinite(o.bottom)&&Number.isFinite(o.left)&&Number.isFinite(o.right));const h=new T({width:t,height:e,longitude:0,latitude:0,zoom:0}),p=h.project([a,f]),d=h.project([l,u]),g=[Math.max(Math.abs(d[0]-p[0]),r),Math.max(Math.abs(d[1]-p[1]),r)],y=[t-o.left-o.right-2*Math.abs(s[0]),e-o.top-o.bottom-2*Math.abs(s[1])];c(y[0]>0&&y[1]>0);const v=y[0]/g[0],m=y[1]/g[1],_=(o.right-o.left)/2/v,b=(o.bottom-o.top)/2/m,w=[(d[0]+p[0])/2+_,(d[1]+p[1])/2+b],E=h.unproject(w),x=Math.min(i,h.zoom+A(Math.abs(Math.min(v,m))));return c(Number.isFinite(x)),{longitude:E[0],latitude:E[1],zoom:x}}const N=Math.PI/180;function R(t,e=0){const{width:n,height:r,unproject:i}=t,o={targetZ:e},A=i([0,r],o),s=i([n,r],o);let a,u;return(t.fovy?.5*t.fovy*N:Math.atan(.5/t.altitude))>(90-t.pitch)*N-.01?(a=D(t,0,e),u=D(t,n,e)):(a=i([0,0],o),u=i([n,0],o)),[A,s,u,a]}function D(t,e,n){const{pixelUnprojectionMatrix:r}=t,o=i(r,[e,0,1,1]),A=i(r,[e,t.height,1,1]),s=(n*t.distanceScales.unitsPerMeter[2]-o[2])/(A[2]-o[2]),u=m(a.t7([],o,A,s));return u[2]=n,u}class T{constructor({width:t,height:e,latitude:n=0,longitude:r=0,zoom:i=0,pitch:o=0,bearing:A=0,altitude:s=null,fovy:a=null,position:c=null,nearZMultiplier:l=.02,farZMultiplier:f=1.01}={width:1,height:1}){t=t||1,e=e||1,null===a&&null===s?a=I(s=1.5):null===a?a=I(s):null===s&&(s=M(a));const h=g(i);s=Math.max(.75,s);const p=b({longitude:r,latitude:n}),d=v([r,n]);d[2]=0,c&&u.IH(d,d,u.dC([],c,p.unitsPerMeter)),this.projectionMatrix=S({width:t,height:e,pitch:o,fovy:a,nearZMultiplier:l,farZMultiplier:f}),this.viewMatrix=E({height:e,scale:h,center:d,pitch:o,bearing:A,altitude:s}),this.width=t,this.height=e,this.scale=h,this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=o,this.bearing=A,this.altitude=s,this.fovy=a,this.center=d,this.meterOffset=c||[0,0,0],this.distanceScales=p,this._initMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),Object.freeze(this)}_initMatrices(){const{width:t,height:e,projectionMatrix:n,viewMatrix:r}=this,i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];s.Jp(i,i,n),s.Jp(i,i,r),this.viewProjectionMatrix=i;const o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];s.bA(o,o,[t/2,-e/2,1]),s.Iu(o,o,[1,-1,0]),s.Jp(o,o,i);const A=s.U_([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o);if(!A)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=o,this.pixelUnprojectionMatrix=A}equals(t){return t instanceof T&&t.width===this.width&&t.height===this.height&&s.fS(t.projectionMatrix,this.projectionMatrix)&&s.fS(t.viewMatrix,this.viewMatrix)}project(t,{topLeft:e=!0}={}){const n=C(this.projectPosition(t),this.pixelProjectionMatrix),[r,i]=n,o=e?i:this.height-i;return 2===t.length?[r,o]:[r,o,n[2]]}unproject(t,{topLeft:e=!0,targetZ:n}={}){const[r,i,o]=t,A=e?i:this.height-i,s=n&&n*this.distanceScales.unitsPerMeter[2],a=P([r,A,o],this.pixelUnprojectionMatrix,s),[u,c,l]=this.unprojectPosition(a);return Number.isFinite(o)?[u,c,l]:Number.isFinite(n)?[u,c,n]:[u,c]}projectPosition(t){const[e,n]=v(t);return[e,n,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(t){const[e,n]=m(t);return[e,n,(t[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(t){return v(t)}unprojectFlat(t){return m(t)}getMapCenterByLngLatPosition({lngLat:t,pos:e}){const n=P(e,this.pixelUnprojectionMatrix),r=v(t),i=a.IH([],r,a.tk([],n));return m(a.IH([],this.center,i))}getLocationAtPoint({lngLat:t,pos:e}){return this.getMapCenterByLngLatPosition({lngLat:t,pos:e})}fitBounds(t,e={}){const{width:n,height:r}=this,{longitude:i,latitude:o,zoom:A}=O(Object.assign({width:n,height:r,bounds:t},e));return new T({width:n,height:r,longitude:i,latitude:o,zoom:A})}getBounds(t){const e=this.getBoundingRegion(t),n=Math.min(...e.map((t=>t[0]))),r=Math.max(...e.map((t=>t[0])));return[[n,Math.min(...e.map((t=>t[1])))],[r,Math.max(...e.map((t=>t[1])))]]}getBoundingRegion(t={}){return R(this,t.z||0)}}function L({width:t,height:e,longitude:n,latitude:r,zoom:i,pitch:s=0,bearing:a=0}){(n<-180||n>180)&&(n=o(n+180,360)-180),(a<-180||a>180)&&(a=o(a+180,360)-180);const u=A(e/512);if(i<=u)i=u,r=0;else{const t=e/2/Math.pow(2,i),n=m([0,t])[1];if(r<n)r=n;else{const e=m([0,512-t])[1];r>e&&(r=e)}}return{width:t,height:e,longitude:n,latitude:r,zoom:i,pitch:s,bearing:a}}const k=["longitude","latitude","zoom"],F={curve:1.414,speed:1.2};function j(t,e,n,r={}){const i={},{startZoom:o,startCenterXY:A,uDelta:s,w0:u,u1:c,S:l,rho:f,rho2:h,r0:p}=G(t,e,r);if(c<.01){for(const r of k){const o=t[r],A=e[r];i[r]=(d=n)*A+(1-d)*o}return i}var d;const g=n*l,v=Math.cosh(p)/Math.cosh(p+f*g),_=u*((Math.cosh(p)*Math.tanh(p+f*g)-Math.sinh(p))/h)/c,b=o+y(1/v),w=a.bA([],s,_);a.IH(w,w,A);const E=m(w);return i.longitude=E[0],i.latitude=E[1],i.zoom=b,i}function B(t,e,n={}){n=Object.assign({},F,n);const{screenSpeed:r,speed:i,maxDuration:o}=n,{S:A,rho:s}=G(t,e,n),a=1e3*A;let u;return u=Number.isFinite(r)?a/(r/s):a/i,Number.isFinite(o)&&u>o?0:u}function G(t,e,n){const r=(n=Object.assign({},F,n)).curve,i=t.zoom,o=[t.longitude,t.latitude],A=g(i),s=e.zoom,u=[e.longitude,e.latitude],c=g(s-i),l=v(o),f=v(u),h=a.lu([],f,l),p=Math.max(t.width,t.height),d=p/c,y=a.kE(h)*A,m=Math.max(y,.01),_=r*r,b=(d*d-p*p+_*_*m*m)/(2*p*_*m),w=(d*d-p*p-_*_*m*m)/(2*d*_*m),E=Math.log(Math.sqrt(b*b+1)-b),x=Math.log(Math.sqrt(w*w+1)-w);return{startZoom:i,startCenterXY:l,uDelta:h,w0:p,u1:y,S:(x-E)/r,rho:r,rho2:_,r0:E,r1:x}}},3931:t=>{"use strict";t.exports=deck},6200:t=>{"use strict";t.exports=luma}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t=n(9900),e=n(7359);function r(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var A=e[i][0],s=e[i][1],a=e[o][0],u=e[o][1];if(t[1]*(A-a)+s*(a-t[0])+u*(t[0]-A)==0&&(A-t[0])*(a-t[0])<=0&&(s-t[1])*(u-t[1])<=0)return!n;s>t[1]!=u>t[1]&&t[0]<(a-A)*(t[1]-s)/(u-s)+A&&(r=!r)}return r}function i(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function o(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function A(){}n(2044);var s=.7,a=1/s,u="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f=/^#([0-9a-f]{3,8})$/,h=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),p=new RegExp("^rgb\\("+[l,l,l]+"\\)$"),d=new RegExp("^rgba\\("+[u,u,u,c]+"\\)$"),g=new RegExp("^rgba\\("+[l,l,l,c]+"\\)$"),y=new RegExp("^hsl\\("+[c,l,l]+"\\)$"),v=new RegExp("^hsla\\("+[c,l,l,c]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _(){return this.rgb().formatHex()}function b(){return this.rgb().formatRgb()}function w(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=f.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?E(e):3===n?new I(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?x(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?x(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=h.exec(t))?new I(e[1],e[2],e[3],1):(e=p.exec(t))?new I(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=d.exec(t))?x(e[1],e[2],e[3],e[4]):(e=g.exec(t))?x(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=y.exec(t))?O(e[1],e[2]/100,e[3]/100,1):(e=v.exec(t))?O(e[1],e[2]/100,e[3]/100,e[4]):m.hasOwnProperty(t)?E(m[t]):"transparent"===t?new I(NaN,NaN,NaN,0):null}function E(t){return new I(t>>16&255,t>>8&255,255&t,1)}function x(t,e,n,r){return r<=0&&(t=e=n=NaN),new I(t,e,n,r)}function S(t){return t instanceof A||(t=w(t)),t?new I((t=t.rgb()).r,t.g,t.b,t.opacity):new I}function I(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function M(){return"#"+P(this.r)+P(this.g)+P(this.b)}function C(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function P(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function O(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new R(t,e,n,r)}function N(t){if(t instanceof R)return new R(t.h,t.s,t.l,t.opacity);if(t instanceof A||(t=w(t)),!t)return new R;if(t instanceof R)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(s=e===o?(n-r)/a+6*(n<r):n===o?(r-e)/a+2:(e-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new R(s,a,u,t.opacity)}function R(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function D(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}i(A,w,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:_,formatHex:_,formatHsl:function(){return N(this).formatHsl()},formatRgb:b,toString:b}),i(I,(function(t,e,n,r){return 1===arguments.length?S(t):new I(t,e,n,null==r?1:r)}),o(A,{brighter:function(t){return t=null==t?a:Math.pow(a,t),new I(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?s:Math.pow(s,t),new I(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M,formatHex:M,formatRgb:C,toString:C})),i(R,(function(t,e,n,r){return 1===arguments.length?N(t):new R(t,e,n,null==r?1:r)}),o(A,{brighter:function(t){return t=null==t?a:Math.pow(a,t),new R(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?s:Math.pow(s,t),new R(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new I(D(t>=240?t-240:t+120,i,r),D(t,i,r),D(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const T="picker-widget-ctrl-group",L=function(){const t=["Δ"];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),k={target:[0,0,0],minZoom:0,maxZoom:10,zoom:0},F=t=>{const e=w(t);return[e.r,e.g,e.b,255*e.opacity]};function j(t){const e=document.createElement("div");return e.classList.add(T,"picker-widget-ctrl-bottom-right"),t.appendChild(e),e}function B(t){var e="";return t&&(e=`\n        <div class="legend scale">\n            <div class="gradient" style="background-image: linear-gradient(${t.colorHigh}, ${t.colorLow});"></div>\n            <div class="range">\n                <div>${t.high}</div>\n                <div>${t.low}</div>\n            </div>\n        </div>\n        `),e}const G=(t,e,n)=>{const r=document.createElement("div");return r.classList.add("picker-widget-ctrl"),n&&(r.style.cssText=n),r.innerHTML=t,e.appendChild(r),r},U=(t,e,n)=>{var r;return function(){var i=this,o=arguments,A=function(){r=null,n||t.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(A,e),s&&t.apply(i,o)}},z=(t,e,n,r,i)=>{var o=(e[1]-e[0])/(r[1]-r[0]),A=(n[1]-n[0])/(i[1]-i[0]);return t.map((t=>({...t,x:o*(t.x-r[0])+e[0],y:A*(t.y-i[0])+n[0]})))},q=(t,e,n,r,i)=>{var o=(e[1]-e[0])/(r[1]-r[0]),A=(n[1]-n[0])/(i[1]-i[0]);return t.map((t=>({...t,x1:o*(t.x1-r[0])+e[0],x2:o*(t.x2-r[0])+e[0],y1:A*(t.y1-i[0])+n[0],y2:A*(t.y2-i[0])+n[0]})))},Q=t=>t.map((t=>({...t,contour:[[t.x1,t.y1],[t.x1,t.y2],[t.x2,t.y2],[t.x2,t.y1]]}))),{Deck:H,OrthographicView:V,COORDINATE_SYSTEM:Y,ScatterplotLayer:X,TextLayer:W,PolygonLayer:Z}=deck;HTMLWidgets.widget({name:"picker",type:"output",factory:function(n,i,o){var A,s,a,u,c,l,f,h,p,d,g,y,v;const m=(t,e)=>{HTMLWidgets.shinyMode&&Shiny.onInputChange(n.id+e,t)},_=({isDragging:t})=>t?"grabbing":"default",b=()=>"cell";var w=(t,{index:e})=>O.colors[e],E=_,x=e.ViewMode;const S=(t=>{const e=document.createElement("div");return e.classList.add(T,"picker-widget-ctrl-top-right","no-pointer"),t.appendChild(e),e})(n),I=G('<button class="btn-picker"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path fill="none" d="M0 0h24v24H0V0z"/>\n    <path d="M21 3L3 10.53v.98l6.84 2.65L12.48 21h.98L21 3z"/>\n</svg>\n</button>',S),M=G('<button class="btn-picker"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24">\n  <g transform="translate(0,3)">\n    <path\n      style="stroke-width:0.343565"\n      d="M 23.942314,4.6958443 C 23.446206,1.8868581 19.727461,0 14.687364,0 13.437819,0 12.150138,0.11543779 10.859708,0.34287772 4.1629423,1.5250844 -0.58168816,5.2884937 0.05768601,8.911385 c 0.25355086,1.439193 1.35605049,2.63583 3.04638949,3.461072 -0.2569865,0.387198 -0.4074679,0.826617 -0.4074679,1.29524 0,1.337498 1.1863293,2.457176 2.7639791,2.728248 l -1.3615475,2.333149 c -0.1576963,0.271073 -0.066308,0.61876 0.2047647,0.776457 0.090014,0.05291 0.1886171,0.07799 0.2858459,0.07799 0.1951448,0 0.3851362,-0.100665 0.4912977,-0.281723 l 1.6803757,-2.88148 C 8.41868,16.20561 9.6895264,15.063601 9.6998333,13.683844 c 6.872e-4,-0.0055 0.00137,-0.01065 0.00137,-0.01615 0,-0.02336 -0.00344,-0.04569 -0.00481,-0.06837 1.1292977,-0.0213 2.2847067,-0.130211 3.4435507,-0.334975 6.69711,-1.181863 11.44174,-4.9456164 10.802366,-8.5685077 z M 3.83312,13.667353 c 0,-0.30749 0.1281497,-0.59849 0.3470005,-0.848261 0.1219655,0.04295 0.2456489,0.08383 0.3717372,0.123339 l 1.2234344,2.352045 C 4.6865351,15.149835 3.83312,14.46408 3.83312,13.667353 Z M 7.0141869,15.216144 6.0223152,13.309702 5.4008064,12.114097 c 0.121622,-0.03161 0.2477103,-0.05634 0.3772342,-0.07387 0.1367388,-0.0189 0.2772568,-0.02886 0.420867,-0.02886 0.5067581,0 0.980534,0.11956 1.3701366,0.317454 0.5696305,0.289968 0.9554538,0.750345 0.9904974,1.262944 0.00137,0.02542 0.0055,0.05016 0.0055,0.07593 0,0.698124 -0.6562089,1.310356 -1.5508518,1.548447 z m 5.9185921,-3.126441 c -1.217251,0.214728 -2.429691,0.323982 -3.6060571,0.324669 -0.5765018,-0.911821 -1.7614569,-1.53917 -3.1278143,-1.53917 -0.4717146,0 -0.921441,0.07593 -1.332001,0.211292 -0.3061162,0.100665 -0.5878394,0.237403 -0.8427645,0.39991 C 2.4598914,10.828133 1.4360682,9.8579062 1.2319907,8.7035283 0.72660678,5.8381974 5.2307418,2.5475333 11.067221,1.5175259 c 1.222061,-0.2161023 2.439998,-0.3246688 3.620143,-0.3246688 4.371863,0 7.694479,1.5250844 8.080645,3.7101568 0.505041,2.8653309 -3.998751,6.1566821 -9.83523,7.1866891 z"\n      id="path10" />\n  </g>\n</svg>\n</button>',S),C=G('<button class="btn-picker"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 22 22">\n    <path d="m432.71 528.79l8.434 4.217-8.434 4.217-8.435-4.217 8.435-4.217m0 9.968l-6.083-3.042-2.351 1.176 8.435 4.217 8.434-4.217-2.351-1.176-6.083 3.042m0 3.681l-6.083-3.042-2.351 1.176 8.435 4.217 8.434-4.217-2.351-1.176-6.083 3.042" fill="#4d4d4d" transform="translate(-421.71-525.79)"/>\n</svg></button>',S);I.addEventListener("click",(()=>{I.firstElementChild.classList.add("active"),M.firstElementChild.classList.remove("active"),x=e.ViewMode,E=_,N()})),M.addEventListener("click",(()=>{M.firstElementChild.classList.add("active"),I.firstElementChild.classList.remove("active"),x=e.DrawPolygonByDraggingMode,E=b,N()})),C.addEventListener("click",(()=>{C.firstElementChild.classList.toggle("active"),O.showGrid=!O.showGrid,O.showGrid&&null!==h?(w=F(h),O.colors=h,v.style.display="block",O.scaleLegend.style.display="none"):(O.colors=O.origColors,w=(t,{index:e})=>O.colors[e],v.style.display="none",O.scaleLegend.style.display="block"),m(O.showGrid,"_show_grid"),N()})),I.firstElementChild.classList.add("active");var P={type:"FeatureCollection",features:[]};const O=new H({initialViewState:k,parent:n,views:new V({flipY:!1}),controller:!0,useDevicePixels:2,onViewStateChange:({viewState:t})=>{var{zoom:e,target:n}=t;return 0===e&&(n=[0,0]),t.target=n,m({zoom:e,target:n},"_view_state"),t}});O.grid=C,O.showGrid=!1;const N=()=>{const e=[new X({id:"scatterplot",data:s,coordinateSystem:Y.CARTESIAN,getPosition:t=>[t.x,t.y],getFillColor:w,updateTriggers:{getFillColor:O.colors,getTooltip:O.labels,getPosition:s},getPointRadius:1,pickable:!0,opacity:.8,stroked:!0,filled:!0,radiusScale:1,getLineColor:[51,51,51,100],radiusMinPixels:3,radiusMaxPixels:20,lineWidthMinPixels:1,lineWidthMaxPixels:0,...p}),new Z({id:"polygons",data:O.contours,coordinateSystem:Y.CARTESIAN,pickable:!1,stroked:!0,filled:!0,wireframe:!0,visible:O.showGrid,lineWidthMinPixels:1,lineWidthMaxPixels:0,getLineColor:[221,221,221,255],getLineWidth:1,getPolygon:t=>t.contour,getFillColor:t=>t.color,...y}),new t.nk({id:"nebula",data:P,selectedFeatureIndexes:[],mode:x,onEdit:({updatedData:t,editType:e})=>{if("addFeature"===e){const{coordinates:e}=t.features[0].geometry,n=function(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var A=0;A<o[o.length-1].length;A++)if(o[o.length-1][A]!==o[0][A])throw new Error("First and last Position are not equivalent.")}return function(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}({type:"Polygon",coordinates:t},e,n)}(e),i=s.reduce(((t,e,i)=>function(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i,o=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),A="Feature"===(i=e).type?i.geometry:i,s=A.type,a=e.bbox,u=A.coordinates;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(o,a))return!1;"Polygon"===s&&(u=[u]);for(var c=!1,l=0;l<u.length&&!c;l++)if(r(o,u[l][0],n.ignoreBoundary)){for(var f=!1,h=1;h<u[l].length&&!f;)r(o,u[l][h],!n.ignoreBoundary)&&(f=!0),h++;f||(c=!0)}return c}([e.x,e.y],n)?t.concat(i):t),[]);m(i,"_selected_points")}},filled:!0,pointRadiusMinPixels:2,pointRadiusScale:2e3,extruded:!0,getElevation:1e3,getFillColor:[200,0,80,180],_subLayerProps:{guides:{pointRadiusMinPixels:2,pointRadiusMaxPixels:2}},pickable:!0,autoHighlight:!0,coordinateSystem:Y.CARTESIAN}),new W({data:O.scaledLabelCoords,getPosition:t=>[t.x,t.y],getText:t=>t.label,getSize:14,background:!0,getBackgroundColor:[255,255,255,100],fontFamily:"Helvetica, Arial, sans-serif",getTextAnchor:"middle",getAlignmentBaseline:"center",getColor:[51,51,51],characterSet:L,...d})];O.setProps({layers:e,getCursor:E,getTooltip:({index:t})=>t&&O.labels[t],...g})};return HTMLWidgets.shinyMode&&Shiny.addCustomMessageHandler("proxythis",(function(t){const e=(n=t.id,HTMLWidgets.find("#"+n));var n;if(null==e)return;const r=e.getDeck(),{xTo:i,yTo:o,xFrom:A,yFrom:s}=r;if(null!==t.initialViewState&&r.setProps({initialViewState:{...k,...t.initialViewState}}),null!==t.colors&&(r.colors=r.origColors=t.colors.map((t=>F(t))),r.render()),null!==t.labelCoords&&(r.labelCoords=HTMLWidgets.dataframeToD3(t.labelCoords),r.scaledLabelCoords=z(r.labelCoords,i,o,A,s),r.render()),null!==t.polygons){t.polygons.color=t.polygons.color.map((t=>F(t))),r.polygons=HTMLWidgets.dataframeToD3(t.polygons);const e=q(r.polygons,i,o,A,s);r.contours=Q(e),r.grid.style.display="block",r.render()}null!==t.labels&&(r.labels=t.labels,r.render()),t.showGrid&&!r.showGrid&&r.grid.click(),null!==t.title&&(r.title.innerHTML=t.title),null!==t.scaleLegendProps&&(r.scaleLegend.innerHTML=B(t.scaleLegendProps),r.scaleLegend.style.display="block")})),{renderValue:t=>{var e,r;O.title||(O.title=function(t,e){var n="";e&&(n=e);const r=document.createElement("div");return r.innerHTML=n,r.classList.add(T,"picker-widget-ctrl-top-left","title"),t.appendChild(r),r}(n,t.title)),v||((v=j(n)).innerHTML=(e=t.gridLegendItems,r="",e&&(r=`\n        <div class="legend">\n        <div class="legend-title"></div>\n        <div class="legend-items"><ul>${e.map((t=>`\n        <li>\n        <span class="point-mark" style="background-color:${t.color};border: 1px solid black;"></span>\n        <span>${t.label}</span>\n        </li>\n        `)).join("\n")}</ul></div>\n        </div>\n        `),r),v.style.display="none"),O.scaleLegend||(O.scaleLegend=j(n),O.scaleLegend.innerHTML=B(t.scaleLegendProps),O.scaleLegend.style.display="block"),t.showControls||(M.style.display="none",I.style.display="none"),O.labelCoords=HTMLWidgets.dataframeToD3(t.labelCoords),A=HTMLWidgets.dataframeToD3(t.coords),a=O.xFrom=t.xrange,u=O.yFrom=t.yrange,c=O.xTo=[-i/2,i/2],l=O.yTo=[-o/2,o/2],s=z(A,c,l,a,u),O.scaledLabelCoords=z(O.labelCoords,c,l,a,u),h=t.pointColorPolygons,y=t.polygonLayerProps,null!==t.polygons?(t.polygons.color=t.polygons.color.map((t=>F(t))),O.polygons=HTMLWidgets.dataframeToD3(t.polygons),f=q(O.polygons,c,l,a,u),O.contours=Q(f)):(O.showGrid&&O.grid.click(),O.grid.style.display="none"),O.colors=O.origColors=t.colors.map((t=>F(t))),O.render=N,O.labels=t.labels,p=t.scatterPlotLayerProps,d=t.textLayerProps,g=t.deckProps,N()},resize:U(((t,e)=>{c=O.xTo=[-t/2,t/2],l=O.yTo=[-e/2,e/2];const{xFrom:n,yFrom:r}=O;s=z(A,c,l,n,r),O.scaledLabelCoords=z(O.labelCoords,c,l,n,r),void 0!==O.polygons&&(f=q(O.polygons,c,l,n,r),O.contours=Q(f)),N()}),50),getDeck:()=>O}}})})()})();